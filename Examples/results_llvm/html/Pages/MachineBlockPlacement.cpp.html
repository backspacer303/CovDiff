<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>MachineBlockPlacement.cpp</title>
    <link rel="stylesheet" href="../Style/style.css" />
  </head>
  <body>
    <div class="headerDiv">
      <h1>
        Code Coverage
      </h1>
      <p>
        Source file: /home/nikola/Desktop/llvm-project/llvm/lib/CodeGen/MachineBlockPlacement.cpp
      </p>
    </div>
    <button class="collapsible" type="button">Open Summary Report</button>
    <div class="content" style="display: none;">
      <hr />
      <h3 class="subheader">Summary Report</h3>
      <table class="mainTable">
  <tr class="mainTr">
    <th class="mainTh">Line number</th>
    <th class="mainTh">Line</th>
    <th class="mainTh">Number of hits</th>
    <th class="mainTh">Tests that cover line</th>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1</td>
    <td class="">//===- MachineBlockPlacement.cpp - Basic Block Code Layout optimization ---===//</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2</td>
    <td class="">//</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3</td>
    <td class="">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">4</td>
    <td class="">// See https://llvm.org/LICENSE.txt for license information.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">5</td>
    <td class="">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">6</td>
    <td class="">//</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">7</td>
    <td class="">//===----------------------------------------------------------------------===//</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">8</td>
    <td class="">//</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">9</td>
    <td class="">// This file implements basic block placement transformations using the CFG</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">10</td>
    <td class="">// structure and branch probability estimates.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">11</td>
    <td class="">//</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">12</td>
    <td class="">// The pass strives to preserve the structure of the CFG (that is, retain</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">13</td>
    <td class="">// a topological ordering of basic blocks) in the absence of a *strong* signal</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">14</td>
    <td class="">// to the contrary from probabilities. However, within the CFG structure, it</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">15</td>
    <td class="">// attempts to choose an ordering which favors placing more likely sequences of</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">16</td>
    <td class="">// blocks adjacent to each other.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">17</td>
    <td class="">//</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">18</td>
    <td class="">// The algorithm works from the inner-most loop within a function outward, and</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">19</td>
    <td class="">// at each stage walks through the basic blocks, trying to coalesce them into</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">20</td>
    <td class="">// sequential chains where allowed by the CFG (or demanded by heavy</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">21</td>
    <td class="">// probabilities). Finally, it walks the blocks in topological order, and the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">22</td>
    <td class="">// first time it reaches a chain of basic blocks, it schedules them in the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">23</td>
    <td class="">// function in-order.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">24</td>
    <td class="">//</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">25</td>
    <td class="">//===----------------------------------------------------------------------===//</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">26</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">27</td>
    <td class="">#include "BranchFolding.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">28</td>
    <td class="">#include "llvm/ADT/ArrayRef.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">29</td>
    <td class="">#include "llvm/ADT/DenseMap.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">30</td>
    <td class="">#include "llvm/ADT/STLExtras.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">31</td>
    <td class="">#include "llvm/ADT/SetVector.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">32</td>
    <td class="">#include "llvm/ADT/SmallPtrSet.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">33</td>
    <td class="">#include "llvm/ADT/SmallVector.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">34</td>
    <td class="">#include "llvm/ADT/Statistic.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">35</td>
    <td class="">#include "llvm/Analysis/BlockFrequencyInfoImpl.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">36</td>
    <td class="">#include "llvm/Analysis/ProfileSummaryInfo.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">37</td>
    <td class="">#include "llvm/CodeGen/MBFIWrapper.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">38</td>
    <td class="">#include "llvm/CodeGen/MachineBasicBlock.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">39</td>
    <td class="">#include "llvm/CodeGen/MachineBlockFrequencyInfo.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">40</td>
    <td class="">#include "llvm/CodeGen/MachineBranchProbabilityInfo.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">41</td>
    <td class="">#include "llvm/CodeGen/MachineFunction.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">42</td>
    <td class="">#include "llvm/CodeGen/MachineFunctionPass.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">43</td>
    <td class="">#include "llvm/CodeGen/MachineLoopInfo.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">44</td>
    <td class="">#include "llvm/CodeGen/MachinePostDominators.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">45</td>
    <td class="">#include "llvm/CodeGen/MachineSizeOpts.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">46</td>
    <td class="">#include "llvm/CodeGen/TailDuplicator.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">47</td>
    <td class="">#include "llvm/CodeGen/TargetInstrInfo.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">48</td>
    <td class="">#include "llvm/CodeGen/TargetLowering.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">49</td>
    <td class="">#include "llvm/CodeGen/TargetPassConfig.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">50</td>
    <td class="">#include "llvm/CodeGen/TargetSubtargetInfo.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">51</td>
    <td class="">#include "llvm/IR/DebugLoc.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">52</td>
    <td class="">#include "llvm/IR/Function.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">53</td>
    <td class="">#include "llvm/IR/PrintPasses.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">54</td>
    <td class="">#include "llvm/InitializePasses.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">55</td>
    <td class="">#include "llvm/Pass.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">56</td>
    <td class="">#include "llvm/Support/Allocator.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">57</td>
    <td class="">#include "llvm/Support/BlockFrequency.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">58</td>
    <td class="">#include "llvm/Support/BranchProbability.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">59</td>
    <td class="">#include "llvm/Support/CodeGen.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">60</td>
    <td class="">#include "llvm/Support/CommandLine.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">61</td>
    <td class="">#include "llvm/Support/Compiler.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">62</td>
    <td class="">#include "llvm/Support/Debug.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">63</td>
    <td class="">#include "llvm/Support/raw_ostream.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">64</td>
    <td class="">#include "llvm/Target/TargetMachine.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">65</td>
    <td class="">#include "llvm/Transforms/Utils/CodeLayout.h"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">66</td>
    <td class="">#include <algorithm></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">67</td>
    <td class="">#include <cassert></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">68</td>
    <td class="">#include <cstdint></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">69</td>
    <td class="">#include <iterator></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">70</td>
    <td class="">#include <memory></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">71</td>
    <td class="">#include <string></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">72</td>
    <td class="">#include <tuple></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">73</td>
    <td class="">#include <utility></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">74</td>
    <td class="">#include <vector></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">75</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">76</td>
    <td class="">using namespace llvm;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">77</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">78</td>
    <td class="">#define DEBUG_TYPE "block-placement"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">79</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">80</td>
    <td class="">STATISTIC(NumCondBranches, "Number of conditional branches");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">81</td>
    <td class="">STATISTIC(NumUncondBranches, "Number of unconditional branches");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">82</td>
    <td class="">STATISTIC(CondBranchTakenFreq,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">83</td>
    <td class="">          "Potential frequency of taking conditional branches");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">84</td>
    <td class="">STATISTIC(UncondBranchTakenFreq,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">85</td>
    <td class="">          "Potential frequency of taking unconditional branches");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">86</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">87</td>
    <td class="">static cl::opt<unsigned> AlignAllBlock(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">88</td>
    <td class="">    "align-all-blocks",</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">89</td>
    <td class="">    cl::desc("Force the alignment of all blocks in the function in log2 format "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">90</td>
    <td class="">             "(e.g 4 means align on 16B boundaries)."),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">91</td>
    <td class="">    cl::init(0), cl::Hidden);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">92</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">93</td>
    <td class="">static cl::opt<unsigned> AlignAllNonFallThruBlocks(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">94</td>
    <td class="">    "align-all-nofallthru-blocks",</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">95</td>
    <td class="">    cl::desc("Force the alignment of all blocks that have no fall-through "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">96</td>
    <td class="">             "predecessors (i.e. don't add nops that are executed). In log2 "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">97</td>
    <td class="">             "format (e.g 4 means align on 16B boundaries)."),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">98</td>
    <td class="">    cl::init(0), cl::Hidden);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">99</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">100</td>
    <td class="">static cl::opt<unsigned> MaxBytesForAlignmentOverride(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">101</td>
    <td class="">    "max-bytes-for-alignment",</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">102</td>
    <td class="">    cl::desc("Forces the maximum bytes allowed to be emitted when padding for "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">103</td>
    <td class="">             "alignment"),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">104</td>
    <td class="">    cl::init(0), cl::Hidden);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">105</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">106</td>
    <td class="">// FIXME: Find a good default for this flag and remove the flag.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">107</td>
    <td class="">static cl::opt<unsigned> ExitBlockBias(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">108</td>
    <td class="">    "block-placement-exit-block-bias",</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">109</td>
    <td class="">    cl::desc("Block frequency percentage a loop exit block needs "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">110</td>
    <td class="">             "over the original exit to be considered the new exit."),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">111</td>
    <td class="">    cl::init(0), cl::Hidden);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">112</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">113</td>
    <td class="">// Definition:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">114</td>
    <td class="">// - Outlining: placement of a basic block outside the chain or hot path.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">115</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">116</td>
    <td class="">static cl::opt<unsigned> LoopToColdBlockRatio(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">117</td>
    <td class="">    "loop-to-cold-block-ratio",</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">118</td>
    <td class="">    cl::desc("Outline loop blocks from loop chain if (frequency of loop) / "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">119</td>
    <td class="">             "(frequency of block) is greater than this ratio"),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">120</td>
    <td class="">    cl::init(5), cl::Hidden);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">121</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">122</td>
    <td class="">static cl::opt<bool> ForceLoopColdBlock(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">123</td>
    <td class="">    "force-loop-cold-block",</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">124</td>
    <td class="">    cl::desc("Force outlining cold blocks from loops."),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">125</td>
    <td class="">    cl::init(false), cl::Hidden);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">126</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">127</td>
    <td class="">static cl::opt<bool></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">128</td>
    <td class="">    PreciseRotationCost("precise-rotation-cost",</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">129</td>
    <td class="">                        cl::desc("Model the cost of loop rotation more "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">130</td>
    <td class="">                                 "precisely by using profile data."),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">131</td>
    <td class="">                        cl::init(false), cl::Hidden);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">132</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">133</td>
    <td class="">static cl::opt<bool></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">134</td>
    <td class="">    ForcePreciseRotationCost("force-precise-rotation-cost",</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">135</td>
    <td class="">                             cl::desc("Force the use of precise cost "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">136</td>
    <td class="">                                      "loop rotation strategy."),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">137</td>
    <td class="">                             cl::init(false), cl::Hidden);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">138</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">139</td>
    <td class="">static cl::opt<unsigned> MisfetchCost(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">140</td>
    <td class="">    "misfetch-cost",</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">141</td>
    <td class="">    cl::desc("Cost that models the probabilistic risk of an instruction "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">142</td>
    <td class="">             "misfetch due to a jump comparing to falling through, whose cost "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">143</td>
    <td class="">             "is zero."),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">144</td>
    <td class="">    cl::init(1), cl::Hidden);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">145</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">146</td>
    <td class="">static cl::opt<unsigned> JumpInstCost("jump-inst-cost",</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">147</td>
    <td class="">                                      cl::desc("Cost of jump instructions."),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">148</td>
    <td class="">                                      cl::init(1), cl::Hidden);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">149</td>
    <td class="">static cl::opt<bool></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">150</td>
    <td class="">TailDupPlacement("tail-dup-placement",</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">151</td>
    <td class="">              cl::desc("Perform tail duplication during placement. "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">152</td>
    <td class="">                       "Creates more fallthrough opportunites in "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">153</td>
    <td class="">                       "outline branches."),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">154</td>
    <td class="">              cl::init(true), cl::Hidden);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">155</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">156</td>
    <td class="">static cl::opt<bool></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">157</td>
    <td class="">BranchFoldPlacement("branch-fold-placement",</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">158</td>
    <td class="">              cl::desc("Perform branch folding during placement. "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">159</td>
    <td class="">                       "Reduces code size."),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">160</td>
    <td class="">              cl::init(true), cl::Hidden);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">161</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">162</td>
    <td class="">// Heuristic for tail duplication.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">163</td>
    <td class="">static cl::opt<unsigned> TailDupPlacementThreshold(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">164</td>
    <td class="">    "tail-dup-placement-threshold",</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">165</td>
    <td class="">    cl::desc("Instruction cutoff for tail duplication during layout. "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">166</td>
    <td class="">             "Tail merging during layout is forced to have a threshold "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">167</td>
    <td class="">             "that won't conflict."), cl::init(2),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">168</td>
    <td class="">    cl::Hidden);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">169</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">170</td>
    <td class="">// Heuristic for aggressive tail duplication.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">171</td>
    <td class="">static cl::opt<unsigned> TailDupPlacementAggressiveThreshold(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">172</td>
    <td class="">    "tail-dup-placement-aggressive-threshold",</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">173</td>
    <td class="">    cl::desc("Instruction cutoff for aggressive tail duplication during "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">174</td>
    <td class="">             "layout. Used at -O3. Tail merging during layout is forced to "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">175</td>
    <td class="">             "have a threshold that won't conflict."), cl::init(4),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">176</td>
    <td class="">    cl::Hidden);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">177</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">178</td>
    <td class="">// Heuristic for tail duplication.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">179</td>
    <td class="">static cl::opt<unsigned> TailDupPlacementPenalty(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">180</td>
    <td class="">    "tail-dup-placement-penalty",</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">181</td>
    <td class="">    cl::desc("Cost penalty for blocks that can avoid breaking CFG by copying. "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">182</td>
    <td class="">             "Copying can increase fallthrough, but it also increases icache "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">183</td>
    <td class="">             "pressure. This parameter controls the penalty to account for that. "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">184</td>
    <td class="">             "Percent as integer."),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">185</td>
    <td class="">    cl::init(2),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">186</td>
    <td class="">    cl::Hidden);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">187</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">188</td>
    <td class="">// Heuristic for tail duplication if profile count is used in cost model.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">189</td>
    <td class="">static cl::opt<unsigned> TailDupProfilePercentThreshold(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">190</td>
    <td class="">    "tail-dup-profile-percent-threshold",</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">191</td>
    <td class="">    cl::desc("If profile count information is used in tail duplication cost "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">192</td>
    <td class="">             "model, the gained fall through number from tail duplication "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">193</td>
    <td class="">             "should be at least this percent of hot count."),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">194</td>
    <td class="">    cl::init(50), cl::Hidden);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">195</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">196</td>
    <td class="">// Heuristic for triangle chains.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">197</td>
    <td class="">static cl::opt<unsigned> TriangleChainCount(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">198</td>
    <td class="">    "triangle-chain-count",</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">199</td>
    <td class="">    cl::desc("Number of triangle-shaped-CFG's that need to be in a row for the "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">200</td>
    <td class="">             "triangle tail duplication heuristic to kick in. 0 to disable."),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">201</td>
    <td class="">    cl::init(2),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">202</td>
    <td class="">    cl::Hidden);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">203</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">204</td>
    <td class="">// Use case: When block layout is visualized after MBP pass, the basic blocks</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">205</td>
    <td class="">// are labeled in layout order; meanwhile blocks could be numbered in a</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">206</td>
    <td class="">// different order. It's hard to map between the graph and pass output.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">207</td>
    <td class="">// With this option on, the basic blocks are renumbered in function layout</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">208</td>
    <td class="">// order. For debugging only.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">209</td>
    <td class="">static cl::opt<bool> RenumberBlocksBeforeView(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">210</td>
    <td class="">    "renumber-blocks-before-view",</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">211</td>
    <td class="">    cl::desc(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">212</td>
    <td class="">        "If true, basic blocks are re-numbered before MBP layout is printed "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">213</td>
    <td class="">        "into a dot graph. Only used when a function is being printed."),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">214</td>
    <td class="">    cl::init(false), cl::Hidden);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">215</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">216</td>
    <td class="">namespace llvm {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">217</td>
    <td class="">extern cl::opt<bool> EnableExtTspBlockPlacement;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">218</td>
    <td class="">extern cl::opt<bool> ApplyExtTspWithoutProfile;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">219</td>
    <td class="">extern cl::opt<unsigned> StaticLikelyProb;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">220</td>
    <td class="">extern cl::opt<unsigned> ProfileLikelyProb;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">221</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">222</td>
    <td class="">// Internal option used to control BFI display only after MBP pass.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">223</td>
    <td class="">// Defined in CodeGen/MachineBlockFrequencyInfo.cpp:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">224</td>
    <td class="">// -view-block-layout-with-bfi=</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">225</td>
    <td class="">extern cl::opt<GVDAGType> ViewBlockLayoutWithBFI;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">226</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">227</td>
    <td class="">// Command line option to specify the name of the function for CFG dump</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">228</td>
    <td class="">// Defined in Analysis/BlockFrequencyInfo.cpp:  -view-bfi-func-name=</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">229</td>
    <td class="">extern cl::opt<std::string> ViewBlockFreqFuncName;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">230</td>
    <td class="">} // namespace llvm</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">231</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">232</td>
    <td class="">namespace {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">233</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">234</td>
    <td class="">class BlockChain;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">235</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">236</td>
    <td class="">/// Type for our function-wide basic block -> block chain mapping.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">237</td>
    <td class="">using BlockToChainMapType = DenseMap<const MachineBasicBlock *, BlockChain *>;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">238</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">239</td>
    <td class="">/// A chain of blocks which will be laid out contiguously.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">240</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">241</td>
    <td class="">/// This is the datastructure representing a chain of consecutive blocks that</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">242</td>
    <td class="">/// are profitable to layout together in order to maximize fallthrough</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">243</td>
    <td class="">/// probabilities and code locality. We also can use a block chain to represent</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">244</td>
    <td class="">/// a sequence of basic blocks which have some external (correctness)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">245</td>
    <td class="">/// requirement for sequential layout.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">246</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">247</td>
    <td class="">/// Chains can be built around a single basic block and can be merged to grow</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">248</td>
    <td class="">/// them. They participate in a block-to-chain mapping, which is updated</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">249</td>
    <td class="">/// automatically as chains are merged together.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">250</td>
    <td class="">class BlockChain {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">251</td>
    <td class="">  /// The sequence of blocks belonging to this chain.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">252</td>
    <td class="">  ///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">253</td>
    <td class="">  /// This is the sequence of blocks for a particular chain. These will be laid</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">254</td>
    <td class="">  /// out in-order within the function.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">255</td>
    <td class="">  SmallVector<MachineBasicBlock *, 4> Blocks;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">256</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">257</td>
    <td class="">  /// A handle to the function-wide basic block to block chain mapping.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">258</td>
    <td class="">  ///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">259</td>
    <td class="">  /// This is retained in each block chain to simplify the computation of child</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">260</td>
    <td class="">  /// block chains for SCC-formation and iteration. We store the edges to child</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">261</td>
    <td class="">  /// basic blocks, and map them back to their associated chains using this</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">262</td>
    <td class="">  /// structure.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">263</td>
    <td class="">  BlockToChainMapType &BlockToChain;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">264</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">265</td>
    <td class="">public:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">266</td>
    <td class="">  /// Construct a new BlockChain.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">267</td>
    <td class="">  ///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">268</td>
    <td class="">  /// This builds a new block chain representing a single basic block in the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">269</td>
    <td class="">  /// function. It also registers itself as the chain that block participates</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">270</td>
    <td class="">  /// in with the BlockToChain mapping.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">271</td>
    <td class="uncoveredLine">  BlockChain(BlockToChainMapType &BlockToChain, MachineBasicBlock *BB)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">272</td>
    <td class="uncoveredLine">      : Blocks(1, BB), BlockToChain(BlockToChain) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">273</td>
    <td class="uncoveredLine">    assert(BB && "Cannot create a chain with a null basic block");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">274</td>
    <td class="uncoveredLine">    BlockToChain[BB] = this;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">275</td>
    <td class="uncoveredLine">  }</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">276</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">277</td>
    <td class="">  /// Iterator over blocks within the chain.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">278</td>
    <td class="">  using iterator = SmallVectorImpl<MachineBasicBlock *>::iterator;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">279</td>
    <td class="">  using const_iterator = SmallVectorImpl<MachineBasicBlock *>::const_iterator;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">280</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">281</td>
    <td class="">  /// Beginning of blocks within the chain.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">282</td>
    <td class="uncoveredLine">  iterator begin() { return Blocks.begin(); }</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">283</td>
    <td class="uncoveredLine">  const_iterator begin() const { return Blocks.begin(); }</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">284</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">285</td>
    <td class="">  /// End of blocks within the chain.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">286</td>
    <td class="uncoveredLine">  iterator end() { return Blocks.end(); }</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">287</td>
    <td class="uncoveredLine">  const_iterator end() const { return Blocks.end(); }</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">288</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">289</td>
    <td class="uncoveredLine">  bool remove(MachineBasicBlock* BB) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">290</td>
    <td class="uncoveredLine">    for(iterator i = begin(); i != end(); ++i) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">291</td>
    <td class="uncoveredLine">      if (*i == BB) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">292</td>
    <td class="uncoveredLine">        Blocks.erase(i);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">293</td>
    <td class="uncoveredLine">        return true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">294</td>
    <td class="">      }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">295</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">296</td>
    <td class="uncoveredLine">    return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">297</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">298</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">299</td>
    <td class="">  /// Merge a block chain into this one.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">300</td>
    <td class="">  ///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">301</td>
    <td class="">  /// This routine merges a block chain into this one. It takes care of forming</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">302</td>
    <td class="">  /// a contiguous sequence of basic blocks, updating the edge list, and</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">303</td>
    <td class="">  /// updating the block -> chain mapping. It does not free or tear down the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">304</td>
    <td class="">  /// old chain, but the old chain's block list is no longer valid.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">305</td>
    <td class="uncoveredLine">  void merge(MachineBasicBlock *BB, BlockChain *Chain) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">306</td>
    <td class="uncoveredLine">    assert(BB && "Can't merge a null block.");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">307</td>
    <td class="uncoveredLine">    assert(!Blocks.empty() && "Can't merge into an empty chain.");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">308</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">309</td>
    <td class="">    // Fast path in case we don't have a chain already.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">310</td>
    <td class="uncoveredLine">    if (!Chain) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">311</td>
    <td class="uncoveredLine">      assert(!BlockToChain[BB] &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">312</td>
    <td class="">             "Passed chain is null, but BB has entry in BlockToChain.");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">313</td>
    <td class="uncoveredLine">      Blocks.push_back(BB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">314</td>
    <td class="uncoveredLine">      BlockToChain[BB] = this;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">315</td>
    <td class="uncoveredLine">      return;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">316</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">317</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">318</td>
    <td class="uncoveredLine">    assert(BB == *Chain->begin() && "Passed BB is not head of Chain.");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">319</td>
    <td class="uncoveredLine">    assert(Chain->begin() != Chain->end());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">320</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">321</td>
    <td class="">    // Update the incoming blocks to point to this chain, and add them to the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">322</td>
    <td class="">    // chain structure.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">323</td>
    <td class="uncoveredLine">    for (MachineBasicBlock *ChainBB : *Chain) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">324</td>
    <td class="uncoveredLine">      Blocks.push_back(ChainBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">325</td>
    <td class="uncoveredLine">      assert(BlockToChain[ChainBB] == Chain && "Incoming blocks not in chain.");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">326</td>
    <td class="uncoveredLine">      BlockToChain[ChainBB] = this;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">327</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">328</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">329</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">330</td>
    <td class="">#ifndef NDEBUG</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">331</td>
    <td class="">  /// Dump the blocks in this chain.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">332</td>
    <td class="uncoveredLine">  LLVM_DUMP_METHOD void dump() {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">333</td>
    <td class="uncoveredLine">    for (MachineBasicBlock *MBB : *this)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">334</td>
    <td class="uncoveredLine">      MBB->dump();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">335</td>
    <td class="uncoveredLine">  }</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">336</td>
    <td class="">#endif // NDEBUG</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">337</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">338</td>
    <td class="">  /// Count of predecessors of any block within the chain which have not</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">339</td>
    <td class="">  /// yet been scheduled.  In general, we will delay scheduling this chain</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">340</td>
    <td class="">  /// until those predecessors are scheduled (or we find a sufficiently good</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">341</td>
    <td class="">  /// reason to override this heuristic.)  Note that when forming loop chains,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">342</td>
    <td class="">  /// blocks outside the loop are ignored and treated as if they were already</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">343</td>
    <td class="">  /// scheduled.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">344</td>
    <td class="">  ///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">345</td>
    <td class="">  /// Note: This field is reinitialized multiple times - once for each loop,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">346</td>
    <td class="">  /// and then once for the function as a whole.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">347</td>
    <td class="">  unsigned UnscheduledPredecessors = 0;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">348</td>
    <td class="">};</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">349</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">350</td>
    <td class="">class MachineBlockPlacement : public MachineFunctionPass {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">351</td>
    <td class="">  /// A type for a block filter set.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">352</td>
    <td class="">  using BlockFilterSet = SmallSetVector<const MachineBasicBlock *, 16>;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">353</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">354</td>
    <td class="">  /// Pair struct containing basic block and taildup profitability</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">355</td>
    <td class="">  struct BlockAndTailDupResult {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">356</td>
    <td class="">    MachineBasicBlock *BB = nullptr;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">357</td>
    <td class="">    bool ShouldTailDup;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">358</td>
    <td class="">  };</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">359</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">360</td>
    <td class="">  /// Triple struct containing edge weight and the edge.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">361</td>
    <td class="">  struct WeightedEdge {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">362</td>
    <td class="">    BlockFrequency Weight;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">363</td>
    <td class="">    MachineBasicBlock *Src = nullptr;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">364</td>
    <td class="">    MachineBasicBlock *Dest = nullptr;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">365</td>
    <td class="">  };</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">366</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">367</td>
    <td class="">  /// work lists of blocks that are ready to be laid out</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">368</td>
    <td class="">  SmallVector<MachineBasicBlock *, 16> BlockWorkList;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">369</td>
    <td class="">  SmallVector<MachineBasicBlock *, 16> EHPadWorkList;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">370</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">371</td>
    <td class="">  /// Edges that have already been computed as optimal.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">372</td>
    <td class="">  DenseMap<const MachineBasicBlock *, BlockAndTailDupResult> ComputedEdges;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">373</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">374</td>
    <td class="">  /// Machine Function</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">375</td>
    <td class="">  MachineFunction *F = nullptr;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">376</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">377</td>
    <td class="">  /// A handle to the branch probability pass.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">378</td>
    <td class="">  const MachineBranchProbabilityInfo *MBPI = nullptr;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">379</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">380</td>
    <td class="">  /// A handle to the function-wide block frequency pass.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">381</td>
    <td class="">  std::unique_ptr<MBFIWrapper> MBFI;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">382</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">383</td>
    <td class="">  /// A handle to the loop info.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">384</td>
    <td class="">  MachineLoopInfo *MLI = nullptr;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">385</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">386</td>
    <td class="">  /// Preferred loop exit.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">387</td>
    <td class="">  /// Member variable for convenience. It may be removed by duplication deep</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">388</td>
    <td class="">  /// in the call stack.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">389</td>
    <td class="">  MachineBasicBlock *PreferredLoopExit = nullptr;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">390</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">391</td>
    <td class="">  /// A handle to the target's instruction info.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">392</td>
    <td class="">  const TargetInstrInfo *TII = nullptr;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">393</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">394</td>
    <td class="">  /// A handle to the target's lowering info.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">395</td>
    <td class="">  const TargetLoweringBase *TLI = nullptr;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">396</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">397</td>
    <td class="">  /// A handle to the post dominator tree.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">398</td>
    <td class="">  MachinePostDominatorTree *MPDT = nullptr;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">399</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">400</td>
    <td class="">  ProfileSummaryInfo *PSI = nullptr;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">401</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">402</td>
    <td class="">  /// Duplicator used to duplicate tails during placement.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">403</td>
    <td class="">  ///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">404</td>
    <td class="">  /// Placement decisions can open up new tail duplication opportunities, but</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">405</td>
    <td class="">  /// since tail duplication affects placement decisions of later blocks, it</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">406</td>
    <td class="">  /// must be done inline.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">407</td>
    <td class="">  TailDuplicator TailDup;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">408</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">409</td>
    <td class="">  /// Partial tail duplication threshold.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">410</td>
    <td class="">  BlockFrequency DupThreshold;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">411</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">412</td>
    <td class="">  /// True:  use block profile count to compute tail duplication cost.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">413</td>
    <td class="">  /// False: use block frequency to compute tail duplication cost.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">414</td>
    <td class="">  bool UseProfileCount = false;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">415</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">416</td>
    <td class="">  /// Allocator and owner of BlockChain structures.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">417</td>
    <td class="">  ///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">418</td>
    <td class="">  /// We build BlockChains lazily while processing the loop structure of</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">419</td>
    <td class="">  /// a function. To reduce malloc traffic, we allocate them using this</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">420</td>
    <td class="">  /// slab-like allocator, and destroy them after the pass completes. An</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">421</td>
    <td class="">  /// important guarantee is that this allocator produces stable pointers to</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">422</td>
    <td class="">  /// the chains.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">423</td>
    <td class="">  SpecificBumpPtrAllocator<BlockChain> ChainAllocator;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">424</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">425</td>
    <td class="">  /// Function wide BasicBlock to BlockChain mapping.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">426</td>
    <td class="">  ///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">427</td>
    <td class="">  /// This mapping allows efficiently moving from any given basic block to the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">428</td>
    <td class="">  /// BlockChain it participates in, if any. We use it to, among other things,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">429</td>
    <td class="">  /// allow implicitly defining edges between chains as the existing edges</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">430</td>
    <td class="">  /// between basic blocks.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">431</td>
    <td class="">  DenseMap<const MachineBasicBlock *, BlockChain *> BlockToChain;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">432</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">433</td>
    <td class="">#ifndef NDEBUG</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">434</td>
    <td class="">  /// The set of basic blocks that have terminators that cannot be fully</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">435</td>
    <td class="">  /// analyzed.  These basic blocks cannot be re-ordered safely by</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">436</td>
    <td class="">  /// MachineBlockPlacement, and we must preserve physical layout of these</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">437</td>
    <td class="">  /// blocks and their successors through the pass.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">438</td>
    <td class="">  SmallPtrSet<MachineBasicBlock *, 4> BlocksWithUnanalyzableExits;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">439</td>
    <td class="">#endif</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">440</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">441</td>
    <td class="">  /// Get block profile count or frequency according to UseProfileCount.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">442</td>
    <td class="">  /// The return value is used to model tail duplication cost.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">443</td>
    <td class="uncoveredLine">  BlockFrequency getBlockCountOrFrequency(const MachineBasicBlock *BB) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">444</td>
    <td class="uncoveredLine">    if (UseProfileCount) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">445</td>
    <td class="uncoveredLine">      auto Count = MBFI->getBlockProfileCount(BB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">446</td>
    <td class="uncoveredLine">      if (Count)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">447</td>
    <td class="uncoveredLine">        return *Count;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">448</td>
    <td class="">      else</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">449</td>
    <td class="uncoveredLine">        return 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">450</td>
    <td class="">    } else</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">451</td>
    <td class="uncoveredLine">      return MBFI->getBlockFreq(BB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">452</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">453</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">454</td>
    <td class="">  /// Scale the DupThreshold according to basic block size.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">455</td>
    <td class="">  BlockFrequency scaleThreshold(MachineBasicBlock *BB);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">456</td>
    <td class="">  void initDupThreshold();</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">457</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">458</td>
    <td class="">  /// Decrease the UnscheduledPredecessors count for all blocks in chain, and</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">459</td>
    <td class="">  /// if the count goes to 0, add them to the appropriate work list.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">460</td>
    <td class="">  void markChainSuccessors(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">461</td>
    <td class="">      const BlockChain &Chain, const MachineBasicBlock *LoopHeaderBB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">462</td>
    <td class="">      const BlockFilterSet *BlockFilter = nullptr);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">463</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">464</td>
    <td class="">  /// Decrease the UnscheduledPredecessors count for a single block, and</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">465</td>
    <td class="">  /// if the count goes to 0, add them to the appropriate work list.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">466</td>
    <td class="">  void markBlockSuccessors(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">467</td>
    <td class="">      const BlockChain &Chain, const MachineBasicBlock *BB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">468</td>
    <td class="">      const MachineBasicBlock *LoopHeaderBB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">469</td>
    <td class="">      const BlockFilterSet *BlockFilter = nullptr);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">470</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">471</td>
    <td class="">  BranchProbability</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">472</td>
    <td class="">  collectViableSuccessors(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">473</td>
    <td class="">      const MachineBasicBlock *BB, const BlockChain &Chain,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">474</td>
    <td class="">      const BlockFilterSet *BlockFilter,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">475</td>
    <td class="">      SmallVector<MachineBasicBlock *, 4> &Successors);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">476</td>
    <td class="">  bool isBestSuccessor(MachineBasicBlock *BB, MachineBasicBlock *Pred,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">477</td>
    <td class="">                       BlockFilterSet *BlockFilter);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">478</td>
    <td class="">  void findDuplicateCandidates(SmallVectorImpl<MachineBasicBlock *> &Candidates,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">479</td>
    <td class="">                               MachineBasicBlock *BB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">480</td>
    <td class="">                               BlockFilterSet *BlockFilter);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">481</td>
    <td class="">  bool repeatedlyTailDuplicateBlock(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">482</td>
    <td class="">      MachineBasicBlock *BB, MachineBasicBlock *&LPred,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">483</td>
    <td class="">      const MachineBasicBlock *LoopHeaderBB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">484</td>
    <td class="">      BlockChain &Chain, BlockFilterSet *BlockFilter,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">485</td>
    <td class="">      MachineFunction::iterator &PrevUnplacedBlockIt);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">486</td>
    <td class="">  bool maybeTailDuplicateBlock(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">487</td>
    <td class="">      MachineBasicBlock *BB, MachineBasicBlock *LPred,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">488</td>
    <td class="">      BlockChain &Chain, BlockFilterSet *BlockFilter,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">489</td>
    <td class="">      MachineFunction::iterator &PrevUnplacedBlockIt,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">490</td>
    <td class="">      bool &DuplicatedToLPred);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">491</td>
    <td class="">  bool hasBetterLayoutPredecessor(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">492</td>
    <td class="">      const MachineBasicBlock *BB, const MachineBasicBlock *Succ,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">493</td>
    <td class="">      const BlockChain &SuccChain, BranchProbability SuccProb,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">494</td>
    <td class="">      BranchProbability RealSuccProb, const BlockChain &Chain,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">495</td>
    <td class="">      const BlockFilterSet *BlockFilter);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">496</td>
    <td class="">  BlockAndTailDupResult selectBestSuccessor(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">497</td>
    <td class="">      const MachineBasicBlock *BB, const BlockChain &Chain,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">498</td>
    <td class="">      const BlockFilterSet *BlockFilter);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">499</td>
    <td class="">  MachineBasicBlock *selectBestCandidateBlock(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">500</td>
    <td class="">      const BlockChain &Chain, SmallVectorImpl<MachineBasicBlock *> &WorkList);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">501</td>
    <td class="">  MachineBasicBlock *getFirstUnplacedBlock(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">502</td>
    <td class="">      const BlockChain &PlacedChain,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">503</td>
    <td class="">      MachineFunction::iterator &PrevUnplacedBlockIt,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">504</td>
    <td class="">      const BlockFilterSet *BlockFilter);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">505</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">506</td>
    <td class="">  /// Add a basic block to the work list if it is appropriate.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">507</td>
    <td class="">  ///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">508</td>
    <td class="">  /// If the optional parameter BlockFilter is provided, only MBB</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">509</td>
    <td class="">  /// present in the set will be added to the worklist. If nullptr</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">510</td>
    <td class="">  /// is provided, no filtering occurs.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">511</td>
    <td class="">  void fillWorkLists(const MachineBasicBlock *MBB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">512</td>
    <td class="">                     SmallPtrSetImpl<BlockChain *> &UpdatedPreds,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">513</td>
    <td class="">                     const BlockFilterSet *BlockFilter);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">514</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">515</td>
    <td class="">  void buildChain(const MachineBasicBlock *BB, BlockChain &Chain,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">516</td>
    <td class="">                  BlockFilterSet *BlockFilter = nullptr);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">517</td>
    <td class="">  bool canMoveBottomBlockToTop(const MachineBasicBlock *BottomBlock,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">518</td>
    <td class="">                               const MachineBasicBlock *OldTop);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">519</td>
    <td class="">  bool hasViableTopFallthrough(const MachineBasicBlock *Top,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">520</td>
    <td class="">                               const BlockFilterSet &LoopBlockSet);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">521</td>
    <td class="">  BlockFrequency TopFallThroughFreq(const MachineBasicBlock *Top,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">522</td>
    <td class="">                                    const BlockFilterSet &LoopBlockSet);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">523</td>
    <td class="">  BlockFrequency FallThroughGains(const MachineBasicBlock *NewTop,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">524</td>
    <td class="">                                  const MachineBasicBlock *OldTop,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">525</td>
    <td class="">                                  const MachineBasicBlock *ExitBB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">526</td>
    <td class="">                                  const BlockFilterSet &LoopBlockSet);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">527</td>
    <td class="">  MachineBasicBlock *findBestLoopTopHelper(MachineBasicBlock *OldTop,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">528</td>
    <td class="">      const MachineLoop &L, const BlockFilterSet &LoopBlockSet);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">529</td>
    <td class="">  MachineBasicBlock *findBestLoopTop(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">530</td>
    <td class="">      const MachineLoop &L, const BlockFilterSet &LoopBlockSet);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">531</td>
    <td class="">  MachineBasicBlock *findBestLoopExit(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">532</td>
    <td class="">      const MachineLoop &L, const BlockFilterSet &LoopBlockSet,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">533</td>
    <td class="">      BlockFrequency &ExitFreq);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">534</td>
    <td class="">  BlockFilterSet collectLoopBlockSet(const MachineLoop &L);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">535</td>
    <td class="">  void buildLoopChains(const MachineLoop &L);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">536</td>
    <td class="">  void rotateLoop(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">537</td>
    <td class="">      BlockChain &LoopChain, const MachineBasicBlock *ExitingBB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">538</td>
    <td class="">      BlockFrequency ExitFreq, const BlockFilterSet &LoopBlockSet);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">539</td>
    <td class="">  void rotateLoopWithProfile(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">540</td>
    <td class="">      BlockChain &LoopChain, const MachineLoop &L,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">541</td>
    <td class="">      const BlockFilterSet &LoopBlockSet);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">542</td>
    <td class="">  void buildCFGChains();</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">543</td>
    <td class="">  void optimizeBranches();</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">544</td>
    <td class="">  void alignBlocks();</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">545</td>
    <td class="">  /// Returns true if a block should be tail-duplicated to increase fallthrough</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">546</td>
    <td class="">  /// opportunities.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">547</td>
    <td class="">  bool shouldTailDuplicate(MachineBasicBlock *BB);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">548</td>
    <td class="">  /// Check the edge frequencies to see if tail duplication will increase</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">549</td>
    <td class="">  /// fallthroughs.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">550</td>
    <td class="">  bool isProfitableToTailDup(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">551</td>
    <td class="">    const MachineBasicBlock *BB, const MachineBasicBlock *Succ,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">552</td>
    <td class="">    BranchProbability QProb,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">553</td>
    <td class="">    const BlockChain &Chain, const BlockFilterSet *BlockFilter);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">554</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">555</td>
    <td class="">  /// Check for a trellis layout.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">556</td>
    <td class="">  bool isTrellis(const MachineBasicBlock *BB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">557</td>
    <td class="">                 const SmallVectorImpl<MachineBasicBlock *> &ViableSuccs,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">558</td>
    <td class="">                 const BlockChain &Chain, const BlockFilterSet *BlockFilter);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">559</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">560</td>
    <td class="">  /// Get the best successor given a trellis layout.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">561</td>
    <td class="">  BlockAndTailDupResult getBestTrellisSuccessor(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">562</td>
    <td class="">      const MachineBasicBlock *BB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">563</td>
    <td class="">      const SmallVectorImpl<MachineBasicBlock *> &ViableSuccs,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">564</td>
    <td class="">      BranchProbability AdjustedSumProb, const BlockChain &Chain,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">565</td>
    <td class="">      const BlockFilterSet *BlockFilter);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">566</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">567</td>
    <td class="">  /// Get the best pair of non-conflicting edges.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">568</td>
    <td class="">  static std::pair<WeightedEdge, WeightedEdge> getBestNonConflictingEdges(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">569</td>
    <td class="">      const MachineBasicBlock *BB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">570</td>
    <td class="">      MutableArrayRef<SmallVector<WeightedEdge, 8>> Edges);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">571</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">572</td>
    <td class="">  /// Returns true if a block can tail duplicate into all unplaced</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">573</td>
    <td class="">  /// predecessors. Filters based on loop.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">574</td>
    <td class="">  bool canTailDuplicateUnplacedPreds(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">575</td>
    <td class="">      const MachineBasicBlock *BB, MachineBasicBlock *Succ,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">576</td>
    <td class="">      const BlockChain &Chain, const BlockFilterSet *BlockFilter);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">577</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">578</td>
    <td class="">  /// Find chains of triangles to tail-duplicate where a global analysis works,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">579</td>
    <td class="">  /// but a local analysis would not find them.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">580</td>
    <td class="">  void precomputeTriangleChains();</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">581</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">582</td>
    <td class="">  /// Apply a post-processing step optimizing block placement.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">583</td>
    <td class="">  void applyExtTsp();</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">584</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">585</td>
    <td class="">  /// Modify the existing block placement in the function and adjust all jumps.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">586</td>
    <td class="">  void assignBlockOrder(const std::vector<const MachineBasicBlock *> &NewOrder);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">587</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">588</td>
    <td class="">  /// Create a single CFG chain from the current block order.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">589</td>
    <td class="">  void createCFGChainExtTsp();</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">590</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">591</td>
    <td class="">public:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">592</td>
    <td class="">  static char ID; // Pass identification, replacement for typeid</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">593</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">594</td>
    <td class="coveredLine">  MachineBlockPlacement() : MachineFunctionPass(ID) {</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">595</td>
    <td class="coveredLine">    initializeMachineBlockPlacementPass(*PassRegistry::getPassRegistry());</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">596</td>
    <td class="coveredLine">  }</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">597</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">598</td>
    <td class="">  bool runOnMachineFunction(MachineFunction &F) override;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">599</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">600</td>
    <td class="uncoveredLine">  bool allowTailDupPlacement() const {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">601</td>
    <td class="uncoveredLine">    assert(F);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">602</td>
    <td class="uncoveredLine">    return TailDupPlacement && !F->getTarget().requiresStructuredCFG();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">603</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">604</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">605</td>
    <td class="coveredLine">  void getAnalysisUsage(AnalysisUsage &AU) const override {</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">606</td>
    <td class="coveredLine">    AU.addRequired<MachineBranchProbabilityInfo>();</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">607</td>
    <td class="coveredLine">    AU.addRequired<MachineBlockFrequencyInfo>();</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">608</td>
    <td class="coveredLine">    if (TailDupPlacement)</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">609</td>
    <td class="coveredLine">      AU.addRequired<MachinePostDominatorTree>();</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">610</td>
    <td class="coveredLine">    AU.addRequired<MachineLoopInfo>();</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">611</td>
    <td class="coveredLine">    AU.addRequired<ProfileSummaryInfoWrapperPass>();</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">612</td>
    <td class="coveredLine">    AU.addRequired<TargetPassConfig>();</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">613</td>
    <td class="coveredLine">    MachineFunctionPass::getAnalysisUsage(AU);</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">614</td>
    <td class="coveredLine">  }</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">615</td>
    <td class="">};</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">616</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">617</td>
    <td class="">} // end anonymous namespace</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">618</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">619</td>
    <td class="">char MachineBlockPlacement::ID = 0;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">620</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">621</td>
    <td class="">char &llvm::MachineBlockPlacementID = MachineBlockPlacement::ID;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">622</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">623</td>
    <td class="coveredLine">INITIALIZE_PASS_BEGIN(MachineBlockPlacement, DEBUG_TYPE,</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">624</td>
    <td class="">                      "Branch Probability Basic Block Placement", false, false)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">625</td>
    <td class="coveredLine">INITIALIZE_PASS_DEPENDENCY(MachineBranchProbabilityInfo)</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">626</td>
    <td class="coveredLine">INITIALIZE_PASS_DEPENDENCY(MachineBlockFrequencyInfo)</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">627</td>
    <td class="coveredLine">INITIALIZE_PASS_DEPENDENCY(MachinePostDominatorTree)</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">628</td>
    <td class="coveredLine">INITIALIZE_PASS_DEPENDENCY(MachineLoopInfo)</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">629</td>
    <td class="coveredLine">INITIALIZE_PASS_DEPENDENCY(ProfileSummaryInfoWrapperPass)</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">630</td>
    <td class="coveredLine">INITIALIZE_PASS_END(MachineBlockPlacement, DEBUG_TYPE,</td>
    <td>8</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">631</td>
    <td class="">                    "Branch Probability Basic Block Placement", false, false)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">632</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">633</td>
    <td class="">#ifndef NDEBUG</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">634</td>
    <td class="">/// Helper to print the name of a MBB.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">635</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">636</td>
    <td class="">/// Only used by debug logging.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">637</td>
    <td class="uncoveredLine">static std::string getBlockName(const MachineBasicBlock *BB) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">638</td>
    <td class="uncoveredLine">  std::string Result;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">639</td>
    <td class="uncoveredLine">  raw_string_ostream OS(Result);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">640</td>
    <td class="uncoveredLine">  OS << printMBBReference(*BB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">641</td>
    <td class="uncoveredLine">  OS << " ('" << BB->getName() << "')";</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">642</td>
    <td class="uncoveredLine">  OS.flush();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">643</td>
    <td class="uncoveredLine">  return Result;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">644</td>
    <td class="uncoveredLine">}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">645</td>
    <td class="">#endif</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">646</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">647</td>
    <td class="">/// Mark a chain's successors as having one fewer preds.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">648</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">649</td>
    <td class="">/// When a chain is being merged into the "placed" chain, this routine will</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">650</td>
    <td class="">/// quickly walk the successors of each block in the chain and mark them as</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">651</td>
    <td class="">/// having one fewer active predecessor. It also adds any successors of this</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">652</td>
    <td class="">/// chain which reach the zero-predecessor state to the appropriate worklist.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">653</td>
    <td class="uncoveredLine">void MachineBlockPlacement::markChainSuccessors(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">654</td>
    <td class="">    const BlockChain &Chain, const MachineBasicBlock *LoopHeaderBB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">655</td>
    <td class="">    const BlockFilterSet *BlockFilter) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">656</td>
    <td class="">  // Walk all the blocks in this chain, marking their successors as having</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">657</td>
    <td class="">  // a predecessor placed.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">658</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *MBB : Chain) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">659</td>
    <td class="uncoveredLine">    markBlockSuccessors(Chain, MBB, LoopHeaderBB, BlockFilter);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">660</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">661</td>
    <td class="uncoveredLine">}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">662</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">663</td>
    <td class="">/// Mark a single block's successors as having one fewer preds.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">664</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">665</td>
    <td class="">/// Under normal circumstances, this is only called by markChainSuccessors,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">666</td>
    <td class="">/// but if a block that was to be placed is completely tail-duplicated away,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">667</td>
    <td class="">/// and was duplicated into the chain end, we need to redo markBlockSuccessors</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">668</td>
    <td class="">/// for just that block.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">669</td>
    <td class="uncoveredLine">void MachineBlockPlacement::markBlockSuccessors(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">670</td>
    <td class="">    const BlockChain &Chain, const MachineBasicBlock *MBB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">671</td>
    <td class="">    const MachineBasicBlock *LoopHeaderBB, const BlockFilterSet *BlockFilter) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">672</td>
    <td class="">  // Add any successors for which this is the only un-placed in-loop</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">673</td>
    <td class="">  // predecessor to the worklist as a viable candidate for CFG-neutral</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">674</td>
    <td class="">  // placement. No subsequent placement of this block will violate the CFG</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">675</td>
    <td class="">  // shape, so we get to use heuristics to choose a favorable placement.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">676</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *Succ : MBB->successors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">677</td>
    <td class="uncoveredLine">    if (BlockFilter && !BlockFilter->count(Succ))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">678</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">679</td>
    <td class="uncoveredLine">    BlockChain &SuccChain = *BlockToChain[Succ];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">680</td>
    <td class="">    // Disregard edges within a fixed chain, or edges to the loop header.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">681</td>
    <td class="uncoveredLine">    if (&Chain == &SuccChain || Succ == LoopHeaderBB)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">682</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">683</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">684</td>
    <td class="">    // This is a cross-chain edge that is within the loop, so decrement the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">685</td>
    <td class="">    // loop predecessor count of the destination chain.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">686</td>
    <td class="uncoveredLine">    if (SuccChain.UnscheduledPredecessors == 0 ||</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">687</td>
    <td class="uncoveredLine">        --SuccChain.UnscheduledPredecessors > 0)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">688</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">689</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">690</td>
    <td class="uncoveredLine">    auto *NewBB = *SuccChain.begin();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">691</td>
    <td class="uncoveredLine">    if (NewBB->isEHPad())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">692</td>
    <td class="uncoveredLine">      EHPadWorkList.push_back(NewBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">693</td>
    <td class="">    else</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">694</td>
    <td class="uncoveredLine">      BlockWorkList.push_back(NewBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">695</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">696</td>
    <td class="uncoveredLine">}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">697</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">698</td>
    <td class="">/// This helper function collects the set of successors of block</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">699</td>
    <td class="">/// \p BB that are allowed to be its layout successors, and return</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">700</td>
    <td class="">/// the total branch probability of edges from \p BB to those</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">701</td>
    <td class="">/// blocks.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">702</td>
    <td class="uncoveredLine">BranchProbability MachineBlockPlacement::collectViableSuccessors(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">703</td>
    <td class="">    const MachineBasicBlock *BB, const BlockChain &Chain,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">704</td>
    <td class="">    const BlockFilterSet *BlockFilter,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">705</td>
    <td class="">    SmallVector<MachineBasicBlock *, 4> &Successors) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">706</td>
    <td class="">  // Adjust edge probabilities by excluding edges pointing to blocks that is</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">707</td>
    <td class="">  // either not in BlockFilter or is already in the current chain. Consider the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">708</td>
    <td class="">  // following CFG:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">709</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">710</td>
    <td class="">  //     --->A</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">711</td>
    <td class="">  //     |  / \</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">712</td>
    <td class="">  //     | B   C</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">713</td>
    <td class="">  //     |  \ / \</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">714</td>
    <td class="">  //     ----D   E</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">715</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">716</td>
    <td class="">  // Assume A->C is very hot (>90%), and C->D has a 50% probability, then after</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">717</td>
    <td class="">  // A->C is chosen as a fall-through, D won't be selected as a successor of C</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">718</td>
    <td class="">  // due to CFG constraint (the probability of C->D is not greater than</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">719</td>
    <td class="">  // HotProb to break topo-order). If we exclude E that is not in BlockFilter</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">720</td>
    <td class="">  // when calculating the probability of C->D, D will be selected and we</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">721</td>
    <td class="">  // will get A C D B as the layout of this loop.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">722</td>
    <td class="uncoveredLine">  auto AdjustedSumProb = BranchProbability::getOne();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">723</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *Succ : BB->successors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">724</td>
    <td class="uncoveredLine">    bool SkipSucc = false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">725</td>
    <td class="uncoveredLine">    if (Succ->isEHPad() || (BlockFilter && !BlockFilter->count(Succ))) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">726</td>
    <td class="uncoveredLine">      SkipSucc = true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">727</td>
    <td class="">    } else {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">728</td>
    <td class="uncoveredLine">      BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">729</td>
    <td class="uncoveredLine">      if (SuccChain == &Chain) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">730</td>
    <td class="uncoveredLine">        SkipSucc = true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">731</td>
    <td class="uncoveredLine">      } else if (Succ != *SuccChain->begin()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">732</td>
    <td class="uncoveredLine">        LLVM_DEBUG(dbgs() << "    " << getBlockName(Succ)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">733</td>
    <td class="">                          << " -> Mid chain!\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">734</td>
    <td class="uncoveredLine">        continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">735</td>
    <td class="">      }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">736</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">737</td>
    <td class="uncoveredLine">    if (SkipSucc)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">738</td>
    <td class="uncoveredLine">      AdjustedSumProb -= MBPI->getEdgeProbability(BB, Succ);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">739</td>
    <td class="">    else</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">740</td>
    <td class="uncoveredLine">      Successors.push_back(Succ);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">741</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">742</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">743</td>
    <td class="uncoveredLine">  return AdjustedSumProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">744</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">745</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">746</td>
    <td class="">/// The helper function returns the branch probability that is adjusted</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">747</td>
    <td class="">/// or normalized over the new total \p AdjustedSumProb.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">748</td>
    <td class="">static BranchProbability</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">749</td>
    <td class="uncoveredLine">getAdjustedProbability(BranchProbability OrigProb,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">750</td>
    <td class="">                       BranchProbability AdjustedSumProb) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">751</td>
    <td class="uncoveredLine">  BranchProbability SuccProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">752</td>
    <td class="uncoveredLine">  uint32_t SuccProbN = OrigProb.getNumerator();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">753</td>
    <td class="uncoveredLine">  uint32_t SuccProbD = AdjustedSumProb.getNumerator();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">754</td>
    <td class="uncoveredLine">  if (SuccProbN >= SuccProbD)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">755</td>
    <td class="uncoveredLine">    SuccProb = BranchProbability::getOne();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">756</td>
    <td class="">  else</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">757</td>
    <td class="uncoveredLine">    SuccProb = BranchProbability(SuccProbN, SuccProbD);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">758</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">759</td>
    <td class="uncoveredLine">  return SuccProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">760</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">761</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">762</td>
    <td class="">/// Check if \p BB has exactly the successors in \p Successors.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">763</td>
    <td class="">static bool</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">764</td>
    <td class="uncoveredLine">hasSameSuccessors(MachineBasicBlock &BB,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">765</td>
    <td class="">                  SmallPtrSetImpl<const MachineBasicBlock *> &Successors) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">766</td>
    <td class="uncoveredLine">  if (BB.succ_size() != Successors.size())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">767</td>
    <td class="uncoveredLine">    return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">768</td>
    <td class="">  // We don't want to count self-loops</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">769</td>
    <td class="uncoveredLine">  if (Successors.count(&BB))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">770</td>
    <td class="uncoveredLine">    return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">771</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *Succ : BB.successors())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">772</td>
    <td class="uncoveredLine">    if (!Successors.count(Succ))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">773</td>
    <td class="uncoveredLine">      return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">774</td>
    <td class="uncoveredLine">  return true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">775</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">776</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">777</td>
    <td class="">/// Check if a block should be tail duplicated to increase fallthrough</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">778</td>
    <td class="">/// opportunities.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">779</td>
    <td class="">/// \p BB Block to check.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">780</td>
    <td class="uncoveredLine">bool MachineBlockPlacement::shouldTailDuplicate(MachineBasicBlock *BB) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">781</td>
    <td class="">  // Blocks with single successors don't create additional fallthrough</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">782</td>
    <td class="">  // opportunities. Don't duplicate them. TODO: When conditional exits are</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">783</td>
    <td class="">  // analyzable, allow them to be duplicated.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">784</td>
    <td class="uncoveredLine">  bool IsSimple = TailDup.isSimpleBB(BB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">785</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">786</td>
    <td class="uncoveredLine">  if (BB->succ_size() == 1)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">787</td>
    <td class="uncoveredLine">    return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">788</td>
    <td class="uncoveredLine">  return TailDup.shouldTailDuplicate(IsSimple, *BB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">789</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">790</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">791</td>
    <td class="">/// Compare 2 BlockFrequency's with a small penalty for \p A.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">792</td>
    <td class="">/// In order to be conservative, we apply a X% penalty to account for</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">793</td>
    <td class="">/// increased icache pressure and static heuristics. For small frequencies</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">794</td>
    <td class="">/// we use only the numerators to improve accuracy. For simplicity, we assume the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">795</td>
    <td class="">/// penalty is less than 100%</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">796</td>
    <td class="">/// TODO(iteratee): Use 64-bit fixed point edge frequencies everywhere.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">797</td>
    <td class="uncoveredLine">static bool greaterWithBias(BlockFrequency A, BlockFrequency B,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">798</td>
    <td class="">                            uint64_t EntryFreq) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">799</td>
    <td class="uncoveredLine">  BranchProbability ThresholdProb(TailDupPlacementPenalty, 100);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">800</td>
    <td class="uncoveredLine">  BlockFrequency Gain = A - B;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">801</td>
    <td class="uncoveredLine">  return (Gain / ThresholdProb).getFrequency() >= EntryFreq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">802</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">803</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">804</td>
    <td class="">/// Check the edge frequencies to see if tail duplication will increase</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">805</td>
    <td class="">/// fallthroughs. It only makes sense to call this function when</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">806</td>
    <td class="">/// \p Succ would not be chosen otherwise. Tail duplication of \p Succ is</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">807</td>
    <td class="">/// always locally profitable if we would have picked \p Succ without</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">808</td>
    <td class="">/// considering duplication.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">809</td>
    <td class="uncoveredLine">bool MachineBlockPlacement::isProfitableToTailDup(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">810</td>
    <td class="">    const MachineBasicBlock *BB, const MachineBasicBlock *Succ,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">811</td>
    <td class="">    BranchProbability QProb,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">812</td>
    <td class="">    const BlockChain &Chain, const BlockFilterSet *BlockFilter) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">813</td>
    <td class="">  // We need to do a probability calculation to make sure this is profitable.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">814</td>
    <td class="">  // First: does succ have a successor that post-dominates? This affects the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">815</td>
    <td class="">  // calculation. The 2 relevant cases are:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">816</td>
    <td class="">  //    BB         BB</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">817</td>
    <td class="">  //    | \Qout    | \Qout</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">818</td>
    <td class="">  //   P|  C       |P C</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">819</td>
    <td class="">  //    =   C'     =   C'</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">820</td>
    <td class="">  //    |  /Qin    |  /Qin</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">821</td>
    <td class="">  //    | /        | /</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">822</td>
    <td class="">  //    Succ       Succ</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">823</td>
    <td class="">  //    / \        | \  V</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">824</td>
    <td class="">  //  U/   =V      |U \</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">825</td>
    <td class="">  //  /     \      =   D</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">826</td>
    <td class="">  //  D      E     |  /</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">827</td>
    <td class="">  //               | /</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">828</td>
    <td class="">  //               |/</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">829</td>
    <td class="">  //               PDom</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">830</td>
    <td class="">  //  '=' : Branch taken for that CFG edge</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">831</td>
    <td class="">  // In the second case, Placing Succ while duplicating it into C prevents the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">832</td>
    <td class="">  // fallthrough of Succ into either D or PDom, because they now have C as an</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">833</td>
    <td class="">  // unplaced predecessor</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">834</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">835</td>
    <td class="">  // Start by figuring out which case we fall into</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">836</td>
    <td class="uncoveredLine">  MachineBasicBlock *PDom = nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">837</td>
    <td class="uncoveredLine">  SmallVector<MachineBasicBlock *, 4> SuccSuccs;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">838</td>
    <td class="">  // Only scan the relevant successors</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">839</td>
    <td class="">  auto AdjustedSuccSumProb =</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">840</td>
    <td class="uncoveredLine">      collectViableSuccessors(Succ, Chain, BlockFilter, SuccSuccs);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">841</td>
    <td class="uncoveredLine">  BranchProbability PProb = MBPI->getEdgeProbability(BB, Succ);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">842</td>
    <td class="uncoveredLine">  auto BBFreq = MBFI->getBlockFreq(BB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">843</td>
    <td class="uncoveredLine">  auto SuccFreq = MBFI->getBlockFreq(Succ);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">844</td>
    <td class="uncoveredLine">  BlockFrequency P = BBFreq * PProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">845</td>
    <td class="uncoveredLine">  BlockFrequency Qout = BBFreq * QProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">846</td>
    <td class="uncoveredLine">  uint64_t EntryFreq = MBFI->getEntryFreq();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">847</td>
    <td class="">  // If there are no more successors, it is profitable to copy, as it strictly</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">848</td>
    <td class="">  // increases fallthrough.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">849</td>
    <td class="uncoveredLine">  if (SuccSuccs.size() == 0)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">850</td>
    <td class="uncoveredLine">    return greaterWithBias(P, Qout, EntryFreq);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">851</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">852</td>
    <td class="uncoveredLine">  auto BestSuccSucc = BranchProbability::getZero();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">853</td>
    <td class="">  // Find the PDom or the best Succ if no PDom exists.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">854</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *SuccSucc : SuccSuccs) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">855</td>
    <td class="uncoveredLine">    auto Prob = MBPI->getEdgeProbability(Succ, SuccSucc);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">856</td>
    <td class="uncoveredLine">    if (Prob > BestSuccSucc)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">857</td>
    <td class="uncoveredLine">      BestSuccSucc = Prob;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">858</td>
    <td class="uncoveredLine">    if (PDom == nullptr)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">859</td>
    <td class="uncoveredLine">      if (MPDT->dominates(SuccSucc, Succ)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">860</td>
    <td class="uncoveredLine">        PDom = SuccSucc;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">861</td>
    <td class="uncoveredLine">        break;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">862</td>
    <td class="">      }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">863</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">864</td>
    <td class="">  // For the comparisons, we need to know Succ's best incoming edge that isn't</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">865</td>
    <td class="">  // from BB.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">866</td>
    <td class="uncoveredLine">  auto SuccBestPred = BlockFrequency(0);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">867</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *SuccPred : Succ->predecessors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">868</td>
    <td class="uncoveredLine">    if (SuccPred == Succ || SuccPred == BB</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">869</td>
    <td class="uncoveredLine">        || BlockToChain[SuccPred] == &Chain</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">870</td>
    <td class="uncoveredLine">        || (BlockFilter && !BlockFilter->count(SuccPred)))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">871</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">872</td>
    <td class="uncoveredLine">    auto Freq = MBFI->getBlockFreq(SuccPred)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">873</td>
    <td class="uncoveredLine">        * MBPI->getEdgeProbability(SuccPred, Succ);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">874</td>
    <td class="uncoveredLine">    if (Freq > SuccBestPred)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">875</td>
    <td class="uncoveredLine">      SuccBestPred = Freq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">876</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">877</td>
    <td class="">  // Qin is Succ's best unplaced incoming edge that isn't BB</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">878</td>
    <td class="uncoveredLine">  BlockFrequency Qin = SuccBestPred;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">879</td>
    <td class="">  // If it doesn't have a post-dominating successor, here is the calculation:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">880</td>
    <td class="">  //    BB        BB</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">881</td>
    <td class="">  //    | \Qout   |  \</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">882</td>
    <td class="">  //   P|  C      |   =</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">883</td>
    <td class="">  //    =   C'    |    C</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">884</td>
    <td class="">  //    |  /Qin   |     |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">885</td>
    <td class="">  //    | /       |     C' (+Succ)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">886</td>
    <td class="">  //    Succ      Succ /|</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">887</td>
    <td class="">  //    / \       |  \/ |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">888</td>
    <td class="">  //  U/   =V     |  == |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">889</td>
    <td class="">  //  /     \     | /  \|</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">890</td>
    <td class="">  //  D      E    D     E</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">891</td>
    <td class="">  //  '=' : Branch taken for that CFG edge</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">892</td>
    <td class="">  //  Cost in the first case is: P + V</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">893</td>
    <td class="">  //  For this calculation, we always assume P > Qout. If Qout > P</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">894</td>
    <td class="">  //  The result of this function will be ignored at the caller.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">895</td>
    <td class="">  //  Let F = SuccFreq - Qin</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">896</td>
    <td class="">  //  Cost in the second case is: Qout + min(Qin, F) * U + max(Qin, F) * V</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">897</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">898</td>
    <td class="uncoveredLine">  if (PDom == nullptr || !Succ->isSuccessor(PDom)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">899</td>
    <td class="uncoveredLine">    BranchProbability UProb = BestSuccSucc;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">900</td>
    <td class="uncoveredLine">    BranchProbability VProb = AdjustedSuccSumProb - UProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">901</td>
    <td class="uncoveredLine">    BlockFrequency F = SuccFreq - Qin;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">902</td>
    <td class="uncoveredLine">    BlockFrequency V = SuccFreq * VProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">903</td>
    <td class="uncoveredLine">    BlockFrequency QinU = std::min(Qin, F) * UProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">904</td>
    <td class="uncoveredLine">    BlockFrequency BaseCost = P + V;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">905</td>
    <td class="uncoveredLine">    BlockFrequency DupCost = Qout + QinU + std::max(Qin, F) * VProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">906</td>
    <td class="uncoveredLine">    return greaterWithBias(BaseCost, DupCost, EntryFreq);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">907</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">908</td>
    <td class="uncoveredLine">  BranchProbability UProb = MBPI->getEdgeProbability(Succ, PDom);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">909</td>
    <td class="uncoveredLine">  BranchProbability VProb = AdjustedSuccSumProb - UProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">910</td>
    <td class="uncoveredLine">  BlockFrequency U = SuccFreq * UProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">911</td>
    <td class="uncoveredLine">  BlockFrequency V = SuccFreq * VProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">912</td>
    <td class="uncoveredLine">  BlockFrequency F = SuccFreq - Qin;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">913</td>
    <td class="">  // If there is a post-dominating successor, here is the calculation:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">914</td>
    <td class="">  // BB         BB                 BB          BB</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">915</td>
    <td class="">  // | \Qout    |   \               | \Qout     |  \</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">916</td>
    <td class="">  // |P C       |    =              |P C        |   =</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">917</td>
    <td class="">  // =   C'     |P    C             =   C'      |P   C</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">918</td>
    <td class="">  // |  /Qin    |      |            |  /Qin     |     |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">919</td>
    <td class="">  // | /        |      C' (+Succ)   | /         |     C' (+Succ)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">920</td>
    <td class="">  // Succ       Succ  /|            Succ        Succ /|</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">921</td>
    <td class="">  // | \  V     |   \/ |            | \  V      |  \/ |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">922</td>
    <td class="">  // |U \       |U  /\ =?           |U =        |U /\ |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">923</td>
    <td class="">  // =   D      = =  =?|            |   D       | =  =|</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">924</td>
    <td class="">  // |  /       |/     D            |  /        |/    D</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">925</td>
    <td class="">  // | /        |     /             | =         |    /</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">926</td>
    <td class="">  // |/         |    /              |/          |   =</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">927</td>
    <td class="">  // Dom         Dom                Dom         Dom</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">928</td>
    <td class="">  //  '=' : Branch taken for that CFG edge</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">929</td>
    <td class="">  // The cost for taken branches in the first case is P + U</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">930</td>
    <td class="">  // Let F = SuccFreq - Qin</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">931</td>
    <td class="">  // The cost in the second case (assuming independence), given the layout:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">932</td>
    <td class="">  // BB, Succ, (C+Succ), D, Dom or the layout:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">933</td>
    <td class="">  // BB, Succ, D, Dom, (C+Succ)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">934</td>
    <td class="">  // is Qout + max(F, Qin) * U + min(F, Qin)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">935</td>
    <td class="">  // compare P + U vs Qout + P * U + Qin.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">936</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">937</td>
    <td class="">  // The 3rd and 4th cases cover when Dom would be chosen to follow Succ.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">938</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">939</td>
    <td class="">  // For the 3rd case, the cost is P + 2 * V</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">940</td>
    <td class="">  // For the 4th case, the cost is Qout + min(Qin, F) * U + max(Qin, F) * V + V</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">941</td>
    <td class="">  // We choose 4 over 3 when (P + V) > Qout + min(Qin, F) * U + max(Qin, F) * V</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">942</td>
    <td class="uncoveredLine">  if (UProb > AdjustedSuccSumProb / 2 &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">943</td>
    <td class="uncoveredLine">      !hasBetterLayoutPredecessor(Succ, PDom, *BlockToChain[PDom], UProb, UProb,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">944</td>
    <td class="">                                  Chain, BlockFilter))</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">945</td>
    <td class="">    // Cases 3 & 4</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">946</td>
    <td class="uncoveredLine">    return greaterWithBias(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">947</td>
    <td class="uncoveredLine">        (P + V), (Qout + std::max(Qin, F) * VProb + std::min(Qin, F) * UProb),</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">948</td>
    <td class="uncoveredLine">        EntryFreq);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">949</td>
    <td class="">  // Cases 1 & 2</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">950</td>
    <td class="uncoveredLine">  return greaterWithBias((P + U),</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">951</td>
    <td class="uncoveredLine">                         (Qout + std::min(Qin, F) * AdjustedSuccSumProb +</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">952</td>
    <td class="uncoveredLine">                          std::max(Qin, F) * UProb),</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">953</td>
    <td class="uncoveredLine">                         EntryFreq);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">954</td>
    <td class="uncoveredLine">}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">955</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">956</td>
    <td class="">/// Check for a trellis layout. \p BB is the upper part of a trellis if its</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">957</td>
    <td class="">/// successors form the lower part of a trellis. A successor set S forms the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">958</td>
    <td class="">/// lower part of a trellis if all of the predecessors of S are either in S or</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">959</td>
    <td class="">/// have all of S as successors. We ignore trellises where BB doesn't have 2</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">960</td>
    <td class="">/// successors because for fewer than 2, it's trivial, and for 3 or greater they</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">961</td>
    <td class="">/// are very uncommon and complex to compute optimally. Allowing edges within S</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">962</td>
    <td class="">/// is not strictly a trellis, but the same algorithm works, so we allow it.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">963</td>
    <td class="uncoveredLine">bool MachineBlockPlacement::isTrellis(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">964</td>
    <td class="">    const MachineBasicBlock *BB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">965</td>
    <td class="">    const SmallVectorImpl<MachineBasicBlock *> &ViableSuccs,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">966</td>
    <td class="">    const BlockChain &Chain, const BlockFilterSet *BlockFilter) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">967</td>
    <td class="">  // Technically BB could form a trellis with branching factor higher than 2.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">968</td>
    <td class="">  // But that's extremely uncommon.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">969</td>
    <td class="uncoveredLine">  if (BB->succ_size() != 2 || ViableSuccs.size() != 2)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">970</td>
    <td class="uncoveredLine">    return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">971</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">972</td>
    <td class="">  SmallPtrSet<const MachineBasicBlock *, 2> Successors(BB->succ_begin(),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">973</td>
    <td class="uncoveredLine">                                                       BB->succ_end());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">974</td>
    <td class="">  // To avoid reviewing the same predecessors twice.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">975</td>
    <td class="uncoveredLine">  SmallPtrSet<const MachineBasicBlock *, 8> SeenPreds;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">976</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">977</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *Succ : ViableSuccs) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">978</td>
    <td class="uncoveredLine">    int PredCount = 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">979</td>
    <td class="uncoveredLine">    for (auto *SuccPred : Succ->predecessors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">980</td>
    <td class="">      // Allow triangle successors, but don't count them.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">981</td>
    <td class="uncoveredLine">      if (Successors.count(SuccPred)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">982</td>
    <td class="">        // Make sure that it is actually a triangle.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">983</td>
    <td class="uncoveredLine">        for (MachineBasicBlock *CheckSucc : SuccPred->successors())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">984</td>
    <td class="uncoveredLine">          if (!Successors.count(CheckSucc))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">985</td>
    <td class="uncoveredLine">            return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">986</td>
    <td class="uncoveredLine">        continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">987</td>
    <td class="uncoveredLine">      }</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">988</td>
    <td class="uncoveredLine">      const BlockChain *PredChain = BlockToChain[SuccPred];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">989</td>
    <td class="uncoveredLine">      if (SuccPred == BB || (BlockFilter && !BlockFilter->count(SuccPred)) ||</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">990</td>
    <td class="uncoveredLine">          PredChain == &Chain || PredChain == BlockToChain[Succ])</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">991</td>
    <td class="uncoveredLine">        continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">992</td>
    <td class="uncoveredLine">      ++PredCount;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">993</td>
    <td class="">      // Perform the successor check only once.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">994</td>
    <td class="uncoveredLine">      if (!SeenPreds.insert(SuccPred).second)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">995</td>
    <td class="uncoveredLine">        continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">996</td>
    <td class="uncoveredLine">      if (!hasSameSuccessors(*SuccPred, Successors))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">997</td>
    <td class="uncoveredLine">        return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">998</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">999</td>
    <td class="">    // If one of the successors has only BB as a predecessor, it is not a</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1000</td>
    <td class="">    // trellis.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1001</td>
    <td class="uncoveredLine">    if (PredCount < 1)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1002</td>
    <td class="uncoveredLine">      return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1003</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1004</td>
    <td class="uncoveredLine">  return true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1005</td>
    <td class="uncoveredLine">}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1006</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1007</td>
    <td class="">/// Pick the highest total weight pair of edges that can both be laid out.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1008</td>
    <td class="">/// The edges in \p Edges[0] are assumed to have a different destination than</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1009</td>
    <td class="">/// the edges in \p Edges[1]. Simple counting shows that the best pair is either</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1010</td>
    <td class="">/// the individual highest weight edges to the 2 different destinations, or in</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1011</td>
    <td class="">/// case of a conflict, one of them should be replaced with a 2nd best edge.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1012</td>
    <td class="">std::pair<MachineBlockPlacement::WeightedEdge,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1013</td>
    <td class="">          MachineBlockPlacement::WeightedEdge></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1014</td>
    <td class="uncoveredLine">MachineBlockPlacement::getBestNonConflictingEdges(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1015</td>
    <td class="">    const MachineBasicBlock *BB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1016</td>
    <td class="">    MutableArrayRef<SmallVector<MachineBlockPlacement::WeightedEdge, 8>></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1017</td>
    <td class="">        Edges) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1018</td>
    <td class="">  // Sort the edges, and then for each successor, find the best incoming</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1019</td>
    <td class="">  // predecessor. If the best incoming predecessors aren't the same,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1020</td>
    <td class="">  // then that is clearly the best layout. If there is a conflict, one of the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1021</td>
    <td class="">  // successors will have to fallthrough from the second best predecessor. We</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1022</td>
    <td class="">  // compare which combination is better overall.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1023</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1024</td>
    <td class="">  // Sort for highest frequency.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1025</td>
    <td class="uncoveredLine">  auto Cmp = [](WeightedEdge A, WeightedEdge B) { return A.Weight > B.Weight; };</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1026</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1027</td>
    <td class="uncoveredLine">  llvm::stable_sort(Edges[0], Cmp);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1028</td>
    <td class="uncoveredLine">  llvm::stable_sort(Edges[1], Cmp);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1029</td>
    <td class="uncoveredLine">  auto BestA = Edges[0].begin();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1030</td>
    <td class="uncoveredLine">  auto BestB = Edges[1].begin();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1031</td>
    <td class="">  // Arrange for the correct answer to be in BestA and BestB</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1032</td>
    <td class="">  // If the 2 best edges don't conflict, the answer is already there.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1033</td>
    <td class="uncoveredLine">  if (BestA->Src == BestB->Src) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1034</td>
    <td class="">    // Compare the total fallthrough of (Best + Second Best) for both pairs</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1035</td>
    <td class="uncoveredLine">    auto SecondBestA = std::next(BestA);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1036</td>
    <td class="uncoveredLine">    auto SecondBestB = std::next(BestB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1037</td>
    <td class="uncoveredLine">    BlockFrequency BestAScore = BestA->Weight + SecondBestB->Weight;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1038</td>
    <td class="uncoveredLine">    BlockFrequency BestBScore = BestB->Weight + SecondBestA->Weight;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1039</td>
    <td class="uncoveredLine">    if (BestAScore < BestBScore)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1040</td>
    <td class="uncoveredLine">      BestA = SecondBestA;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1041</td>
    <td class="">    else</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1042</td>
    <td class="uncoveredLine">      BestB = SecondBestB;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1043</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1044</td>
    <td class="">  // Arrange for the BB edge to be in BestA if it exists.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1045</td>
    <td class="uncoveredLine">  if (BestB->Src == BB)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1046</td>
    <td class="uncoveredLine">    std::swap(BestA, BestB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1047</td>
    <td class="uncoveredLine">  return std::make_pair(*BestA, *BestB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1048</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1049</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1050</td>
    <td class="">/// Get the best successor from \p BB based on \p BB being part of a trellis.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1051</td>
    <td class="">/// We only handle trellises with 2 successors, so the algorithm is</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1052</td>
    <td class="">/// straightforward: Find the best pair of edges that don't conflict. We find</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1053</td>
    <td class="">/// the best incoming edge for each successor in the trellis. If those conflict,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1054</td>
    <td class="">/// we consider which of them should be replaced with the second best.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1055</td>
    <td class="">/// Upon return the two best edges will be in \p BestEdges. If one of the edges</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1056</td>
    <td class="">/// comes from \p BB, it will be in \p BestEdges[0]</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1057</td>
    <td class="">MachineBlockPlacement::BlockAndTailDupResult</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1058</td>
    <td class="uncoveredLine">MachineBlockPlacement::getBestTrellisSuccessor(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1059</td>
    <td class="">    const MachineBasicBlock *BB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1060</td>
    <td class="">    const SmallVectorImpl<MachineBasicBlock *> &ViableSuccs,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1061</td>
    <td class="">    BranchProbability AdjustedSumProb, const BlockChain &Chain,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1062</td>
    <td class="">    const BlockFilterSet *BlockFilter) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1063</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1064</td>
    <td class="uncoveredLine">  BlockAndTailDupResult Result = {nullptr, false};</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1065</td>
    <td class="">  SmallPtrSet<const MachineBasicBlock *, 4> Successors(BB->succ_begin(),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1066</td>
    <td class="uncoveredLine">                                                       BB->succ_end());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1067</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1068</td>
    <td class="">  // We assume size 2 because it's common. For general n, we would have to do</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1069</td>
    <td class="">  // the Hungarian algorithm, but it's not worth the complexity because more</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1070</td>
    <td class="">  // than 2 successors is fairly uncommon, and a trellis even more so.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1071</td>
    <td class="uncoveredLine">  if (Successors.size() != 2 || ViableSuccs.size() != 2)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1072</td>
    <td class="uncoveredLine">    return Result;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1073</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1074</td>
    <td class="">  // Collect the edge frequencies of all edges that form the trellis.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1075</td>
    <td class="uncoveredLine">  SmallVector<WeightedEdge, 8> Edges[2];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1076</td>
    <td class="uncoveredLine">  int SuccIndex = 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1077</td>
    <td class="uncoveredLine">  for (auto *Succ : ViableSuccs) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1078</td>
    <td class="uncoveredLine">    for (MachineBasicBlock *SuccPred : Succ->predecessors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1079</td>
    <td class="">      // Skip any placed predecessors that are not BB</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1080</td>
    <td class="uncoveredLine">      if (SuccPred != BB)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1081</td>
    <td class="uncoveredLine">        if ((BlockFilter && !BlockFilter->count(SuccPred)) ||</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1082</td>
    <td class="uncoveredLine">            BlockToChain[SuccPred] == &Chain ||</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1083</td>
    <td class="uncoveredLine">            BlockToChain[SuccPred] == BlockToChain[Succ])</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1084</td>
    <td class="uncoveredLine">          continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1085</td>
    <td class="uncoveredLine">      BlockFrequency EdgeFreq = MBFI->getBlockFreq(SuccPred) *</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1086</td>
    <td class="uncoveredLine">                                MBPI->getEdgeProbability(SuccPred, Succ);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1087</td>
    <td class="uncoveredLine">      Edges[SuccIndex].push_back({EdgeFreq, SuccPred, Succ});</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1088</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1089</td>
    <td class="uncoveredLine">    ++SuccIndex;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1090</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1091</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1092</td>
    <td class="">  // Pick the best combination of 2 edges from all the edges in the trellis.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1093</td>
    <td class="uncoveredLine">  WeightedEdge BestA, BestB;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1094</td>
    <td class="uncoveredLine">  std::tie(BestA, BestB) = getBestNonConflictingEdges(BB, Edges);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1095</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1096</td>
    <td class="uncoveredLine">  if (BestA.Src != BB) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1097</td>
    <td class="">    // If we have a trellis, and BB doesn't have the best fallthrough edges,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1098</td>
    <td class="">    // we shouldn't choose any successor. We've already looked and there's a</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1099</td>
    <td class="">    // better fallthrough edge for all the successors.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1100</td>
    <td class="uncoveredLine">    LLVM_DEBUG(dbgs() << "Trellis, but not one of the chosen edges.\n");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1101</td>
    <td class="uncoveredLine">    return Result;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1102</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1103</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1104</td>
    <td class="">  // Did we pick the triangle edge? If tail-duplication is profitable, do</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1105</td>
    <td class="">  // that instead. Otherwise merge the triangle edge now while we know it is</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1106</td>
    <td class="">  // optimal.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1107</td>
    <td class="uncoveredLine">  if (BestA.Dest == BestB.Src) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1108</td>
    <td class="">    // The edges are BB->Succ1->Succ2, and we're looking to see if BB->Succ2</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1109</td>
    <td class="">    // would be better.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1110</td>
    <td class="uncoveredLine">    MachineBasicBlock *Succ1 = BestA.Dest;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1111</td>
    <td class="uncoveredLine">    MachineBasicBlock *Succ2 = BestB.Dest;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1112</td>
    <td class="">    // Check to see if tail-duplication would be profitable.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1113</td>
    <td class="uncoveredLine">    if (allowTailDupPlacement() && shouldTailDuplicate(Succ2) &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1114</td>
    <td class="uncoveredLine">        canTailDuplicateUnplacedPreds(BB, Succ2, Chain, BlockFilter) &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1115</td>
    <td class="uncoveredLine">        isProfitableToTailDup(BB, Succ2, MBPI->getEdgeProbability(BB, Succ1),</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1116</td>
    <td class="">                              Chain, BlockFilter)) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1117</td>
    <td class="uncoveredLine">      LLVM_DEBUG(BranchProbability Succ2Prob = getAdjustedProbability(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1118</td>
    <td class="">                     MBPI->getEdgeProbability(BB, Succ2), AdjustedSumProb);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1119</td>
    <td class="">                 dbgs() << "    Selected: " << getBlockName(Succ2)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1120</td>
    <td class="">                        << ", probability: " << Succ2Prob</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1121</td>
    <td class="">                        << " (Tail Duplicate)\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1122</td>
    <td class="uncoveredLine">      Result.BB = Succ2;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1123</td>
    <td class="uncoveredLine">      Result.ShouldTailDup = true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1124</td>
    <td class="uncoveredLine">      return Result;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1125</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1126</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1127</td>
    <td class="">  // We have already computed the optimal edge for the other side of the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1128</td>
    <td class="">  // trellis.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1129</td>
    <td class="uncoveredLine">  ComputedEdges[BestB.Src] = { BestB.Dest, false };</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1130</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1131</td>
    <td class="uncoveredLine">  auto TrellisSucc = BestA.Dest;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1132</td>
    <td class="uncoveredLine">  LLVM_DEBUG(BranchProbability SuccProb = getAdjustedProbability(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1133</td>
    <td class="">                 MBPI->getEdgeProbability(BB, TrellisSucc), AdjustedSumProb);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1134</td>
    <td class="">             dbgs() << "    Selected: " << getBlockName(TrellisSucc)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1135</td>
    <td class="">                    << ", probability: " << SuccProb << " (Trellis)\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1136</td>
    <td class="uncoveredLine">  Result.BB = TrellisSucc;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1137</td>
    <td class="uncoveredLine">  return Result;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1138</td>
    <td class="uncoveredLine">}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1139</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1140</td>
    <td class="">/// When the option allowTailDupPlacement() is on, this method checks if the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1141</td>
    <td class="">/// fallthrough candidate block \p Succ (of block \p BB) can be tail-duplicated</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1142</td>
    <td class="">/// into all of its unplaced, unfiltered predecessors, that are not BB.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1143</td>
    <td class="uncoveredLine">bool MachineBlockPlacement::canTailDuplicateUnplacedPreds(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1144</td>
    <td class="">    const MachineBasicBlock *BB, MachineBasicBlock *Succ,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1145</td>
    <td class="">    const BlockChain &Chain, const BlockFilterSet *BlockFilter) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1146</td>
    <td class="uncoveredLine">  if (!shouldTailDuplicate(Succ))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1147</td>
    <td class="uncoveredLine">    return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1148</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1149</td>
    <td class="">  // The result of canTailDuplicate.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1150</td>
    <td class="uncoveredLine">  bool Duplicate = true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1151</td>
    <td class="">  // Number of possible duplication.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1152</td>
    <td class="uncoveredLine">  unsigned int NumDup = 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1153</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1154</td>
    <td class="">  // For CFG checking.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1155</td>
    <td class="">  SmallPtrSet<const MachineBasicBlock *, 4> Successors(BB->succ_begin(),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1156</td>
    <td class="uncoveredLine">                                                       BB->succ_end());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1157</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *Pred : Succ->predecessors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1158</td>
    <td class="">    // Make sure all unplaced and unfiltered predecessors can be</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1159</td>
    <td class="">    // tail-duplicated into.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1160</td>
    <td class="">    // Skip any blocks that are already placed or not in this loop.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1161</td>
    <td class="uncoveredLine">    if (Pred == BB || (BlockFilter && !BlockFilter->count(Pred))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1162</td>
    <td class="uncoveredLine">        || (BlockToChain[Pred] == &Chain && !Succ->succ_empty()))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1163</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1164</td>
    <td class="uncoveredLine">    if (!TailDup.canTailDuplicate(Succ, Pred)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1165</td>
    <td class="uncoveredLine">      if (Successors.size() > 1 && hasSameSuccessors(*Pred, Successors))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1166</td>
    <td class="">        // This will result in a trellis after tail duplication, so we don't</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1167</td>
    <td class="">        // need to copy Succ into this predecessor. In the presence</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1168</td>
    <td class="">        // of a trellis tail duplication can continue to be profitable.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1169</td>
    <td class="">        // For example:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1170</td>
    <td class="">        // A            A</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1171</td>
    <td class="">        // |\           |\</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1172</td>
    <td class="">        // | \          | \</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1173</td>
    <td class="">        // |  C         |  C+BB</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1174</td>
    <td class="">        // | /          |  |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1175</td>
    <td class="">        // |/           |  |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1176</td>
    <td class="">        // BB    =>     BB |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1177</td>
    <td class="">        // |\           |\/|</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1178</td>
    <td class="">        // | \          |/\|</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1179</td>
    <td class="">        // |  D         |  D</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1180</td>
    <td class="">        // | /          | /</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1181</td>
    <td class="">        // |/           |/</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1182</td>
    <td class="">        // Succ         Succ</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1183</td>
    <td class="">        //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1184</td>
    <td class="">        // After BB was duplicated into C, the layout looks like the one on the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1185</td>
    <td class="">        // right. BB and C now have the same successors. When considering</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1186</td>
    <td class="">        // whether Succ can be duplicated into all its unplaced predecessors, we</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1187</td>
    <td class="">        // ignore C.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1188</td>
    <td class="">        // We can do this because C already has a profitable fallthrough, namely</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1189</td>
    <td class="">        // D. TODO(iteratee): ignore sufficiently cold predecessors for</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1190</td>
    <td class="">        // duplication and for this test.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1191</td>
    <td class="">        //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1192</td>
    <td class="">        // This allows trellises to be laid out in 2 separate chains</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1193</td>
    <td class="">        // (A,B,Succ,...) and later (C,D,...) This is a reasonable heuristic</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1194</td>
    <td class="">        // because it allows the creation of 2 fallthrough paths with links</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1195</td>
    <td class="">        // between them, and we correctly identify the best layout for these</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1196</td>
    <td class="">        // CFGs. We want to extend trellises that the user created in addition</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1197</td>
    <td class="">        // to trellises created by tail-duplication, so we just look for the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1198</td>
    <td class="">        // CFG.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1199</td>
    <td class="uncoveredLine">        continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1200</td>
    <td class="uncoveredLine">      Duplicate = false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1201</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1202</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1203</td>
    <td class="uncoveredLine">    NumDup++;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1204</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1205</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1206</td>
    <td class="">  // No possible duplication in current filter set.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1207</td>
    <td class="uncoveredLine">  if (NumDup == 0)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1208</td>
    <td class="uncoveredLine">    return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1209</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1210</td>
    <td class="">  // If profile information is available, findDuplicateCandidates can do more</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1211</td>
    <td class="">  // precise benefit analysis.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1212</td>
    <td class="uncoveredLine">  if (F->getFunction().hasProfileData())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1213</td>
    <td class="uncoveredLine">    return true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1214</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1215</td>
    <td class="">  // This is mainly for function exit BB.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1216</td>
    <td class="">  // The integrated tail duplication is really designed for increasing</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1217</td>
    <td class="">  // fallthrough from predecessors from Succ to its successors. We may need</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1218</td>
    <td class="">  // other machanism to handle different cases.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1219</td>
    <td class="uncoveredLine">  if (Succ->succ_empty())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1220</td>
    <td class="uncoveredLine">    return true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1221</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1222</td>
    <td class="">  // Plus the already placed predecessor.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1223</td>
    <td class="uncoveredLine">  NumDup++;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1224</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1225</td>
    <td class="">  // If the duplication candidate has more unplaced predecessors than</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1226</td>
    <td class="">  // successors, the extra duplication can't bring more fallthrough.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1227</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1228</td>
    <td class="">  //     Pred1 Pred2 Pred3</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1229</td>
    <td class="">  //         \   |   /</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1230</td>
    <td class="">  //          \  |  /</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1231</td>
    <td class="">  //           \ | /</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1232</td>
    <td class="">  //            Dup</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1233</td>
    <td class="">  //            / \</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1234</td>
    <td class="">  //           /   \</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1235</td>
    <td class="">  //       Succ1  Succ2</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1236</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1237</td>
    <td class="">  // In this example Dup has 2 successors and 3 predecessors, duplication of Dup</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1238</td>
    <td class="">  // can increase the fallthrough from Pred1 to Succ1 and from Pred2 to Succ2,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1239</td>
    <td class="">  // but the duplication into Pred3 can't increase fallthrough.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1240</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1241</td>
    <td class="">  // A small number of extra duplication may not hurt too much. We need a better</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1242</td>
    <td class="">  // heuristic to handle it.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1243</td>
    <td class="uncoveredLine">  if ((NumDup > Succ->succ_size()) || !Duplicate)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1244</td>
    <td class="uncoveredLine">    return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1245</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1246</td>
    <td class="uncoveredLine">  return true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1247</td>
    <td class="uncoveredLine">}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1248</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1249</td>
    <td class="">/// Find chains of triangles where we believe it would be profitable to</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1250</td>
    <td class="">/// tail-duplicate them all, but a local analysis would not find them.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1251</td>
    <td class="">/// There are 3 ways this can be profitable:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1252</td>
    <td class="">/// 1) The post-dominators marked 50% are actually taken 55% (This shrinks with</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1253</td>
    <td class="">///    longer chains)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1254</td>
    <td class="">/// 2) The chains are statically correlated. Branch probabilities have a very</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1255</td>
    <td class="">///    U-shaped distribution.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1256</td>
    <td class="">///    [http://nrs.harvard.edu/urn-3:HUL.InstRepos:24015805]</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1257</td>
    <td class="">///    If the branches in a chain are likely to be from the same side of the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1258</td>
    <td class="">///    distribution as their predecessor, but are independent at runtime, this</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1259</td>
    <td class="">///    transformation is profitable. (Because the cost of being wrong is a small</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1260</td>
    <td class="">///    fixed cost, unlike the standard triangle layout where the cost of being</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1261</td>
    <td class="">///    wrong scales with the # of triangles.)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1262</td>
    <td class="">/// 3) The chains are dynamically correlated. If the probability that a previous</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1263</td>
    <td class="">///    branch was taken positively influences whether the next branch will be</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1264</td>
    <td class="">///    taken</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1265</td>
    <td class="">/// We believe that 2 and 3 are common enough to justify the small margin in 1.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1266</td>
    <td class="uncoveredLine">void MachineBlockPlacement::precomputeTriangleChains() {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1267</td>
    <td class="">  struct TriangleChain {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1268</td>
    <td class="">    std::vector<MachineBasicBlock *> Edges;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1269</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1270</td>
    <td class="uncoveredLine">    TriangleChain(MachineBasicBlock *src, MachineBasicBlock *dst)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1271</td>
    <td class="uncoveredLine">        : Edges({src, dst}) {}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1272</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1273</td>
    <td class="uncoveredLine">    void append(MachineBasicBlock *dst) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1274</td>
    <td class="uncoveredLine">      assert(getKey()->isSuccessor(dst) &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1275</td>
    <td class="">             "Attempting to append a block that is not a successor.");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1276</td>
    <td class="uncoveredLine">      Edges.push_back(dst);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1277</td>
    <td class="uncoveredLine">    }</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1278</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1279</td>
    <td class="uncoveredLine">    unsigned count() const { return Edges.size() - 1; }</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1280</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1281</td>
    <td class="uncoveredLine">    MachineBasicBlock *getKey() const {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1282</td>
    <td class="uncoveredLine">      return Edges.back();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1283</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1284</td>
    <td class="">  };</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1285</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1286</td>
    <td class="uncoveredLine">  if (TriangleChainCount == 0)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1287</td>
    <td class="uncoveredLine">    return;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1288</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1289</td>
    <td class="uncoveredLine">  LLVM_DEBUG(dbgs() << "Pre-computing triangle chains.\n");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1290</td>
    <td class="">  // Map from last block to the chain that contains it. This allows us to extend</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1291</td>
    <td class="">  // chains as we find new triangles.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1292</td>
    <td class="uncoveredLine">  DenseMap<const MachineBasicBlock *, TriangleChain> TriangleChainMap;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1293</td>
    <td class="uncoveredLine">  for (MachineBasicBlock &BB : *F) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1294</td>
    <td class="">    // If BB doesn't have 2 successors, it doesn't start a triangle.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1295</td>
    <td class="uncoveredLine">    if (BB.succ_size() != 2)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1296</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1297</td>
    <td class="uncoveredLine">    MachineBasicBlock *PDom = nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1298</td>
    <td class="uncoveredLine">    for (MachineBasicBlock *Succ : BB.successors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1299</td>
    <td class="uncoveredLine">      if (!MPDT->dominates(Succ, &BB))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1300</td>
    <td class="uncoveredLine">        continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1301</td>
    <td class="uncoveredLine">      PDom = Succ;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1302</td>
    <td class="uncoveredLine">      break;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1303</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1304</td>
    <td class="">    // If BB doesn't have a post-dominating successor, it doesn't form a</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1305</td>
    <td class="">    // triangle.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1306</td>
    <td class="uncoveredLine">    if (PDom == nullptr)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1307</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1308</td>
    <td class="">    // If PDom has a hint that it is low probability, skip this triangle.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1309</td>
    <td class="uncoveredLine">    if (MBPI->getEdgeProbability(&BB, PDom) < BranchProbability(50, 100))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1310</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1311</td>
    <td class="">    // If PDom isn't eligible for duplication, this isn't the kind of triangle</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1312</td>
    <td class="">    // we're looking for.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1313</td>
    <td class="uncoveredLine">    if (!shouldTailDuplicate(PDom))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1314</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1315</td>
    <td class="uncoveredLine">    bool CanTailDuplicate = true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1316</td>
    <td class="">    // If PDom can't tail-duplicate into it's non-BB predecessors, then this</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1317</td>
    <td class="">    // isn't the kind of triangle we're looking for.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1318</td>
    <td class="uncoveredLine">    for (MachineBasicBlock* Pred : PDom->predecessors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1319</td>
    <td class="uncoveredLine">      if (Pred == &BB)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1320</td>
    <td class="uncoveredLine">        continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1321</td>
    <td class="uncoveredLine">      if (!TailDup.canTailDuplicate(PDom, Pred)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1322</td>
    <td class="uncoveredLine">        CanTailDuplicate = false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1323</td>
    <td class="uncoveredLine">        break;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1324</td>
    <td class="">      }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1325</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1326</td>
    <td class="">    // If we can't tail-duplicate PDom to its predecessors, then skip this</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1327</td>
    <td class="">    // triangle.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1328</td>
    <td class="uncoveredLine">    if (!CanTailDuplicate)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1329</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1330</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1331</td>
    <td class="">    // Now we have an interesting triangle. Insert it if it's not part of an</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1332</td>
    <td class="">    // existing chain.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1333</td>
    <td class="">    // Note: This cannot be replaced with a call insert() or emplace() because</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1334</td>
    <td class="">    // the find key is BB, but the insert/emplace key is PDom.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1335</td>
    <td class="uncoveredLine">    auto Found = TriangleChainMap.find(&BB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1336</td>
    <td class="">    // If it is, remove the chain from the map, grow it, and put it back in the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1337</td>
    <td class="">    // map with the end as the new key.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1338</td>
    <td class="uncoveredLine">    if (Found != TriangleChainMap.end()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1339</td>
    <td class="uncoveredLine">      TriangleChain Chain = std::move(Found->second);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1340</td>
    <td class="uncoveredLine">      TriangleChainMap.erase(Found);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1341</td>
    <td class="uncoveredLine">      Chain.append(PDom);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1342</td>
    <td class="uncoveredLine">      TriangleChainMap.insert(std::make_pair(Chain.getKey(), std::move(Chain)));</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1343</td>
    <td class="uncoveredLine">    } else {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1344</td>
    <td class="uncoveredLine">      auto InsertResult = TriangleChainMap.try_emplace(PDom, &BB, PDom);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1345</td>
    <td class="uncoveredLine">      assert(InsertResult.second && "Block seen twice.");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1346</td>
    <td class="">      (void)InsertResult;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1347</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1348</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1349</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1350</td>
    <td class="">  // Iterating over a DenseMap is safe here, because the only thing in the body</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1351</td>
    <td class="">  // of the loop is inserting into another DenseMap (ComputedEdges).</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1352</td>
    <td class="">  // ComputedEdges is never iterated, so this doesn't lead to non-determinism.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1353</td>
    <td class="uncoveredLine">  for (auto &ChainPair : TriangleChainMap) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1354</td>
    <td class="uncoveredLine">    TriangleChain &Chain = ChainPair.second;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1355</td>
    <td class="">    // Benchmarking has shown that due to branch correlation duplicating 2 or</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1356</td>
    <td class="">    // more triangles is profitable, despite the calculations assuming</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1357</td>
    <td class="">    // independence.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1358</td>
    <td class="uncoveredLine">    if (Chain.count() < TriangleChainCount)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1359</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1360</td>
    <td class="uncoveredLine">    MachineBasicBlock *dst = Chain.Edges.back();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1361</td>
    <td class="uncoveredLine">    Chain.Edges.pop_back();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1362</td>
    <td class="uncoveredLine">    for (MachineBasicBlock *src : reverse(Chain.Edges)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1363</td>
    <td class="uncoveredLine">      LLVM_DEBUG(dbgs() << "Marking edge: " << getBlockName(src) << "->"</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1364</td>
    <td class="">                        << getBlockName(dst)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1365</td>
    <td class="">                        << " as pre-computed based on triangles.\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1366</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1367</td>
    <td class="uncoveredLine">      auto InsertResult = ComputedEdges.insert({src, {dst, true}});</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1368</td>
    <td class="uncoveredLine">      assert(InsertResult.second && "Block seen twice.");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1369</td>
    <td class="">      (void)InsertResult;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1370</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1371</td>
    <td class="uncoveredLine">      dst = src;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1372</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1373</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1374</td>
    <td class="uncoveredLine">}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1375</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1376</td>
    <td class="">// When profile is not present, return the StaticLikelyProb.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1377</td>
    <td class="">// When profile is available, we need to handle the triangle-shape CFG.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1378</td>
    <td class="uncoveredLine">static BranchProbability getLayoutSuccessorProbThreshold(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1379</td>
    <td class="">      const MachineBasicBlock *BB) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1380</td>
    <td class="uncoveredLine">  if (!BB->getParent()->getFunction().hasProfileData())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1381</td>
    <td class="uncoveredLine">    return BranchProbability(StaticLikelyProb, 100);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1382</td>
    <td class="uncoveredLine">  if (BB->succ_size() == 2) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1383</td>
    <td class="uncoveredLine">    const MachineBasicBlock *Succ1 = *BB->succ_begin();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1384</td>
    <td class="uncoveredLine">    const MachineBasicBlock *Succ2 = *(BB->succ_begin() + 1);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1385</td>
    <td class="uncoveredLine">    if (Succ1->isSuccessor(Succ2) || Succ2->isSuccessor(Succ1)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1386</td>
    <td class="">      /* See case 1 below for the cost analysis. For BB->Succ to</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1387</td>
    <td class="">       * be taken with smaller cost, the following needs to hold:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1388</td>
    <td class="">       *   Prob(BB->Succ) > 2 * Prob(BB->Pred)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1389</td>
    <td class="">       *   So the threshold T in the calculation below</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1390</td>
    <td class="">       *   (1-T) * Prob(BB->Succ) > T * Prob(BB->Pred)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1391</td>
    <td class="">       *   So T / (1 - T) = 2, Yielding T = 2/3</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1392</td>
    <td class="">       * Also adding user specified branch bias, we have</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1393</td>
    <td class="">       *   T = (2/3)*(ProfileLikelyProb/50)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1394</td>
    <td class="">       *     = (2*ProfileLikelyProb)/150)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1395</td>
    <td class="">       */</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1396</td>
    <td class="uncoveredLine">      return BranchProbability(2 * ProfileLikelyProb, 150);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1397</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1398</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1399</td>
    <td class="uncoveredLine">  return BranchProbability(ProfileLikelyProb, 100);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1400</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1401</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1402</td>
    <td class="">/// Checks to see if the layout candidate block \p Succ has a better layout</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1403</td>
    <td class="">/// predecessor than \c BB. If yes, returns true.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1404</td>
    <td class="">/// \p SuccProb: The probability adjusted for only remaining blocks.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1405</td>
    <td class="">///   Only used for logging</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1406</td>
    <td class="">/// \p RealSuccProb: The un-adjusted probability.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1407</td>
    <td class="">/// \p Chain: The chain that BB belongs to and Succ is being considered for.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1408</td>
    <td class="">/// \p BlockFilter: if non-null, the set of blocks that make up the loop being</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1409</td>
    <td class="">///    considered</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1410</td>
    <td class="uncoveredLine">bool MachineBlockPlacement::hasBetterLayoutPredecessor(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1411</td>
    <td class="">    const MachineBasicBlock *BB, const MachineBasicBlock *Succ,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1412</td>
    <td class="">    const BlockChain &SuccChain, BranchProbability SuccProb,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1413</td>
    <td class="">    BranchProbability RealSuccProb, const BlockChain &Chain,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1414</td>
    <td class="">    const BlockFilterSet *BlockFilter) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1415</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1416</td>
    <td class="">  // There isn't a better layout when there are no unscheduled predecessors.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1417</td>
    <td class="uncoveredLine">  if (SuccChain.UnscheduledPredecessors == 0)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1418</td>
    <td class="uncoveredLine">    return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1419</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1420</td>
    <td class="">  // There are two basic scenarios here:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1421</td>
    <td class="">  // -------------------------------------</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1422</td>
    <td class="">  // Case 1: triangular shape CFG (if-then):</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1423</td>
    <td class="">  //     BB</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1424</td>
    <td class="">  //     | \</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1425</td>
    <td class="">  //     |  \</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1426</td>
    <td class="">  //     |   Pred</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1427</td>
    <td class="">  //     |   /</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1428</td>
    <td class="">  //     Succ</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1429</td>
    <td class="">  // In this case, we are evaluating whether to select edge -> Succ, e.g.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1430</td>
    <td class="">  // set Succ as the layout successor of BB. Picking Succ as BB's</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1431</td>
    <td class="">  // successor breaks the CFG constraints (FIXME: define these constraints).</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1432</td>
    <td class="">  // With this layout, Pred BB</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1433</td>
    <td class="">  // is forced to be outlined, so the overall cost will be cost of the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1434</td>
    <td class="">  // branch taken from BB to Pred, plus the cost of back taken branch</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1435</td>
    <td class="">  // from Pred to Succ, as well as the additional cost associated</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1436</td>
    <td class="">  // with the needed unconditional jump instruction from Pred To Succ.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1437</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1438</td>
    <td class="">  // The cost of the topological order layout is the taken branch cost</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1439</td>
    <td class="">  // from BB to Succ, so to make BB->Succ a viable candidate, the following</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1440</td>
    <td class="">  // must hold:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1441</td>
    <td class="">  //     2 * freq(BB->Pred) * taken_branch_cost + unconditional_jump_cost</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1442</td>
    <td class="">  //      < freq(BB->Succ) *  taken_branch_cost.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1443</td>
    <td class="">  // Ignoring unconditional jump cost, we get</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1444</td>
    <td class="">  //    freq(BB->Succ) > 2 * freq(BB->Pred), i.e.,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1445</td>
    <td class="">  //    prob(BB->Succ) > 2 * prob(BB->Pred)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1446</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1447</td>
    <td class="">  // When real profile data is available, we can precisely compute the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1448</td>
    <td class="">  // probability threshold that is needed for edge BB->Succ to be considered.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1449</td>
    <td class="">  // Without profile data, the heuristic requires the branch bias to be</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1450</td>
    <td class="">  // a lot larger to make sure the signal is very strong (e.g. 80% default).</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1451</td>
    <td class="">  // -----------------------------------------------------------------</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1452</td>
    <td class="">  // Case 2: diamond like CFG (if-then-else):</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1453</td>
    <td class="">  //     S</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1454</td>
    <td class="">  //    / \</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1455</td>
    <td class="">  //   |   \</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1456</td>
    <td class="">  //  BB    Pred</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1457</td>
    <td class="">  //   \    /</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1458</td>
    <td class="">  //    Succ</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1459</td>
    <td class="">  //    ..</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1460</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1461</td>
    <td class="">  // The current block is BB and edge BB->Succ is now being evaluated.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1462</td>
    <td class="">  // Note that edge S->BB was previously already selected because</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1463</td>
    <td class="">  // prob(S->BB) > prob(S->Pred).</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1464</td>
    <td class="">  // At this point, 2 blocks can be placed after BB: Pred or Succ. If we</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1465</td>
    <td class="">  // choose Pred, we will have a topological ordering as shown on the left</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1466</td>
    <td class="">  // in the picture below. If we choose Succ, we have the solution as shown</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1467</td>
    <td class="">  // on the right:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1468</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1469</td>
    <td class="">  //   topo-order:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1470</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1471</td>
    <td class="">  //       S-----                             ---S</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1472</td>
    <td class="">  //       |    |                             |  |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1473</td>
    <td class="">  //    ---BB   |                             |  BB</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1474</td>
    <td class="">  //    |       |                             |  |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1475</td>
    <td class="">  //    |  Pred--                             |  Succ--</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1476</td>
    <td class="">  //    |  |                                  |       |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1477</td>
    <td class="">  //    ---Succ                               ---Pred--</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1478</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1479</td>
    <td class="">  // cost = freq(S->Pred) + freq(BB->Succ)    cost = 2 * freq (S->Pred)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1480</td>
    <td class="">  //      = freq(S->Pred) + freq(S->BB)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1481</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1482</td>
    <td class="">  // If we have profile data (i.e, branch probabilities can be trusted), the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1483</td>
    <td class="">  // cost (number of taken branches) with layout S->BB->Succ->Pred is 2 *</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1484</td>
    <td class="">  // freq(S->Pred) while the cost of topo order is freq(S->Pred) + freq(S->BB).</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1485</td>
    <td class="">  // We know Prob(S->BB) > Prob(S->Pred), so freq(S->BB) > freq(S->Pred), which</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1486</td>
    <td class="">  // means the cost of topological order is greater.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1487</td>
    <td class="">  // When profile data is not available, however, we need to be more</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1488</td>
    <td class="">  // conservative. If the branch prediction is wrong, breaking the topo-order</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1489</td>
    <td class="">  // will actually yield a layout with large cost. For this reason, we need</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1490</td>
    <td class="">  // strong biased branch at block S with Prob(S->BB) in order to select</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1491</td>
    <td class="">  // BB->Succ. This is equivalent to looking the CFG backward with backward</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1492</td>
    <td class="">  // edge: Prob(Succ->BB) needs to >= HotProb in order to be selected (without</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1493</td>
    <td class="">  // profile data).</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1494</td>
    <td class="">  // --------------------------------------------------------------------------</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1495</td>
    <td class="">  // Case 3: forked diamond</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1496</td>
    <td class="">  //       S</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1497</td>
    <td class="">  //      / \</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1498</td>
    <td class="">  //     /   \</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1499</td>
    <td class="">  //   BB    Pred</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1500</td>
    <td class="">  //   | \   / |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1501</td>
    <td class="">  //   |  \ /  |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1502</td>
    <td class="">  //   |   X   |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1503</td>
    <td class="">  //   |  / \  |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1504</td>
    <td class="">  //   | /   \ |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1505</td>
    <td class="">  //   S1     S2</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1506</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1507</td>
    <td class="">  // The current block is BB and edge BB->S1 is now being evaluated.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1508</td>
    <td class="">  // As above S->BB was already selected because</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1509</td>
    <td class="">  // prob(S->BB) > prob(S->Pred). Assume that prob(BB->S1) >= prob(BB->S2).</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1510</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1511</td>
    <td class="">  // topo-order:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1512</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1513</td>
    <td class="">  //     S-------|                     ---S</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1514</td>
    <td class="">  //     |       |                     |  |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1515</td>
    <td class="">  //  ---BB      |                     |  BB</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1516</td>
    <td class="">  //  |          |                     |  |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1517</td>
    <td class="">  //  |  Pred----|                     |  S1----</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1518</td>
    <td class="">  //  |  |                             |       |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1519</td>
    <td class="">  //  --(S1 or S2)                     ---Pred--</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1520</td>
    <td class="">  //                                        |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1521</td>
    <td class="">  //                                       S2</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1522</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1523</td>
    <td class="">  // topo-cost = freq(S->Pred) + freq(BB->S1) + freq(BB->S2)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1524</td>
    <td class="">  //    + min(freq(Pred->S1), freq(Pred->S2))</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1525</td>
    <td class="">  // Non-topo-order cost:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1526</td>
    <td class="">  // non-topo-cost = 2 * freq(S->Pred) + freq(BB->S2).</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1527</td>
    <td class="">  // To be conservative, we can assume that min(freq(Pred->S1), freq(Pred->S2))</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1528</td>
    <td class="">  // is 0. Then the non topo layout is better when</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1529</td>
    <td class="">  // freq(S->Pred) < freq(BB->S1).</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1530</td>
    <td class="">  // This is exactly what is checked below.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1531</td>
    <td class="">  // Note there are other shapes that apply (Pred may not be a single block,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1532</td>
    <td class="">  // but they all fit this general pattern.)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1533</td>
    <td class="uncoveredLine">  BranchProbability HotProb = getLayoutSuccessorProbThreshold(BB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1534</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1535</td>
    <td class="">  // Make sure that a hot successor doesn't have a globally more</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1536</td>
    <td class="">  // important predecessor.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1537</td>
    <td class="uncoveredLine">  BlockFrequency CandidateEdgeFreq = MBFI->getBlockFreq(BB) * RealSuccProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1538</td>
    <td class="uncoveredLine">  bool BadCFGConflict = false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1539</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1540</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *Pred : Succ->predecessors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1541</td>
    <td class="uncoveredLine">    BlockChain *PredChain = BlockToChain[Pred];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1542</td>
    <td class="uncoveredLine">    if (Pred == Succ || PredChain == &SuccChain ||</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1543</td>
    <td class="uncoveredLine">        (BlockFilter && !BlockFilter->count(Pred)) ||</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1544</td>
    <td class="uncoveredLine">        PredChain == &Chain || Pred != *std::prev(PredChain->end()) ||</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1545</td>
    <td class="">        // This check is redundant except for look ahead. This function is</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1546</td>
    <td class="">        // called for lookahead by isProfitableToTailDup when BB hasn't been</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1547</td>
    <td class="">        // placed yet.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1548</td>
    <td class="uncoveredLine">        (Pred == BB))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1549</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1550</td>
    <td class="">    // Do backward checking.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1551</td>
    <td class="">    // For all cases above, we need a backward checking to filter out edges that</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1552</td>
    <td class="">    // are not 'strongly' biased.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1553</td>
    <td class="">    // BB  Pred</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1554</td>
    <td class="">    //  \ /</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1555</td>
    <td class="">    //  Succ</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1556</td>
    <td class="">    // We select edge BB->Succ if</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1557</td>
    <td class="">    //      freq(BB->Succ) > freq(Succ) * HotProb</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1558</td>
    <td class="">    //      i.e. freq(BB->Succ) > freq(BB->Succ) * HotProb + freq(Pred->Succ) *</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1559</td>
    <td class="">    //      HotProb</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1560</td>
    <td class="">    //      i.e. freq((BB->Succ) * (1 - HotProb) > freq(Pred->Succ) * HotProb</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1561</td>
    <td class="">    // Case 1 is covered too, because the first equation reduces to:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1562</td>
    <td class="">    // prob(BB->Succ) > HotProb. (freq(Succ) = freq(BB) for a triangle)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1563</td>
    <td class="">    BlockFrequency PredEdgeFreq =</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1564</td>
    <td class="uncoveredLine">        MBFI->getBlockFreq(Pred) * MBPI->getEdgeProbability(Pred, Succ);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1565</td>
    <td class="uncoveredLine">    if (PredEdgeFreq * HotProb >= CandidateEdgeFreq * HotProb.getCompl()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1566</td>
    <td class="uncoveredLine">      BadCFGConflict = true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1567</td>
    <td class="uncoveredLine">      break;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1568</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1569</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1570</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1571</td>
    <td class="uncoveredLine">  if (BadCFGConflict) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1572</td>
    <td class="uncoveredLine">    LLVM_DEBUG(dbgs() << "    Not a candidate: " << getBlockName(Succ) << " -> "</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1573</td>
    <td class="">                      << SuccProb << " (prob) (non-cold CFG conflict)\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1574</td>
    <td class="uncoveredLine">    return true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1575</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1576</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1577</td>
    <td class="uncoveredLine">  return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1578</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1579</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1580</td>
    <td class="">/// Select the best successor for a block.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1581</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1582</td>
    <td class="">/// This looks across all successors of a particular block and attempts to</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1583</td>
    <td class="">/// select the "best" one to be the layout successor. It only considers direct</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1584</td>
    <td class="">/// successors which also pass the block filter. It will attempt to avoid</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1585</td>
    <td class="">/// breaking CFG structure, but cave and break such structures in the case of</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1586</td>
    <td class="">/// very hot successor edges.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1587</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1588</td>
    <td class="">/// \returns The best successor block found, or null if none are viable, along</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1589</td>
    <td class="">/// with a boolean indicating if tail duplication is necessary.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1590</td>
    <td class="">MachineBlockPlacement::BlockAndTailDupResult</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1591</td>
    <td class="uncoveredLine">MachineBlockPlacement::selectBestSuccessor(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1592</td>
    <td class="">    const MachineBasicBlock *BB, const BlockChain &Chain,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1593</td>
    <td class="">    const BlockFilterSet *BlockFilter) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1594</td>
    <td class="uncoveredLine">  const BranchProbability HotProb(StaticLikelyProb, 100);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1595</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1596</td>
    <td class="uncoveredLine">  BlockAndTailDupResult BestSucc = { nullptr, false };</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1597</td>
    <td class="uncoveredLine">  auto BestProb = BranchProbability::getZero();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1598</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1599</td>
    <td class="uncoveredLine">  SmallVector<MachineBasicBlock *, 4> Successors;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1600</td>
    <td class="">  auto AdjustedSumProb =</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1601</td>
    <td class="uncoveredLine">      collectViableSuccessors(BB, Chain, BlockFilter, Successors);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1602</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1603</td>
    <td class="uncoveredLine">  LLVM_DEBUG(dbgs() << "Selecting best successor for: " << getBlockName(BB)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1604</td>
    <td class="">                    << "\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1605</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1606</td>
    <td class="">  // if we already precomputed the best successor for BB, return that if still</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1607</td>
    <td class="">  // applicable.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1608</td>
    <td class="uncoveredLine">  auto FoundEdge = ComputedEdges.find(BB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1609</td>
    <td class="uncoveredLine">  if (FoundEdge != ComputedEdges.end()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1610</td>
    <td class="uncoveredLine">    MachineBasicBlock *Succ = FoundEdge->second.BB;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1611</td>
    <td class="uncoveredLine">    ComputedEdges.erase(FoundEdge);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1612</td>
    <td class="uncoveredLine">    BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1613</td>
    <td class="uncoveredLine">    if (BB->isSuccessor(Succ) && (!BlockFilter || BlockFilter->count(Succ)) &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1614</td>
    <td class="uncoveredLine">        SuccChain != &Chain && Succ == *SuccChain->begin())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1615</td>
    <td class="uncoveredLine">      return FoundEdge->second;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1616</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1617</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1618</td>
    <td class="">  // if BB is part of a trellis, Use the trellis to determine the optimal</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1619</td>
    <td class="">  // fallthrough edges</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1620</td>
    <td class="uncoveredLine">  if (isTrellis(BB, Successors, Chain, BlockFilter))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1621</td>
    <td class="uncoveredLine">    return getBestTrellisSuccessor(BB, Successors, AdjustedSumProb, Chain,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1622</td>
    <td class="uncoveredLine">                                   BlockFilter);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1623</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1624</td>
    <td class="">  // For blocks with CFG violations, we may be able to lay them out anyway with</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1625</td>
    <td class="">  // tail-duplication. We keep this vector so we can perform the probability</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1626</td>
    <td class="">  // calculations the minimum number of times.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1627</td>
    <td class="">  SmallVector<std::pair<BranchProbability, MachineBasicBlock *>, 4></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1628</td>
    <td class="uncoveredLine">      DupCandidates;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1629</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *Succ : Successors) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1630</td>
    <td class="uncoveredLine">    auto RealSuccProb = MBPI->getEdgeProbability(BB, Succ);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1631</td>
    <td class="">    BranchProbability SuccProb =</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1632</td>
    <td class="uncoveredLine">        getAdjustedProbability(RealSuccProb, AdjustedSumProb);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1633</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1634</td>
    <td class="uncoveredLine">    BlockChain &SuccChain = *BlockToChain[Succ];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1635</td>
    <td class="">    // Skip the edge \c BB->Succ if block \c Succ has a better layout</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1636</td>
    <td class="">    // predecessor that yields lower global cost.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1637</td>
    <td class="uncoveredLine">    if (hasBetterLayoutPredecessor(BB, Succ, SuccChain, SuccProb, RealSuccProb,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1638</td>
    <td class="">                                   Chain, BlockFilter)) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1639</td>
    <td class="">      // If tail duplication would make Succ profitable, place it.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1640</td>
    <td class="uncoveredLine">      if (allowTailDupPlacement() && shouldTailDuplicate(Succ))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1641</td>
    <td class="uncoveredLine">        DupCandidates.emplace_back(SuccProb, Succ);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1642</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1643</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1644</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1645</td>
    <td class="uncoveredLine">    LLVM_DEBUG(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1646</td>
    <td class="">        dbgs() << "    Candidate: " << getBlockName(Succ)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1647</td>
    <td class="">               << ", probability: " << SuccProb</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1648</td>
    <td class="">               << (SuccChain.UnscheduledPredecessors != 0 ? " (CFG break)" : "")</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1649</td>
    <td class="">               << "\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1650</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1651</td>
    <td class="uncoveredLine">    if (BestSucc.BB && BestProb >= SuccProb) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1652</td>
    <td class="uncoveredLine">      LLVM_DEBUG(dbgs() << "    Not the best candidate, continuing\n");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1653</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1654</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1655</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1656</td>
    <td class="uncoveredLine">    LLVM_DEBUG(dbgs() << "    Setting it as best candidate\n");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1657</td>
    <td class="uncoveredLine">    BestSucc.BB = Succ;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1658</td>
    <td class="uncoveredLine">    BestProb = SuccProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1659</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1660</td>
    <td class="">  // Handle the tail duplication candidates in order of decreasing probability.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1661</td>
    <td class="">  // Stop at the first one that is profitable. Also stop if they are less</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1662</td>
    <td class="">  // profitable than BestSucc. Position is important because we preserve it and</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1663</td>
    <td class="">  // prefer first best match. Here we aren't comparing in order, so we capture</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1664</td>
    <td class="">  // the position instead.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1665</td>
    <td class="uncoveredLine">  llvm::stable_sort(DupCandidates,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1666</td>
    <td class="uncoveredLine">                    [](std::tuple<BranchProbability, MachineBasicBlock *> L,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1667</td>
    <td class="">                       std::tuple<BranchProbability, MachineBasicBlock *> R) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1668</td>
    <td class="uncoveredLine">                      return std::get<0>(L) > std::get<0>(R);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1669</td>
    <td class="">                    });</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1670</td>
    <td class="uncoveredLine">  for (auto &Tup : DupCandidates) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1671</td>
    <td class="uncoveredLine">    BranchProbability DupProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1672</td>
    <td class="">    MachineBasicBlock *Succ;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1673</td>
    <td class="uncoveredLine">    std::tie(DupProb, Succ) = Tup;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1674</td>
    <td class="uncoveredLine">    if (DupProb < BestProb)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1675</td>
    <td class="uncoveredLine">      break;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1676</td>
    <td class="uncoveredLine">    if (canTailDuplicateUnplacedPreds(BB, Succ, Chain, BlockFilter)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1677</td>
    <td class="uncoveredLine">        && (isProfitableToTailDup(BB, Succ, BestProb, Chain, BlockFilter))) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1678</td>
    <td class="uncoveredLine">      LLVM_DEBUG(dbgs() << "    Candidate: " << getBlockName(Succ)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1679</td>
    <td class="">                        << ", probability: " << DupProb</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1680</td>
    <td class="">                        << " (Tail Duplicate)\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1681</td>
    <td class="uncoveredLine">      BestSucc.BB = Succ;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1682</td>
    <td class="uncoveredLine">      BestSucc.ShouldTailDup = true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1683</td>
    <td class="uncoveredLine">      break;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1684</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1685</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1686</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1687</td>
    <td class="uncoveredLine">  if (BestSucc.BB)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1688</td>
    <td class="uncoveredLine">    LLVM_DEBUG(dbgs() << "    Selected: " << getBlockName(BestSucc.BB) << "\n");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1689</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1690</td>
    <td class="uncoveredLine">  return BestSucc;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1691</td>
    <td class="uncoveredLine">}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1692</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1693</td>
    <td class="">/// Select the best block from a worklist.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1694</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1695</td>
    <td class="">/// This looks through the provided worklist as a list of candidate basic</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1696</td>
    <td class="">/// blocks and select the most profitable one to place. The definition of</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1697</td>
    <td class="">/// profitable only really makes sense in the context of a loop. This returns</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1698</td>
    <td class="">/// the most frequently visited block in the worklist, which in the case of</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1699</td>
    <td class="">/// a loop, is the one most desirable to be physically close to the rest of the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1700</td>
    <td class="">/// loop body in order to improve i-cache behavior.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1701</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1702</td>
    <td class="">/// \returns The best block found, or null if none are viable.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1703</td>
    <td class="uncoveredLine">MachineBasicBlock *MachineBlockPlacement::selectBestCandidateBlock(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1704</td>
    <td class="">    const BlockChain &Chain, SmallVectorImpl<MachineBasicBlock *> &WorkList) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1705</td>
    <td class="">  // Once we need to walk the worklist looking for a candidate, cleanup the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1706</td>
    <td class="">  // worklist of already placed entries.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1707</td>
    <td class="">  // FIXME: If this shows up on profiles, it could be folded (at the cost of</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1708</td>
    <td class="">  // some code complexity) into the loop below.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1709</td>
    <td class="uncoveredLine">  llvm::erase_if(WorkList, [&](MachineBasicBlock *BB) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1710</td>
    <td class="uncoveredLine">    return BlockToChain.lookup(BB) == &Chain;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1711</td>
    <td class="">  });</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1712</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1713</td>
    <td class="uncoveredLine">  if (WorkList.empty())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1714</td>
    <td class="uncoveredLine">    return nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1715</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1716</td>
    <td class="uncoveredLine">  bool IsEHPad = WorkList[0]->isEHPad();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1717</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1718</td>
    <td class="uncoveredLine">  MachineBasicBlock *BestBlock = nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1719</td>
    <td class="uncoveredLine">  BlockFrequency BestFreq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1720</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *MBB : WorkList) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1721</td>
    <td class="uncoveredLine">    assert(MBB->isEHPad() == IsEHPad &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1722</td>
    <td class="">           "EHPad mismatch between block and work list.");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1723</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1724</td>
    <td class="uncoveredLine">    BlockChain &SuccChain = *BlockToChain[MBB];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1725</td>
    <td class="uncoveredLine">    if (&SuccChain == &Chain)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1726</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1727</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1728</td>
    <td class="uncoveredLine">    assert(SuccChain.UnscheduledPredecessors == 0 &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1729</td>
    <td class="">           "Found CFG-violating block");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1730</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1731</td>
    <td class="uncoveredLine">    BlockFrequency CandidateFreq = MBFI->getBlockFreq(MBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1732</td>
    <td class="uncoveredLine">    LLVM_DEBUG(dbgs() << "    " << getBlockName(MBB) << " -> ";</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1733</td>
    <td class="">               MBFI->printBlockFreq(dbgs(), CandidateFreq) << " (freq)\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1734</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1735</td>
    <td class="">    // For ehpad, we layout the least probable first as to avoid jumping back</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1736</td>
    <td class="">    // from least probable landingpads to more probable ones.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1737</td>
    <td class="">    //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1738</td>
    <td class="">    // FIXME: Using probability is probably (!) not the best way to achieve</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1739</td>
    <td class="">    // this. We should probably have a more principled approach to layout</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1740</td>
    <td class="">    // cleanup code.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1741</td>
    <td class="">    //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1742</td>
    <td class="">    // The goal is to get:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1743</td>
    <td class="">    //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1744</td>
    <td class="">    //                 +--------------------------+</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1745</td>
    <td class="">    //                 |                          V</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1746</td>
    <td class="">    // InnerLp -> InnerCleanup    OuterLp -> OuterCleanup -> Resume</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1747</td>
    <td class="">    //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1748</td>
    <td class="">    // Rather than:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1749</td>
    <td class="">    //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1750</td>
    <td class="">    //                 +-------------------------------------+</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1751</td>
    <td class="">    //                 V                                     |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1752</td>
    <td class="">    // OuterLp -> OuterCleanup -> Resume     InnerLp -> InnerCleanup</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1753</td>
    <td class="uncoveredLine">    if (BestBlock && (IsEHPad ^ (BestFreq >= CandidateFreq)))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1754</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1755</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1756</td>
    <td class="uncoveredLine">    BestBlock = MBB;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1757</td>
    <td class="uncoveredLine">    BestFreq = CandidateFreq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1758</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1759</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1760</td>
    <td class="uncoveredLine">  return BestBlock;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1761</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1762</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1763</td>
    <td class="">/// Retrieve the first unplaced basic block.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1764</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1765</td>
    <td class="">/// This routine is called when we are unable to use the CFG to walk through</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1766</td>
    <td class="">/// all of the basic blocks and form a chain due to unnatural loops in the CFG.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1767</td>
    <td class="">/// We walk through the function's blocks in order, starting from the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1768</td>
    <td class="">/// LastUnplacedBlockIt. We update this iterator on each call to avoid</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1769</td>
    <td class="">/// re-scanning the entire sequence on repeated calls to this routine.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1770</td>
    <td class="uncoveredLine">MachineBasicBlock *MachineBlockPlacement::getFirstUnplacedBlock(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1771</td>
    <td class="">    const BlockChain &PlacedChain,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1772</td>
    <td class="">    MachineFunction::iterator &PrevUnplacedBlockIt,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1773</td>
    <td class="">    const BlockFilterSet *BlockFilter) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1774</td>
    <td class="uncoveredLine">  for (MachineFunction::iterator I = PrevUnplacedBlockIt, E = F->end(); I != E;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1775</td>
    <td class="uncoveredLine">       ++I) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1776</td>
    <td class="uncoveredLine">    if (BlockFilter && !BlockFilter->count(&*I))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1777</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1778</td>
    <td class="uncoveredLine">    if (BlockToChain[&*I] != &PlacedChain) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1779</td>
    <td class="uncoveredLine">      PrevUnplacedBlockIt = I;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1780</td>
    <td class="">      // Now select the head of the chain to which the unplaced block belongs</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1781</td>
    <td class="">      // as the block to place. This will force the entire chain to be placed,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1782</td>
    <td class="">      // and satisfies the requirements of merging chains.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1783</td>
    <td class="uncoveredLine">      return *BlockToChain[&*I]->begin();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1784</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1785</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1786</td>
    <td class="uncoveredLine">  return nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1787</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1788</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1789</td>
    <td class="uncoveredLine">void MachineBlockPlacement::fillWorkLists(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1790</td>
    <td class="">    const MachineBasicBlock *MBB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1791</td>
    <td class="">    SmallPtrSetImpl<BlockChain *> &UpdatedPreds,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1792</td>
    <td class="">    const BlockFilterSet *BlockFilter = nullptr) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1793</td>
    <td class="uncoveredLine">  BlockChain &Chain = *BlockToChain[MBB];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1794</td>
    <td class="uncoveredLine">  if (!UpdatedPreds.insert(&Chain).second)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1795</td>
    <td class="uncoveredLine">    return;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1796</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1797</td>
    <td class="uncoveredLine">  assert(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1798</td>
    <td class="">      Chain.UnscheduledPredecessors == 0 &&</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1799</td>
    <td class="">      "Attempting to place block with unscheduled predecessors in worklist.");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1800</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *ChainBB : Chain) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1801</td>
    <td class="uncoveredLine">    assert(BlockToChain[ChainBB] == &Chain &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1802</td>
    <td class="">           "Block in chain doesn't match BlockToChain map.");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1803</td>
    <td class="uncoveredLine">    for (MachineBasicBlock *Pred : ChainBB->predecessors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1804</td>
    <td class="uncoveredLine">      if (BlockFilter && !BlockFilter->count(Pred))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1805</td>
    <td class="uncoveredLine">        continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1806</td>
    <td class="uncoveredLine">      if (BlockToChain[Pred] == &Chain)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1807</td>
    <td class="uncoveredLine">        continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1808</td>
    <td class="uncoveredLine">      ++Chain.UnscheduledPredecessors;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1809</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1810</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1811</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1812</td>
    <td class="uncoveredLine">  if (Chain.UnscheduledPredecessors != 0)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1813</td>
    <td class="uncoveredLine">    return;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1814</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1815</td>
    <td class="uncoveredLine">  MachineBasicBlock *BB = *Chain.begin();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1816</td>
    <td class="uncoveredLine">  if (BB->isEHPad())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1817</td>
    <td class="uncoveredLine">    EHPadWorkList.push_back(BB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1818</td>
    <td class="">  else</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1819</td>
    <td class="uncoveredLine">    BlockWorkList.push_back(BB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1820</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1821</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1822</td>
    <td class="uncoveredLine">void MachineBlockPlacement::buildChain(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1823</td>
    <td class="">    const MachineBasicBlock *HeadBB, BlockChain &Chain,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1824</td>
    <td class="">    BlockFilterSet *BlockFilter) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1825</td>
    <td class="uncoveredLine">  assert(HeadBB && "BB must not be null.\n");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1826</td>
    <td class="uncoveredLine">  assert(BlockToChain[HeadBB] == &Chain && "BlockToChainMap mis-match.\n");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1827</td>
    <td class="uncoveredLine">  MachineFunction::iterator PrevUnplacedBlockIt = F->begin();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1828</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1829</td>
    <td class="uncoveredLine">  const MachineBasicBlock *LoopHeaderBB = HeadBB;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1830</td>
    <td class="uncoveredLine">  markChainSuccessors(Chain, LoopHeaderBB, BlockFilter);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1831</td>
    <td class="uncoveredLine">  MachineBasicBlock *BB = *std::prev(Chain.end());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1832</td>
    <td class="">  while (true) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1833</td>
    <td class="uncoveredLine">    assert(BB && "null block found at end of chain in loop.");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1834</td>
    <td class="uncoveredLine">    assert(BlockToChain[BB] == &Chain && "BlockToChainMap mis-match in loop.");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1835</td>
    <td class="uncoveredLine">    assert(*std::prev(Chain.end()) == BB && "BB Not found at end of chain.");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1836</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1837</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1838</td>
    <td class="">    // Look for the best viable successor if there is one to place immediately</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1839</td>
    <td class="">    // after this block.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1840</td>
    <td class="uncoveredLine">    auto Result = selectBestSuccessor(BB, Chain, BlockFilter);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1841</td>
    <td class="uncoveredLine">    MachineBasicBlock* BestSucc = Result.BB;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1842</td>
    <td class="uncoveredLine">    bool ShouldTailDup = Result.ShouldTailDup;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1843</td>
    <td class="uncoveredLine">    if (allowTailDupPlacement())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1844</td>
    <td class="uncoveredLine">      ShouldTailDup |= (BestSucc && canTailDuplicateUnplacedPreds(BB, BestSucc,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1845</td>
    <td class="">                                                                  Chain,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1846</td>
    <td class="">                                                                  BlockFilter));</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1847</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1848</td>
    <td class="">    // If an immediate successor isn't available, look for the best viable</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1849</td>
    <td class="">    // block among those we've identified as not violating the loop's CFG at</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1850</td>
    <td class="">    // this point. This won't be a fallthrough, but it will increase locality.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1851</td>
    <td class="uncoveredLine">    if (!BestSucc)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1852</td>
    <td class="uncoveredLine">      BestSucc = selectBestCandidateBlock(Chain, BlockWorkList);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1853</td>
    <td class="uncoveredLine">    if (!BestSucc)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1854</td>
    <td class="uncoveredLine">      BestSucc = selectBestCandidateBlock(Chain, EHPadWorkList);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1855</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1856</td>
    <td class="uncoveredLine">    if (!BestSucc) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1857</td>
    <td class="uncoveredLine">      BestSucc = getFirstUnplacedBlock(Chain, PrevUnplacedBlockIt, BlockFilter);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1858</td>
    <td class="uncoveredLine">      if (!BestSucc)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1859</td>
    <td class="uncoveredLine">        break;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1860</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1861</td>
    <td class="uncoveredLine">      LLVM_DEBUG(dbgs() << "Unnatural loop CFG detected, forcibly merging the "</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1862</td>
    <td class="">                           "layout successor until the CFG reduces\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1863</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1864</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1865</td>
    <td class="">    // Placement may have changed tail duplication opportunities.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1866</td>
    <td class="">    // Check for that now.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1867</td>
    <td class="uncoveredLine">    if (allowTailDupPlacement() && BestSucc && ShouldTailDup) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1868</td>
    <td class="uncoveredLine">      repeatedlyTailDuplicateBlock(BestSucc, BB, LoopHeaderBB, Chain,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1869</td>
    <td class="">                                       BlockFilter, PrevUnplacedBlockIt);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1870</td>
    <td class="">      // If the chosen successor was duplicated into BB, don't bother laying</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1871</td>
    <td class="">      // it out, just go round the loop again with BB as the chain end.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1872</td>
    <td class="uncoveredLine">      if (!BB->isSuccessor(BestSucc))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1873</td>
    <td class="uncoveredLine">        continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1874</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1875</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1876</td>
    <td class="">    // Place this block, updating the datastructures to reflect its placement.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1877</td>
    <td class="uncoveredLine">    BlockChain &SuccChain = *BlockToChain[BestSucc];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1878</td>
    <td class="">    // Zero out UnscheduledPredecessors for the successor we're about to merge in case</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1879</td>
    <td class="">    // we selected a successor that didn't fit naturally into the CFG.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1880</td>
    <td class="uncoveredLine">    SuccChain.UnscheduledPredecessors = 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1881</td>
    <td class="uncoveredLine">    LLVM_DEBUG(dbgs() << "Merging from " << getBlockName(BB) << " to "</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1882</td>
    <td class="">                      << getBlockName(BestSucc) << "\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1883</td>
    <td class="uncoveredLine">    markChainSuccessors(SuccChain, LoopHeaderBB, BlockFilter);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1884</td>
    <td class="uncoveredLine">    Chain.merge(BestSucc, &SuccChain);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1885</td>
    <td class="uncoveredLine">    BB = *std::prev(Chain.end());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1886</td>
    <td class="uncoveredLine">  }</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1887</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1888</td>
    <td class="uncoveredLine">  LLVM_DEBUG(dbgs() << "Finished forming chain for header block "</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1889</td>
    <td class="">                    << getBlockName(*Chain.begin()) << "\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1890</td>
    <td class="uncoveredLine">}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1891</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1892</td>
    <td class="">// If bottom of block BB has only one successor OldTop, in most cases it is</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1893</td>
    <td class="">// profitable to move it before OldTop, except the following case:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1894</td>
    <td class="">//</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1895</td>
    <td class="">//     -->OldTop<-</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1896</td>
    <td class="">//     |    .    |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1897</td>
    <td class="">//     |    .    |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1898</td>
    <td class="">//     |    .    |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1899</td>
    <td class="">//     ---Pred   |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1900</td>
    <td class="">//          |    |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1901</td>
    <td class="">//         BB-----</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1902</td>
    <td class="">//</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1903</td>
    <td class="">// If BB is moved before OldTop, Pred needs a taken branch to BB, and it can't</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1904</td>
    <td class="">// layout the other successor below it, so it can't reduce taken branch.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1905</td>
    <td class="">// In this case we keep its original layout.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1906</td>
    <td class="">bool</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1907</td>
    <td class="uncoveredLine">MachineBlockPlacement::canMoveBottomBlockToTop(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1908</td>
    <td class="">    const MachineBasicBlock *BottomBlock,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1909</td>
    <td class="">    const MachineBasicBlock *OldTop) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1910</td>
    <td class="uncoveredLine">  if (BottomBlock->pred_size() != 1)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1911</td>
    <td class="uncoveredLine">    return true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1912</td>
    <td class="uncoveredLine">  MachineBasicBlock *Pred = *BottomBlock->pred_begin();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1913</td>
    <td class="uncoveredLine">  if (Pred->succ_size() != 2)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1914</td>
    <td class="uncoveredLine">    return true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1915</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1916</td>
    <td class="uncoveredLine">  MachineBasicBlock *OtherBB = *Pred->succ_begin();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1917</td>
    <td class="uncoveredLine">  if (OtherBB == BottomBlock)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1918</td>
    <td class="uncoveredLine">    OtherBB = *Pred->succ_rbegin();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1919</td>
    <td class="uncoveredLine">  if (OtherBB == OldTop)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1920</td>
    <td class="uncoveredLine">    return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1921</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1922</td>
    <td class="uncoveredLine">  return true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1923</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1924</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1925</td>
    <td class="">// Find out the possible fall through frequence to the top of a loop.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1926</td>
    <td class="">BlockFrequency</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1927</td>
    <td class="uncoveredLine">MachineBlockPlacement::TopFallThroughFreq(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1928</td>
    <td class="">    const MachineBasicBlock *Top,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1929</td>
    <td class="">    const BlockFilterSet &LoopBlockSet) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1930</td>
    <td class="uncoveredLine">  BlockFrequency MaxFreq = 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1931</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *Pred : Top->predecessors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1932</td>
    <td class="uncoveredLine">    BlockChain *PredChain = BlockToChain[Pred];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1933</td>
    <td class="uncoveredLine">    if (!LoopBlockSet.count(Pred) &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1934</td>
    <td class="uncoveredLine">        (!PredChain || Pred == *std::prev(PredChain->end()))) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1935</td>
    <td class="">      // Found a Pred block can be placed before Top.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1936</td>
    <td class="">      // Check if Top is the best successor of Pred.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1937</td>
    <td class="uncoveredLine">      auto TopProb = MBPI->getEdgeProbability(Pred, Top);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1938</td>
    <td class="uncoveredLine">      bool TopOK = true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1939</td>
    <td class="uncoveredLine">      for (MachineBasicBlock *Succ : Pred->successors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1940</td>
    <td class="uncoveredLine">        auto SuccProb = MBPI->getEdgeProbability(Pred, Succ);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1941</td>
    <td class="uncoveredLine">        BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1942</td>
    <td class="">        // Check if Succ can be placed after Pred.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1943</td>
    <td class="">        // Succ should not be in any chain, or it is the head of some chain.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1944</td>
    <td class="uncoveredLine">        if (!LoopBlockSet.count(Succ) && (SuccProb > TopProb) &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1945</td>
    <td class="uncoveredLine">            (!SuccChain || Succ == *SuccChain->begin())) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1946</td>
    <td class="uncoveredLine">          TopOK = false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1947</td>
    <td class="uncoveredLine">          break;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1948</td>
    <td class="">        }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1949</td>
    <td class="">      }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1950</td>
    <td class="uncoveredLine">      if (TopOK) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1951</td>
    <td class="uncoveredLine">        BlockFrequency EdgeFreq = MBFI->getBlockFreq(Pred) *</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1952</td>
    <td class="uncoveredLine">                                  MBPI->getEdgeProbability(Pred, Top);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1953</td>
    <td class="uncoveredLine">        if (EdgeFreq > MaxFreq)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1954</td>
    <td class="uncoveredLine">          MaxFreq = EdgeFreq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1955</td>
    <td class="">      }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1956</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1957</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1958</td>
    <td class="uncoveredLine">  return MaxFreq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1959</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1960</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1961</td>
    <td class="">// Compute the fall through gains when move NewTop before OldTop.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1962</td>
    <td class="">//</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1963</td>
    <td class="">// In following diagram, edges marked as "-" are reduced fallthrough, edges</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1964</td>
    <td class="">// marked as "+" are increased fallthrough, this function computes</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1965</td>
    <td class="">//</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1966</td>
    <td class="">//      SUM(increased fallthrough) - SUM(decreased fallthrough)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1967</td>
    <td class="">//</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1968</td>
    <td class="">//              |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1969</td>
    <td class="">//              | -</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1970</td>
    <td class="">//              V</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1971</td>
    <td class="">//        --->OldTop</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1972</td>
    <td class="">//        |     .</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1973</td>
    <td class="">//        |     .</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1974</td>
    <td class="">//       +|     .    +</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1975</td>
    <td class="">//        |   Pred ---></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1976</td>
    <td class="">//        |     |-</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1977</td>
    <td class="">//        |     V</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1978</td>
    <td class="">//        --- NewTop <---</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1979</td>
    <td class="">//              |-</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1980</td>
    <td class="">//              V</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1981</td>
    <td class="">//</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1982</td>
    <td class="">BlockFrequency</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1983</td>
    <td class="uncoveredLine">MachineBlockPlacement::FallThroughGains(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1984</td>
    <td class="">    const MachineBasicBlock *NewTop,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1985</td>
    <td class="">    const MachineBasicBlock *OldTop,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1986</td>
    <td class="">    const MachineBasicBlock *ExitBB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1987</td>
    <td class="">    const BlockFilterSet &LoopBlockSet) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1988</td>
    <td class="uncoveredLine">  BlockFrequency FallThrough2Top = TopFallThroughFreq(OldTop, LoopBlockSet);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1989</td>
    <td class="uncoveredLine">  BlockFrequency FallThrough2Exit = 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1990</td>
    <td class="uncoveredLine">  if (ExitBB)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1991</td>
    <td class="uncoveredLine">    FallThrough2Exit = MBFI->getBlockFreq(NewTop) *</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1992</td>
    <td class="uncoveredLine">        MBPI->getEdgeProbability(NewTop, ExitBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1993</td>
    <td class="uncoveredLine">  BlockFrequency BackEdgeFreq = MBFI->getBlockFreq(NewTop) *</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1994</td>
    <td class="uncoveredLine">      MBPI->getEdgeProbability(NewTop, OldTop);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1995</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1996</td>
    <td class="">  // Find the best Pred of NewTop.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1997</td>
    <td class="uncoveredLine">   MachineBasicBlock *BestPred = nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1998</td>
    <td class="uncoveredLine">   BlockFrequency FallThroughFromPred = 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1999</td>
    <td class="uncoveredLine">   for (MachineBasicBlock *Pred : NewTop->predecessors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2000</td>
    <td class="uncoveredLine">     if (!LoopBlockSet.count(Pred))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2001</td>
    <td class="uncoveredLine">       continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2002</td>
    <td class="uncoveredLine">     BlockChain *PredChain = BlockToChain[Pred];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2003</td>
    <td class="uncoveredLine">     if (!PredChain || Pred == *std::prev(PredChain->end())) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2004</td>
    <td class="uncoveredLine">       BlockFrequency EdgeFreq = MBFI->getBlockFreq(Pred) *</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2005</td>
    <td class="uncoveredLine">           MBPI->getEdgeProbability(Pred, NewTop);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2006</td>
    <td class="uncoveredLine">       if (EdgeFreq > FallThroughFromPred) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2007</td>
    <td class="uncoveredLine">         FallThroughFromPred = EdgeFreq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2008</td>
    <td class="uncoveredLine">         BestPred = Pred;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2009</td>
    <td class="">       }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2010</td>
    <td class="">     }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2011</td>
    <td class="">   }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2012</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2013</td>
    <td class="">   // If NewTop is not placed after Pred, another successor can be placed</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2014</td>
    <td class="">   // after Pred.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2015</td>
    <td class="uncoveredLine">   BlockFrequency NewFreq = 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2016</td>
    <td class="uncoveredLine">   if (BestPred) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2017</td>
    <td class="uncoveredLine">     for (MachineBasicBlock *Succ : BestPred->successors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2018</td>
    <td class="uncoveredLine">       if ((Succ == NewTop) || (Succ == BestPred) || !LoopBlockSet.count(Succ))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2019</td>
    <td class="uncoveredLine">         continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2020</td>
    <td class="uncoveredLine">       if (ComputedEdges.contains(Succ))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2021</td>
    <td class="uncoveredLine">         continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2022</td>
    <td class="uncoveredLine">       BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2023</td>
    <td class="uncoveredLine">       if ((SuccChain && (Succ != *SuccChain->begin())) ||</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2024</td>
    <td class="uncoveredLine">           (SuccChain == BlockToChain[BestPred]))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2025</td>
    <td class="uncoveredLine">         continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2026</td>
    <td class="uncoveredLine">       BlockFrequency EdgeFreq = MBFI->getBlockFreq(BestPred) *</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2027</td>
    <td class="uncoveredLine">           MBPI->getEdgeProbability(BestPred, Succ);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2028</td>
    <td class="uncoveredLine">       if (EdgeFreq > NewFreq)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2029</td>
    <td class="uncoveredLine">         NewFreq = EdgeFreq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2030</td>
    <td class="">     }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2031</td>
    <td class="uncoveredLine">     BlockFrequency OrigEdgeFreq = MBFI->getBlockFreq(BestPred) *</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2032</td>
    <td class="uncoveredLine">         MBPI->getEdgeProbability(BestPred, NewTop);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2033</td>
    <td class="uncoveredLine">     if (NewFreq > OrigEdgeFreq) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2034</td>
    <td class="">       // If NewTop is not the best successor of Pred, then Pred doesn't</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2035</td>
    <td class="">       // fallthrough to NewTop. So there is no FallThroughFromPred and</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2036</td>
    <td class="">       // NewFreq.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2037</td>
    <td class="uncoveredLine">       NewFreq = 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2038</td>
    <td class="uncoveredLine">       FallThroughFromPred = 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2039</td>
    <td class="">     }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2040</td>
    <td class="">   }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2041</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2042</td>
    <td class="uncoveredLine">   BlockFrequency Result = 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2043</td>
    <td class="uncoveredLine">   BlockFrequency Gains = BackEdgeFreq + NewFreq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2044</td>
    <td class="uncoveredLine">   BlockFrequency Lost = FallThrough2Top + FallThrough2Exit +</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2045</td>
    <td class="uncoveredLine">       FallThroughFromPred;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2046</td>
    <td class="uncoveredLine">   if (Gains > Lost)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2047</td>
    <td class="uncoveredLine">     Result = Gains - Lost;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2048</td>
    <td class="uncoveredLine">   return Result;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2049</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2050</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2051</td>
    <td class="">/// Helper function of findBestLoopTop. Find the best loop top block</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2052</td>
    <td class="">/// from predecessors of old top.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2053</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2054</td>
    <td class="">/// Look for a block which is strictly better than the old top for laying</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2055</td>
    <td class="">/// out before the old top of the loop. This looks for only two patterns:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2056</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2057</td>
    <td class="">///     1. a block has only one successor, the old loop top</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2058</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2059</td>
    <td class="">///        Because such a block will always result in an unconditional jump,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2060</td>
    <td class="">///        rotating it in front of the old top is always profitable.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2061</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2062</td>
    <td class="">///     2. a block has two successors, one is old top, another is exit</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2063</td>
    <td class="">///        and it has more than one predecessors</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2064</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2065</td>
    <td class="">///        If it is below one of its predecessors P, only P can fall through to</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2066</td>
    <td class="">///        it, all other predecessors need a jump to it, and another conditional</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2067</td>
    <td class="">///        jump to loop header. If it is moved before loop header, all its</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2068</td>
    <td class="">///        predecessors jump to it, then fall through to loop header. So all its</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2069</td>
    <td class="">///        predecessors except P can reduce one taken branch.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2070</td>
    <td class="">///        At the same time, move it before old top increases the taken branch</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2071</td>
    <td class="">///        to loop exit block, so the reduced taken branch will be compared with</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2072</td>
    <td class="">///        the increased taken branch to the loop exit block.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2073</td>
    <td class="">MachineBasicBlock *</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2074</td>
    <td class="uncoveredLine">MachineBlockPlacement::findBestLoopTopHelper(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2075</td>
    <td class="">    MachineBasicBlock *OldTop,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2076</td>
    <td class="">    const MachineLoop &L,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2077</td>
    <td class="">    const BlockFilterSet &LoopBlockSet) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2078</td>
    <td class="">  // Check that the header hasn't been fused with a preheader block due to</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2079</td>
    <td class="">  // crazy branches. If it has, we need to start with the header at the top to</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2080</td>
    <td class="">  // prevent pulling the preheader into the loop body.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2081</td>
    <td class="uncoveredLine">  BlockChain &HeaderChain = *BlockToChain[OldTop];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2082</td>
    <td class="uncoveredLine">  if (!LoopBlockSet.count(*HeaderChain.begin()))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2083</td>
    <td class="uncoveredLine">    return OldTop;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2084</td>
    <td class="uncoveredLine">  if (OldTop != *HeaderChain.begin())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2085</td>
    <td class="uncoveredLine">    return OldTop;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2086</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2087</td>
    <td class="uncoveredLine">  LLVM_DEBUG(dbgs() << "Finding best loop top for: " << getBlockName(OldTop)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2088</td>
    <td class="">                    << "\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2089</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2090</td>
    <td class="uncoveredLine">  BlockFrequency BestGains = 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2091</td>
    <td class="uncoveredLine">  MachineBasicBlock *BestPred = nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2092</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *Pred : OldTop->predecessors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2093</td>
    <td class="uncoveredLine">    if (!LoopBlockSet.count(Pred))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2094</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2095</td>
    <td class="uncoveredLine">    if (Pred == L.getHeader())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2096</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2097</td>
    <td class="uncoveredLine">    LLVM_DEBUG(dbgs() << "   old top pred: " << getBlockName(Pred) << ", has "</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2098</td>
    <td class="">                      << Pred->succ_size() << " successors, ";</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2099</td>
    <td class="">               MBFI->printBlockFreq(dbgs(), Pred) << " freq\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2100</td>
    <td class="uncoveredLine">    if (Pred->succ_size() > 2)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2101</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2102</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2103</td>
    <td class="uncoveredLine">    MachineBasicBlock *OtherBB = nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2104</td>
    <td class="uncoveredLine">    if (Pred->succ_size() == 2) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2105</td>
    <td class="uncoveredLine">      OtherBB = *Pred->succ_begin();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2106</td>
    <td class="uncoveredLine">      if (OtherBB == OldTop)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2107</td>
    <td class="uncoveredLine">        OtherBB = *Pred->succ_rbegin();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2108</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2109</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2110</td>
    <td class="uncoveredLine">    if (!canMoveBottomBlockToTop(Pred, OldTop))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2111</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2112</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2113</td>
    <td class="uncoveredLine">    BlockFrequency Gains = FallThroughGains(Pred, OldTop, OtherBB,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2114</td>
    <td class="">                                            LoopBlockSet);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2115</td>
    <td class="uncoveredLine">    if ((Gains > 0) && (Gains > BestGains ||</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2116</td>
    <td class="uncoveredLine">        ((Gains == BestGains) && Pred->isLayoutSuccessor(OldTop)))) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2117</td>
    <td class="uncoveredLine">      BestPred = Pred;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2118</td>
    <td class="uncoveredLine">      BestGains = Gains;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2119</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2120</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2121</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2122</td>
    <td class="">  // If no direct predecessor is fine, just use the loop header.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2123</td>
    <td class="uncoveredLine">  if (!BestPred) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2124</td>
    <td class="uncoveredLine">    LLVM_DEBUG(dbgs() << "    final top unchanged\n");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2125</td>
    <td class="uncoveredLine">    return OldTop;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2126</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2127</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2128</td>
    <td class="">  // Walk backwards through any straight line of predecessors.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2129</td>
    <td class="uncoveredLine">  while (BestPred->pred_size() == 1 &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2130</td>
    <td class="uncoveredLine">         (*BestPred->pred_begin())->succ_size() == 1 &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2131</td>
    <td class="uncoveredLine">         *BestPred->pred_begin() != L.getHeader())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2132</td>
    <td class="uncoveredLine">    BestPred = *BestPred->pred_begin();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2133</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2134</td>
    <td class="uncoveredLine">  LLVM_DEBUG(dbgs() << "    final top: " << getBlockName(BestPred) << "\n");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2135</td>
    <td class="uncoveredLine">  return BestPred;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2136</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2137</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2138</td>
    <td class="">/// Find the best loop top block for layout.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2139</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2140</td>
    <td class="">/// This function iteratively calls findBestLoopTopHelper, until no new better</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2141</td>
    <td class="">/// BB can be found.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2142</td>
    <td class="">MachineBasicBlock *</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2143</td>
    <td class="uncoveredLine">MachineBlockPlacement::findBestLoopTop(const MachineLoop &L,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2144</td>
    <td class="">                                       const BlockFilterSet &LoopBlockSet) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2145</td>
    <td class="">  // Placing the latch block before the header may introduce an extra branch</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2146</td>
    <td class="">  // that skips this block the first time the loop is executed, which we want</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2147</td>
    <td class="">  // to avoid when optimising for size.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2148</td>
    <td class="">  // FIXME: in theory there is a case that does not introduce a new branch,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2149</td>
    <td class="">  // i.e. when the layout predecessor does not fallthrough to the loop header.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2150</td>
    <td class="">  // In practice this never happens though: there always seems to be a preheader</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2151</td>
    <td class="">  // that can fallthrough and that is also placed before the header.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2152</td>
    <td class="uncoveredLine">  bool OptForSize = F->getFunction().hasOptSize() ||</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2153</td>
    <td class="uncoveredLine">                    llvm::shouldOptimizeForSize(L.getHeader(), PSI, MBFI.get());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2154</td>
    <td class="uncoveredLine">  if (OptForSize)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2155</td>
    <td class="uncoveredLine">    return L.getHeader();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2156</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2157</td>
    <td class="uncoveredLine">  MachineBasicBlock *OldTop = nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2158</td>
    <td class="uncoveredLine">  MachineBasicBlock *NewTop = L.getHeader();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2159</td>
    <td class="uncoveredLine">  while (NewTop != OldTop) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2160</td>
    <td class="uncoveredLine">    OldTop = NewTop;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2161</td>
    <td class="uncoveredLine">    NewTop = findBestLoopTopHelper(OldTop, L, LoopBlockSet);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2162</td>
    <td class="uncoveredLine">    if (NewTop != OldTop)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2163</td>
    <td class="uncoveredLine">      ComputedEdges[NewTop] = { OldTop, false };</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2164</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2165</td>
    <td class="uncoveredLine">  return NewTop;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2166</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2167</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2168</td>
    <td class="">/// Find the best loop exiting block for layout.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2169</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2170</td>
    <td class="">/// This routine implements the logic to analyze the loop looking for the best</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2171</td>
    <td class="">/// block to layout at the top of the loop. Typically this is done to maximize</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2172</td>
    <td class="">/// fallthrough opportunities.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2173</td>
    <td class="">MachineBasicBlock *</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2174</td>
    <td class="uncoveredLine">MachineBlockPlacement::findBestLoopExit(const MachineLoop &L,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2175</td>
    <td class="">                                        const BlockFilterSet &LoopBlockSet,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2176</td>
    <td class="">                                        BlockFrequency &ExitFreq) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2177</td>
    <td class="">  // We don't want to layout the loop linearly in all cases. If the loop header</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2178</td>
    <td class="">  // is just a normal basic block in the loop, we want to look for what block</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2179</td>
    <td class="">  // within the loop is the best one to layout at the top. However, if the loop</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2180</td>
    <td class="">  // header has be pre-merged into a chain due to predecessors not having</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2181</td>
    <td class="">  // analyzable branches, *and* the predecessor it is merged with is *not* part</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2182</td>
    <td class="">  // of the loop, rotating the header into the middle of the loop will create</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2183</td>
    <td class="">  // a non-contiguous range of blocks which is Very Bad. So start with the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2184</td>
    <td class="">  // header and only rotate if safe.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2185</td>
    <td class="uncoveredLine">  BlockChain &HeaderChain = *BlockToChain[L.getHeader()];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2186</td>
    <td class="uncoveredLine">  if (!LoopBlockSet.count(*HeaderChain.begin()))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2187</td>
    <td class="uncoveredLine">    return nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2188</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2189</td>
    <td class="uncoveredLine">  BlockFrequency BestExitEdgeFreq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2190</td>
    <td class="uncoveredLine">  unsigned BestExitLoopDepth = 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2191</td>
    <td class="uncoveredLine">  MachineBasicBlock *ExitingBB = nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2192</td>
    <td class="">  // If there are exits to outer loops, loop rotation can severely limit</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2193</td>
    <td class="">  // fallthrough opportunities unless it selects such an exit. Keep a set of</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2194</td>
    <td class="">  // blocks where rotating to exit with that block will reach an outer loop.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2195</td>
    <td class="uncoveredLine">  SmallPtrSet<MachineBasicBlock *, 4> BlocksExitingToOuterLoop;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2196</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2197</td>
    <td class="uncoveredLine">  LLVM_DEBUG(dbgs() << "Finding best loop exit for: "</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2198</td>
    <td class="">                    << getBlockName(L.getHeader()) << "\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2199</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *MBB : L.getBlocks()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2200</td>
    <td class="uncoveredLine">    BlockChain &Chain = *BlockToChain[MBB];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2201</td>
    <td class="">    // Ensure that this block is at the end of a chain; otherwise it could be</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2202</td>
    <td class="">    // mid-way through an inner loop or a successor of an unanalyzable branch.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2203</td>
    <td class="uncoveredLine">    if (MBB != *std::prev(Chain.end()))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2204</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2205</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2206</td>
    <td class="">    // Now walk the successors. We need to establish whether this has a viable</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2207</td>
    <td class="">    // exiting successor and whether it has a viable non-exiting successor.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2208</td>
    <td class="">    // We store the old exiting state and restore it if a viable looping</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2209</td>
    <td class="">    // successor isn't found.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2210</td>
    <td class="uncoveredLine">    MachineBasicBlock *OldExitingBB = ExitingBB;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2211</td>
    <td class="uncoveredLine">    BlockFrequency OldBestExitEdgeFreq = BestExitEdgeFreq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2212</td>
    <td class="uncoveredLine">    bool HasLoopingSucc = false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2213</td>
    <td class="uncoveredLine">    for (MachineBasicBlock *Succ : MBB->successors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2214</td>
    <td class="uncoveredLine">      if (Succ->isEHPad())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2215</td>
    <td class="uncoveredLine">        continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2216</td>
    <td class="uncoveredLine">      if (Succ == MBB)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2217</td>
    <td class="uncoveredLine">        continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2218</td>
    <td class="uncoveredLine">      BlockChain &SuccChain = *BlockToChain[Succ];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2219</td>
    <td class="">      // Don't split chains, either this chain or the successor's chain.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2220</td>
    <td class="uncoveredLine">      if (&Chain == &SuccChain) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2221</td>
    <td class="uncoveredLine">        LLVM_DEBUG(dbgs() << "    exiting: " << getBlockName(MBB) << " -> "</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2222</td>
    <td class="">                          << getBlockName(Succ) << " (chain conflict)\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2223</td>
    <td class="uncoveredLine">        continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2224</td>
    <td class="">      }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2225</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2226</td>
    <td class="uncoveredLine">      auto SuccProb = MBPI->getEdgeProbability(MBB, Succ);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2227</td>
    <td class="uncoveredLine">      if (LoopBlockSet.count(Succ)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2228</td>
    <td class="uncoveredLine">        LLVM_DEBUG(dbgs() << "    looping: " << getBlockName(MBB) << " -> "</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2229</td>
    <td class="">                          << getBlockName(Succ) << " (" << SuccProb << ")\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2230</td>
    <td class="uncoveredLine">        HasLoopingSucc = true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2231</td>
    <td class="uncoveredLine">        continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2232</td>
    <td class="">      }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2233</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2234</td>
    <td class="uncoveredLine">      unsigned SuccLoopDepth = 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2235</td>
    <td class="uncoveredLine">      if (MachineLoop *ExitLoop = MLI->getLoopFor(Succ)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2236</td>
    <td class="uncoveredLine">        SuccLoopDepth = ExitLoop->getLoopDepth();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2237</td>
    <td class="uncoveredLine">        if (ExitLoop->contains(&L))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2238</td>
    <td class="uncoveredLine">          BlocksExitingToOuterLoop.insert(MBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2239</td>
    <td class="">      }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2240</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2241</td>
    <td class="uncoveredLine">      BlockFrequency ExitEdgeFreq = MBFI->getBlockFreq(MBB) * SuccProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2242</td>
    <td class="uncoveredLine">      LLVM_DEBUG(dbgs() << "    exiting: " << getBlockName(MBB) << " -> "</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2243</td>
    <td class="">                        << getBlockName(Succ) << " [L:" << SuccLoopDepth</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2244</td>
    <td class="">                        << "] (";</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2245</td>
    <td class="">                 MBFI->printBlockFreq(dbgs(), ExitEdgeFreq) << ")\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2246</td>
    <td class="">      // Note that we bias this toward an existing layout successor to retain</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2247</td>
    <td class="">      // incoming order in the absence of better information. The exit must have</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2248</td>
    <td class="">      // a frequency higher than the current exit before we consider breaking</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2249</td>
    <td class="">      // the layout.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2250</td>
    <td class="uncoveredLine">      BranchProbability Bias(100 - ExitBlockBias, 100);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2251</td>
    <td class="uncoveredLine">      if (!ExitingBB || SuccLoopDepth > BestExitLoopDepth ||</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2252</td>
    <td class="uncoveredLine">          ExitEdgeFreq > BestExitEdgeFreq ||</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2253</td>
    <td class="uncoveredLine">          (MBB->isLayoutSuccessor(Succ) &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2254</td>
    <td class="uncoveredLine">           !(ExitEdgeFreq < BestExitEdgeFreq * Bias))) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2255</td>
    <td class="uncoveredLine">        BestExitEdgeFreq = ExitEdgeFreq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2256</td>
    <td class="uncoveredLine">        ExitingBB = MBB;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2257</td>
    <td class="">      }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2258</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2259</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2260</td>
    <td class="uncoveredLine">    if (!HasLoopingSucc) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2261</td>
    <td class="">      // Restore the old exiting state, no viable looping successor was found.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2262</td>
    <td class="uncoveredLine">      ExitingBB = OldExitingBB;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2263</td>
    <td class="uncoveredLine">      BestExitEdgeFreq = OldBestExitEdgeFreq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2264</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2265</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2266</td>
    <td class="">  // Without a candidate exiting block or with only a single block in the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2267</td>
    <td class="">  // loop, just use the loop header to layout the loop.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2268</td>
    <td class="uncoveredLine">  if (!ExitingBB) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2269</td>
    <td class="uncoveredLine">    LLVM_DEBUG(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2270</td>
    <td class="">        dbgs() << "    No other candidate exit blocks, using loop header\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2271</td>
    <td class="uncoveredLine">    return nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2272</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2273</td>
    <td class="uncoveredLine">  if (L.getNumBlocks() == 1) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2274</td>
    <td class="uncoveredLine">    LLVM_DEBUG(dbgs() << "    Loop has 1 block, using loop header as exit\n");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2275</td>
    <td class="uncoveredLine">    return nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2276</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2277</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2278</td>
    <td class="">  // Also, if we have exit blocks which lead to outer loops but didn't select</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2279</td>
    <td class="">  // one of them as the exiting block we are rotating toward, disable loop</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2280</td>
    <td class="">  // rotation altogether.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2281</td>
    <td class="uncoveredLine">  if (!BlocksExitingToOuterLoop.empty() &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2282</td>
    <td class="uncoveredLine">      !BlocksExitingToOuterLoop.count(ExitingBB))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2283</td>
    <td class="uncoveredLine">    return nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2284</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2285</td>
    <td class="uncoveredLine">  LLVM_DEBUG(dbgs() << "  Best exiting block: " << getBlockName(ExitingBB)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2286</td>
    <td class="">                    << "\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2287</td>
    <td class="uncoveredLine">  ExitFreq = BestExitEdgeFreq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2288</td>
    <td class="uncoveredLine">  return ExitingBB;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2289</td>
    <td class="uncoveredLine">}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2290</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2291</td>
    <td class="">/// Check if there is a fallthrough to loop header Top.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2292</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2293</td>
    <td class="">///   1. Look for a Pred that can be layout before Top.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2294</td>
    <td class="">///   2. Check if Top is the most possible successor of Pred.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2295</td>
    <td class="">bool</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2296</td>
    <td class="uncoveredLine">MachineBlockPlacement::hasViableTopFallthrough(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2297</td>
    <td class="">    const MachineBasicBlock *Top,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2298</td>
    <td class="">    const BlockFilterSet &LoopBlockSet) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2299</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *Pred : Top->predecessors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2300</td>
    <td class="uncoveredLine">    BlockChain *PredChain = BlockToChain[Pred];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2301</td>
    <td class="uncoveredLine">    if (!LoopBlockSet.count(Pred) &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2302</td>
    <td class="uncoveredLine">        (!PredChain || Pred == *std::prev(PredChain->end()))) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2303</td>
    <td class="">      // Found a Pred block can be placed before Top.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2304</td>
    <td class="">      // Check if Top is the best successor of Pred.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2305</td>
    <td class="uncoveredLine">      auto TopProb = MBPI->getEdgeProbability(Pred, Top);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2306</td>
    <td class="uncoveredLine">      bool TopOK = true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2307</td>
    <td class="uncoveredLine">      for (MachineBasicBlock *Succ : Pred->successors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2308</td>
    <td class="uncoveredLine">        auto SuccProb = MBPI->getEdgeProbability(Pred, Succ);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2309</td>
    <td class="uncoveredLine">        BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2310</td>
    <td class="">        // Check if Succ can be placed after Pred.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2311</td>
    <td class="">        // Succ should not be in any chain, or it is the head of some chain.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2312</td>
    <td class="uncoveredLine">        if ((!SuccChain || Succ == *SuccChain->begin()) && SuccProb > TopProb) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2313</td>
    <td class="uncoveredLine">          TopOK = false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2314</td>
    <td class="uncoveredLine">          break;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2315</td>
    <td class="">        }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2316</td>
    <td class="">      }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2317</td>
    <td class="uncoveredLine">      if (TopOK)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2318</td>
    <td class="uncoveredLine">        return true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2319</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2320</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2321</td>
    <td class="uncoveredLine">  return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2322</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2323</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2324</td>
    <td class="">/// Attempt to rotate an exiting block to the bottom of the loop.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2325</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2326</td>
    <td class="">/// Once we have built a chain, try to rotate it to line up the hot exit block</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2327</td>
    <td class="">/// with fallthrough out of the loop if doing so doesn't introduce unnecessary</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2328</td>
    <td class="">/// branches. For example, if the loop has fallthrough into its header and out</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2329</td>
    <td class="">/// of its bottom already, don't rotate it.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2330</td>
    <td class="uncoveredLine">void MachineBlockPlacement::rotateLoop(BlockChain &LoopChain,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2331</td>
    <td class="">                                       const MachineBasicBlock *ExitingBB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2332</td>
    <td class="">                                       BlockFrequency ExitFreq,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2333</td>
    <td class="">                                       const BlockFilterSet &LoopBlockSet) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2334</td>
    <td class="uncoveredLine">  if (!ExitingBB)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2335</td>
    <td class="uncoveredLine">    return;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2336</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2337</td>
    <td class="uncoveredLine">  MachineBasicBlock *Top = *LoopChain.begin();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2338</td>
    <td class="uncoveredLine">  MachineBasicBlock *Bottom = *std::prev(LoopChain.end());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2339</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2340</td>
    <td class="">  // If ExitingBB is already the last one in a chain then nothing to do.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2341</td>
    <td class="uncoveredLine">  if (Bottom == ExitingBB)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2342</td>
    <td class="uncoveredLine">    return;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2343</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2344</td>
    <td class="">  // The entry block should always be the first BB in a function.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2345</td>
    <td class="uncoveredLine">  if (Top->isEntryBlock())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2346</td>
    <td class="uncoveredLine">    return;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2347</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2348</td>
    <td class="uncoveredLine">  bool ViableTopFallthrough = hasViableTopFallthrough(Top, LoopBlockSet);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2349</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2350</td>
    <td class="">  // If the header has viable fallthrough, check whether the current loop</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2351</td>
    <td class="">  // bottom is a viable exiting block. If so, bail out as rotating will</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2352</td>
    <td class="">  // introduce an unnecessary branch.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2353</td>
    <td class="uncoveredLine">  if (ViableTopFallthrough) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2354</td>
    <td class="uncoveredLine">    for (MachineBasicBlock *Succ : Bottom->successors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2355</td>
    <td class="uncoveredLine">      BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2356</td>
    <td class="uncoveredLine">      if (!LoopBlockSet.count(Succ) &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2357</td>
    <td class="uncoveredLine">          (!SuccChain || Succ == *SuccChain->begin()))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2358</td>
    <td class="uncoveredLine">        return;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2359</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2360</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2361</td>
    <td class="">    // Rotate will destroy the top fallthrough, we need to ensure the new exit</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2362</td>
    <td class="">    // frequency is larger than top fallthrough.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2363</td>
    <td class="uncoveredLine">    BlockFrequency FallThrough2Top = TopFallThroughFreq(Top, LoopBlockSet);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2364</td>
    <td class="uncoveredLine">    if (FallThrough2Top >= ExitFreq)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2365</td>
    <td class="uncoveredLine">      return;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2366</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2367</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2368</td>
    <td class="uncoveredLine">  BlockChain::iterator ExitIt = llvm::find(LoopChain, ExitingBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2369</td>
    <td class="uncoveredLine">  if (ExitIt == LoopChain.end())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2370</td>
    <td class="uncoveredLine">    return;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2371</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2372</td>
    <td class="">  // Rotating a loop exit to the bottom when there is a fallthrough to top</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2373</td>
    <td class="">  // trades the entry fallthrough for an exit fallthrough.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2374</td>
    <td class="">  // If there is no bottom->top edge, but the chosen exit block does have</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2375</td>
    <td class="">  // a fallthrough, we break that fallthrough for nothing in return.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2376</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2377</td>
    <td class="">  // Let's consider an example. We have a built chain of basic blocks</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2378</td>
    <td class="">  // B1, B2, ..., Bn, where Bk is a ExitingBB - chosen exit block.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2379</td>
    <td class="">  // By doing a rotation we get</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2380</td>
    <td class="">  // Bk+1, ..., Bn, B1, ..., Bk</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2381</td>
    <td class="">  // Break of fallthrough to B1 is compensated by a fallthrough from Bk.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2382</td>
    <td class="">  // If we had a fallthrough Bk -> Bk+1 it is broken now.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2383</td>
    <td class="">  // It might be compensated by fallthrough Bn -> B1.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2384</td>
    <td class="">  // So we have a condition to avoid creation of extra branch by loop rotation.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2385</td>
    <td class="">  // All below must be true to avoid loop rotation:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2386</td>
    <td class="">  //   If there is a fallthrough to top (B1)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2387</td>
    <td class="">  //   There was fallthrough from chosen exit block (Bk) to next one (Bk+1)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2388</td>
    <td class="">  //   There is no fallthrough from bottom (Bn) to top (B1).</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2389</td>
    <td class="">  // Please note that there is no exit fallthrough from Bn because we checked it</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2390</td>
    <td class="">  // above.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2391</td>
    <td class="uncoveredLine">  if (ViableTopFallthrough) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2392</td>
    <td class="uncoveredLine">    assert(std::next(ExitIt) != LoopChain.end() &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2393</td>
    <td class="">           "Exit should not be last BB");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2394</td>
    <td class="uncoveredLine">    MachineBasicBlock *NextBlockInChain = *std::next(ExitIt);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2395</td>
    <td class="uncoveredLine">    if (ExitingBB->isSuccessor(NextBlockInChain))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2396</td>
    <td class="uncoveredLine">      if (!Bottom->isSuccessor(Top))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2397</td>
    <td class="uncoveredLine">        return;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2398</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2399</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2400</td>
    <td class="uncoveredLine">  LLVM_DEBUG(dbgs() << "Rotating loop to put exit " << getBlockName(ExitingBB)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2401</td>
    <td class="">                    << " at bottom\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2402</td>
    <td class="uncoveredLine">  std::rotate(LoopChain.begin(), std::next(ExitIt), LoopChain.end());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2403</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2404</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2405</td>
    <td class="">/// Attempt to rotate a loop based on profile data to reduce branch cost.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2406</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2407</td>
    <td class="">/// With profile data, we can determine the cost in terms of missed fall through</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2408</td>
    <td class="">/// opportunities when rotating a loop chain and select the best rotation.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2409</td>
    <td class="">/// Basically, there are three kinds of cost to consider for each rotation:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2410</td>
    <td class="">///    1. The possibly missed fall through edge (if it exists) from BB out of</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2411</td>
    <td class="">///    the loop to the loop header.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2412</td>
    <td class="">///    2. The possibly missed fall through edges (if they exist) from the loop</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2413</td>
    <td class="">///    exits to BB out of the loop.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2414</td>
    <td class="">///    3. The missed fall through edge (if it exists) from the last BB to the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2415</td>
    <td class="">///    first BB in the loop chain.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2416</td>
    <td class="">///  Therefore, the cost for a given rotation is the sum of costs listed above.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2417</td>
    <td class="">///  We select the best rotation with the smallest cost.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2418</td>
    <td class="uncoveredLine">void MachineBlockPlacement::rotateLoopWithProfile(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2419</td>
    <td class="">    BlockChain &LoopChain, const MachineLoop &L,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2420</td>
    <td class="">    const BlockFilterSet &LoopBlockSet) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2421</td>
    <td class="uncoveredLine">  auto RotationPos = LoopChain.end();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2422</td>
    <td class="uncoveredLine">  MachineBasicBlock *ChainHeaderBB = *LoopChain.begin();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2423</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2424</td>
    <td class="">  // The entry block should always be the first BB in a function.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2425</td>
    <td class="uncoveredLine">  if (ChainHeaderBB->isEntryBlock())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2426</td>
    <td class="uncoveredLine">    return;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2427</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2428</td>
    <td class="uncoveredLine">  BlockFrequency SmallestRotationCost = BlockFrequency::getMaxFrequency();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2429</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2430</td>
    <td class="">  // A utility lambda that scales up a block frequency by dividing it by a</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2431</td>
    <td class="">  // branch probability which is the reciprocal of the scale.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2432</td>
    <td class="uncoveredLine">  auto ScaleBlockFrequency = [](BlockFrequency Freq,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2433</td>
    <td class="">                                unsigned Scale) -> BlockFrequency {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2434</td>
    <td class="uncoveredLine">    if (Scale == 0)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2435</td>
    <td class="uncoveredLine">      return 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2436</td>
    <td class="">    // Use operator / between BlockFrequency and BranchProbability to implement</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2437</td>
    <td class="">    // saturating multiplication.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2438</td>
    <td class="uncoveredLine">    return Freq / BranchProbability(1, Scale);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2439</td>
    <td class="">  };</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2440</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2441</td>
    <td class="">  // Compute the cost of the missed fall-through edge to the loop header if the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2442</td>
    <td class="">  // chain head is not the loop header. As we only consider natural loops with</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2443</td>
    <td class="">  // single header, this computation can be done only once.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2444</td>
    <td class="uncoveredLine">  BlockFrequency HeaderFallThroughCost(0);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2445</td>
    <td class="uncoveredLine">  for (auto *Pred : ChainHeaderBB->predecessors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2446</td>
    <td class="uncoveredLine">    BlockChain *PredChain = BlockToChain[Pred];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2447</td>
    <td class="uncoveredLine">    if (!LoopBlockSet.count(Pred) &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2448</td>
    <td class="uncoveredLine">        (!PredChain || Pred == *std::prev(PredChain->end()))) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2449</td>
    <td class="uncoveredLine">      auto EdgeFreq = MBFI->getBlockFreq(Pred) *</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2450</td>
    <td class="uncoveredLine">          MBPI->getEdgeProbability(Pred, ChainHeaderBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2451</td>
    <td class="uncoveredLine">      auto FallThruCost = ScaleBlockFrequency(EdgeFreq, MisfetchCost);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2452</td>
    <td class="">      // If the predecessor has only an unconditional jump to the header, we</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2453</td>
    <td class="">      // need to consider the cost of this jump.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2454</td>
    <td class="uncoveredLine">      if (Pred->succ_size() == 1)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2455</td>
    <td class="uncoveredLine">        FallThruCost += ScaleBlockFrequency(EdgeFreq, JumpInstCost);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2456</td>
    <td class="uncoveredLine">      HeaderFallThroughCost = std::max(HeaderFallThroughCost, FallThruCost);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2457</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2458</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2459</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2460</td>
    <td class="">  // Here we collect all exit blocks in the loop, and for each exit we find out</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2461</td>
    <td class="">  // its hottest exit edge. For each loop rotation, we define the loop exit cost</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2462</td>
    <td class="">  // as the sum of frequencies of exit edges we collect here, excluding the exit</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2463</td>
    <td class="">  // edge from the tail of the loop chain.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2464</td>
    <td class="uncoveredLine">  SmallVector<std::pair<MachineBasicBlock *, BlockFrequency>, 4> ExitsWithFreq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2465</td>
    <td class="uncoveredLine">  for (auto *BB : LoopChain) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2466</td>
    <td class="uncoveredLine">    auto LargestExitEdgeProb = BranchProbability::getZero();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2467</td>
    <td class="uncoveredLine">    for (auto *Succ : BB->successors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2468</td>
    <td class="uncoveredLine">      BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2469</td>
    <td class="uncoveredLine">      if (!LoopBlockSet.count(Succ) &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2470</td>
    <td class="uncoveredLine">          (!SuccChain || Succ == *SuccChain->begin())) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2471</td>
    <td class="uncoveredLine">        auto SuccProb = MBPI->getEdgeProbability(BB, Succ);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2472</td>
    <td class="uncoveredLine">        LargestExitEdgeProb = std::max(LargestExitEdgeProb, SuccProb);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2473</td>
    <td class="">      }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2474</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2475</td>
    <td class="uncoveredLine">    if (LargestExitEdgeProb > BranchProbability::getZero()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2476</td>
    <td class="uncoveredLine">      auto ExitFreq = MBFI->getBlockFreq(BB) * LargestExitEdgeProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2477</td>
    <td class="uncoveredLine">      ExitsWithFreq.emplace_back(BB, ExitFreq);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2478</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2479</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2480</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2481</td>
    <td class="">  // In this loop we iterate every block in the loop chain and calculate the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2482</td>
    <td class="">  // cost assuming the block is the head of the loop chain. When the loop ends,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2483</td>
    <td class="">  // we should have found the best candidate as the loop chain's head.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2484</td>
    <td class="uncoveredLine">  for (auto Iter = LoopChain.begin(), TailIter = std::prev(LoopChain.end()),</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2485</td>
    <td class="uncoveredLine">            EndIter = LoopChain.end();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2486</td>
    <td class="uncoveredLine">       Iter != EndIter; Iter++, TailIter++) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2487</td>
    <td class="">    // TailIter is used to track the tail of the loop chain if the block we are</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2488</td>
    <td class="">    // checking (pointed by Iter) is the head of the chain.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2489</td>
    <td class="uncoveredLine">    if (TailIter == LoopChain.end())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2490</td>
    <td class="uncoveredLine">      TailIter = LoopChain.begin();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2491</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2492</td>
    <td class="uncoveredLine">    auto TailBB = *TailIter;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2493</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2494</td>
    <td class="">    // Calculate the cost by putting this BB to the top.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2495</td>
    <td class="uncoveredLine">    BlockFrequency Cost = 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2496</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2497</td>
    <td class="">    // If the current BB is the loop header, we need to take into account the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2498</td>
    <td class="">    // cost of the missed fall through edge from outside of the loop to the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2499</td>
    <td class="">    // header.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2500</td>
    <td class="uncoveredLine">    if (Iter != LoopChain.begin())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2501</td>
    <td class="uncoveredLine">      Cost += HeaderFallThroughCost;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2502</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2503</td>
    <td class="">    // Collect the loop exit cost by summing up frequencies of all exit edges</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2504</td>
    <td class="">    // except the one from the chain tail.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2505</td>
    <td class="uncoveredLine">    for (auto &ExitWithFreq : ExitsWithFreq)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2506</td>
    <td class="uncoveredLine">      if (TailBB != ExitWithFreq.first)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2507</td>
    <td class="uncoveredLine">        Cost += ExitWithFreq.second;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2508</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2509</td>
    <td class="">    // The cost of breaking the once fall-through edge from the tail to the top</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2510</td>
    <td class="">    // of the loop chain. Here we need to consider three cases:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2511</td>
    <td class="">    // 1. If the tail node has only one successor, then we will get an</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2512</td>
    <td class="">    //    additional jmp instruction. So the cost here is (MisfetchCost +</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2513</td>
    <td class="">    //    JumpInstCost) * tail node frequency.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2514</td>
    <td class="">    // 2. If the tail node has two successors, then we may still get an</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2515</td>
    <td class="">    //    additional jmp instruction if the layout successor after the loop</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2516</td>
    <td class="">    //    chain is not its CFG successor. Note that the more frequently executed</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2517</td>
    <td class="">    //    jmp instruction will be put ahead of the other one. Assume the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2518</td>
    <td class="">    //    frequency of those two branches are x and y, where x is the frequency</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2519</td>
    <td class="">    //    of the edge to the chain head, then the cost will be</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2520</td>
    <td class="">    //    (x * MisfetechCost + min(x, y) * JumpInstCost) * tail node frequency.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2521</td>
    <td class="">    // 3. If the tail node has more than two successors (this rarely happens),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2522</td>
    <td class="">    //    we won't consider any additional cost.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2523</td>
    <td class="uncoveredLine">    if (TailBB->isSuccessor(*Iter)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2524</td>
    <td class="uncoveredLine">      auto TailBBFreq = MBFI->getBlockFreq(TailBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2525</td>
    <td class="uncoveredLine">      if (TailBB->succ_size() == 1)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2526</td>
    <td class="">        Cost += ScaleBlockFrequency(TailBBFreq.getFrequency(),</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2527</td>
    <td class="uncoveredLine">                                    MisfetchCost + JumpInstCost);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2528</td>
    <td class="uncoveredLine">      else if (TailBB->succ_size() == 2) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2529</td>
    <td class="uncoveredLine">        auto TailToHeadProb = MBPI->getEdgeProbability(TailBB, *Iter);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2530</td>
    <td class="uncoveredLine">        auto TailToHeadFreq = TailBBFreq * TailToHeadProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2531</td>
    <td class="uncoveredLine">        auto ColderEdgeFreq = TailToHeadProb > BranchProbability(1, 2)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2532</td>
    <td class="uncoveredLine">                                  ? TailBBFreq * TailToHeadProb.getCompl()</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2533</td>
    <td class="uncoveredLine">                                  : TailToHeadFreq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2534</td>
    <td class="uncoveredLine">        Cost += ScaleBlockFrequency(TailToHeadFreq, MisfetchCost) +</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2535</td>
    <td class="uncoveredLine">                ScaleBlockFrequency(ColderEdgeFreq, JumpInstCost);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2536</td>
    <td class="">      }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2537</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2538</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2539</td>
    <td class="uncoveredLine">    LLVM_DEBUG(dbgs() << "The cost of loop rotation by making "</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2540</td>
    <td class="">                      << getBlockName(*Iter)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2541</td>
    <td class="">                      << " to the top: " << Cost.getFrequency() << "\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2542</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2543</td>
    <td class="uncoveredLine">    if (Cost < SmallestRotationCost) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2544</td>
    <td class="uncoveredLine">      SmallestRotationCost = Cost;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2545</td>
    <td class="uncoveredLine">      RotationPos = Iter;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2546</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2547</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2548</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2549</td>
    <td class="uncoveredLine">  if (RotationPos != LoopChain.end()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2550</td>
    <td class="uncoveredLine">    LLVM_DEBUG(dbgs() << "Rotate loop by making " << getBlockName(*RotationPos)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2551</td>
    <td class="">                      << " to the top\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2552</td>
    <td class="uncoveredLine">    std::rotate(LoopChain.begin(), RotationPos, LoopChain.end());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2553</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2554</td>
    <td class="uncoveredLine">}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2555</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2556</td>
    <td class="">/// Collect blocks in the given loop that are to be placed.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2557</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2558</td>
    <td class="">/// When profile data is available, exclude cold blocks from the returned set;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2559</td>
    <td class="">/// otherwise, collect all blocks in the loop.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2560</td>
    <td class="">MachineBlockPlacement::BlockFilterSet</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2561</td>
    <td class="uncoveredLine">MachineBlockPlacement::collectLoopBlockSet(const MachineLoop &L) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2562</td>
    <td class="uncoveredLine">  BlockFilterSet LoopBlockSet;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2563</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2564</td>
    <td class="">  // Filter cold blocks off from LoopBlockSet when profile data is available.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2565</td>
    <td class="">  // Collect the sum of frequencies of incoming edges to the loop header from</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2566</td>
    <td class="">  // outside. If we treat the loop as a super block, this is the frequency of</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2567</td>
    <td class="">  // the loop. Then for each block in the loop, we calculate the ratio between</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2568</td>
    <td class="">  // its frequency and the frequency of the loop block. When it is too small,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2569</td>
    <td class="">  // don't add it to the loop chain. If there are outer loops, then this block</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2570</td>
    <td class="">  // will be merged into the first outer loop chain for which this block is not</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2571</td>
    <td class="">  // cold anymore. This needs precise profile data and we only do this when</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2572</td>
    <td class="">  // profile data is available.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2573</td>
    <td class="uncoveredLine">  if (F->getFunction().hasProfileData() || ForceLoopColdBlock) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2574</td>
    <td class="uncoveredLine">    BlockFrequency LoopFreq(0);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2575</td>
    <td class="uncoveredLine">    for (auto *LoopPred : L.getHeader()->predecessors())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2576</td>
    <td class="uncoveredLine">      if (!L.contains(LoopPred))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2577</td>
    <td class="uncoveredLine">        LoopFreq += MBFI->getBlockFreq(LoopPred) *</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2578</td>
    <td class="uncoveredLine">                    MBPI->getEdgeProbability(LoopPred, L.getHeader());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2579</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2580</td>
    <td class="uncoveredLine">    for (MachineBasicBlock *LoopBB : L.getBlocks()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2581</td>
    <td class="uncoveredLine">      if (LoopBlockSet.count(LoopBB))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2582</td>
    <td class="uncoveredLine">        continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2583</td>
    <td class="uncoveredLine">      auto Freq = MBFI->getBlockFreq(LoopBB).getFrequency();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2584</td>
    <td class="uncoveredLine">      if (Freq == 0 || LoopFreq.getFrequency() / Freq > LoopToColdBlockRatio)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2585</td>
    <td class="uncoveredLine">        continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2586</td>
    <td class="uncoveredLine">      BlockChain *Chain = BlockToChain[LoopBB];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2587</td>
    <td class="uncoveredLine">      for (MachineBasicBlock *ChainBB : *Chain)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2588</td>
    <td class="uncoveredLine">        LoopBlockSet.insert(ChainBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2589</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2590</td>
    <td class="">  } else</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2591</td>
    <td class="uncoveredLine">    LoopBlockSet.insert(L.block_begin(), L.block_end());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2592</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2593</td>
    <td class="uncoveredLine">  return LoopBlockSet;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2594</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2595</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2596</td>
    <td class="">/// Forms basic block chains from the natural loop structures.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2597</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2598</td>
    <td class="">/// These chains are designed to preserve the existing *structure* of the code</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2599</td>
    <td class="">/// as much as possible. We can then stitch the chains together in a way which</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2600</td>
    <td class="">/// both preserves the topological structure and minimizes taken conditional</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2601</td>
    <td class="">/// branches.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2602</td>
    <td class="uncoveredLine">void MachineBlockPlacement::buildLoopChains(const MachineLoop &L) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2603</td>
    <td class="">  // First recurse through any nested loops, building chains for those inner</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2604</td>
    <td class="">  // loops.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2605</td>
    <td class="uncoveredLine">  for (const MachineLoop *InnerLoop : L)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2606</td>
    <td class="uncoveredLine">    buildLoopChains(*InnerLoop);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2607</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2608</td>
    <td class="uncoveredLine">  assert(BlockWorkList.empty() &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2609</td>
    <td class="">         "BlockWorkList not empty when starting to build loop chains.");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2610</td>
    <td class="uncoveredLine">  assert(EHPadWorkList.empty() &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2611</td>
    <td class="">         "EHPadWorkList not empty when starting to build loop chains.");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2612</td>
    <td class="uncoveredLine">  BlockFilterSet LoopBlockSet = collectLoopBlockSet(L);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2613</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2614</td>
    <td class="">  // Check if we have profile data for this function. If yes, we will rotate</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2615</td>
    <td class="">  // this loop by modeling costs more precisely which requires the profile data</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2616</td>
    <td class="">  // for better layout.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2617</td>
    <td class="">  bool RotateLoopWithProfile =</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2618</td>
    <td class="uncoveredLine">      ForcePreciseRotationCost ||</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2619</td>
    <td class="uncoveredLine">      (PreciseRotationCost && F->getFunction().hasProfileData());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2620</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2621</td>
    <td class="">  // First check to see if there is an obviously preferable top block for the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2622</td>
    <td class="">  // loop. This will default to the header, but may end up as one of the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2623</td>
    <td class="">  // predecessors to the header if there is one which will result in strictly</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2624</td>
    <td class="">  // fewer branches in the loop body.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2625</td>
    <td class="uncoveredLine">  MachineBasicBlock *LoopTop = findBestLoopTop(L, LoopBlockSet);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2626</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2627</td>
    <td class="">  // If we selected just the header for the loop top, look for a potentially</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2628</td>
    <td class="">  // profitable exit block in the event that rotating the loop can eliminate</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2629</td>
    <td class="">  // branches by placing an exit edge at the bottom.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2630</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2631</td>
    <td class="">  // Loops are processed innermost to uttermost, make sure we clear</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2632</td>
    <td class="">  // PreferredLoopExit before processing a new loop.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2633</td>
    <td class="uncoveredLine">  PreferredLoopExit = nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2634</td>
    <td class="uncoveredLine">  BlockFrequency ExitFreq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2635</td>
    <td class="uncoveredLine">  if (!RotateLoopWithProfile && LoopTop == L.getHeader())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2636</td>
    <td class="uncoveredLine">    PreferredLoopExit = findBestLoopExit(L, LoopBlockSet, ExitFreq);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2637</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2638</td>
    <td class="uncoveredLine">  BlockChain &LoopChain = *BlockToChain[LoopTop];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2639</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2640</td>
    <td class="">  // FIXME: This is a really lame way of walking the chains in the loop: we</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2641</td>
    <td class="">  // walk the blocks, and use a set to prevent visiting a particular chain</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2642</td>
    <td class="">  // twice.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2643</td>
    <td class="uncoveredLine">  SmallPtrSet<BlockChain *, 4> UpdatedPreds;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2644</td>
    <td class="uncoveredLine">  assert(LoopChain.UnscheduledPredecessors == 0 &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2645</td>
    <td class="">         "LoopChain should not have unscheduled predecessors.");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2646</td>
    <td class="uncoveredLine">  UpdatedPreds.insert(&LoopChain);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2647</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2648</td>
    <td class="uncoveredLine">  for (const MachineBasicBlock *LoopBB : LoopBlockSet)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2649</td>
    <td class="uncoveredLine">    fillWorkLists(LoopBB, UpdatedPreds, &LoopBlockSet);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2650</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2651</td>
    <td class="uncoveredLine">  buildChain(LoopTop, LoopChain, &LoopBlockSet);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2652</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2653</td>
    <td class="uncoveredLine">  if (RotateLoopWithProfile)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2654</td>
    <td class="uncoveredLine">    rotateLoopWithProfile(LoopChain, L, LoopBlockSet);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2655</td>
    <td class="">  else</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2656</td>
    <td class="uncoveredLine">    rotateLoop(LoopChain, PreferredLoopExit, ExitFreq, LoopBlockSet);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2657</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2658</td>
    <td class="uncoveredLine">  LLVM_DEBUG({</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2659</td>
    <td class="">    // Crash at the end so we get all of the debugging output first.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2660</td>
    <td class="">    bool BadLoop = false;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2661</td>
    <td class="">    if (LoopChain.UnscheduledPredecessors) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2662</td>
    <td class="">      BadLoop = true;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2663</td>
    <td class="">      dbgs() << "Loop chain contains a block without its preds placed!\n"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2664</td>
    <td class="">             << "  Loop header:  " << getBlockName(*L.block_begin()) << "\n"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2665</td>
    <td class="">             << "  Chain header: " << getBlockName(*LoopChain.begin()) << "\n";</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2666</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2667</td>
    <td class="">    for (MachineBasicBlock *ChainBB : LoopChain) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2668</td>
    <td class="">      dbgs() << "          ... " << getBlockName(ChainBB) << "\n";</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2669</td>
    <td class="">      if (!LoopBlockSet.remove(ChainBB)) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2670</td>
    <td class="">        // We don't mark the loop as bad here because there are real situations</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2671</td>
    <td class="">        // where this can occur. For example, with an unanalyzable fallthrough</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2672</td>
    <td class="">        // from a loop block to a non-loop block or vice versa.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2673</td>
    <td class="">        dbgs() << "Loop chain contains a block not contained by the loop!\n"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2674</td>
    <td class="">               << "  Loop header:  " << getBlockName(*L.block_begin()) << "\n"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2675</td>
    <td class="">               << "  Chain header: " << getBlockName(*LoopChain.begin()) << "\n"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2676</td>
    <td class="">               << "  Bad block:    " << getBlockName(ChainBB) << "\n";</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2677</td>
    <td class="">      }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2678</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2679</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2680</td>
    <td class="">    if (!LoopBlockSet.empty()) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2681</td>
    <td class="">      BadLoop = true;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2682</td>
    <td class="">      for (const MachineBasicBlock *LoopBB : LoopBlockSet)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2683</td>
    <td class="">        dbgs() << "Loop contains blocks never placed into a chain!\n"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2684</td>
    <td class="">               << "  Loop header:  " << getBlockName(*L.block_begin()) << "\n"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2685</td>
    <td class="">               << "  Chain header: " << getBlockName(*LoopChain.begin()) << "\n"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2686</td>
    <td class="">               << "  Bad block:    " << getBlockName(LoopBB) << "\n";</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2687</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2688</td>
    <td class="">    assert(!BadLoop && "Detected problems with the placement of this loop.");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2689</td>
    <td class="">  });</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2690</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2691</td>
    <td class="uncoveredLine">  BlockWorkList.clear();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2692</td>
    <td class="uncoveredLine">  EHPadWorkList.clear();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2693</td>
    <td class="uncoveredLine">}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2694</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2695</td>
    <td class="uncoveredLine">void MachineBlockPlacement::buildCFGChains() {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2696</td>
    <td class="">  // Ensure that every BB in the function has an associated chain to simplify</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2697</td>
    <td class="">  // the assumptions of the remaining algorithm.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2698</td>
    <td class="uncoveredLine">  SmallVector<MachineOperand, 4> Cond; // For analyzeBranch.</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2699</td>
    <td class="uncoveredLine">  for (MachineFunction::iterator FI = F->begin(), FE = F->end(); FI != FE;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2700</td>
    <td class="uncoveredLine">       ++FI) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2701</td>
    <td class="uncoveredLine">    MachineBasicBlock *BB = &*FI;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2702</td>
    <td class="">    BlockChain *Chain =</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2703</td>
    <td class="uncoveredLine">        new (ChainAllocator.Allocate()) BlockChain(BlockToChain, BB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2704</td>
    <td class="">    // Also, merge any blocks which we cannot reason about and must preserve</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2705</td>
    <td class="">    // the exact fallthrough behavior for.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2706</td>
    <td class="">    while (true) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2707</td>
    <td class="uncoveredLine">      Cond.clear();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2708</td>
    <td class="uncoveredLine">      MachineBasicBlock *TBB = nullptr, *FBB = nullptr; // For analyzeBranch.</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2709</td>
    <td class="uncoveredLine">      if (!TII->analyzeBranch(*BB, TBB, FBB, Cond) || !FI->canFallThrough())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2710</td>
    <td class="uncoveredLine">        break;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2711</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2712</td>
    <td class="uncoveredLine">      MachineFunction::iterator NextFI = std::next(FI);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2713</td>
    <td class="uncoveredLine">      MachineBasicBlock *NextBB = &*NextFI;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2714</td>
    <td class="">      // Ensure that the layout successor is a viable block, as we know that</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2715</td>
    <td class="">      // fallthrough is a possibility.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2716</td>
    <td class="uncoveredLine">      assert(NextFI != FE && "Can't fallthrough past the last block.");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2717</td>
    <td class="uncoveredLine">      LLVM_DEBUG(dbgs() << "Pre-merging due to unanalyzable fallthrough: "</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2718</td>
    <td class="">                        << getBlockName(BB) << " -> " << getBlockName(NextBB)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2719</td>
    <td class="">                        << "\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2720</td>
    <td class="uncoveredLine">      Chain->merge(NextBB, nullptr);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2721</td>
    <td class="">#ifndef NDEBUG</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2722</td>
    <td class="uncoveredLine">      BlocksWithUnanalyzableExits.insert(&*BB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2723</td>
    <td class="">#endif</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2724</td>
    <td class="uncoveredLine">      FI = NextFI;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2725</td>
    <td class="uncoveredLine">      BB = NextBB;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2726</td>
    <td class="uncoveredLine">    }</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2727</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2728</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2729</td>
    <td class="">  // Build any loop-based chains.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2730</td>
    <td class="uncoveredLine">  PreferredLoopExit = nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2731</td>
    <td class="uncoveredLine">  for (MachineLoop *L : *MLI)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2732</td>
    <td class="uncoveredLine">    buildLoopChains(*L);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2733</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2734</td>
    <td class="uncoveredLine">  assert(BlockWorkList.empty() &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2735</td>
    <td class="">         "BlockWorkList should be empty before building final chain.");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2736</td>
    <td class="uncoveredLine">  assert(EHPadWorkList.empty() &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2737</td>
    <td class="">         "EHPadWorkList should be empty before building final chain.");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2738</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2739</td>
    <td class="uncoveredLine">  SmallPtrSet<BlockChain *, 4> UpdatedPreds;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2740</td>
    <td class="uncoveredLine">  for (MachineBasicBlock &MBB : *F)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2741</td>
    <td class="uncoveredLine">    fillWorkLists(&MBB, UpdatedPreds);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2742</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2743</td>
    <td class="uncoveredLine">  BlockChain &FunctionChain = *BlockToChain[&F->front()];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2744</td>
    <td class="uncoveredLine">  buildChain(&F->front(), FunctionChain);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2745</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2746</td>
    <td class="">#ifndef NDEBUG</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2747</td>
    <td class="">  using FunctionBlockSetType = SmallPtrSet<MachineBasicBlock *, 16>;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2748</td>
    <td class="">#endif</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2749</td>
    <td class="uncoveredLine">  LLVM_DEBUG({</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2750</td>
    <td class="">    // Crash at the end so we get all of the debugging output first.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2751</td>
    <td class="">    bool BadFunc = false;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2752</td>
    <td class="">    FunctionBlockSetType FunctionBlockSet;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2753</td>
    <td class="">    for (MachineBasicBlock &MBB : *F)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2754</td>
    <td class="">      FunctionBlockSet.insert(&MBB);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2755</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2756</td>
    <td class="">    for (MachineBasicBlock *ChainBB : FunctionChain)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2757</td>
    <td class="">      if (!FunctionBlockSet.erase(ChainBB)) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2758</td>
    <td class="">        BadFunc = true;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2759</td>
    <td class="">        dbgs() << "Function chain contains a block not in the function!\n"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2760</td>
    <td class="">               << "  Bad block:    " << getBlockName(ChainBB) << "\n";</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2761</td>
    <td class="">      }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2762</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2763</td>
    <td class="">    if (!FunctionBlockSet.empty()) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2764</td>
    <td class="">      BadFunc = true;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2765</td>
    <td class="">      for (MachineBasicBlock *RemainingBB : FunctionBlockSet)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2766</td>
    <td class="">        dbgs() << "Function contains blocks never placed into a chain!\n"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2767</td>
    <td class="">               << "  Bad block:    " << getBlockName(RemainingBB) << "\n";</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2768</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2769</td>
    <td class="">    assert(!BadFunc && "Detected problems with the block placement.");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2770</td>
    <td class="">  });</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2771</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2772</td>
    <td class="">  // Remember original layout ordering, so we can update terminators after</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2773</td>
    <td class="">  // reordering to point to the original layout successor.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2774</td>
    <td class="">  SmallVector<MachineBasicBlock *, 4> OriginalLayoutSuccessors(</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2775</td>
    <td class="uncoveredLine">      F->getNumBlockIDs());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2776</td>
    <td class="">  {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2777</td>
    <td class="uncoveredLine">    MachineBasicBlock *LastMBB = nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2778</td>
    <td class="uncoveredLine">    for (auto &MBB : *F) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2779</td>
    <td class="uncoveredLine">      if (LastMBB != nullptr)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2780</td>
    <td class="uncoveredLine">        OriginalLayoutSuccessors[LastMBB->getNumber()] = &MBB;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2781</td>
    <td class="uncoveredLine">      LastMBB = &MBB;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2782</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2783</td>
    <td class="uncoveredLine">    OriginalLayoutSuccessors[F->back().getNumber()] = nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2784</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2785</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2786</td>
    <td class="">  // Splice the blocks into place.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2787</td>
    <td class="uncoveredLine">  MachineFunction::iterator InsertPos = F->begin();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2788</td>
    <td class="uncoveredLine">  LLVM_DEBUG(dbgs() << "[MBP] Function: " << F->getName() << "\n");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2789</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *ChainBB : FunctionChain) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2790</td>
    <td class="uncoveredLine">    LLVM_DEBUG(dbgs() << (ChainBB == *FunctionChain.begin() ? "Placing chain "</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2791</td>
    <td class="">                                                            : "          ... ")</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2792</td>
    <td class="">                      << getBlockName(ChainBB) << "\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2793</td>
    <td class="uncoveredLine">    if (InsertPos != MachineFunction::iterator(ChainBB))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2794</td>
    <td class="uncoveredLine">      F->splice(InsertPos, ChainBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2795</td>
    <td class="">    else</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2796</td>
    <td class="uncoveredLine">      ++InsertPos;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2797</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2798</td>
    <td class="">    // Update the terminator of the previous block.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2799</td>
    <td class="uncoveredLine">    if (ChainBB == *FunctionChain.begin())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2800</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2801</td>
    <td class="uncoveredLine">    MachineBasicBlock *PrevBB = &*std::prev(MachineFunction::iterator(ChainBB));</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2802</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2803</td>
    <td class="">    // FIXME: It would be awesome of updateTerminator would just return rather</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2804</td>
    <td class="">    // than assert when the branch cannot be analyzed in order to remove this</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2805</td>
    <td class="">    // boiler plate.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2806</td>
    <td class="uncoveredLine">    Cond.clear();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2807</td>
    <td class="uncoveredLine">    MachineBasicBlock *TBB = nullptr, *FBB = nullptr; // For analyzeBranch.</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2808</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2809</td>
    <td class="">#ifndef NDEBUG</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2810</td>
    <td class="uncoveredLine">    if (!BlocksWithUnanalyzableExits.count(PrevBB)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2811</td>
    <td class="">      // Given the exact block placement we chose, we may actually not _need_ to</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2812</td>
    <td class="">      // be able to edit PrevBB's terminator sequence, but not being _able_ to</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2813</td>
    <td class="">      // do that at this point is a bug.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2814</td>
    <td class="uncoveredLine">      assert((!TII->analyzeBranch(*PrevBB, TBB, FBB, Cond) ||</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2815</td>
    <td class="">              !PrevBB->canFallThrough()) &&</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2816</td>
    <td class="">             "Unexpected block with un-analyzable fallthrough!");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2817</td>
    <td class="uncoveredLine">      Cond.clear();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2818</td>
    <td class="uncoveredLine">      TBB = FBB = nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2819</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2820</td>
    <td class="">#endif</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2821</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2822</td>
    <td class="">    // The "PrevBB" is not yet updated to reflect current code layout, so,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2823</td>
    <td class="">    //   o. it may fall-through to a block without explicit "goto" instruction</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2824</td>
    <td class="">    //      before layout, and no longer fall-through it after layout; or</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2825</td>
    <td class="">    //   o. just opposite.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2826</td>
    <td class="">    //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2827</td>
    <td class="">    // analyzeBranch() may return erroneous value for FBB when these two</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2828</td>
    <td class="">    // situations take place. For the first scenario FBB is mistakenly set NULL;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2829</td>
    <td class="">    // for the 2nd scenario, the FBB, which is expected to be NULL, is</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2830</td>
    <td class="">    // mistakenly pointing to "*BI".</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2831</td>
    <td class="">    // Thus, if the future change needs to use FBB before the layout is set, it</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2832</td>
    <td class="">    // has to correct FBB first by using the code similar to the following:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2833</td>
    <td class="">    //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2834</td>
    <td class="">    // if (!Cond.empty() && (!FBB || FBB == ChainBB)) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2835</td>
    <td class="">    //   PrevBB->updateTerminator();</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2836</td>
    <td class="">    //   Cond.clear();</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2837</td>
    <td class="">    //   TBB = FBB = nullptr;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2838</td>
    <td class="">    //   if (TII->analyzeBranch(*PrevBB, TBB, FBB, Cond)) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2839</td>
    <td class="">    //     // FIXME: This should never take place.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2840</td>
    <td class="">    //     TBB = FBB = nullptr;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2841</td>
    <td class="">    //   }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2842</td>
    <td class="">    // }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2843</td>
    <td class="uncoveredLine">    if (!TII->analyzeBranch(*PrevBB, TBB, FBB, Cond)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2844</td>
    <td class="uncoveredLine">      PrevBB->updateTerminator(OriginalLayoutSuccessors[PrevBB->getNumber()]);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2845</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2846</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2847</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2848</td>
    <td class="">  // Fixup the last block.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2849</td>
    <td class="uncoveredLine">  Cond.clear();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2850</td>
    <td class="uncoveredLine">  MachineBasicBlock *TBB = nullptr, *FBB = nullptr; // For analyzeBranch.</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2851</td>
    <td class="uncoveredLine">  if (!TII->analyzeBranch(F->back(), TBB, FBB, Cond)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2852</td>
    <td class="uncoveredLine">    MachineBasicBlock *PrevBB = &F->back();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2853</td>
    <td class="uncoveredLine">    PrevBB->updateTerminator(OriginalLayoutSuccessors[PrevBB->getNumber()]);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2854</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2855</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2856</td>
    <td class="uncoveredLine">  BlockWorkList.clear();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2857</td>
    <td class="uncoveredLine">  EHPadWorkList.clear();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2858</td>
    <td class="uncoveredLine">}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2859</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2860</td>
    <td class="uncoveredLine">void MachineBlockPlacement::optimizeBranches() {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2861</td>
    <td class="uncoveredLine">  BlockChain &FunctionChain = *BlockToChain[&F->front()];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2862</td>
    <td class="uncoveredLine">  SmallVector<MachineOperand, 4> Cond; // For analyzeBranch.</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2863</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2864</td>
    <td class="">  // Now that all the basic blocks in the chain have the proper layout,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2865</td>
    <td class="">  // make a final call to analyzeBranch with AllowModify set.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2866</td>
    <td class="">  // Indeed, the target may be able to optimize the branches in a way we</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2867</td>
    <td class="">  // cannot because all branches may not be analyzable.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2868</td>
    <td class="">  // E.g., the target may be able to remove an unconditional branch to</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2869</td>
    <td class="">  // a fallthrough when it occurs after predicated terminators.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2870</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *ChainBB : FunctionChain) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2871</td>
    <td class="uncoveredLine">    Cond.clear();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2872</td>
    <td class="uncoveredLine">    MachineBasicBlock *TBB = nullptr, *FBB = nullptr; // For analyzeBranch.</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2873</td>
    <td class="uncoveredLine">    if (!TII->analyzeBranch(*ChainBB, TBB, FBB, Cond, /*AllowModify*/ true)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2874</td>
    <td class="">      // If PrevBB has a two-way branch, try to re-order the branches</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2875</td>
    <td class="">      // such that we branch to the successor with higher probability first.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2876</td>
    <td class="uncoveredLine">      if (TBB && !Cond.empty() && FBB &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2877</td>
    <td class="uncoveredLine">          MBPI->getEdgeProbability(ChainBB, FBB) ></td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2878</td>
    <td class="uncoveredLine">              MBPI->getEdgeProbability(ChainBB, TBB) &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2879</td>
    <td class="uncoveredLine">          !TII->reverseBranchCondition(Cond)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2880</td>
    <td class="uncoveredLine">        LLVM_DEBUG(dbgs() << "Reverse order of the two branches: "</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2881</td>
    <td class="">                          << getBlockName(ChainBB) << "\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2882</td>
    <td class="uncoveredLine">        LLVM_DEBUG(dbgs() << "    Edge probability: "</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2883</td>
    <td class="">                          << MBPI->getEdgeProbability(ChainBB, FBB) << " vs "</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2884</td>
    <td class="">                          << MBPI->getEdgeProbability(ChainBB, TBB) << "\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2885</td>
    <td class="uncoveredLine">        DebugLoc dl; // FIXME: this is nowhere</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2886</td>
    <td class="uncoveredLine">        TII->removeBranch(*ChainBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2887</td>
    <td class="uncoveredLine">        TII->insertBranch(*ChainBB, FBB, TBB, Cond, dl);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2888</td>
    <td class="uncoveredLine">      }</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2889</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2890</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2891</td>
    <td class="uncoveredLine">}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2892</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2893</td>
    <td class="uncoveredLine">void MachineBlockPlacement::alignBlocks() {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2894</td>
    <td class="">  // Walk through the backedges of the function now that we have fully laid out</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2895</td>
    <td class="">  // the basic blocks and align the destination of each backedge. We don't rely</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2896</td>
    <td class="">  // exclusively on the loop info here so that we can align backedges in</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2897</td>
    <td class="">  // unnatural CFGs and backedges that were introduced purely because of the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2898</td>
    <td class="">  // loop rotations done during this layout pass.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2899</td>
    <td class="uncoveredLine">  if (F->getFunction().hasMinSize() ||</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2900</td>
    <td class="uncoveredLine">      (F->getFunction().hasOptSize() && !TLI->alignLoopsWithOptSize()))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2901</td>
    <td class="uncoveredLine">    return;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2902</td>
    <td class="uncoveredLine">  BlockChain &FunctionChain = *BlockToChain[&F->front()];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2903</td>
    <td class="uncoveredLine">  if (FunctionChain.begin() == FunctionChain.end())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2904</td>
    <td class="uncoveredLine">    return; // Empty chain.</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2905</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2906</td>
    <td class="uncoveredLine">  const BranchProbability ColdProb(1, 5); // 20%</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2907</td>
    <td class="uncoveredLine">  BlockFrequency EntryFreq = MBFI->getBlockFreq(&F->front());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2908</td>
    <td class="uncoveredLine">  BlockFrequency WeightedEntryFreq = EntryFreq * ColdProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2909</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *ChainBB : FunctionChain) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2910</td>
    <td class="uncoveredLine">    if (ChainBB == *FunctionChain.begin())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2911</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2912</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2913</td>
    <td class="">    // Don't align non-looping basic blocks. These are unlikely to execute</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2914</td>
    <td class="">    // enough times to matter in practice. Note that we'll still handle</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2915</td>
    <td class="">    // unnatural CFGs inside of a natural outer loop (the common case) and</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2916</td>
    <td class="">    // rotated loops.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2917</td>
    <td class="uncoveredLine">    MachineLoop *L = MLI->getLoopFor(ChainBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2918</td>
    <td class="uncoveredLine">    if (!L)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2919</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2920</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2921</td>
    <td class="uncoveredLine">    const Align Align = TLI->getPrefLoopAlignment(L);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2922</td>
    <td class="uncoveredLine">    if (Align == 1)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2923</td>
    <td class="uncoveredLine">      continue; // Don't care about loop alignment.</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2924</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2925</td>
    <td class="">    // If the block is cold relative to the function entry don't waste space</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2926</td>
    <td class="">    // aligning it.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2927</td>
    <td class="uncoveredLine">    BlockFrequency Freq = MBFI->getBlockFreq(ChainBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2928</td>
    <td class="uncoveredLine">    if (Freq < WeightedEntryFreq)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2929</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2930</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2931</td>
    <td class="">    // If the block is cold relative to its loop header, don't align it</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2932</td>
    <td class="">    // regardless of what edges into the block exist.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2933</td>
    <td class="uncoveredLine">    MachineBasicBlock *LoopHeader = L->getHeader();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2934</td>
    <td class="uncoveredLine">    BlockFrequency LoopHeaderFreq = MBFI->getBlockFreq(LoopHeader);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2935</td>
    <td class="uncoveredLine">    if (Freq < (LoopHeaderFreq * ColdProb))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2936</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2937</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2938</td>
    <td class="">    // If the global profiles indicates so, don't align it.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2939</td>
    <td class="uncoveredLine">    if (llvm::shouldOptimizeForSize(ChainBB, PSI, MBFI.get()) &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2940</td>
    <td class="uncoveredLine">        !TLI->alignLoopsWithOptSize())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2941</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2942</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2943</td>
    <td class="">    // Check for the existence of a non-layout predecessor which would benefit</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2944</td>
    <td class="">    // from aligning this block.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2945</td>
    <td class="">    MachineBasicBlock *LayoutPred =</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2946</td>
    <td class="uncoveredLine">        &*std::prev(MachineFunction::iterator(ChainBB));</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2947</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2948</td>
    <td class="uncoveredLine">    auto DetermineMaxAlignmentPadding = [&]() {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2949</td>
    <td class="">      // Set the maximum bytes allowed to be emitted for alignment.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2950</td>
    <td class="">      unsigned MaxBytes;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2951</td>
    <td class="uncoveredLine">      if (MaxBytesForAlignmentOverride.getNumOccurrences() > 0)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2952</td>
    <td class="uncoveredLine">        MaxBytes = MaxBytesForAlignmentOverride;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2953</td>
    <td class="">      else</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2954</td>
    <td class="uncoveredLine">        MaxBytes = TLI->getMaxPermittedBytesForAlignment(ChainBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2955</td>
    <td class="uncoveredLine">      ChainBB->setMaxBytesForAlignment(MaxBytes);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2956</td>
    <td class="uncoveredLine">    };</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2957</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2958</td>
    <td class="">    // Force alignment if all the predecessors are jumps. We already checked</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2959</td>
    <td class="">    // that the block isn't cold above.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2960</td>
    <td class="uncoveredLine">    if (!LayoutPred->isSuccessor(ChainBB)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2961</td>
    <td class="uncoveredLine">      ChainBB->setAlignment(Align);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2962</td>
    <td class="uncoveredLine">      DetermineMaxAlignmentPadding();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2963</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2964</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2965</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2966</td>
    <td class="">    // Align this block if the layout predecessor's edge into this block is</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2967</td>
    <td class="">    // cold relative to the block. When this is true, other predecessors make up</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2968</td>
    <td class="">    // all of the hot entries into the block and thus alignment is likely to be</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2969</td>
    <td class="">    // important.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2970</td>
    <td class="">    BranchProbability LayoutProb =</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2971</td>
    <td class="uncoveredLine">        MBPI->getEdgeProbability(LayoutPred, ChainBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2972</td>
    <td class="uncoveredLine">    BlockFrequency LayoutEdgeFreq = MBFI->getBlockFreq(LayoutPred) * LayoutProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2973</td>
    <td class="uncoveredLine">    if (LayoutEdgeFreq <= (Freq * ColdProb)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2974</td>
    <td class="uncoveredLine">      ChainBB->setAlignment(Align);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2975</td>
    <td class="uncoveredLine">      DetermineMaxAlignmentPadding();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2976</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2977</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2978</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2979</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2980</td>
    <td class="">/// Tail duplicate \p BB into (some) predecessors if profitable, repeating if</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2981</td>
    <td class="">/// it was duplicated into its chain predecessor and removed.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2982</td>
    <td class="">/// \p BB    - Basic block that may be duplicated.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2983</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2984</td>
    <td class="">/// \p LPred - Chosen layout predecessor of \p BB.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2985</td>
    <td class="">///            Updated to be the chain end if LPred is removed.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2986</td>
    <td class="">/// \p Chain - Chain to which \p LPred belongs, and \p BB will belong.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2987</td>
    <td class="">/// \p BlockFilter - Set of blocks that belong to the loop being laid out.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2988</td>
    <td class="">///                  Used to identify which blocks to update predecessor</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2989</td>
    <td class="">///                  counts.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2990</td>
    <td class="">/// \p PrevUnplacedBlockIt - Iterator pointing to the last block that was</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2991</td>
    <td class="">///                          chosen in the given order due to unnatural CFG</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2992</td>
    <td class="">///                          only needed if \p BB is removed and</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2993</td>
    <td class="">///                          \p PrevUnplacedBlockIt pointed to \p BB.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2994</td>
    <td class="">/// @return true if \p BB was removed.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2995</td>
    <td class="uncoveredLine">bool MachineBlockPlacement::repeatedlyTailDuplicateBlock(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2996</td>
    <td class="">    MachineBasicBlock *BB, MachineBasicBlock *&LPred,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2997</td>
    <td class="">    const MachineBasicBlock *LoopHeaderBB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2998</td>
    <td class="">    BlockChain &Chain, BlockFilterSet *BlockFilter,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2999</td>
    <td class="">    MachineFunction::iterator &PrevUnplacedBlockIt) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3000</td>
    <td class="">  bool Removed, DuplicatedToLPred;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3001</td>
    <td class="">  bool DuplicatedToOriginalLPred;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3002</td>
    <td class="uncoveredLine">  Removed = maybeTailDuplicateBlock(BB, LPred, Chain, BlockFilter,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3003</td>
    <td class="">                                    PrevUnplacedBlockIt,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3004</td>
    <td class="">                                    DuplicatedToLPred);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3005</td>
    <td class="uncoveredLine">  if (!Removed)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3006</td>
    <td class="uncoveredLine">    return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3007</td>
    <td class="uncoveredLine">  DuplicatedToOriginalLPred = DuplicatedToLPred;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3008</td>
    <td class="">  // Iteratively try to duplicate again. It can happen that a block that is</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3009</td>
    <td class="">  // duplicated into is still small enough to be duplicated again.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3010</td>
    <td class="">  // No need to call markBlockSuccessors in this case, as the blocks being</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3011</td>
    <td class="">  // duplicated from here on are already scheduled.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3012</td>
    <td class="uncoveredLine">  while (DuplicatedToLPred && Removed) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3013</td>
    <td class="">    MachineBasicBlock *DupBB, *DupPred;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3014</td>
    <td class="">    // The removal callback causes Chain.end() to be updated when a block is</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3015</td>
    <td class="">    // removed. On the first pass through the loop, the chain end should be the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3016</td>
    <td class="">    // same as it was on function entry. On subsequent passes, because we are</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3017</td>
    <td class="">    // duplicating the block at the end of the chain, if it is removed the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3018</td>
    <td class="">    // chain will have shrunk by one block.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3019</td>
    <td class="uncoveredLine">    BlockChain::iterator ChainEnd = Chain.end();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3020</td>
    <td class="uncoveredLine">    DupBB = *(--ChainEnd);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3021</td>
    <td class="">    // Now try to duplicate again.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3022</td>
    <td class="uncoveredLine">    if (ChainEnd == Chain.begin())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3023</td>
    <td class="uncoveredLine">      break;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3024</td>
    <td class="uncoveredLine">    DupPred = *std::prev(ChainEnd);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3025</td>
    <td class="uncoveredLine">    Removed = maybeTailDuplicateBlock(DupBB, DupPred, Chain, BlockFilter,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3026</td>
    <td class="">                                      PrevUnplacedBlockIt,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3027</td>
    <td class="">                                      DuplicatedToLPred);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3028</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3029</td>
    <td class="">  // If BB was duplicated into LPred, it is now scheduled. But because it was</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3030</td>
    <td class="">  // removed, markChainSuccessors won't be called for its chain. Instead we</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3031</td>
    <td class="">  // call markBlockSuccessors for LPred to achieve the same effect. This must go</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3032</td>
    <td class="">  // at the end because repeating the tail duplication can increase the number</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3033</td>
    <td class="">  // of unscheduled predecessors.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3034</td>
    <td class="uncoveredLine">  LPred = *std::prev(Chain.end());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3035</td>
    <td class="uncoveredLine">  if (DuplicatedToOriginalLPred)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3036</td>
    <td class="uncoveredLine">    markBlockSuccessors(Chain, LPred, LoopHeaderBB, BlockFilter);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3037</td>
    <td class="uncoveredLine">  return true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3038</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3039</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3040</td>
    <td class="">/// Tail duplicate \p BB into (some) predecessors if profitable.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3041</td>
    <td class="">/// \p BB    - Basic block that may be duplicated</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3042</td>
    <td class="">/// \p LPred - Chosen layout predecessor of \p BB</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3043</td>
    <td class="">/// \p Chain - Chain to which \p LPred belongs, and \p BB will belong.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3044</td>
    <td class="">/// \p BlockFilter - Set of blocks that belong to the loop being laid out.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3045</td>
    <td class="">///                  Used to identify which blocks to update predecessor</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3046</td>
    <td class="">///                  counts.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3047</td>
    <td class="">/// \p PrevUnplacedBlockIt - Iterator pointing to the last block that was</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3048</td>
    <td class="">///                          chosen in the given order due to unnatural CFG</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3049</td>
    <td class="">///                          only needed if \p BB is removed and</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3050</td>
    <td class="">///                          \p PrevUnplacedBlockIt pointed to \p BB.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3051</td>
    <td class="">/// \p DuplicatedToLPred - True if the block was duplicated into LPred.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3052</td>
    <td class="">/// \return  - True if the block was duplicated into all preds and removed.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3053</td>
    <td class="uncoveredLine">bool MachineBlockPlacement::maybeTailDuplicateBlock(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3054</td>
    <td class="">    MachineBasicBlock *BB, MachineBasicBlock *LPred,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3055</td>
    <td class="">    BlockChain &Chain, BlockFilterSet *BlockFilter,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3056</td>
    <td class="">    MachineFunction::iterator &PrevUnplacedBlockIt,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3057</td>
    <td class="">    bool &DuplicatedToLPred) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3058</td>
    <td class="uncoveredLine">  DuplicatedToLPred = false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3059</td>
    <td class="uncoveredLine">  if (!shouldTailDuplicate(BB))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3060</td>
    <td class="uncoveredLine">    return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3061</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3062</td>
    <td class="uncoveredLine">  LLVM_DEBUG(dbgs() << "Redoing tail duplication for Succ#" << BB->getNumber()</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3063</td>
    <td class="">                    << "\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3064</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3065</td>
    <td class="">  // This has to be a callback because none of it can be done after</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3066</td>
    <td class="">  // BB is deleted.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3067</td>
    <td class="uncoveredLine">  bool Removed = false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3068</td>
    <td class="">  auto RemovalCallback =</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3069</td>
    <td class="uncoveredLine">      [&](MachineBasicBlock *RemBB) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3070</td>
    <td class="">        // Signal to outer function</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3071</td>
    <td class="uncoveredLine">        Removed = true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3072</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3073</td>
    <td class="">        // Conservative default.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3074</td>
    <td class="uncoveredLine">        bool InWorkList = true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3075</td>
    <td class="">        // Remove from the Chain and Chain Map</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3076</td>
    <td class="uncoveredLine">        if (BlockToChain.count(RemBB)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3077</td>
    <td class="uncoveredLine">          BlockChain *Chain = BlockToChain[RemBB];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3078</td>
    <td class="uncoveredLine">          InWorkList = Chain->UnscheduledPredecessors == 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3079</td>
    <td class="uncoveredLine">          Chain->remove(RemBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3080</td>
    <td class="uncoveredLine">          BlockToChain.erase(RemBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3081</td>
    <td class="">        }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3082</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3083</td>
    <td class="">        // Handle the unplaced block iterator</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3084</td>
    <td class="uncoveredLine">        if (&(*PrevUnplacedBlockIt) == RemBB) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3085</td>
    <td class="uncoveredLine">          PrevUnplacedBlockIt++;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3086</td>
    <td class="">        }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3087</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3088</td>
    <td class="">        // Handle the Work Lists</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3089</td>
    <td class="uncoveredLine">        if (InWorkList) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3090</td>
    <td class="uncoveredLine">          SmallVectorImpl<MachineBasicBlock *> &RemoveList = BlockWorkList;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3091</td>
    <td class="uncoveredLine">          if (RemBB->isEHPad())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3092</td>
    <td class="uncoveredLine">            RemoveList = EHPadWorkList;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3093</td>
    <td class="uncoveredLine">          llvm::erase_value(RemoveList, RemBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3094</td>
    <td class="">        }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3095</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3096</td>
    <td class="">        // Handle the filter set</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3097</td>
    <td class="uncoveredLine">        if (BlockFilter) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3098</td>
    <td class="uncoveredLine">          BlockFilter->remove(RemBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3099</td>
    <td class="">        }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3100</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3101</td>
    <td class="">        // Remove the block from loop info.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3102</td>
    <td class="uncoveredLine">        MLI->removeBlock(RemBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3103</td>
    <td class="uncoveredLine">        if (RemBB == PreferredLoopExit)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3104</td>
    <td class="uncoveredLine">          PreferredLoopExit = nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3105</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3106</td>
    <td class="uncoveredLine">        LLVM_DEBUG(dbgs() << "TailDuplicator deleted block: "</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3107</td>
    <td class="">                          << getBlockName(RemBB) << "\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3108</td>
    <td class="uncoveredLine">      };</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3109</td>
    <td class="">  auto RemovalCallbackRef =</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3110</td>
    <td class="uncoveredLine">      function_ref<void(MachineBasicBlock*)>(RemovalCallback);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3111</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3112</td>
    <td class="uncoveredLine">  SmallVector<MachineBasicBlock *, 8> DuplicatedPreds;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3113</td>
    <td class="uncoveredLine">  bool IsSimple = TailDup.isSimpleBB(BB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3114</td>
    <td class="uncoveredLine">  SmallVector<MachineBasicBlock *, 8> CandidatePreds;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3115</td>
    <td class="uncoveredLine">  SmallVectorImpl<MachineBasicBlock *> *CandidatePtr = nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3116</td>
    <td class="uncoveredLine">  if (F->getFunction().hasProfileData()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3117</td>
    <td class="">    // We can do partial duplication with precise profile information.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3118</td>
    <td class="uncoveredLine">    findDuplicateCandidates(CandidatePreds, BB, BlockFilter);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3119</td>
    <td class="uncoveredLine">    if (CandidatePreds.size() == 0)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3120</td>
    <td class="uncoveredLine">      return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3121</td>
    <td class="uncoveredLine">    if (CandidatePreds.size() < BB->pred_size())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3122</td>
    <td class="uncoveredLine">      CandidatePtr = &CandidatePreds;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3123</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3124</td>
    <td class="uncoveredLine">  TailDup.tailDuplicateAndUpdate(IsSimple, BB, LPred, &DuplicatedPreds,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3125</td>
    <td class="">                                 &RemovalCallbackRef, CandidatePtr);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3126</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3127</td>
    <td class="">  // Update UnscheduledPredecessors to reflect tail-duplication.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3128</td>
    <td class="uncoveredLine">  DuplicatedToLPred = false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3129</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *Pred : DuplicatedPreds) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3130</td>
    <td class="">    // We're only looking for unscheduled predecessors that match the filter.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3131</td>
    <td class="uncoveredLine">    BlockChain* PredChain = BlockToChain[Pred];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3132</td>
    <td class="uncoveredLine">    if (Pred == LPred)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3133</td>
    <td class="uncoveredLine">      DuplicatedToLPred = true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3134</td>
    <td class="uncoveredLine">    if (Pred == LPred || (BlockFilter && !BlockFilter->count(Pred))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3135</td>
    <td class="uncoveredLine">        || PredChain == &Chain)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3136</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3137</td>
    <td class="uncoveredLine">    for (MachineBasicBlock *NewSucc : Pred->successors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3138</td>
    <td class="uncoveredLine">      if (BlockFilter && !BlockFilter->count(NewSucc))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3139</td>
    <td class="uncoveredLine">        continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3140</td>
    <td class="uncoveredLine">      BlockChain *NewChain = BlockToChain[NewSucc];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3141</td>
    <td class="uncoveredLine">      if (NewChain != &Chain && NewChain != PredChain)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3142</td>
    <td class="uncoveredLine">        NewChain->UnscheduledPredecessors++;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3143</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3144</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3145</td>
    <td class="uncoveredLine">  return Removed;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3146</td>
    <td class="uncoveredLine">}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3147</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3148</td>
    <td class="">// Count the number of actual machine instructions.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3149</td>
    <td class="uncoveredLine">static uint64_t countMBBInstruction(MachineBasicBlock *MBB) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3150</td>
    <td class="uncoveredLine">  uint64_t InstrCount = 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3151</td>
    <td class="uncoveredLine">  for (MachineInstr &MI : *MBB) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3152</td>
    <td class="uncoveredLine">    if (!MI.isPHI() && !MI.isMetaInstruction())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3153</td>
    <td class="uncoveredLine">      InstrCount += 1;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3154</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3155</td>
    <td class="uncoveredLine">  return InstrCount;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3156</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3157</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3158</td>
    <td class="">// The size cost of duplication is the instruction size of the duplicated block.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3159</td>
    <td class="">// So we should scale the threshold accordingly. But the instruction size is not</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3160</td>
    <td class="">// available on all targets, so we use the number of instructions instead.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3161</td>
    <td class="uncoveredLine">BlockFrequency MachineBlockPlacement::scaleThreshold(MachineBasicBlock *BB) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3162</td>
    <td class="uncoveredLine">  return DupThreshold.getFrequency() * countMBBInstruction(BB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3163</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3164</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3165</td>
    <td class="">// Returns true if BB is Pred's best successor.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3166</td>
    <td class="uncoveredLine">bool MachineBlockPlacement::isBestSuccessor(MachineBasicBlock *BB,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3167</td>
    <td class="">                                            MachineBasicBlock *Pred,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3168</td>
    <td class="">                                            BlockFilterSet *BlockFilter) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3169</td>
    <td class="uncoveredLine">  if (BB == Pred)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3170</td>
    <td class="uncoveredLine">    return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3171</td>
    <td class="uncoveredLine">  if (BlockFilter && !BlockFilter->count(Pred))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3172</td>
    <td class="uncoveredLine">    return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3173</td>
    <td class="uncoveredLine">  BlockChain *PredChain = BlockToChain[Pred];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3174</td>
    <td class="uncoveredLine">  if (PredChain && (Pred != *std::prev(PredChain->end())))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3175</td>
    <td class="uncoveredLine">    return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3176</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3177</td>
    <td class="">  // Find the successor with largest probability excluding BB.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3178</td>
    <td class="uncoveredLine">  BranchProbability BestProb = BranchProbability::getZero();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3179</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *Succ : Pred->successors())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3180</td>
    <td class="uncoveredLine">    if (Succ != BB) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3181</td>
    <td class="uncoveredLine">      if (BlockFilter && !BlockFilter->count(Succ))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3182</td>
    <td class="uncoveredLine">        continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3183</td>
    <td class="uncoveredLine">      BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3184</td>
    <td class="uncoveredLine">      if (SuccChain && (Succ != *SuccChain->begin()))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3185</td>
    <td class="uncoveredLine">        continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3186</td>
    <td class="uncoveredLine">      BranchProbability SuccProb = MBPI->getEdgeProbability(Pred, Succ);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3187</td>
    <td class="uncoveredLine">      if (SuccProb > BestProb)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3188</td>
    <td class="uncoveredLine">        BestProb = SuccProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3189</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3190</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3191</td>
    <td class="uncoveredLine">  BranchProbability BBProb = MBPI->getEdgeProbability(Pred, BB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3192</td>
    <td class="uncoveredLine">  if (BBProb <= BestProb)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3193</td>
    <td class="uncoveredLine">    return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3194</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3195</td>
    <td class="">  // Compute the number of reduced taken branches if Pred falls through to BB</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3196</td>
    <td class="">  // instead of another successor. Then compare it with threshold.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3197</td>
    <td class="uncoveredLine">  BlockFrequency PredFreq = getBlockCountOrFrequency(Pred);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3198</td>
    <td class="uncoveredLine">  BlockFrequency Gain = PredFreq * (BBProb - BestProb);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3199</td>
    <td class="uncoveredLine">  return Gain > scaleThreshold(BB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3200</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3201</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3202</td>
    <td class="">// Find out the predecessors of BB and BB can be beneficially duplicated into</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3203</td>
    <td class="">// them.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3204</td>
    <td class="uncoveredLine">void MachineBlockPlacement::findDuplicateCandidates(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3205</td>
    <td class="">    SmallVectorImpl<MachineBasicBlock *> &Candidates,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3206</td>
    <td class="">    MachineBasicBlock *BB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3207</td>
    <td class="">    BlockFilterSet *BlockFilter) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3208</td>
    <td class="uncoveredLine">  MachineBasicBlock *Fallthrough = nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3209</td>
    <td class="uncoveredLine">  BranchProbability DefaultBranchProb = BranchProbability::getZero();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3210</td>
    <td class="uncoveredLine">  BlockFrequency BBDupThreshold(scaleThreshold(BB));</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3211</td>
    <td class="uncoveredLine">  SmallVector<MachineBasicBlock *, 8> Preds(BB->predecessors());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3212</td>
    <td class="uncoveredLine">  SmallVector<MachineBasicBlock *, 8> Succs(BB->successors());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3213</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3214</td>
    <td class="">  // Sort for highest frequency.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3215</td>
    <td class="uncoveredLine">  auto CmpSucc = [&](MachineBasicBlock *A, MachineBasicBlock *B) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3216</td>
    <td class="uncoveredLine">    return MBPI->getEdgeProbability(BB, A) > MBPI->getEdgeProbability(BB, B);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3217</td>
    <td class="uncoveredLine">  };</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3218</td>
    <td class="uncoveredLine">  auto CmpPred = [&](MachineBasicBlock *A, MachineBasicBlock *B) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3219</td>
    <td class="uncoveredLine">    return MBFI->getBlockFreq(A) > MBFI->getBlockFreq(B);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3220</td>
    <td class="uncoveredLine">  };</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3221</td>
    <td class="uncoveredLine">  llvm::stable_sort(Succs, CmpSucc);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3222</td>
    <td class="uncoveredLine">  llvm::stable_sort(Preds, CmpPred);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3223</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3224</td>
    <td class="uncoveredLine">  auto SuccIt = Succs.begin();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3225</td>
    <td class="uncoveredLine">  if (SuccIt != Succs.end()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3226</td>
    <td class="uncoveredLine">    DefaultBranchProb = MBPI->getEdgeProbability(BB, *SuccIt).getCompl();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3227</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3228</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3229</td>
    <td class="">  // For each predecessors of BB, compute the benefit of duplicating BB,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3230</td>
    <td class="">  // if it is larger than the threshold, add it into Candidates.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3231</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3232</td>
    <td class="">  // If we have following control flow.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3233</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3234</td>
    <td class="">  //     PB1 PB2 PB3 PB4</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3235</td>
    <td class="">  //      \   |  /    /\</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3236</td>
    <td class="">  //       \  | /    /  \</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3237</td>
    <td class="">  //        \ |/    /    \</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3238</td>
    <td class="">  //         BB----/     OB</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3239</td>
    <td class="">  //         /\</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3240</td>
    <td class="">  //        /  \</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3241</td>
    <td class="">  //      SB1 SB2</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3242</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3243</td>
    <td class="">  // And it can be partially duplicated as</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3244</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3245</td>
    <td class="">  //   PB2+BB</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3246</td>
    <td class="">  //      |  PB1 PB3 PB4</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3247</td>
    <td class="">  //      |   |  /    /\</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3248</td>
    <td class="">  //      |   | /    /  \</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3249</td>
    <td class="">  //      |   |/    /    \</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3250</td>
    <td class="">  //      |  BB----/     OB</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3251</td>
    <td class="">  //      |\ /|</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3252</td>
    <td class="">  //      | X |</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3253</td>
    <td class="">  //      |/ \|</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3254</td>
    <td class="">  //     SB2 SB1</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3255</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3256</td>
    <td class="">  // The benefit of duplicating into a predecessor is defined as</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3257</td>
    <td class="">  //         Orig_taken_branch - Duplicated_taken_branch</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3258</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3259</td>
    <td class="">  // The Orig_taken_branch is computed with the assumption that predecessor</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3260</td>
    <td class="">  // jumps to BB and the most possible successor is laid out after BB.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3261</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3262</td>
    <td class="">  // The Duplicated_taken_branch is computed with the assumption that BB is</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3263</td>
    <td class="">  // duplicated into PB, and one successor is layout after it (SB1 for PB1 and</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3264</td>
    <td class="">  // SB2 for PB2 in our case). If there is no available successor, the combined</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3265</td>
    <td class="">  // block jumps to all BB's successor, like PB3 in this example.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3266</td>
    <td class="">  //</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3267</td>
    <td class="">  // If a predecessor has multiple successors, so BB can't be duplicated into</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3268</td>
    <td class="">  // it. But it can beneficially fall through to BB, and duplicate BB into other</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3269</td>
    <td class="">  // predecessors.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3270</td>
    <td class="uncoveredLine">  for (MachineBasicBlock *Pred : Preds) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3271</td>
    <td class="uncoveredLine">    BlockFrequency PredFreq = getBlockCountOrFrequency(Pred);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3272</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3273</td>
    <td class="uncoveredLine">    if (!TailDup.canTailDuplicate(BB, Pred)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3274</td>
    <td class="">      // BB can't be duplicated into Pred, but it is possible to be layout</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3275</td>
    <td class="">      // below Pred.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3276</td>
    <td class="uncoveredLine">      if (!Fallthrough && isBestSuccessor(BB, Pred, BlockFilter)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3277</td>
    <td class="uncoveredLine">        Fallthrough = Pred;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3278</td>
    <td class="uncoveredLine">        if (SuccIt != Succs.end())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3279</td>
    <td class="uncoveredLine">          SuccIt++;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3280</td>
    <td class="">      }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3281</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3282</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3283</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3284</td>
    <td class="uncoveredLine">    BlockFrequency OrigCost = PredFreq + PredFreq * DefaultBranchProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3285</td>
    <td class="uncoveredLine">    BlockFrequency DupCost;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3286</td>
    <td class="uncoveredLine">    if (SuccIt == Succs.end()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3287</td>
    <td class="">      // Jump to all successors;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3288</td>
    <td class="uncoveredLine">      if (Succs.size() > 0)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3289</td>
    <td class="uncoveredLine">        DupCost += PredFreq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3290</td>
    <td class="">    } else {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3291</td>
    <td class="">      // Fallthrough to *SuccIt, jump to all other successors;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3292</td>
    <td class="uncoveredLine">      DupCost += PredFreq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3293</td>
    <td class="uncoveredLine">      DupCost -= PredFreq * MBPI->getEdgeProbability(BB, *SuccIt);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3294</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3295</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3296</td>
    <td class="uncoveredLine">    assert(OrigCost >= DupCost);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3297</td>
    <td class="uncoveredLine">    OrigCost -= DupCost;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3298</td>
    <td class="uncoveredLine">    if (OrigCost > BBDupThreshold) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3299</td>
    <td class="uncoveredLine">      Candidates.push_back(Pred);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3300</td>
    <td class="uncoveredLine">      if (SuccIt != Succs.end())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3301</td>
    <td class="uncoveredLine">        SuccIt++;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3302</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3303</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3304</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3305</td>
    <td class="">  // No predecessors can optimally fallthrough to BB.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3306</td>
    <td class="">  // So we can change one duplication into fallthrough.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3307</td>
    <td class="uncoveredLine">  if (!Fallthrough) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3308</td>
    <td class="uncoveredLine">    if ((Candidates.size() < Preds.size()) && (Candidates.size() > 0)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3309</td>
    <td class="uncoveredLine">      Candidates[0] = Candidates.back();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3310</td>
    <td class="uncoveredLine">      Candidates.pop_back();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3311</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3312</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3313</td>
    <td class="uncoveredLine">}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3314</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3315</td>
    <td class="uncoveredLine">void MachineBlockPlacement::initDupThreshold() {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3316</td>
    <td class="uncoveredLine">  DupThreshold = 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3317</td>
    <td class="uncoveredLine">  if (!F->getFunction().hasProfileData())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3318</td>
    <td class="uncoveredLine">    return;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3319</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3320</td>
    <td class="">  // We prefer to use prifile count.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3321</td>
    <td class="uncoveredLine">  uint64_t HotThreshold = PSI->getOrCompHotCountThreshold();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3322</td>
    <td class="uncoveredLine">  if (HotThreshold != UINT64_MAX) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3323</td>
    <td class="uncoveredLine">    UseProfileCount = true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3324</td>
    <td class="uncoveredLine">    DupThreshold = HotThreshold * TailDupProfilePercentThreshold / 100;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3325</td>
    <td class="uncoveredLine">    return;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3326</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3327</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3328</td>
    <td class="">  // Profile count is not available, we can use block frequency instead.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3329</td>
    <td class="uncoveredLine">  BlockFrequency MaxFreq = 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3330</td>
    <td class="uncoveredLine">  for (MachineBasicBlock &MBB : *F) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3331</td>
    <td class="uncoveredLine">    BlockFrequency Freq = MBFI->getBlockFreq(&MBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3332</td>
    <td class="uncoveredLine">    if (Freq > MaxFreq)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3333</td>
    <td class="uncoveredLine">      MaxFreq = Freq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3334</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3335</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3336</td>
    <td class="uncoveredLine">  BranchProbability ThresholdProb(TailDupPlacementPenalty, 100);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3337</td>
    <td class="uncoveredLine">  DupThreshold = MaxFreq * ThresholdProb;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3338</td>
    <td class="uncoveredLine">  UseProfileCount = false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3339</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3340</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3341</td>
    <td class="coveredLine">bool MachineBlockPlacement::runOnMachineFunction(MachineFunction &MF) {</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3342</td>
    <td class="coveredLine">  if (skipFunction(MF.getFunction()))</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3343</td>
    <td class="coveredLine">    return false;</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3344</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3345</td>
    <td class="">  // Check for single-block functions and skip them.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3346</td>
    <td class="uncoveredLine">  if (std::next(MF.begin()) == MF.end())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3347</td>
    <td class="uncoveredLine">    return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3348</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3349</td>
    <td class="uncoveredLine">  F = &MF;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3350</td>
    <td class="uncoveredLine">  MBPI = &getAnalysis<MachineBranchProbabilityInfo>();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3351</td>
    <td class="uncoveredLine">  MBFI = std::make_unique<MBFIWrapper>(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3352</td>
    <td class="uncoveredLine">      getAnalysis<MachineBlockFrequencyInfo>());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3353</td>
    <td class="uncoveredLine">  MLI = &getAnalysis<MachineLoopInfo>();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3354</td>
    <td class="uncoveredLine">  TII = MF.getSubtarget().getInstrInfo();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3355</td>
    <td class="uncoveredLine">  TLI = MF.getSubtarget().getTargetLowering();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3356</td>
    <td class="uncoveredLine">  MPDT = nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3357</td>
    <td class="uncoveredLine">  PSI = &getAnalysis<ProfileSummaryInfoWrapperPass>().getPSI();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3358</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3359</td>
    <td class="uncoveredLine">  initDupThreshold();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3360</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3361</td>
    <td class="">  // Initialize PreferredLoopExit to nullptr here since it may never be set if</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3362</td>
    <td class="">  // there are no MachineLoops.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3363</td>
    <td class="uncoveredLine">  PreferredLoopExit = nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3364</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3365</td>
    <td class="uncoveredLine">  assert(BlockToChain.empty() &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3366</td>
    <td class="">         "BlockToChain map should be empty before starting placement.");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3367</td>
    <td class="uncoveredLine">  assert(ComputedEdges.empty() &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3368</td>
    <td class="">         "Computed Edge map should be empty before starting placement.");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3369</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3370</td>
    <td class="uncoveredLine">  unsigned TailDupSize = TailDupPlacementThreshold;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3371</td>
    <td class="">  // If only the aggressive threshold is explicitly set, use it.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3372</td>
    <td class="uncoveredLine">  if (TailDupPlacementAggressiveThreshold.getNumOccurrences() != 0 &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3373</td>
    <td class="uncoveredLine">      TailDupPlacementThreshold.getNumOccurrences() == 0)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3374</td>
    <td class="uncoveredLine">    TailDupSize = TailDupPlacementAggressiveThreshold;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3375</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3376</td>
    <td class="uncoveredLine">  TargetPassConfig *PassConfig = &getAnalysis<TargetPassConfig>();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3377</td>
    <td class="">  // For aggressive optimization, we can adjust some thresholds to be less</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3378</td>
    <td class="">  // conservative.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3379</td>
    <td class="uncoveredLine">  if (PassConfig->getOptLevel() >= CodeGenOpt::Aggressive) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3380</td>
    <td class="">    // At O3 we should be more willing to copy blocks for tail duplication. This</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3381</td>
    <td class="">    // increases size pressure, so we only do it at O3</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3382</td>
    <td class="">    // Do this unless only the regular threshold is explicitly set.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3383</td>
    <td class="uncoveredLine">    if (TailDupPlacementThreshold.getNumOccurrences() == 0 ||</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3384</td>
    <td class="uncoveredLine">        TailDupPlacementAggressiveThreshold.getNumOccurrences() != 0)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3385</td>
    <td class="uncoveredLine">      TailDupSize = TailDupPlacementAggressiveThreshold;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3386</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3387</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3388</td>
    <td class="">  // If there's no threshold provided through options, query the target</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3389</td>
    <td class="">  // information for a threshold instead.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3390</td>
    <td class="uncoveredLine">  if (TailDupPlacementThreshold.getNumOccurrences() == 0 &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3391</td>
    <td class="uncoveredLine">      (PassConfig->getOptLevel() < CodeGenOpt::Aggressive ||</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3392</td>
    <td class="uncoveredLine">       TailDupPlacementAggressiveThreshold.getNumOccurrences() == 0))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3393</td>
    <td class="uncoveredLine">    TailDupSize = TII->getTailDuplicateSize(PassConfig->getOptLevel());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3394</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3395</td>
    <td class="uncoveredLine">  if (allowTailDupPlacement()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3396</td>
    <td class="uncoveredLine">    MPDT = &getAnalysis<MachinePostDominatorTree>();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3397</td>
    <td class="uncoveredLine">    bool OptForSize = MF.getFunction().hasOptSize() ||</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3398</td>
    <td class="uncoveredLine">                      llvm::shouldOptimizeForSize(&MF, PSI, &MBFI->getMBFI());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3399</td>
    <td class="uncoveredLine">    if (OptForSize)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3400</td>
    <td class="uncoveredLine">      TailDupSize = 1;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3401</td>
    <td class="uncoveredLine">    bool PreRegAlloc = false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3402</td>
    <td class="uncoveredLine">    TailDup.initMF(MF, PreRegAlloc, MBPI, MBFI.get(), PSI,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3403</td>
    <td class="">                   /* LayoutMode */ true, TailDupSize);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3404</td>
    <td class="uncoveredLine">    precomputeTriangleChains();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3405</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3406</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3407</td>
    <td class="uncoveredLine">  buildCFGChains();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3408</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3409</td>
    <td class="">  // Changing the layout can create new tail merging opportunities.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3410</td>
    <td class="">  // TailMerge can create jump into if branches that make CFG irreducible for</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3411</td>
    <td class="">  // HW that requires structured CFG.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3412</td>
    <td class="uncoveredLine">  bool EnableTailMerge = !MF.getTarget().requiresStructuredCFG() &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3413</td>
    <td class="uncoveredLine">                         PassConfig->getEnableTailMerge() &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3414</td>
    <td class="uncoveredLine">                         BranchFoldPlacement;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3415</td>
    <td class="">  // No tail merging opportunities if the block number is less than four.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3416</td>
    <td class="uncoveredLine">  if (MF.size() > 3 && EnableTailMerge) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3417</td>
    <td class="uncoveredLine">    unsigned TailMergeSize = TailDupSize + 1;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3418</td>
    <td class="">    BranchFolder BF(/*DefaultEnableTailMerge=*/true, /*CommonHoist=*/false,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3419</td>
    <td class="uncoveredLine">                    *MBFI, *MBPI, PSI, TailMergeSize);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3420</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3421</td>
    <td class="uncoveredLine">    if (BF.OptimizeFunction(MF, TII, MF.getSubtarget().getRegisterInfo(), MLI,</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3422</td>
    <td class="">                            /*AfterPlacement=*/true)) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3423</td>
    <td class="">      // Redo the layout if tail merging creates/removes/moves blocks.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3424</td>
    <td class="uncoveredLine">      BlockToChain.clear();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3425</td>
    <td class="uncoveredLine">      ComputedEdges.clear();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3426</td>
    <td class="">      // Must redo the post-dominator tree if blocks were changed.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3427</td>
    <td class="uncoveredLine">      if (MPDT)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3428</td>
    <td class="uncoveredLine">        MPDT->runOnMachineFunction(MF);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3429</td>
    <td class="uncoveredLine">      ChainAllocator.DestroyAll();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3430</td>
    <td class="uncoveredLine">      buildCFGChains();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3431</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3432</td>
    <td class="uncoveredLine">  }</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3433</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3434</td>
    <td class="">  // Apply a post-processing optimizing block placement.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3435</td>
    <td class="uncoveredLine">  if (MF.size() >= 3 && EnableExtTspBlockPlacement &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3436</td>
    <td class="uncoveredLine">      (ApplyExtTspWithoutProfile || MF.getFunction().hasProfileData())) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3437</td>
    <td class="">    // Find a new placement and modify the layout of the blocks in the function.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3438</td>
    <td class="uncoveredLine">    applyExtTsp();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3439</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3440</td>
    <td class="">    // Re-create CFG chain so that we can optimizeBranches and alignBlocks.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3441</td>
    <td class="uncoveredLine">    createCFGChainExtTsp();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3442</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3443</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3444</td>
    <td class="uncoveredLine">  optimizeBranches();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3445</td>
    <td class="uncoveredLine">  alignBlocks();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3446</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3447</td>
    <td class="uncoveredLine">  BlockToChain.clear();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3448</td>
    <td class="uncoveredLine">  ComputedEdges.clear();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3449</td>
    <td class="uncoveredLine">  ChainAllocator.DestroyAll();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3450</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3451</td>
    <td class="">  bool HasMaxBytesOverride =</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3452</td>
    <td class="uncoveredLine">      MaxBytesForAlignmentOverride.getNumOccurrences() > 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3453</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3454</td>
    <td class="uncoveredLine">  if (AlignAllBlock)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3455</td>
    <td class="">    // Align all of the blocks in the function to a specific alignment.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3456</td>
    <td class="uncoveredLine">    for (MachineBasicBlock &MBB : MF) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3457</td>
    <td class="uncoveredLine">      if (HasMaxBytesOverride)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3458</td>
    <td class="uncoveredLine">        MBB.setAlignment(Align(1ULL << AlignAllBlock),</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3459</td>
    <td class="">                         MaxBytesForAlignmentOverride);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3460</td>
    <td class="">      else</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3461</td>
    <td class="uncoveredLine">        MBB.setAlignment(Align(1ULL << AlignAllBlock));</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3462</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3463</td>
    <td class="uncoveredLine">  else if (AlignAllNonFallThruBlocks) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3464</td>
    <td class="">    // Align all of the blocks that have no fall-through predecessors to a</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3465</td>
    <td class="">    // specific alignment.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3466</td>
    <td class="uncoveredLine">    for (auto MBI = std::next(MF.begin()), MBE = MF.end(); MBI != MBE; ++MBI) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3467</td>
    <td class="uncoveredLine">      auto LayoutPred = std::prev(MBI);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3468</td>
    <td class="uncoveredLine">      if (!LayoutPred->isSuccessor(&*MBI)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3469</td>
    <td class="uncoveredLine">        if (HasMaxBytesOverride)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3470</td>
    <td class="uncoveredLine">          MBI->setAlignment(Align(1ULL << AlignAllNonFallThruBlocks),</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3471</td>
    <td class="">                            MaxBytesForAlignmentOverride);</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3472</td>
    <td class="">        else</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3473</td>
    <td class="uncoveredLine">          MBI->setAlignment(Align(1ULL << AlignAllNonFallThruBlocks));</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3474</td>
    <td class="">      }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3475</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3476</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3477</td>
    <td class="uncoveredLine">  if (ViewBlockLayoutWithBFI != GVDT_None &&</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3478</td>
    <td class="uncoveredLine">      (ViewBlockFreqFuncName.empty() ||</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3479</td>
    <td class="uncoveredLine">       F->getFunction().getName().equals(ViewBlockFreqFuncName))) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3480</td>
    <td class="uncoveredLine">    if (RenumberBlocksBeforeView)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3481</td>
    <td class="uncoveredLine">      MF.RenumberBlocks();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3482</td>
    <td class="uncoveredLine">    MBFI->view("MBP." + MF.getName(), false);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3483</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3484</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3485</td>
    <td class="">  // We always return true as we have no way to track whether the final order</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3486</td>
    <td class="">  // differs from the original order.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3487</td>
    <td class="uncoveredLine">  return true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3488</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3489</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3490</td>
    <td class="uncoveredLine">void MachineBlockPlacement::applyExtTsp() {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3491</td>
    <td class="">  // Prepare data; blocks are indexed by their index in the current ordering.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3492</td>
    <td class="uncoveredLine">  DenseMap<const MachineBasicBlock *, uint64_t> BlockIndex;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3493</td>
    <td class="uncoveredLine">  BlockIndex.reserve(F->size());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3494</td>
    <td class="uncoveredLine">  std::vector<const MachineBasicBlock *> CurrentBlockOrder;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3495</td>
    <td class="uncoveredLine">  CurrentBlockOrder.reserve(F->size());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3496</td>
    <td class="uncoveredLine">  size_t NumBlocks = 0;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3497</td>
    <td class="uncoveredLine">  for (const MachineBasicBlock &MBB : *F) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3498</td>
    <td class="uncoveredLine">    BlockIndex[&MBB] = NumBlocks++;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3499</td>
    <td class="uncoveredLine">    CurrentBlockOrder.push_back(&MBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3500</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3501</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3502</td>
    <td class="uncoveredLine">  auto BlockSizes = std::vector<uint64_t>(F->size());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3503</td>
    <td class="uncoveredLine">  auto BlockCounts = std::vector<uint64_t>(F->size());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3504</td>
    <td class="uncoveredLine">  std::vector<EdgeCountT> JumpCounts;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3505</td>
    <td class="uncoveredLine">  for (MachineBasicBlock &MBB : *F) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3506</td>
    <td class="">    // Getting the block frequency.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3507</td>
    <td class="uncoveredLine">    BlockFrequency BlockFreq = MBFI->getBlockFreq(&MBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3508</td>
    <td class="uncoveredLine">    BlockCounts[BlockIndex[&MBB]] = BlockFreq.getFrequency();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3509</td>
    <td class="">    // Getting the block size:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3510</td>
    <td class="">    // - approximate the size of an instruction by 4 bytes, and</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3511</td>
    <td class="">    // - ignore debug instructions.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3512</td>
    <td class="">    // Note: getting the exact size of each block is target-dependent and can be</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3513</td>
    <td class="">    // done by extending the interface of MCCodeEmitter. Experimentally we do</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3514</td>
    <td class="">    // not see a perf improvement with the exact block sizes.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3515</td>
    <td class="">    auto NonDbgInsts =</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3516</td>
    <td class="uncoveredLine">        instructionsWithoutDebug(MBB.instr_begin(), MBB.instr_end());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3517</td>
    <td class="uncoveredLine">    int NumInsts = std::distance(NonDbgInsts.begin(), NonDbgInsts.end());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3518</td>
    <td class="uncoveredLine">    BlockSizes[BlockIndex[&MBB]] = 4 * NumInsts;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3519</td>
    <td class="">    // Getting jump frequencies.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3520</td>
    <td class="uncoveredLine">    for (MachineBasicBlock *Succ : MBB.successors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3521</td>
    <td class="uncoveredLine">      auto EP = MBPI->getEdgeProbability(&MBB, Succ);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3522</td>
    <td class="uncoveredLine">      BlockFrequency JumpFreq = BlockFreq * EP;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3523</td>
    <td class="uncoveredLine">      auto Jump = std::make_pair(BlockIndex[&MBB], BlockIndex[Succ]);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3524</td>
    <td class="uncoveredLine">      JumpCounts.push_back(std::make_pair(Jump, JumpFreq.getFrequency()));</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3525</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3526</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3527</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3528</td>
    <td class="uncoveredLine">  LLVM_DEBUG(dbgs() << "Applying ext-tsp layout for |V| = " << F->size()</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3529</td>
    <td class="">                    << " with profile = " << F->getFunction().hasProfileData()</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3530</td>
    <td class="">                    << " (" << F->getName().str() << ")"</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3531</td>
    <td class="">                    << "\n");</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3532</td>
    <td class="uncoveredLine">  LLVM_DEBUG(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3533</td>
    <td class="">      dbgs() << format("  original  layout score: %0.2f\n",</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3534</td>
    <td class="">                       calcExtTspScore(BlockSizes, BlockCounts, JumpCounts)));</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3535</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3536</td>
    <td class="">  // Run the layout algorithm.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3537</td>
    <td class="uncoveredLine">  auto NewOrder = applyExtTspLayout(BlockSizes, BlockCounts, JumpCounts);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3538</td>
    <td class="uncoveredLine">  std::vector<const MachineBasicBlock *> NewBlockOrder;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3539</td>
    <td class="uncoveredLine">  NewBlockOrder.reserve(F->size());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3540</td>
    <td class="uncoveredLine">  for (uint64_t Node : NewOrder) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3541</td>
    <td class="uncoveredLine">    NewBlockOrder.push_back(CurrentBlockOrder[Node]);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3542</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3543</td>
    <td class="uncoveredLine">  LLVM_DEBUG(dbgs() << format("  optimized layout score: %0.2f\n",</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3544</td>
    <td class="">                              calcExtTspScore(NewOrder, BlockSizes, BlockCounts,</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3545</td>
    <td class="">                                              JumpCounts)));</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3546</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3547</td>
    <td class="">  // Assign new block order.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3548</td>
    <td class="uncoveredLine">  assignBlockOrder(NewBlockOrder);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3549</td>
    <td class="uncoveredLine">}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3550</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3551</td>
    <td class="uncoveredLine">void MachineBlockPlacement::assignBlockOrder(</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3552</td>
    <td class="">    const std::vector<const MachineBasicBlock *> &NewBlockOrder) {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3553</td>
    <td class="uncoveredLine">  assert(F->size() == NewBlockOrder.size() && "Incorrect size of block order");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3554</td>
    <td class="uncoveredLine">  F->RenumberBlocks();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3555</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3556</td>
    <td class="uncoveredLine">  bool HasChanges = false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3557</td>
    <td class="uncoveredLine">  for (size_t I = 0; I < NewBlockOrder.size(); I++) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3558</td>
    <td class="uncoveredLine">    if (NewBlockOrder[I] != F->getBlockNumbered(I)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3559</td>
    <td class="uncoveredLine">      HasChanges = true;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3560</td>
    <td class="uncoveredLine">      break;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3561</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3562</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3563</td>
    <td class="">  // Stop early if the new block order is identical to the existing one.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3564</td>
    <td class="uncoveredLine">  if (!HasChanges)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3565</td>
    <td class="uncoveredLine">    return;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3566</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3567</td>
    <td class="uncoveredLine">  SmallVector<MachineBasicBlock *, 4> PrevFallThroughs(F->getNumBlockIDs());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3568</td>
    <td class="uncoveredLine">  for (auto &MBB : *F) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3569</td>
    <td class="uncoveredLine">    PrevFallThroughs[MBB.getNumber()] = MBB.getFallThrough();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3570</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3571</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3572</td>
    <td class="">  // Sort basic blocks in the function according to the computed order.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3573</td>
    <td class="uncoveredLine">  DenseMap<const MachineBasicBlock *, size_t> NewIndex;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3574</td>
    <td class="uncoveredLine">  for (const MachineBasicBlock *MBB : NewBlockOrder) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3575</td>
    <td class="uncoveredLine">    NewIndex[MBB] = NewIndex.size();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3576</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3577</td>
    <td class="uncoveredLine">  F->sort([&](MachineBasicBlock &L, MachineBasicBlock &R) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3578</td>
    <td class="uncoveredLine">    return NewIndex[&L] < NewIndex[&R];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3579</td>
    <td class="">  });</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3580</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3581</td>
    <td class="">  // Update basic block branches by inserting explicit fallthrough branches</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3582</td>
    <td class="">  // when required and re-optimize branches when possible.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3583</td>
    <td class="uncoveredLine">  const TargetInstrInfo *TII = F->getSubtarget().getInstrInfo();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3584</td>
    <td class="uncoveredLine">  SmallVector<MachineOperand, 4> Cond;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3585</td>
    <td class="uncoveredLine">  for (auto &MBB : *F) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3586</td>
    <td class="uncoveredLine">    MachineFunction::iterator NextMBB = std::next(MBB.getIterator());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3587</td>
    <td class="uncoveredLine">    MachineFunction::iterator EndIt = MBB.getParent()->end();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3588</td>
    <td class="uncoveredLine">    auto *FTMBB = PrevFallThroughs[MBB.getNumber()];</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3589</td>
    <td class="">    // If this block had a fallthrough before we need an explicit unconditional</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3590</td>
    <td class="">    // branch to that block if the fallthrough block is not adjacent to the</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3591</td>
    <td class="">    // block in the new order.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3592</td>
    <td class="uncoveredLine">    if (FTMBB && (NextMBB == EndIt || &*NextMBB != FTMBB)) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3593</td>
    <td class="uncoveredLine">      TII->insertUnconditionalBranch(MBB, FTMBB, MBB.findBranchDebugLoc());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3594</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3595</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3596</td>
    <td class="">    // It might be possible to optimize branches by flipping the condition.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3597</td>
    <td class="uncoveredLine">    Cond.clear();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3598</td>
    <td class="uncoveredLine">    MachineBasicBlock *TBB = nullptr, *FBB = nullptr;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3599</td>
    <td class="uncoveredLine">    if (TII->analyzeBranch(MBB, TBB, FBB, Cond))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3600</td>
    <td class="uncoveredLine">      continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3601</td>
    <td class="uncoveredLine">    MBB.updateTerminator(FTMBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3602</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3603</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3604</td>
    <td class="">#ifndef NDEBUG</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3605</td>
    <td class="">  // Make sure we correctly constructed all branches.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3606</td>
    <td class="uncoveredLine">  F->verify(this, "After optimized block reordering");</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3607</td>
    <td class="">#endif</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3608</td>
    <td class="uncoveredLine">}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3609</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3610</td>
    <td class="uncoveredLine">void MachineBlockPlacement::createCFGChainExtTsp() {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3611</td>
    <td class="uncoveredLine">  BlockToChain.clear();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3612</td>
    <td class="uncoveredLine">  ComputedEdges.clear();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3613</td>
    <td class="uncoveredLine">  ChainAllocator.DestroyAll();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3614</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3615</td>
    <td class="uncoveredLine">  MachineBasicBlock *HeadBB = &F->front();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3616</td>
    <td class="">  BlockChain *FunctionChain =</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3617</td>
    <td class="uncoveredLine">      new (ChainAllocator.Allocate()) BlockChain(BlockToChain, HeadBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3618</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3619</td>
    <td class="uncoveredLine">  for (MachineBasicBlock &MBB : *F) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3620</td>
    <td class="uncoveredLine">    if (HeadBB == &MBB)</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3621</td>
    <td class="uncoveredLine">      continue; // Ignore head of the chain</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3622</td>
    <td class="uncoveredLine">    FunctionChain->merge(&MBB, nullptr);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3623</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3624</td>
    <td class="uncoveredLine">}</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3625</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3626</td>
    <td class="">namespace {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3627</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3628</td>
    <td class="">/// A pass to compute block placement statistics.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3629</td>
    <td class="">///</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3630</td>
    <td class="">/// A separate pass to compute interesting statistics for evaluating block</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3631</td>
    <td class="">/// placement. This is separate from the actual placement pass so that they can</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3632</td>
    <td class="">/// be computed in the absence of any placement transformations or when using</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3633</td>
    <td class="">/// alternative placement strategies.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3634</td>
    <td class="">class MachineBlockPlacementStats : public MachineFunctionPass {</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3635</td>
    <td class="">  /// A handle to the branch probability pass.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3636</td>
    <td class="">  const MachineBranchProbabilityInfo *MBPI;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3637</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3638</td>
    <td class="">  /// A handle to the function-wide block frequency pass.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3639</td>
    <td class="">  const MachineBlockFrequencyInfo *MBFI;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3640</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3641</td>
    <td class="">public:</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3642</td>
    <td class="">  static char ID; // Pass identification, replacement for typeid</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3643</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3644</td>
    <td class="uncoveredLine">  MachineBlockPlacementStats() : MachineFunctionPass(ID) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3645</td>
    <td class="uncoveredLine">    initializeMachineBlockPlacementStatsPass(*PassRegistry::getPassRegistry());</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3646</td>
    <td class="uncoveredLine">  }</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3647</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3648</td>
    <td class="">  bool runOnMachineFunction(MachineFunction &F) override;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3649</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3650</td>
    <td class="uncoveredLine">  void getAnalysisUsage(AnalysisUsage &AU) const override {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3651</td>
    <td class="uncoveredLine">    AU.addRequired<MachineBranchProbabilityInfo>();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3652</td>
    <td class="uncoveredLine">    AU.addRequired<MachineBlockFrequencyInfo>();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3653</td>
    <td class="uncoveredLine">    AU.setPreservesAll();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3654</td>
    <td class="uncoveredLine">    MachineFunctionPass::getAnalysisUsage(AU);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3655</td>
    <td class="uncoveredLine">  }</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3656</td>
    <td class="">};</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3657</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3658</td>
    <td class="">} // end anonymous namespace</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3659</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3660</td>
    <td class="">char MachineBlockPlacementStats::ID = 0;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3661</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3662</td>
    <td class="">char &llvm::MachineBlockPlacementStatsID = MachineBlockPlacementStats::ID;</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3663</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3664</td>
    <td class="coveredLine">INITIALIZE_PASS_BEGIN(MachineBlockPlacementStats, "block-placement-stats",</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3665</td>
    <td class="">                      "Basic Block Placement Stats", false, false)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3666</td>
    <td class="coveredLine">INITIALIZE_PASS_DEPENDENCY(MachineBranchProbabilityInfo)</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3667</td>
    <td class="coveredLine">INITIALIZE_PASS_DEPENDENCY(MachineBlockFrequencyInfo)</td>
    <td>2</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3668</td>
    <td class="coveredLine">INITIALIZE_PASS_END(MachineBlockPlacementStats, "block-placement-stats",</td>
    <td>6</td>
    <td class="testName">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3669</td>
    <td class="">                    "Basic Block Placement Stats", false, false)</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3670</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3671</td>
    <td class="uncoveredLine">bool MachineBlockPlacementStats::runOnMachineFunction(MachineFunction &F) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3672</td>
    <td class="">  // Check for single-block functions and skip them.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3673</td>
    <td class="uncoveredLine">  if (std::next(F.begin()) == F.end())</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3674</td>
    <td class="uncoveredLine">    return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3675</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3676</td>
    <td class="uncoveredLine">  if (!isFunctionInPrintList(F.getName()))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3677</td>
    <td class="uncoveredLine">    return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3678</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3679</td>
    <td class="uncoveredLine">  MBPI = &getAnalysis<MachineBranchProbabilityInfo>();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3680</td>
    <td class="uncoveredLine">  MBFI = &getAnalysis<MachineBlockFrequencyInfo>();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3681</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3682</td>
    <td class="uncoveredLine">  for (MachineBasicBlock &MBB : F) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3683</td>
    <td class="uncoveredLine">    BlockFrequency BlockFreq = MBFI->getBlockFreq(&MBB);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3684</td>
    <td class="">    Statistic &NumBranches =</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3685</td>
    <td class="uncoveredLine">        (MBB.succ_size() > 1) ? NumCondBranches : NumUncondBranches;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3686</td>
    <td class="">    Statistic &BranchTakenFreq =</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3687</td>
    <td class="uncoveredLine">        (MBB.succ_size() > 1) ? CondBranchTakenFreq : UncondBranchTakenFreq;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3688</td>
    <td class="uncoveredLine">    for (MachineBasicBlock *Succ : MBB.successors()) {</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3689</td>
    <td class="">      // Skip if this successor is a fallthrough.</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3690</td>
    <td class="uncoveredLine">      if (MBB.isLayoutSuccessor(Succ))</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3691</td>
    <td class="uncoveredLine">        continue;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3692</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3693</td>
    <td class="">      BlockFrequency EdgeFreq =</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3694</td>
    <td class="uncoveredLine">          BlockFreq * MBPI->getEdgeProbability(&MBB, Succ);</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3695</td>
    <td class="uncoveredLine">      ++NumBranches;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3696</td>
    <td class="uncoveredLine">      BranchTakenFreq += EdgeFreq.getFrequency();</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3697</td>
    <td class="">    }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3698</td>
    <td class="">  }</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3699</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3700</td>
    <td class="uncoveredLine">  return false;</td>
    <td>0</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3701</td>
    <td class="">}</td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3702</td>
    <td class=""></td>
    <td>----</td>
    <td class="testName">
    </td>
  </tr>
</table>
    </div>
    <button class="collapsible" type="button">Open Functions Report</button>
    <div class="content" style="display: none;">
      <hr />
      <h3 class="subheader">Functions Report</h3>
      <table class="mainTable">
  <tr class="mainTr">
    <th class="mainTh">Function name</th>
    <th class="mainTh">Number of hits</th>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_110BlockChainC2ERN4llvm8DenseMapIPKNS1_17MachineBasicBlockEPS0_NS1_12DenseMapInfoIS5_vEENS1_6detail12DenseMapPairIS5_S6_EEEEPS3_</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_110BlockChain5beginEv</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZNK12_GLOBAL__N_110BlockChain5beginEv</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_110BlockChain3endEv</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZNK12_GLOBAL__N_110BlockChain3endEv</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_110BlockChain6removeEPN4llvm17MachineBasicBlockE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_110BlockChain5mergeEPN4llvm17MachineBasicBlockEPS0_</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_110BlockChain4dumpEv</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement24getBlockCountOrFrequencyEPKN4llvm17MachineBasicBlockE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacementC2Ev</td>
    <td class="numberOfCalls">2</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZNK12_GLOBAL__N_121MachineBlockPlacement21allowTailDupPlacementEv</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZNK12_GLOBAL__N_121MachineBlockPlacement16getAnalysisUsageERN4llvm13AnalysisUsageE</td>
    <td class="numberOfCalls">2</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZL39initializeMachineBlockPlacementPassOnceRN4llvm12PassRegistryE</td>
    <td class="numberOfCalls">2</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN4llvm35initializeMachineBlockPlacementPassERNS_12PassRegistryE</td>
    <td class="numberOfCalls">6</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZL12getBlockNamePKN4llvm17MachineBasicBlockE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement19markChainSuccessorsERKNS_10BlockChainEPKN4llvm17MachineBasicBlockEPKNS4_14SmallSetVectorIS7_Lj16EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement19markBlockSuccessorsERKNS_10BlockChainEPKN4llvm17MachineBasicBlockES7_PKNS4_14SmallSetVectorIS7_Lj16EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement23collectViableSuccessorsEPKN4llvm17MachineBasicBlockERKNS_10BlockChainEPKNS1_14SmallSetVectorIS4_Lj16EEERNS1_11SmallVectorIPS2_Lj4EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZL22getAdjustedProbabilityN4llvm17BranchProbabilityES0_</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZL17hasSameSuccessorsRN4llvm17MachineBasicBlockERNS_15SmallPtrSetImplIPKS0_EE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement19shouldTailDuplicateEPN4llvm17MachineBasicBlockE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZL15greaterWithBiasN4llvm14BlockFrequencyES0_m</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement21isProfitableToTailDupEPKN4llvm17MachineBasicBlockES4_NS1_17BranchProbabilityERKNS_10BlockChainEPKNS1_14SmallSetVectorIS4_Lj16EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement9isTrellisEPKN4llvm17MachineBasicBlockERKNS1_15SmallVectorImplIPS2_EERKNS_10BlockChainEPKNS1_14SmallSetVectorIS4_Lj16EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement26getBestNonConflictingEdgesEPKN4llvm17MachineBasicBlockENS1_15MutableArrayRefINS1_11SmallVectorINS0_12WeightedEdgeELj8EEEEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZZN12_GLOBAL__N_121MachineBlockPlacement26getBestNonConflictingEdgesEPKN4llvm17MachineBasicBlockENS1_15MutableArrayRefINS1_11SmallVectorINS0_12WeightedEdgeELj8EEEEEENKUlS7_S7_E_clES7_S7_</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement23getBestTrellisSuccessorEPKN4llvm17MachineBasicBlockERKNS1_15SmallVectorImplIPS2_EENS1_17BranchProbabilityERKNS_10BlockChainEPKNS1_14SmallSetVectorIS4_Lj16EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement29canTailDuplicateUnplacedPredsEPKN4llvm17MachineBasicBlockEPS2_RKNS_10BlockChainEPKNS1_14SmallSetVectorIS4_Lj16EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement24precomputeTriangleChainsEv</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZZN12_GLOBAL__N_121MachineBlockPlacement24precomputeTriangleChainsEvEN13TriangleChainC2EPN4llvm17MachineBasicBlockES4_</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZZN12_GLOBAL__N_121MachineBlockPlacement24precomputeTriangleChainsEvEN13TriangleChain6appendEPN4llvm17MachineBasicBlockE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZZN12_GLOBAL__N_121MachineBlockPlacement24precomputeTriangleChainsEvENK13TriangleChain5countEv</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZZN12_GLOBAL__N_121MachineBlockPlacement24precomputeTriangleChainsEvENK13TriangleChain6getKeyEv</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZL31getLayoutSuccessorProbThresholdPKN4llvm17MachineBasicBlockE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement26hasBetterLayoutPredecessorEPKN4llvm17MachineBasicBlockES4_RKNS_10BlockChainENS1_17BranchProbabilityES8_S7_PKNS1_14SmallSetVectorIS4_Lj16EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement19selectBestSuccessorEPKN4llvm17MachineBasicBlockERKNS_10BlockChainEPKNS1_14SmallSetVectorIS4_Lj16EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZZN12_GLOBAL__N_121MachineBlockPlacement19selectBestSuccessorEPKN4llvm17MachineBasicBlockERKNS_10BlockChainEPKNS1_14SmallSetVectorIS4_Lj16EEEENKUlSt5tupleIJNS1_17BranchProbabilityEPS2_EESF_E_clESF_SF_</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement24selectBestCandidateBlockERKNS_10BlockChainERN4llvm15SmallVectorImplIPNS4_17MachineBasicBlockEEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZZN12_GLOBAL__N_121MachineBlockPlacement24selectBestCandidateBlockERKNS_10BlockChainERN4llvm15SmallVectorImplIPNS4_17MachineBasicBlockEEEENKUlS7_E_clES7_</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement21getFirstUnplacedBlockERKNS_10BlockChainERN4llvm14ilist_iteratorINS4_12ilist_detail12node_optionsINS4_17MachineBasicBlockELb1ELb0EvEELb0ELb0EEEPKNS4_14SmallSetVectorIPKS8_Lj16EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement13fillWorkListsEPKN4llvm17MachineBasicBlockERNS1_15SmallPtrSetImplIPNS_10BlockChainEEEPKNS1_14SmallSetVectorIS4_Lj16EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement10buildChainEPKN4llvm17MachineBasicBlockERNS_10BlockChainEPNS1_14SmallSetVectorIS4_Lj16EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement23canMoveBottomBlockToTopEPKN4llvm17MachineBasicBlockES4_</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement18TopFallThroughFreqEPKN4llvm17MachineBasicBlockERKNS1_14SmallSetVectorIS4_Lj16EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement16FallThroughGainsEPKN4llvm17MachineBasicBlockES4_S4_RKNS1_14SmallSetVectorIS4_Lj16EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement21findBestLoopTopHelperEPN4llvm17MachineBasicBlockERKNS1_11MachineLoopERKNS1_14SmallSetVectorIPKS2_Lj16EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement15findBestLoopTopERKN4llvm11MachineLoopERKNS1_14SmallSetVectorIPKNS1_17MachineBasicBlockELj16EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement16findBestLoopExitERKN4llvm11MachineLoopERKNS1_14SmallSetVectorIPKNS1_17MachineBasicBlockELj16EEERNS1_14BlockFrequencyE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement23hasViableTopFallthroughEPKN4llvm17MachineBasicBlockERKNS1_14SmallSetVectorIS4_Lj16EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement10rotateLoopERNS_10BlockChainEPKN4llvm17MachineBasicBlockENS3_14BlockFrequencyERKNS3_14SmallSetVectorIS6_Lj16EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement21rotateLoopWithProfileERNS_10BlockChainERKN4llvm11MachineLoopERKNS3_14SmallSetVectorIPKNS3_17MachineBasicBlockELj16EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZZN12_GLOBAL__N_121MachineBlockPlacement21rotateLoopWithProfileERNS_10BlockChainERKN4llvm11MachineLoopERKNS3_14SmallSetVectorIPKNS3_17MachineBasicBlockELj16EEEENKUlNS3_14BlockFrequencyEjE_clESE_j</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement19collectLoopBlockSetERKN4llvm11MachineLoopE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement15buildLoopChainsERKN4llvm11MachineLoopE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement14buildCFGChainsEv</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement16optimizeBranchesEv</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement11alignBlocksEv</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZZN12_GLOBAL__N_121MachineBlockPlacement11alignBlocksEvENKUlvE_clEv</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement28repeatedlyTailDuplicateBlockEPN4llvm17MachineBasicBlockERS3_PKS2_RNS_10BlockChainEPNS1_14SmallSetVectorIS6_Lj16EEERNS1_14ilist_iteratorINS1_12ilist_detail12node_optionsIS2_Lb1ELb0EvEELb0ELb0EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement23maybeTailDuplicateBlockEPN4llvm17MachineBasicBlockES3_RNS_10BlockChainEPNS1_14SmallSetVectorIPKS2_Lj16EEERNS1_14ilist_iteratorINS1_12ilist_detail12node_optionsIS2_Lb1ELb0EvEELb0ELb0EEERb</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZZN12_GLOBAL__N_121MachineBlockPlacement23maybeTailDuplicateBlockEPN4llvm17MachineBasicBlockES3_RNS_10BlockChainEPNS1_14SmallSetVectorIPKS2_Lj16EEERNS1_14ilist_iteratorINS1_12ilist_detail12node_optionsIS2_Lb1ELb0EvEELb0ELb0EEERbENKUlS3_E_clES3_</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZL19countMBBInstructionPN4llvm17MachineBasicBlockE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement14scaleThresholdEPN4llvm17MachineBasicBlockE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement15isBestSuccessorEPN4llvm17MachineBasicBlockES3_PNS1_14SmallSetVectorIPKS2_Lj16EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement23findDuplicateCandidatesERN4llvm15SmallVectorImplIPNS1_17MachineBasicBlockEEES4_PNS1_14SmallSetVectorIPKS3_Lj16EEE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZZN12_GLOBAL__N_121MachineBlockPlacement23findDuplicateCandidatesERN4llvm15SmallVectorImplIPNS1_17MachineBasicBlockEEES4_PNS1_14SmallSetVectorIPKS3_Lj16EEEENKUlS4_S4_E_clES4_S4_</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZZN12_GLOBAL__N_121MachineBlockPlacement23findDuplicateCandidatesERN4llvm15SmallVectorImplIPNS1_17MachineBasicBlockEEES4_PNS1_14SmallSetVectorIPKS3_Lj16EEEENKUlS4_S4_E0_clES4_S4_</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement16initDupThresholdEv</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement20runOnMachineFunctionERN4llvm15MachineFunctionE</td>
    <td class="numberOfCalls">2</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement11applyExtTspEv</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement16assignBlockOrderERKSt6vectorIPKN4llvm17MachineBasicBlockESaIS5_EE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZZN12_GLOBAL__N_121MachineBlockPlacement16assignBlockOrderERKSt6vectorIPKN4llvm17MachineBasicBlockESaIS5_EEENKUlRS3_SA_E_clESA_SA_</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_121MachineBlockPlacement20createCFGChainExtTspEv</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_126MachineBlockPlacementStatsC2Ev</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZNK12_GLOBAL__N_126MachineBlockPlacementStats16getAnalysisUsageERN4llvm13AnalysisUsageE</td>
    <td class="numberOfCalls">0</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZL44initializeMachineBlockPlacementStatsPassOnceRN4llvm12PassRegistryE</td>
    <td class="numberOfCalls">2</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN4llvm40initializeMachineBlockPlacementStatsPassERNS_12PassRegistryE</td>
    <td class="numberOfCalls">4</td>
  </tr>
  <tr class="mainTr">
    <td class="functionName">_ZN12_GLOBAL__N_126MachineBlockPlacementStats20runOnMachineFunctionERN4llvm15MachineFunctionE</td>
    <td class="numberOfCalls">0</td>
  </tr>
</table>
    </div>
    <button class="collapsible" type="button">Open Coverage Diff</button>
    <div class="content" style="display: none;">
      <hr />
      <h3 class="subheader">Coverage Diff</h3>
      <table class="mainTable">
  <tr class="mainTr">
    <th class="mainTh">Line Number</th>
    <th class="mainTh">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
      <span> BUT NOT </span>
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </th>
    <th class="mainTh">Line Number</th>
    <th class="mainTh">
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
      <span> BUT NOT </span>
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
    </th>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1</td>
    <td class="codeline">//===- MachineBlockPlacement.cpp - Basic Block Code Layout optimization ---===//</td>
    <td class="lineNumber">1</td>
    <td class="codeline">//===- MachineBlockPlacement.cpp - Basic Block Code Layout optimization ---===//</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2</td>
    <td class="codeline">//</td>
    <td class="lineNumber">2</td>
    <td class="codeline">//</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3</td>
    <td class="codeline">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</td>
    <td class="lineNumber">3</td>
    <td class="codeline">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">4</td>
    <td class="codeline">// See https://llvm.org/LICENSE.txt for license information.</td>
    <td class="lineNumber">4</td>
    <td class="codeline">// See https://llvm.org/LICENSE.txt for license information.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">5</td>
    <td class="codeline">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</td>
    <td class="lineNumber">5</td>
    <td class="codeline">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">6</td>
    <td class="codeline">//</td>
    <td class="lineNumber">6</td>
    <td class="codeline">//</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">7</td>
    <td class="codeline">//===----------------------------------------------------------------------===//</td>
    <td class="lineNumber">7</td>
    <td class="codeline">//===----------------------------------------------------------------------===//</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">8</td>
    <td class="codeline">//</td>
    <td class="lineNumber">8</td>
    <td class="codeline">//</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">9</td>
    <td class="codeline">// This file implements basic block placement transformations using the CFG</td>
    <td class="lineNumber">9</td>
    <td class="codeline">// This file implements basic block placement transformations using the CFG</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">10</td>
    <td class="codeline">// structure and branch probability estimates.</td>
    <td class="lineNumber">10</td>
    <td class="codeline">// structure and branch probability estimates.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">11</td>
    <td class="codeline">//</td>
    <td class="lineNumber">11</td>
    <td class="codeline">//</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">12</td>
    <td class="codeline">// The pass strives to preserve the structure of the CFG (that is, retain</td>
    <td class="lineNumber">12</td>
    <td class="codeline">// The pass strives to preserve the structure of the CFG (that is, retain</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">13</td>
    <td class="codeline">// a topological ordering of basic blocks) in the absence of a *strong* signal</td>
    <td class="lineNumber">13</td>
    <td class="codeline">// a topological ordering of basic blocks) in the absence of a *strong* signal</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">14</td>
    <td class="codeline">// to the contrary from probabilities. However, within the CFG structure, it</td>
    <td class="lineNumber">14</td>
    <td class="codeline">// to the contrary from probabilities. However, within the CFG structure, it</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">15</td>
    <td class="codeline">// attempts to choose an ordering which favors placing more likely sequences of</td>
    <td class="lineNumber">15</td>
    <td class="codeline">// attempts to choose an ordering which favors placing more likely sequences of</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">16</td>
    <td class="codeline">// blocks adjacent to each other.</td>
    <td class="lineNumber">16</td>
    <td class="codeline">// blocks adjacent to each other.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">17</td>
    <td class="codeline">//</td>
    <td class="lineNumber">17</td>
    <td class="codeline">//</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">18</td>
    <td class="codeline">// The algorithm works from the inner-most loop within a function outward, and</td>
    <td class="lineNumber">18</td>
    <td class="codeline">// The algorithm works from the inner-most loop within a function outward, and</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">19</td>
    <td class="codeline">// at each stage walks through the basic blocks, trying to coalesce them into</td>
    <td class="lineNumber">19</td>
    <td class="codeline">// at each stage walks through the basic blocks, trying to coalesce them into</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">20</td>
    <td class="codeline">// sequential chains where allowed by the CFG (or demanded by heavy</td>
    <td class="lineNumber">20</td>
    <td class="codeline">// sequential chains where allowed by the CFG (or demanded by heavy</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">21</td>
    <td class="codeline">// probabilities). Finally, it walks the blocks in topological order, and the</td>
    <td class="lineNumber">21</td>
    <td class="codeline">// probabilities). Finally, it walks the blocks in topological order, and the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">22</td>
    <td class="codeline">// first time it reaches a chain of basic blocks, it schedules them in the</td>
    <td class="lineNumber">22</td>
    <td class="codeline">// first time it reaches a chain of basic blocks, it schedules them in the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">23</td>
    <td class="codeline">// function in-order.</td>
    <td class="lineNumber">23</td>
    <td class="codeline">// function in-order.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">24</td>
    <td class="codeline">//</td>
    <td class="lineNumber">24</td>
    <td class="codeline">//</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">25</td>
    <td class="codeline">//===----------------------------------------------------------------------===//</td>
    <td class="lineNumber">25</td>
    <td class="codeline">//===----------------------------------------------------------------------===//</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">26</td>
    <td class="codeline"></td>
    <td class="lineNumber">26</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">27</td>
    <td class="codeline">#include "BranchFolding.h"</td>
    <td class="lineNumber">27</td>
    <td class="codeline">#include "BranchFolding.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">28</td>
    <td class="codeline">#include "llvm/ADT/ArrayRef.h"</td>
    <td class="lineNumber">28</td>
    <td class="codeline">#include "llvm/ADT/ArrayRef.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">29</td>
    <td class="codeline">#include "llvm/ADT/DenseMap.h"</td>
    <td class="lineNumber">29</td>
    <td class="codeline">#include "llvm/ADT/DenseMap.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">30</td>
    <td class="codeline">#include "llvm/ADT/STLExtras.h"</td>
    <td class="lineNumber">30</td>
    <td class="codeline">#include "llvm/ADT/STLExtras.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">31</td>
    <td class="codeline">#include "llvm/ADT/SetVector.h"</td>
    <td class="lineNumber">31</td>
    <td class="codeline">#include "llvm/ADT/SetVector.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">32</td>
    <td class="codeline">#include "llvm/ADT/SmallPtrSet.h"</td>
    <td class="lineNumber">32</td>
    <td class="codeline">#include "llvm/ADT/SmallPtrSet.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">33</td>
    <td class="codeline">#include "llvm/ADT/SmallVector.h"</td>
    <td class="lineNumber">33</td>
    <td class="codeline">#include "llvm/ADT/SmallVector.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">34</td>
    <td class="codeline">#include "llvm/ADT/Statistic.h"</td>
    <td class="lineNumber">34</td>
    <td class="codeline">#include "llvm/ADT/Statistic.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">35</td>
    <td class="codeline">#include "llvm/Analysis/BlockFrequencyInfoImpl.h"</td>
    <td class="lineNumber">35</td>
    <td class="codeline">#include "llvm/Analysis/BlockFrequencyInfoImpl.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">36</td>
    <td class="codeline">#include "llvm/Analysis/ProfileSummaryInfo.h"</td>
    <td class="lineNumber">36</td>
    <td class="codeline">#include "llvm/Analysis/ProfileSummaryInfo.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">37</td>
    <td class="codeline">#include "llvm/CodeGen/MBFIWrapper.h"</td>
    <td class="lineNumber">37</td>
    <td class="codeline">#include "llvm/CodeGen/MBFIWrapper.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">38</td>
    <td class="codeline">#include "llvm/CodeGen/MachineBasicBlock.h"</td>
    <td class="lineNumber">38</td>
    <td class="codeline">#include "llvm/CodeGen/MachineBasicBlock.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">39</td>
    <td class="codeline">#include "llvm/CodeGen/MachineBlockFrequencyInfo.h"</td>
    <td class="lineNumber">39</td>
    <td class="codeline">#include "llvm/CodeGen/MachineBlockFrequencyInfo.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">40</td>
    <td class="codeline">#include "llvm/CodeGen/MachineBranchProbabilityInfo.h"</td>
    <td class="lineNumber">40</td>
    <td class="codeline">#include "llvm/CodeGen/MachineBranchProbabilityInfo.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">41</td>
    <td class="codeline">#include "llvm/CodeGen/MachineFunction.h"</td>
    <td class="lineNumber">41</td>
    <td class="codeline">#include "llvm/CodeGen/MachineFunction.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">42</td>
    <td class="codeline">#include "llvm/CodeGen/MachineFunctionPass.h"</td>
    <td class="lineNumber">42</td>
    <td class="codeline">#include "llvm/CodeGen/MachineFunctionPass.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">43</td>
    <td class="codeline">#include "llvm/CodeGen/MachineLoopInfo.h"</td>
    <td class="lineNumber">43</td>
    <td class="codeline">#include "llvm/CodeGen/MachineLoopInfo.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">44</td>
    <td class="codeline">#include "llvm/CodeGen/MachinePostDominators.h"</td>
    <td class="lineNumber">44</td>
    <td class="codeline">#include "llvm/CodeGen/MachinePostDominators.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">45</td>
    <td class="codeline">#include "llvm/CodeGen/MachineSizeOpts.h"</td>
    <td class="lineNumber">45</td>
    <td class="codeline">#include "llvm/CodeGen/MachineSizeOpts.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">46</td>
    <td class="codeline">#include "llvm/CodeGen/TailDuplicator.h"</td>
    <td class="lineNumber">46</td>
    <td class="codeline">#include "llvm/CodeGen/TailDuplicator.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">47</td>
    <td class="codeline">#include "llvm/CodeGen/TargetInstrInfo.h"</td>
    <td class="lineNumber">47</td>
    <td class="codeline">#include "llvm/CodeGen/TargetInstrInfo.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">48</td>
    <td class="codeline">#include "llvm/CodeGen/TargetLowering.h"</td>
    <td class="lineNumber">48</td>
    <td class="codeline">#include "llvm/CodeGen/TargetLowering.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">49</td>
    <td class="codeline">#include "llvm/CodeGen/TargetPassConfig.h"</td>
    <td class="lineNumber">49</td>
    <td class="codeline">#include "llvm/CodeGen/TargetPassConfig.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">50</td>
    <td class="codeline">#include "llvm/CodeGen/TargetSubtargetInfo.h"</td>
    <td class="lineNumber">50</td>
    <td class="codeline">#include "llvm/CodeGen/TargetSubtargetInfo.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">51</td>
    <td class="codeline">#include "llvm/IR/DebugLoc.h"</td>
    <td class="lineNumber">51</td>
    <td class="codeline">#include "llvm/IR/DebugLoc.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">52</td>
    <td class="codeline">#include "llvm/IR/Function.h"</td>
    <td class="lineNumber">52</td>
    <td class="codeline">#include "llvm/IR/Function.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">53</td>
    <td class="codeline">#include "llvm/IR/PrintPasses.h"</td>
    <td class="lineNumber">53</td>
    <td class="codeline">#include "llvm/IR/PrintPasses.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">54</td>
    <td class="codeline">#include "llvm/InitializePasses.h"</td>
    <td class="lineNumber">54</td>
    <td class="codeline">#include "llvm/InitializePasses.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">55</td>
    <td class="codeline">#include "llvm/Pass.h"</td>
    <td class="lineNumber">55</td>
    <td class="codeline">#include "llvm/Pass.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">56</td>
    <td class="codeline">#include "llvm/Support/Allocator.h"</td>
    <td class="lineNumber">56</td>
    <td class="codeline">#include "llvm/Support/Allocator.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">57</td>
    <td class="codeline">#include "llvm/Support/BlockFrequency.h"</td>
    <td class="lineNumber">57</td>
    <td class="codeline">#include "llvm/Support/BlockFrequency.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">58</td>
    <td class="codeline">#include "llvm/Support/BranchProbability.h"</td>
    <td class="lineNumber">58</td>
    <td class="codeline">#include "llvm/Support/BranchProbability.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">59</td>
    <td class="codeline">#include "llvm/Support/CodeGen.h"</td>
    <td class="lineNumber">59</td>
    <td class="codeline">#include "llvm/Support/CodeGen.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">60</td>
    <td class="codeline">#include "llvm/Support/CommandLine.h"</td>
    <td class="lineNumber">60</td>
    <td class="codeline">#include "llvm/Support/CommandLine.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">61</td>
    <td class="codeline">#include "llvm/Support/Compiler.h"</td>
    <td class="lineNumber">61</td>
    <td class="codeline">#include "llvm/Support/Compiler.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">62</td>
    <td class="codeline">#include "llvm/Support/Debug.h"</td>
    <td class="lineNumber">62</td>
    <td class="codeline">#include "llvm/Support/Debug.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">63</td>
    <td class="codeline">#include "llvm/Support/raw_ostream.h"</td>
    <td class="lineNumber">63</td>
    <td class="codeline">#include "llvm/Support/raw_ostream.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">64</td>
    <td class="codeline">#include "llvm/Target/TargetMachine.h"</td>
    <td class="lineNumber">64</td>
    <td class="codeline">#include "llvm/Target/TargetMachine.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">65</td>
    <td class="codeline">#include "llvm/Transforms/Utils/CodeLayout.h"</td>
    <td class="lineNumber">65</td>
    <td class="codeline">#include "llvm/Transforms/Utils/CodeLayout.h"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">66</td>
    <td class="codeline">#include <algorithm></td>
    <td class="lineNumber">66</td>
    <td class="codeline">#include <algorithm></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">67</td>
    <td class="codeline">#include <cassert></td>
    <td class="lineNumber">67</td>
    <td class="codeline">#include <cassert></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">68</td>
    <td class="codeline">#include <cstdint></td>
    <td class="lineNumber">68</td>
    <td class="codeline">#include <cstdint></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">69</td>
    <td class="codeline">#include <iterator></td>
    <td class="lineNumber">69</td>
    <td class="codeline">#include <iterator></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">70</td>
    <td class="codeline">#include <memory></td>
    <td class="lineNumber">70</td>
    <td class="codeline">#include <memory></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">71</td>
    <td class="codeline">#include <string></td>
    <td class="lineNumber">71</td>
    <td class="codeline">#include <string></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">72</td>
    <td class="codeline">#include <tuple></td>
    <td class="lineNumber">72</td>
    <td class="codeline">#include <tuple></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">73</td>
    <td class="codeline">#include <utility></td>
    <td class="lineNumber">73</td>
    <td class="codeline">#include <utility></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">74</td>
    <td class="codeline">#include <vector></td>
    <td class="lineNumber">74</td>
    <td class="codeline">#include <vector></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">75</td>
    <td class="codeline"></td>
    <td class="lineNumber">75</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">76</td>
    <td class="codeline">using namespace llvm;</td>
    <td class="lineNumber">76</td>
    <td class="codeline">using namespace llvm;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">77</td>
    <td class="codeline"></td>
    <td class="lineNumber">77</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">78</td>
    <td class="codeline">#define DEBUG_TYPE "block-placement"</td>
    <td class="lineNumber">78</td>
    <td class="codeline">#define DEBUG_TYPE "block-placement"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">79</td>
    <td class="codeline"></td>
    <td class="lineNumber">79</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">80</td>
    <td class="codeline">STATISTIC(NumCondBranches, "Number of conditional branches");</td>
    <td class="lineNumber">80</td>
    <td class="codeline">STATISTIC(NumCondBranches, "Number of conditional branches");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">81</td>
    <td class="codeline">STATISTIC(NumUncondBranches, "Number of unconditional branches");</td>
    <td class="lineNumber">81</td>
    <td class="codeline">STATISTIC(NumUncondBranches, "Number of unconditional branches");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">82</td>
    <td class="codeline">STATISTIC(CondBranchTakenFreq,</td>
    <td class="lineNumber">82</td>
    <td class="codeline">STATISTIC(CondBranchTakenFreq,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">83</td>
    <td class="codeline">          "Potential frequency of taking conditional branches");</td>
    <td class="lineNumber">83</td>
    <td class="codeline">          "Potential frequency of taking conditional branches");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">84</td>
    <td class="codeline">STATISTIC(UncondBranchTakenFreq,</td>
    <td class="lineNumber">84</td>
    <td class="codeline">STATISTIC(UncondBranchTakenFreq,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">85</td>
    <td class="codeline">          "Potential frequency of taking unconditional branches");</td>
    <td class="lineNumber">85</td>
    <td class="codeline">          "Potential frequency of taking unconditional branches");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">86</td>
    <td class="codeline"></td>
    <td class="lineNumber">86</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">87</td>
    <td class="codeline">static cl::opt<unsigned> AlignAllBlock(</td>
    <td class="lineNumber">87</td>
    <td class="codeline">static cl::opt<unsigned> AlignAllBlock(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">88</td>
    <td class="codeline">    "align-all-blocks",</td>
    <td class="lineNumber">88</td>
    <td class="codeline">    "align-all-blocks",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">89</td>
    <td class="codeline">    cl::desc("Force the alignment of all blocks in the function in log2 format "</td>
    <td class="lineNumber">89</td>
    <td class="codeline">    cl::desc("Force the alignment of all blocks in the function in log2 format "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">90</td>
    <td class="codeline">             "(e.g 4 means align on 16B boundaries)."),</td>
    <td class="lineNumber">90</td>
    <td class="codeline">             "(e.g 4 means align on 16B boundaries)."),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">91</td>
    <td class="codeline">    cl::init(0), cl::Hidden);</td>
    <td class="lineNumber">91</td>
    <td class="codeline">    cl::init(0), cl::Hidden);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">92</td>
    <td class="codeline"></td>
    <td class="lineNumber">92</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">93</td>
    <td class="codeline">static cl::opt<unsigned> AlignAllNonFallThruBlocks(</td>
    <td class="lineNumber">93</td>
    <td class="codeline">static cl::opt<unsigned> AlignAllNonFallThruBlocks(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">94</td>
    <td class="codeline">    "align-all-nofallthru-blocks",</td>
    <td class="lineNumber">94</td>
    <td class="codeline">    "align-all-nofallthru-blocks",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">95</td>
    <td class="codeline">    cl::desc("Force the alignment of all blocks that have no fall-through "</td>
    <td class="lineNumber">95</td>
    <td class="codeline">    cl::desc("Force the alignment of all blocks that have no fall-through "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">96</td>
    <td class="codeline">             "predecessors (i.e. don't add nops that are executed). In log2 "</td>
    <td class="lineNumber">96</td>
    <td class="codeline">             "predecessors (i.e. don't add nops that are executed). In log2 "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">97</td>
    <td class="codeline">             "format (e.g 4 means align on 16B boundaries)."),</td>
    <td class="lineNumber">97</td>
    <td class="codeline">             "format (e.g 4 means align on 16B boundaries)."),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">98</td>
    <td class="codeline">    cl::init(0), cl::Hidden);</td>
    <td class="lineNumber">98</td>
    <td class="codeline">    cl::init(0), cl::Hidden);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">99</td>
    <td class="codeline"></td>
    <td class="lineNumber">99</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">100</td>
    <td class="codeline">static cl::opt<unsigned> MaxBytesForAlignmentOverride(</td>
    <td class="lineNumber">100</td>
    <td class="codeline">static cl::opt<unsigned> MaxBytesForAlignmentOverride(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">101</td>
    <td class="codeline">    "max-bytes-for-alignment",</td>
    <td class="lineNumber">101</td>
    <td class="codeline">    "max-bytes-for-alignment",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">102</td>
    <td class="codeline">    cl::desc("Forces the maximum bytes allowed to be emitted when padding for "</td>
    <td class="lineNumber">102</td>
    <td class="codeline">    cl::desc("Forces the maximum bytes allowed to be emitted when padding for "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">103</td>
    <td class="codeline">             "alignment"),</td>
    <td class="lineNumber">103</td>
    <td class="codeline">             "alignment"),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">104</td>
    <td class="codeline">    cl::init(0), cl::Hidden);</td>
    <td class="lineNumber">104</td>
    <td class="codeline">    cl::init(0), cl::Hidden);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">105</td>
    <td class="codeline"></td>
    <td class="lineNumber">105</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">106</td>
    <td class="codeline">// FIXME: Find a good default for this flag and remove the flag.</td>
    <td class="lineNumber">106</td>
    <td class="codeline">// FIXME: Find a good default for this flag and remove the flag.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">107</td>
    <td class="codeline">static cl::opt<unsigned> ExitBlockBias(</td>
    <td class="lineNumber">107</td>
    <td class="codeline">static cl::opt<unsigned> ExitBlockBias(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">108</td>
    <td class="codeline">    "block-placement-exit-block-bias",</td>
    <td class="lineNumber">108</td>
    <td class="codeline">    "block-placement-exit-block-bias",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">109</td>
    <td class="codeline">    cl::desc("Block frequency percentage a loop exit block needs "</td>
    <td class="lineNumber">109</td>
    <td class="codeline">    cl::desc("Block frequency percentage a loop exit block needs "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">110</td>
    <td class="codeline">             "over the original exit to be considered the new exit."),</td>
    <td class="lineNumber">110</td>
    <td class="codeline">             "over the original exit to be considered the new exit."),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">111</td>
    <td class="codeline">    cl::init(0), cl::Hidden);</td>
    <td class="lineNumber">111</td>
    <td class="codeline">    cl::init(0), cl::Hidden);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">112</td>
    <td class="codeline"></td>
    <td class="lineNumber">112</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">113</td>
    <td class="codeline">// Definition:</td>
    <td class="lineNumber">113</td>
    <td class="codeline">// Definition:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">114</td>
    <td class="codeline">// - Outlining: placement of a basic block outside the chain or hot path.</td>
    <td class="lineNumber">114</td>
    <td class="codeline">// - Outlining: placement of a basic block outside the chain or hot path.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">115</td>
    <td class="codeline"></td>
    <td class="lineNumber">115</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">116</td>
    <td class="codeline">static cl::opt<unsigned> LoopToColdBlockRatio(</td>
    <td class="lineNumber">116</td>
    <td class="codeline">static cl::opt<unsigned> LoopToColdBlockRatio(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">117</td>
    <td class="codeline">    "loop-to-cold-block-ratio",</td>
    <td class="lineNumber">117</td>
    <td class="codeline">    "loop-to-cold-block-ratio",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">118</td>
    <td class="codeline">    cl::desc("Outline loop blocks from loop chain if (frequency of loop) / "</td>
    <td class="lineNumber">118</td>
    <td class="codeline">    cl::desc("Outline loop blocks from loop chain if (frequency of loop) / "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">119</td>
    <td class="codeline">             "(frequency of block) is greater than this ratio"),</td>
    <td class="lineNumber">119</td>
    <td class="codeline">             "(frequency of block) is greater than this ratio"),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">120</td>
    <td class="codeline">    cl::init(5), cl::Hidden);</td>
    <td class="lineNumber">120</td>
    <td class="codeline">    cl::init(5), cl::Hidden);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">121</td>
    <td class="codeline"></td>
    <td class="lineNumber">121</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">122</td>
    <td class="codeline">static cl::opt<bool> ForceLoopColdBlock(</td>
    <td class="lineNumber">122</td>
    <td class="codeline">static cl::opt<bool> ForceLoopColdBlock(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">123</td>
    <td class="codeline">    "force-loop-cold-block",</td>
    <td class="lineNumber">123</td>
    <td class="codeline">    "force-loop-cold-block",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">124</td>
    <td class="codeline">    cl::desc("Force outlining cold blocks from loops."),</td>
    <td class="lineNumber">124</td>
    <td class="codeline">    cl::desc("Force outlining cold blocks from loops."),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">125</td>
    <td class="codeline">    cl::init(false), cl::Hidden);</td>
    <td class="lineNumber">125</td>
    <td class="codeline">    cl::init(false), cl::Hidden);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">126</td>
    <td class="codeline"></td>
    <td class="lineNumber">126</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">127</td>
    <td class="codeline">static cl::opt<bool></td>
    <td class="lineNumber">127</td>
    <td class="codeline">static cl::opt<bool></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">128</td>
    <td class="codeline">    PreciseRotationCost("precise-rotation-cost",</td>
    <td class="lineNumber">128</td>
    <td class="codeline">    PreciseRotationCost("precise-rotation-cost",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">129</td>
    <td class="codeline">                        cl::desc("Model the cost of loop rotation more "</td>
    <td class="lineNumber">129</td>
    <td class="codeline">                        cl::desc("Model the cost of loop rotation more "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">130</td>
    <td class="codeline">                                 "precisely by using profile data."),</td>
    <td class="lineNumber">130</td>
    <td class="codeline">                                 "precisely by using profile data."),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">131</td>
    <td class="codeline">                        cl::init(false), cl::Hidden);</td>
    <td class="lineNumber">131</td>
    <td class="codeline">                        cl::init(false), cl::Hidden);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">132</td>
    <td class="codeline"></td>
    <td class="lineNumber">132</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">133</td>
    <td class="codeline">static cl::opt<bool></td>
    <td class="lineNumber">133</td>
    <td class="codeline">static cl::opt<bool></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">134</td>
    <td class="codeline">    ForcePreciseRotationCost("force-precise-rotation-cost",</td>
    <td class="lineNumber">134</td>
    <td class="codeline">    ForcePreciseRotationCost("force-precise-rotation-cost",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">135</td>
    <td class="codeline">                             cl::desc("Force the use of precise cost "</td>
    <td class="lineNumber">135</td>
    <td class="codeline">                             cl::desc("Force the use of precise cost "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">136</td>
    <td class="codeline">                                      "loop rotation strategy."),</td>
    <td class="lineNumber">136</td>
    <td class="codeline">                                      "loop rotation strategy."),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">137</td>
    <td class="codeline">                             cl::init(false), cl::Hidden);</td>
    <td class="lineNumber">137</td>
    <td class="codeline">                             cl::init(false), cl::Hidden);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">138</td>
    <td class="codeline"></td>
    <td class="lineNumber">138</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">139</td>
    <td class="codeline">static cl::opt<unsigned> MisfetchCost(</td>
    <td class="lineNumber">139</td>
    <td class="codeline">static cl::opt<unsigned> MisfetchCost(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">140</td>
    <td class="codeline">    "misfetch-cost",</td>
    <td class="lineNumber">140</td>
    <td class="codeline">    "misfetch-cost",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">141</td>
    <td class="codeline">    cl::desc("Cost that models the probabilistic risk of an instruction "</td>
    <td class="lineNumber">141</td>
    <td class="codeline">    cl::desc("Cost that models the probabilistic risk of an instruction "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">142</td>
    <td class="codeline">             "misfetch due to a jump comparing to falling through, whose cost "</td>
    <td class="lineNumber">142</td>
    <td class="codeline">             "misfetch due to a jump comparing to falling through, whose cost "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">143</td>
    <td class="codeline">             "is zero."),</td>
    <td class="lineNumber">143</td>
    <td class="codeline">             "is zero."),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">144</td>
    <td class="codeline">    cl::init(1), cl::Hidden);</td>
    <td class="lineNumber">144</td>
    <td class="codeline">    cl::init(1), cl::Hidden);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">145</td>
    <td class="codeline"></td>
    <td class="lineNumber">145</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">146</td>
    <td class="codeline">static cl::opt<unsigned> JumpInstCost("jump-inst-cost",</td>
    <td class="lineNumber">146</td>
    <td class="codeline">static cl::opt<unsigned> JumpInstCost("jump-inst-cost",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">147</td>
    <td class="codeline">                                      cl::desc("Cost of jump instructions."),</td>
    <td class="lineNumber">147</td>
    <td class="codeline">                                      cl::desc("Cost of jump instructions."),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">148</td>
    <td class="codeline">                                      cl::init(1), cl::Hidden);</td>
    <td class="lineNumber">148</td>
    <td class="codeline">                                      cl::init(1), cl::Hidden);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">149</td>
    <td class="codeline">static cl::opt<bool></td>
    <td class="lineNumber">149</td>
    <td class="codeline">static cl::opt<bool></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">150</td>
    <td class="codeline">TailDupPlacement("tail-dup-placement",</td>
    <td class="lineNumber">150</td>
    <td class="codeline">TailDupPlacement("tail-dup-placement",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">151</td>
    <td class="codeline">              cl::desc("Perform tail duplication during placement. "</td>
    <td class="lineNumber">151</td>
    <td class="codeline">              cl::desc("Perform tail duplication during placement. "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">152</td>
    <td class="codeline">                       "Creates more fallthrough opportunites in "</td>
    <td class="lineNumber">152</td>
    <td class="codeline">                       "Creates more fallthrough opportunites in "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">153</td>
    <td class="codeline">                       "outline branches."),</td>
    <td class="lineNumber">153</td>
    <td class="codeline">                       "outline branches."),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">154</td>
    <td class="codeline">              cl::init(true), cl::Hidden);</td>
    <td class="lineNumber">154</td>
    <td class="codeline">              cl::init(true), cl::Hidden);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">155</td>
    <td class="codeline"></td>
    <td class="lineNumber">155</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">156</td>
    <td class="codeline">static cl::opt<bool></td>
    <td class="lineNumber">156</td>
    <td class="codeline">static cl::opt<bool></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">157</td>
    <td class="codeline">BranchFoldPlacement("branch-fold-placement",</td>
    <td class="lineNumber">157</td>
    <td class="codeline">BranchFoldPlacement("branch-fold-placement",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">158</td>
    <td class="codeline">              cl::desc("Perform branch folding during placement. "</td>
    <td class="lineNumber">158</td>
    <td class="codeline">              cl::desc("Perform branch folding during placement. "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">159</td>
    <td class="codeline">                       "Reduces code size."),</td>
    <td class="lineNumber">159</td>
    <td class="codeline">                       "Reduces code size."),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">160</td>
    <td class="codeline">              cl::init(true), cl::Hidden);</td>
    <td class="lineNumber">160</td>
    <td class="codeline">              cl::init(true), cl::Hidden);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">161</td>
    <td class="codeline"></td>
    <td class="lineNumber">161</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">162</td>
    <td class="codeline">// Heuristic for tail duplication.</td>
    <td class="lineNumber">162</td>
    <td class="codeline">// Heuristic for tail duplication.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">163</td>
    <td class="codeline">static cl::opt<unsigned> TailDupPlacementThreshold(</td>
    <td class="lineNumber">163</td>
    <td class="codeline">static cl::opt<unsigned> TailDupPlacementThreshold(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">164</td>
    <td class="codeline">    "tail-dup-placement-threshold",</td>
    <td class="lineNumber">164</td>
    <td class="codeline">    "tail-dup-placement-threshold",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">165</td>
    <td class="codeline">    cl::desc("Instruction cutoff for tail duplication during layout. "</td>
    <td class="lineNumber">165</td>
    <td class="codeline">    cl::desc("Instruction cutoff for tail duplication during layout. "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">166</td>
    <td class="codeline">             "Tail merging during layout is forced to have a threshold "</td>
    <td class="lineNumber">166</td>
    <td class="codeline">             "Tail merging during layout is forced to have a threshold "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">167</td>
    <td class="codeline">             "that won't conflict."), cl::init(2),</td>
    <td class="lineNumber">167</td>
    <td class="codeline">             "that won't conflict."), cl::init(2),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">168</td>
    <td class="codeline">    cl::Hidden);</td>
    <td class="lineNumber">168</td>
    <td class="codeline">    cl::Hidden);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">169</td>
    <td class="codeline"></td>
    <td class="lineNumber">169</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">170</td>
    <td class="codeline">// Heuristic for aggressive tail duplication.</td>
    <td class="lineNumber">170</td>
    <td class="codeline">// Heuristic for aggressive tail duplication.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">171</td>
    <td class="codeline">static cl::opt<unsigned> TailDupPlacementAggressiveThreshold(</td>
    <td class="lineNumber">171</td>
    <td class="codeline">static cl::opt<unsigned> TailDupPlacementAggressiveThreshold(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">172</td>
    <td class="codeline">    "tail-dup-placement-aggressive-threshold",</td>
    <td class="lineNumber">172</td>
    <td class="codeline">    "tail-dup-placement-aggressive-threshold",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">173</td>
    <td class="codeline">    cl::desc("Instruction cutoff for aggressive tail duplication during "</td>
    <td class="lineNumber">173</td>
    <td class="codeline">    cl::desc("Instruction cutoff for aggressive tail duplication during "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">174</td>
    <td class="codeline">             "layout. Used at -O3. Tail merging during layout is forced to "</td>
    <td class="lineNumber">174</td>
    <td class="codeline">             "layout. Used at -O3. Tail merging during layout is forced to "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">175</td>
    <td class="codeline">             "have a threshold that won't conflict."), cl::init(4),</td>
    <td class="lineNumber">175</td>
    <td class="codeline">             "have a threshold that won't conflict."), cl::init(4),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">176</td>
    <td class="codeline">    cl::Hidden);</td>
    <td class="lineNumber">176</td>
    <td class="codeline">    cl::Hidden);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">177</td>
    <td class="codeline"></td>
    <td class="lineNumber">177</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">178</td>
    <td class="codeline">// Heuristic for tail duplication.</td>
    <td class="lineNumber">178</td>
    <td class="codeline">// Heuristic for tail duplication.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">179</td>
    <td class="codeline">static cl::opt<unsigned> TailDupPlacementPenalty(</td>
    <td class="lineNumber">179</td>
    <td class="codeline">static cl::opt<unsigned> TailDupPlacementPenalty(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">180</td>
    <td class="codeline">    "tail-dup-placement-penalty",</td>
    <td class="lineNumber">180</td>
    <td class="codeline">    "tail-dup-placement-penalty",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">181</td>
    <td class="codeline">    cl::desc("Cost penalty for blocks that can avoid breaking CFG by copying. "</td>
    <td class="lineNumber">181</td>
    <td class="codeline">    cl::desc("Cost penalty for blocks that can avoid breaking CFG by copying. "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">182</td>
    <td class="codeline">             "Copying can increase fallthrough, but it also increases icache "</td>
    <td class="lineNumber">182</td>
    <td class="codeline">             "Copying can increase fallthrough, but it also increases icache "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">183</td>
    <td class="codeline">             "pressure. This parameter controls the penalty to account for that. "</td>
    <td class="lineNumber">183</td>
    <td class="codeline">             "pressure. This parameter controls the penalty to account for that. "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">184</td>
    <td class="codeline">             "Percent as integer."),</td>
    <td class="lineNumber">184</td>
    <td class="codeline">             "Percent as integer."),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">185</td>
    <td class="codeline">    cl::init(2),</td>
    <td class="lineNumber">185</td>
    <td class="codeline">    cl::init(2),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">186</td>
    <td class="codeline">    cl::Hidden);</td>
    <td class="lineNumber">186</td>
    <td class="codeline">    cl::Hidden);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">187</td>
    <td class="codeline"></td>
    <td class="lineNumber">187</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">188</td>
    <td class="codeline">// Heuristic for tail duplication if profile count is used in cost model.</td>
    <td class="lineNumber">188</td>
    <td class="codeline">// Heuristic for tail duplication if profile count is used in cost model.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">189</td>
    <td class="codeline">static cl::opt<unsigned> TailDupProfilePercentThreshold(</td>
    <td class="lineNumber">189</td>
    <td class="codeline">static cl::opt<unsigned> TailDupProfilePercentThreshold(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">190</td>
    <td class="codeline">    "tail-dup-profile-percent-threshold",</td>
    <td class="lineNumber">190</td>
    <td class="codeline">    "tail-dup-profile-percent-threshold",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">191</td>
    <td class="codeline">    cl::desc("If profile count information is used in tail duplication cost "</td>
    <td class="lineNumber">191</td>
    <td class="codeline">    cl::desc("If profile count information is used in tail duplication cost "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">192</td>
    <td class="codeline">             "model, the gained fall through number from tail duplication "</td>
    <td class="lineNumber">192</td>
    <td class="codeline">             "model, the gained fall through number from tail duplication "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">193</td>
    <td class="codeline">             "should be at least this percent of hot count."),</td>
    <td class="lineNumber">193</td>
    <td class="codeline">             "should be at least this percent of hot count."),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">194</td>
    <td class="codeline">    cl::init(50), cl::Hidden);</td>
    <td class="lineNumber">194</td>
    <td class="codeline">    cl::init(50), cl::Hidden);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">195</td>
    <td class="codeline"></td>
    <td class="lineNumber">195</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">196</td>
    <td class="codeline">// Heuristic for triangle chains.</td>
    <td class="lineNumber">196</td>
    <td class="codeline">// Heuristic for triangle chains.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">197</td>
    <td class="codeline">static cl::opt<unsigned> TriangleChainCount(</td>
    <td class="lineNumber">197</td>
    <td class="codeline">static cl::opt<unsigned> TriangleChainCount(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">198</td>
    <td class="codeline">    "triangle-chain-count",</td>
    <td class="lineNumber">198</td>
    <td class="codeline">    "triangle-chain-count",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">199</td>
    <td class="codeline">    cl::desc("Number of triangle-shaped-CFG's that need to be in a row for the "</td>
    <td class="lineNumber">199</td>
    <td class="codeline">    cl::desc("Number of triangle-shaped-CFG's that need to be in a row for the "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">200</td>
    <td class="codeline">             "triangle tail duplication heuristic to kick in. 0 to disable."),</td>
    <td class="lineNumber">200</td>
    <td class="codeline">             "triangle tail duplication heuristic to kick in. 0 to disable."),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">201</td>
    <td class="codeline">    cl::init(2),</td>
    <td class="lineNumber">201</td>
    <td class="codeline">    cl::init(2),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">202</td>
    <td class="codeline">    cl::Hidden);</td>
    <td class="lineNumber">202</td>
    <td class="codeline">    cl::Hidden);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">203</td>
    <td class="codeline"></td>
    <td class="lineNumber">203</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">204</td>
    <td class="codeline">// Use case: When block layout is visualized after MBP pass, the basic blocks</td>
    <td class="lineNumber">204</td>
    <td class="codeline">// Use case: When block layout is visualized after MBP pass, the basic blocks</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">205</td>
    <td class="codeline">// are labeled in layout order; meanwhile blocks could be numbered in a</td>
    <td class="lineNumber">205</td>
    <td class="codeline">// are labeled in layout order; meanwhile blocks could be numbered in a</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">206</td>
    <td class="codeline">// different order. It's hard to map between the graph and pass output.</td>
    <td class="lineNumber">206</td>
    <td class="codeline">// different order. It's hard to map between the graph and pass output.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">207</td>
    <td class="codeline">// With this option on, the basic blocks are renumbered in function layout</td>
    <td class="lineNumber">207</td>
    <td class="codeline">// With this option on, the basic blocks are renumbered in function layout</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">208</td>
    <td class="codeline">// order. For debugging only.</td>
    <td class="lineNumber">208</td>
    <td class="codeline">// order. For debugging only.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">209</td>
    <td class="codeline">static cl::opt<bool> RenumberBlocksBeforeView(</td>
    <td class="lineNumber">209</td>
    <td class="codeline">static cl::opt<bool> RenumberBlocksBeforeView(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">210</td>
    <td class="codeline">    "renumber-blocks-before-view",</td>
    <td class="lineNumber">210</td>
    <td class="codeline">    "renumber-blocks-before-view",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">211</td>
    <td class="codeline">    cl::desc(</td>
    <td class="lineNumber">211</td>
    <td class="codeline">    cl::desc(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">212</td>
    <td class="codeline">        "If true, basic blocks are re-numbered before MBP layout is printed "</td>
    <td class="lineNumber">212</td>
    <td class="codeline">        "If true, basic blocks are re-numbered before MBP layout is printed "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">213</td>
    <td class="codeline">        "into a dot graph. Only used when a function is being printed."),</td>
    <td class="lineNumber">213</td>
    <td class="codeline">        "into a dot graph. Only used when a function is being printed."),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">214</td>
    <td class="codeline">    cl::init(false), cl::Hidden);</td>
    <td class="lineNumber">214</td>
    <td class="codeline">    cl::init(false), cl::Hidden);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">215</td>
    <td class="codeline"></td>
    <td class="lineNumber">215</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">216</td>
    <td class="codeline">namespace llvm {</td>
    <td class="lineNumber">216</td>
    <td class="codeline">namespace llvm {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">217</td>
    <td class="codeline">extern cl::opt<bool> EnableExtTspBlockPlacement;</td>
    <td class="lineNumber">217</td>
    <td class="codeline">extern cl::opt<bool> EnableExtTspBlockPlacement;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">218</td>
    <td class="codeline">extern cl::opt<bool> ApplyExtTspWithoutProfile;</td>
    <td class="lineNumber">218</td>
    <td class="codeline">extern cl::opt<bool> ApplyExtTspWithoutProfile;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">219</td>
    <td class="codeline">extern cl::opt<unsigned> StaticLikelyProb;</td>
    <td class="lineNumber">219</td>
    <td class="codeline">extern cl::opt<unsigned> StaticLikelyProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">220</td>
    <td class="codeline">extern cl::opt<unsigned> ProfileLikelyProb;</td>
    <td class="lineNumber">220</td>
    <td class="codeline">extern cl::opt<unsigned> ProfileLikelyProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">221</td>
    <td class="codeline"></td>
    <td class="lineNumber">221</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">222</td>
    <td class="codeline">// Internal option used to control BFI display only after MBP pass.</td>
    <td class="lineNumber">222</td>
    <td class="codeline">// Internal option used to control BFI display only after MBP pass.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">223</td>
    <td class="codeline">// Defined in CodeGen/MachineBlockFrequencyInfo.cpp:</td>
    <td class="lineNumber">223</td>
    <td class="codeline">// Defined in CodeGen/MachineBlockFrequencyInfo.cpp:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">224</td>
    <td class="codeline">// -view-block-layout-with-bfi=</td>
    <td class="lineNumber">224</td>
    <td class="codeline">// -view-block-layout-with-bfi=</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">225</td>
    <td class="codeline">extern cl::opt<GVDAGType> ViewBlockLayoutWithBFI;</td>
    <td class="lineNumber">225</td>
    <td class="codeline">extern cl::opt<GVDAGType> ViewBlockLayoutWithBFI;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">226</td>
    <td class="codeline"></td>
    <td class="lineNumber">226</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">227</td>
    <td class="codeline">// Command line option to specify the name of the function for CFG dump</td>
    <td class="lineNumber">227</td>
    <td class="codeline">// Command line option to specify the name of the function for CFG dump</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">228</td>
    <td class="codeline">// Defined in Analysis/BlockFrequencyInfo.cpp:  -view-bfi-func-name=</td>
    <td class="lineNumber">228</td>
    <td class="codeline">// Defined in Analysis/BlockFrequencyInfo.cpp:  -view-bfi-func-name=</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">229</td>
    <td class="codeline">extern cl::opt<std::string> ViewBlockFreqFuncName;</td>
    <td class="lineNumber">229</td>
    <td class="codeline">extern cl::opt<std::string> ViewBlockFreqFuncName;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">230</td>
    <td class="codeline">} // namespace llvm</td>
    <td class="lineNumber">230</td>
    <td class="codeline">} // namespace llvm</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">231</td>
    <td class="codeline"></td>
    <td class="lineNumber">231</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">232</td>
    <td class="codeline">namespace {</td>
    <td class="lineNumber">232</td>
    <td class="codeline">namespace {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">233</td>
    <td class="codeline"></td>
    <td class="lineNumber">233</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">234</td>
    <td class="codeline">class BlockChain;</td>
    <td class="lineNumber">234</td>
    <td class="codeline">class BlockChain;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">235</td>
    <td class="codeline"></td>
    <td class="lineNumber">235</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">236</td>
    <td class="codeline">/// Type for our function-wide basic block -> block chain mapping.</td>
    <td class="lineNumber">236</td>
    <td class="codeline">/// Type for our function-wide basic block -> block chain mapping.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">237</td>
    <td class="codeline">using BlockToChainMapType = DenseMap<const MachineBasicBlock *, BlockChain *>;</td>
    <td class="lineNumber">237</td>
    <td class="codeline">using BlockToChainMapType = DenseMap<const MachineBasicBlock *, BlockChain *>;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">238</td>
    <td class="codeline"></td>
    <td class="lineNumber">238</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">239</td>
    <td class="codeline">/// A chain of blocks which will be laid out contiguously.</td>
    <td class="lineNumber">239</td>
    <td class="codeline">/// A chain of blocks which will be laid out contiguously.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">240</td>
    <td class="codeline">///</td>
    <td class="lineNumber">240</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">241</td>
    <td class="codeline">/// This is the datastructure representing a chain of consecutive blocks that</td>
    <td class="lineNumber">241</td>
    <td class="codeline">/// This is the datastructure representing a chain of consecutive blocks that</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">242</td>
    <td class="codeline">/// are profitable to layout together in order to maximize fallthrough</td>
    <td class="lineNumber">242</td>
    <td class="codeline">/// are profitable to layout together in order to maximize fallthrough</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">243</td>
    <td class="codeline">/// probabilities and code locality. We also can use a block chain to represent</td>
    <td class="lineNumber">243</td>
    <td class="codeline">/// probabilities and code locality. We also can use a block chain to represent</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">244</td>
    <td class="codeline">/// a sequence of basic blocks which have some external (correctness)</td>
    <td class="lineNumber">244</td>
    <td class="codeline">/// a sequence of basic blocks which have some external (correctness)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">245</td>
    <td class="codeline">/// requirement for sequential layout.</td>
    <td class="lineNumber">245</td>
    <td class="codeline">/// requirement for sequential layout.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">246</td>
    <td class="codeline">///</td>
    <td class="lineNumber">246</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">247</td>
    <td class="codeline">/// Chains can be built around a single basic block and can be merged to grow</td>
    <td class="lineNumber">247</td>
    <td class="codeline">/// Chains can be built around a single basic block and can be merged to grow</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">248</td>
    <td class="codeline">/// them. They participate in a block-to-chain mapping, which is updated</td>
    <td class="lineNumber">248</td>
    <td class="codeline">/// them. They participate in a block-to-chain mapping, which is updated</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">249</td>
    <td class="codeline">/// automatically as chains are merged together.</td>
    <td class="lineNumber">249</td>
    <td class="codeline">/// automatically as chains are merged together.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">250</td>
    <td class="codeline">class BlockChain {</td>
    <td class="lineNumber">250</td>
    <td class="codeline">class BlockChain {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">251</td>
    <td class="codeline">  /// The sequence of blocks belonging to this chain.</td>
    <td class="lineNumber">251</td>
    <td class="codeline">  /// The sequence of blocks belonging to this chain.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">252</td>
    <td class="codeline">  ///</td>
    <td class="lineNumber">252</td>
    <td class="codeline">  ///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">253</td>
    <td class="codeline">  /// This is the sequence of blocks for a particular chain. These will be laid</td>
    <td class="lineNumber">253</td>
    <td class="codeline">  /// This is the sequence of blocks for a particular chain. These will be laid</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">254</td>
    <td class="codeline">  /// out in-order within the function.</td>
    <td class="lineNumber">254</td>
    <td class="codeline">  /// out in-order within the function.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">255</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 4> Blocks;</td>
    <td class="lineNumber">255</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 4> Blocks;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">256</td>
    <td class="codeline"></td>
    <td class="lineNumber">256</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">257</td>
    <td class="codeline">  /// A handle to the function-wide basic block to block chain mapping.</td>
    <td class="lineNumber">257</td>
    <td class="codeline">  /// A handle to the function-wide basic block to block chain mapping.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">258</td>
    <td class="codeline">  ///</td>
    <td class="lineNumber">258</td>
    <td class="codeline">  ///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">259</td>
    <td class="codeline">  /// This is retained in each block chain to simplify the computation of child</td>
    <td class="lineNumber">259</td>
    <td class="codeline">  /// This is retained in each block chain to simplify the computation of child</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">260</td>
    <td class="codeline">  /// block chains for SCC-formation and iteration. We store the edges to child</td>
    <td class="lineNumber">260</td>
    <td class="codeline">  /// block chains for SCC-formation and iteration. We store the edges to child</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">261</td>
    <td class="codeline">  /// basic blocks, and map them back to their associated chains using this</td>
    <td class="lineNumber">261</td>
    <td class="codeline">  /// basic blocks, and map them back to their associated chains using this</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">262</td>
    <td class="codeline">  /// structure.</td>
    <td class="lineNumber">262</td>
    <td class="codeline">  /// structure.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">263</td>
    <td class="codeline">  BlockToChainMapType &BlockToChain;</td>
    <td class="lineNumber">263</td>
    <td class="codeline">  BlockToChainMapType &BlockToChain;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">264</td>
    <td class="codeline"></td>
    <td class="lineNumber">264</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">265</td>
    <td class="codeline">public:</td>
    <td class="lineNumber">265</td>
    <td class="codeline">public:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">266</td>
    <td class="codeline">  /// Construct a new BlockChain.</td>
    <td class="lineNumber">266</td>
    <td class="codeline">  /// Construct a new BlockChain.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">267</td>
    <td class="codeline">  ///</td>
    <td class="lineNumber">267</td>
    <td class="codeline">  ///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">268</td>
    <td class="codeline">  /// This builds a new block chain representing a single basic block in the</td>
    <td class="lineNumber">268</td>
    <td class="codeline">  /// This builds a new block chain representing a single basic block in the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">269</td>
    <td class="codeline">  /// function. It also registers itself as the chain that block participates</td>
    <td class="lineNumber">269</td>
    <td class="codeline">  /// function. It also registers itself as the chain that block participates</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">270</td>
    <td class="codeline">  /// in with the BlockToChain mapping.</td>
    <td class="lineNumber">270</td>
    <td class="codeline">  /// in with the BlockToChain mapping.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">271</td>
    <td class="codeline">  BlockChain(BlockToChainMapType &BlockToChain, MachineBasicBlock *BB)</td>
    <td class="lineNumber">271</td>
    <td class="codeline">  BlockChain(BlockToChainMapType &BlockToChain, MachineBasicBlock *BB)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">272</td>
    <td class="codeline">      : Blocks(1, BB), BlockToChain(BlockToChain) {</td>
    <td class="lineNumber">272</td>
    <td class="codeline">      : Blocks(1, BB), BlockToChain(BlockToChain) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">273</td>
    <td class="codeline">    assert(BB && "Cannot create a chain with a null basic block");</td>
    <td class="lineNumber">273</td>
    <td class="codeline">    assert(BB && "Cannot create a chain with a null basic block");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">274</td>
    <td class="codeline">    BlockToChain[BB] = this;</td>
    <td class="lineNumber">274</td>
    <td class="codeline">    BlockToChain[BB] = this;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">275</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">275</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">276</td>
    <td class="codeline"></td>
    <td class="lineNumber">276</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">277</td>
    <td class="codeline">  /// Iterator over blocks within the chain.</td>
    <td class="lineNumber">277</td>
    <td class="codeline">  /// Iterator over blocks within the chain.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">278</td>
    <td class="codeline">  using iterator = SmallVectorImpl<MachineBasicBlock *>::iterator;</td>
    <td class="lineNumber">278</td>
    <td class="codeline">  using iterator = SmallVectorImpl<MachineBasicBlock *>::iterator;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">279</td>
    <td class="codeline">  using const_iterator = SmallVectorImpl<MachineBasicBlock *>::const_iterator;</td>
    <td class="lineNumber">279</td>
    <td class="codeline">  using const_iterator = SmallVectorImpl<MachineBasicBlock *>::const_iterator;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">280</td>
    <td class="codeline"></td>
    <td class="lineNumber">280</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">281</td>
    <td class="codeline">  /// Beginning of blocks within the chain.</td>
    <td class="lineNumber">281</td>
    <td class="codeline">  /// Beginning of blocks within the chain.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">282</td>
    <td class="codeline">  iterator begin() { return Blocks.begin(); }</td>
    <td class="lineNumber">282</td>
    <td class="codeline">  iterator begin() { return Blocks.begin(); }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">283</td>
    <td class="codeline">  const_iterator begin() const { return Blocks.begin(); }</td>
    <td class="lineNumber">283</td>
    <td class="codeline">  const_iterator begin() const { return Blocks.begin(); }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">284</td>
    <td class="codeline"></td>
    <td class="lineNumber">284</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">285</td>
    <td class="codeline">  /// End of blocks within the chain.</td>
    <td class="lineNumber">285</td>
    <td class="codeline">  /// End of blocks within the chain.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">286</td>
    <td class="codeline">  iterator end() { return Blocks.end(); }</td>
    <td class="lineNumber">286</td>
    <td class="codeline">  iterator end() { return Blocks.end(); }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">287</td>
    <td class="codeline">  const_iterator end() const { return Blocks.end(); }</td>
    <td class="lineNumber">287</td>
    <td class="codeline">  const_iterator end() const { return Blocks.end(); }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">288</td>
    <td class="codeline"></td>
    <td class="lineNumber">288</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">289</td>
    <td class="codeline">  bool remove(MachineBasicBlock* BB) {</td>
    <td class="lineNumber">289</td>
    <td class="codeline">  bool remove(MachineBasicBlock* BB) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">290</td>
    <td class="codeline">    for(iterator i = begin(); i != end(); ++i) {</td>
    <td class="lineNumber">290</td>
    <td class="codeline">    for(iterator i = begin(); i != end(); ++i) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">291</td>
    <td class="codeline">      if (*i == BB) {</td>
    <td class="lineNumber">291</td>
    <td class="codeline">      if (*i == BB) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">292</td>
    <td class="codeline">        Blocks.erase(i);</td>
    <td class="lineNumber">292</td>
    <td class="codeline">        Blocks.erase(i);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">293</td>
    <td class="codeline">        return true;</td>
    <td class="lineNumber">293</td>
    <td class="codeline">        return true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">294</td>
    <td class="codeline">      }</td>
    <td class="lineNumber">294</td>
    <td class="codeline">      }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">295</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">295</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">296</td>
    <td class="codeline">    return false;</td>
    <td class="lineNumber">296</td>
    <td class="codeline">    return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">297</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">297</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">298</td>
    <td class="codeline"></td>
    <td class="lineNumber">298</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">299</td>
    <td class="codeline">  /// Merge a block chain into this one.</td>
    <td class="lineNumber">299</td>
    <td class="codeline">  /// Merge a block chain into this one.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">300</td>
    <td class="codeline">  ///</td>
    <td class="lineNumber">300</td>
    <td class="codeline">  ///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">301</td>
    <td class="codeline">  /// This routine merges a block chain into this one. It takes care of forming</td>
    <td class="lineNumber">301</td>
    <td class="codeline">  /// This routine merges a block chain into this one. It takes care of forming</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">302</td>
    <td class="codeline">  /// a contiguous sequence of basic blocks, updating the edge list, and</td>
    <td class="lineNumber">302</td>
    <td class="codeline">  /// a contiguous sequence of basic blocks, updating the edge list, and</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">303</td>
    <td class="codeline">  /// updating the block -> chain mapping. It does not free or tear down the</td>
    <td class="lineNumber">303</td>
    <td class="codeline">  /// updating the block -> chain mapping. It does not free or tear down the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">304</td>
    <td class="codeline">  /// old chain, but the old chain's block list is no longer valid.</td>
    <td class="lineNumber">304</td>
    <td class="codeline">  /// old chain, but the old chain's block list is no longer valid.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">305</td>
    <td class="codeline">  void merge(MachineBasicBlock *BB, BlockChain *Chain) {</td>
    <td class="lineNumber">305</td>
    <td class="codeline">  void merge(MachineBasicBlock *BB, BlockChain *Chain) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">306</td>
    <td class="codeline">    assert(BB && "Can't merge a null block.");</td>
    <td class="lineNumber">306</td>
    <td class="codeline">    assert(BB && "Can't merge a null block.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">307</td>
    <td class="codeline">    assert(!Blocks.empty() && "Can't merge into an empty chain.");</td>
    <td class="lineNumber">307</td>
    <td class="codeline">    assert(!Blocks.empty() && "Can't merge into an empty chain.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">308</td>
    <td class="codeline"></td>
    <td class="lineNumber">308</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">309</td>
    <td class="codeline">    // Fast path in case we don't have a chain already.</td>
    <td class="lineNumber">309</td>
    <td class="codeline">    // Fast path in case we don't have a chain already.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">310</td>
    <td class="codeline">    if (!Chain) {</td>
    <td class="lineNumber">310</td>
    <td class="codeline">    if (!Chain) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">311</td>
    <td class="codeline">      assert(!BlockToChain[BB] &&</td>
    <td class="lineNumber">311</td>
    <td class="codeline">      assert(!BlockToChain[BB] &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">312</td>
    <td class="codeline">             "Passed chain is null, but BB has entry in BlockToChain.");</td>
    <td class="lineNumber">312</td>
    <td class="codeline">             "Passed chain is null, but BB has entry in BlockToChain.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">313</td>
    <td class="codeline">      Blocks.push_back(BB);</td>
    <td class="lineNumber">313</td>
    <td class="codeline">      Blocks.push_back(BB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">314</td>
    <td class="codeline">      BlockToChain[BB] = this;</td>
    <td class="lineNumber">314</td>
    <td class="codeline">      BlockToChain[BB] = this;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">315</td>
    <td class="codeline">      return;</td>
    <td class="lineNumber">315</td>
    <td class="codeline">      return;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">316</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">316</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">317</td>
    <td class="codeline"></td>
    <td class="lineNumber">317</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">318</td>
    <td class="codeline">    assert(BB == *Chain->begin() && "Passed BB is not head of Chain.");</td>
    <td class="lineNumber">318</td>
    <td class="codeline">    assert(BB == *Chain->begin() && "Passed BB is not head of Chain.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">319</td>
    <td class="codeline">    assert(Chain->begin() != Chain->end());</td>
    <td class="lineNumber">319</td>
    <td class="codeline">    assert(Chain->begin() != Chain->end());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">320</td>
    <td class="codeline"></td>
    <td class="lineNumber">320</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">321</td>
    <td class="codeline">    // Update the incoming blocks to point to this chain, and add them to the</td>
    <td class="lineNumber">321</td>
    <td class="codeline">    // Update the incoming blocks to point to this chain, and add them to the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">322</td>
    <td class="codeline">    // chain structure.</td>
    <td class="lineNumber">322</td>
    <td class="codeline">    // chain structure.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">323</td>
    <td class="codeline">    for (MachineBasicBlock *ChainBB : *Chain) {</td>
    <td class="lineNumber">323</td>
    <td class="codeline">    for (MachineBasicBlock *ChainBB : *Chain) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">324</td>
    <td class="codeline">      Blocks.push_back(ChainBB);</td>
    <td class="lineNumber">324</td>
    <td class="codeline">      Blocks.push_back(ChainBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">325</td>
    <td class="codeline">      assert(BlockToChain[ChainBB] == Chain && "Incoming blocks not in chain.");</td>
    <td class="lineNumber">325</td>
    <td class="codeline">      assert(BlockToChain[ChainBB] == Chain && "Incoming blocks not in chain.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">326</td>
    <td class="codeline">      BlockToChain[ChainBB] = this;</td>
    <td class="lineNumber">326</td>
    <td class="codeline">      BlockToChain[ChainBB] = this;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">327</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">327</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">328</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">328</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">329</td>
    <td class="codeline"></td>
    <td class="lineNumber">329</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">330</td>
    <td class="codeline">#ifndef NDEBUG</td>
    <td class="lineNumber">330</td>
    <td class="codeline">#ifndef NDEBUG</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">331</td>
    <td class="codeline">  /// Dump the blocks in this chain.</td>
    <td class="lineNumber">331</td>
    <td class="codeline">  /// Dump the blocks in this chain.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">332</td>
    <td class="codeline">  LLVM_DUMP_METHOD void dump() {</td>
    <td class="lineNumber">332</td>
    <td class="codeline">  LLVM_DUMP_METHOD void dump() {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">333</td>
    <td class="codeline">    for (MachineBasicBlock *MBB : *this)</td>
    <td class="lineNumber">333</td>
    <td class="codeline">    for (MachineBasicBlock *MBB : *this)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">334</td>
    <td class="codeline">      MBB->dump();</td>
    <td class="lineNumber">334</td>
    <td class="codeline">      MBB->dump();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">335</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">335</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">336</td>
    <td class="codeline">#endif // NDEBUG</td>
    <td class="lineNumber">336</td>
    <td class="codeline">#endif // NDEBUG</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">337</td>
    <td class="codeline"></td>
    <td class="lineNumber">337</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">338</td>
    <td class="codeline">  /// Count of predecessors of any block within the chain which have not</td>
    <td class="lineNumber">338</td>
    <td class="codeline">  /// Count of predecessors of any block within the chain which have not</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">339</td>
    <td class="codeline">  /// yet been scheduled.  In general, we will delay scheduling this chain</td>
    <td class="lineNumber">339</td>
    <td class="codeline">  /// yet been scheduled.  In general, we will delay scheduling this chain</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">340</td>
    <td class="codeline">  /// until those predecessors are scheduled (or we find a sufficiently good</td>
    <td class="lineNumber">340</td>
    <td class="codeline">  /// until those predecessors are scheduled (or we find a sufficiently good</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">341</td>
    <td class="codeline">  /// reason to override this heuristic.)  Note that when forming loop chains,</td>
    <td class="lineNumber">341</td>
    <td class="codeline">  /// reason to override this heuristic.)  Note that when forming loop chains,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">342</td>
    <td class="codeline">  /// blocks outside the loop are ignored and treated as if they were already</td>
    <td class="lineNumber">342</td>
    <td class="codeline">  /// blocks outside the loop are ignored and treated as if they were already</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">343</td>
    <td class="codeline">  /// scheduled.</td>
    <td class="lineNumber">343</td>
    <td class="codeline">  /// scheduled.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">344</td>
    <td class="codeline">  ///</td>
    <td class="lineNumber">344</td>
    <td class="codeline">  ///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">345</td>
    <td class="codeline">  /// Note: This field is reinitialized multiple times - once for each loop,</td>
    <td class="lineNumber">345</td>
    <td class="codeline">  /// Note: This field is reinitialized multiple times - once for each loop,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">346</td>
    <td class="codeline">  /// and then once for the function as a whole.</td>
    <td class="lineNumber">346</td>
    <td class="codeline">  /// and then once for the function as a whole.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">347</td>
    <td class="codeline">  unsigned UnscheduledPredecessors = 0;</td>
    <td class="lineNumber">347</td>
    <td class="codeline">  unsigned UnscheduledPredecessors = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">348</td>
    <td class="codeline">};</td>
    <td class="lineNumber">348</td>
    <td class="codeline">};</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">349</td>
    <td class="codeline"></td>
    <td class="lineNumber">349</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">350</td>
    <td class="codeline">class MachineBlockPlacement : public MachineFunctionPass {</td>
    <td class="lineNumber">350</td>
    <td class="codeline">class MachineBlockPlacement : public MachineFunctionPass {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">351</td>
    <td class="codeline">  /// A type for a block filter set.</td>
    <td class="lineNumber">351</td>
    <td class="codeline">  /// A type for a block filter set.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">352</td>
    <td class="codeline">  using BlockFilterSet = SmallSetVector<const MachineBasicBlock *, 16>;</td>
    <td class="lineNumber">352</td>
    <td class="codeline">  using BlockFilterSet = SmallSetVector<const MachineBasicBlock *, 16>;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">353</td>
    <td class="codeline"></td>
    <td class="lineNumber">353</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">354</td>
    <td class="codeline">  /// Pair struct containing basic block and taildup profitability</td>
    <td class="lineNumber">354</td>
    <td class="codeline">  /// Pair struct containing basic block and taildup profitability</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">355</td>
    <td class="codeline">  struct BlockAndTailDupResult {</td>
    <td class="lineNumber">355</td>
    <td class="codeline">  struct BlockAndTailDupResult {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">356</td>
    <td class="codeline">    MachineBasicBlock *BB = nullptr;</td>
    <td class="lineNumber">356</td>
    <td class="codeline">    MachineBasicBlock *BB = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">357</td>
    <td class="codeline">    bool ShouldTailDup;</td>
    <td class="lineNumber">357</td>
    <td class="codeline">    bool ShouldTailDup;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">358</td>
    <td class="codeline">  };</td>
    <td class="lineNumber">358</td>
    <td class="codeline">  };</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">359</td>
    <td class="codeline"></td>
    <td class="lineNumber">359</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">360</td>
    <td class="codeline">  /// Triple struct containing edge weight and the edge.</td>
    <td class="lineNumber">360</td>
    <td class="codeline">  /// Triple struct containing edge weight and the edge.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">361</td>
    <td class="codeline">  struct WeightedEdge {</td>
    <td class="lineNumber">361</td>
    <td class="codeline">  struct WeightedEdge {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">362</td>
    <td class="codeline">    BlockFrequency Weight;</td>
    <td class="lineNumber">362</td>
    <td class="codeline">    BlockFrequency Weight;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">363</td>
    <td class="codeline">    MachineBasicBlock *Src = nullptr;</td>
    <td class="lineNumber">363</td>
    <td class="codeline">    MachineBasicBlock *Src = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">364</td>
    <td class="codeline">    MachineBasicBlock *Dest = nullptr;</td>
    <td class="lineNumber">364</td>
    <td class="codeline">    MachineBasicBlock *Dest = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">365</td>
    <td class="codeline">  };</td>
    <td class="lineNumber">365</td>
    <td class="codeline">  };</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">366</td>
    <td class="codeline"></td>
    <td class="lineNumber">366</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">367</td>
    <td class="codeline">  /// work lists of blocks that are ready to be laid out</td>
    <td class="lineNumber">367</td>
    <td class="codeline">  /// work lists of blocks that are ready to be laid out</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">368</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 16> BlockWorkList;</td>
    <td class="lineNumber">368</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 16> BlockWorkList;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">369</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 16> EHPadWorkList;</td>
    <td class="lineNumber">369</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 16> EHPadWorkList;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">370</td>
    <td class="codeline"></td>
    <td class="lineNumber">370</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">371</td>
    <td class="codeline">  /// Edges that have already been computed as optimal.</td>
    <td class="lineNumber">371</td>
    <td class="codeline">  /// Edges that have already been computed as optimal.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">372</td>
    <td class="codeline">  DenseMap<const MachineBasicBlock *, BlockAndTailDupResult> ComputedEdges;</td>
    <td class="lineNumber">372</td>
    <td class="codeline">  DenseMap<const MachineBasicBlock *, BlockAndTailDupResult> ComputedEdges;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">373</td>
    <td class="codeline"></td>
    <td class="lineNumber">373</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">374</td>
    <td class="codeline">  /// Machine Function</td>
    <td class="lineNumber">374</td>
    <td class="codeline">  /// Machine Function</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">375</td>
    <td class="codeline">  MachineFunction *F = nullptr;</td>
    <td class="lineNumber">375</td>
    <td class="codeline">  MachineFunction *F = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">376</td>
    <td class="codeline"></td>
    <td class="lineNumber">376</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">377</td>
    <td class="codeline">  /// A handle to the branch probability pass.</td>
    <td class="lineNumber">377</td>
    <td class="codeline">  /// A handle to the branch probability pass.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">378</td>
    <td class="codeline">  const MachineBranchProbabilityInfo *MBPI = nullptr;</td>
    <td class="lineNumber">378</td>
    <td class="codeline">  const MachineBranchProbabilityInfo *MBPI = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">379</td>
    <td class="codeline"></td>
    <td class="lineNumber">379</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">380</td>
    <td class="codeline">  /// A handle to the function-wide block frequency pass.</td>
    <td class="lineNumber">380</td>
    <td class="codeline">  /// A handle to the function-wide block frequency pass.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">381</td>
    <td class="codeline">  std::unique_ptr<MBFIWrapper> MBFI;</td>
    <td class="lineNumber">381</td>
    <td class="codeline">  std::unique_ptr<MBFIWrapper> MBFI;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">382</td>
    <td class="codeline"></td>
    <td class="lineNumber">382</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">383</td>
    <td class="codeline">  /// A handle to the loop info.</td>
    <td class="lineNumber">383</td>
    <td class="codeline">  /// A handle to the loop info.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">384</td>
    <td class="codeline">  MachineLoopInfo *MLI = nullptr;</td>
    <td class="lineNumber">384</td>
    <td class="codeline">  MachineLoopInfo *MLI = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">385</td>
    <td class="codeline"></td>
    <td class="lineNumber">385</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">386</td>
    <td class="codeline">  /// Preferred loop exit.</td>
    <td class="lineNumber">386</td>
    <td class="codeline">  /// Preferred loop exit.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">387</td>
    <td class="codeline">  /// Member variable for convenience. It may be removed by duplication deep</td>
    <td class="lineNumber">387</td>
    <td class="codeline">  /// Member variable for convenience. It may be removed by duplication deep</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">388</td>
    <td class="codeline">  /// in the call stack.</td>
    <td class="lineNumber">388</td>
    <td class="codeline">  /// in the call stack.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">389</td>
    <td class="codeline">  MachineBasicBlock *PreferredLoopExit = nullptr;</td>
    <td class="lineNumber">389</td>
    <td class="codeline">  MachineBasicBlock *PreferredLoopExit = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">390</td>
    <td class="codeline"></td>
    <td class="lineNumber">390</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">391</td>
    <td class="codeline">  /// A handle to the target's instruction info.</td>
    <td class="lineNumber">391</td>
    <td class="codeline">  /// A handle to the target's instruction info.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">392</td>
    <td class="codeline">  const TargetInstrInfo *TII = nullptr;</td>
    <td class="lineNumber">392</td>
    <td class="codeline">  const TargetInstrInfo *TII = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">393</td>
    <td class="codeline"></td>
    <td class="lineNumber">393</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">394</td>
    <td class="codeline">  /// A handle to the target's lowering info.</td>
    <td class="lineNumber">394</td>
    <td class="codeline">  /// A handle to the target's lowering info.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">395</td>
    <td class="codeline">  const TargetLoweringBase *TLI = nullptr;</td>
    <td class="lineNumber">395</td>
    <td class="codeline">  const TargetLoweringBase *TLI = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">396</td>
    <td class="codeline"></td>
    <td class="lineNumber">396</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">397</td>
    <td class="codeline">  /// A handle to the post dominator tree.</td>
    <td class="lineNumber">397</td>
    <td class="codeline">  /// A handle to the post dominator tree.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">398</td>
    <td class="codeline">  MachinePostDominatorTree *MPDT = nullptr;</td>
    <td class="lineNumber">398</td>
    <td class="codeline">  MachinePostDominatorTree *MPDT = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">399</td>
    <td class="codeline"></td>
    <td class="lineNumber">399</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">400</td>
    <td class="codeline">  ProfileSummaryInfo *PSI = nullptr;</td>
    <td class="lineNumber">400</td>
    <td class="codeline">  ProfileSummaryInfo *PSI = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">401</td>
    <td class="codeline"></td>
    <td class="lineNumber">401</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">402</td>
    <td class="codeline">  /// Duplicator used to duplicate tails during placement.</td>
    <td class="lineNumber">402</td>
    <td class="codeline">  /// Duplicator used to duplicate tails during placement.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">403</td>
    <td class="codeline">  ///</td>
    <td class="lineNumber">403</td>
    <td class="codeline">  ///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">404</td>
    <td class="codeline">  /// Placement decisions can open up new tail duplication opportunities, but</td>
    <td class="lineNumber">404</td>
    <td class="codeline">  /// Placement decisions can open up new tail duplication opportunities, but</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">405</td>
    <td class="codeline">  /// since tail duplication affects placement decisions of later blocks, it</td>
    <td class="lineNumber">405</td>
    <td class="codeline">  /// since tail duplication affects placement decisions of later blocks, it</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">406</td>
    <td class="codeline">  /// must be done inline.</td>
    <td class="lineNumber">406</td>
    <td class="codeline">  /// must be done inline.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">407</td>
    <td class="codeline">  TailDuplicator TailDup;</td>
    <td class="lineNumber">407</td>
    <td class="codeline">  TailDuplicator TailDup;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">408</td>
    <td class="codeline"></td>
    <td class="lineNumber">408</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">409</td>
    <td class="codeline">  /// Partial tail duplication threshold.</td>
    <td class="lineNumber">409</td>
    <td class="codeline">  /// Partial tail duplication threshold.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">410</td>
    <td class="codeline">  BlockFrequency DupThreshold;</td>
    <td class="lineNumber">410</td>
    <td class="codeline">  BlockFrequency DupThreshold;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">411</td>
    <td class="codeline"></td>
    <td class="lineNumber">411</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">412</td>
    <td class="codeline">  /// True:  use block profile count to compute tail duplication cost.</td>
    <td class="lineNumber">412</td>
    <td class="codeline">  /// True:  use block profile count to compute tail duplication cost.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">413</td>
    <td class="codeline">  /// False: use block frequency to compute tail duplication cost.</td>
    <td class="lineNumber">413</td>
    <td class="codeline">  /// False: use block frequency to compute tail duplication cost.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">414</td>
    <td class="codeline">  bool UseProfileCount = false;</td>
    <td class="lineNumber">414</td>
    <td class="codeline">  bool UseProfileCount = false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">415</td>
    <td class="codeline"></td>
    <td class="lineNumber">415</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">416</td>
    <td class="codeline">  /// Allocator and owner of BlockChain structures.</td>
    <td class="lineNumber">416</td>
    <td class="codeline">  /// Allocator and owner of BlockChain structures.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">417</td>
    <td class="codeline">  ///</td>
    <td class="lineNumber">417</td>
    <td class="codeline">  ///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">418</td>
    <td class="codeline">  /// We build BlockChains lazily while processing the loop structure of</td>
    <td class="lineNumber">418</td>
    <td class="codeline">  /// We build BlockChains lazily while processing the loop structure of</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">419</td>
    <td class="codeline">  /// a function. To reduce malloc traffic, we allocate them using this</td>
    <td class="lineNumber">419</td>
    <td class="codeline">  /// a function. To reduce malloc traffic, we allocate them using this</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">420</td>
    <td class="codeline">  /// slab-like allocator, and destroy them after the pass completes. An</td>
    <td class="lineNumber">420</td>
    <td class="codeline">  /// slab-like allocator, and destroy them after the pass completes. An</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">421</td>
    <td class="codeline">  /// important guarantee is that this allocator produces stable pointers to</td>
    <td class="lineNumber">421</td>
    <td class="codeline">  /// important guarantee is that this allocator produces stable pointers to</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">422</td>
    <td class="codeline">  /// the chains.</td>
    <td class="lineNumber">422</td>
    <td class="codeline">  /// the chains.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">423</td>
    <td class="codeline">  SpecificBumpPtrAllocator<BlockChain> ChainAllocator;</td>
    <td class="lineNumber">423</td>
    <td class="codeline">  SpecificBumpPtrAllocator<BlockChain> ChainAllocator;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">424</td>
    <td class="codeline"></td>
    <td class="lineNumber">424</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">425</td>
    <td class="codeline">  /// Function wide BasicBlock to BlockChain mapping.</td>
    <td class="lineNumber">425</td>
    <td class="codeline">  /// Function wide BasicBlock to BlockChain mapping.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">426</td>
    <td class="codeline">  ///</td>
    <td class="lineNumber">426</td>
    <td class="codeline">  ///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">427</td>
    <td class="codeline">  /// This mapping allows efficiently moving from any given basic block to the</td>
    <td class="lineNumber">427</td>
    <td class="codeline">  /// This mapping allows efficiently moving from any given basic block to the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">428</td>
    <td class="codeline">  /// BlockChain it participates in, if any. We use it to, among other things,</td>
    <td class="lineNumber">428</td>
    <td class="codeline">  /// BlockChain it participates in, if any. We use it to, among other things,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">429</td>
    <td class="codeline">  /// allow implicitly defining edges between chains as the existing edges</td>
    <td class="lineNumber">429</td>
    <td class="codeline">  /// allow implicitly defining edges between chains as the existing edges</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">430</td>
    <td class="codeline">  /// between basic blocks.</td>
    <td class="lineNumber">430</td>
    <td class="codeline">  /// between basic blocks.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">431</td>
    <td class="codeline">  DenseMap<const MachineBasicBlock *, BlockChain *> BlockToChain;</td>
    <td class="lineNumber">431</td>
    <td class="codeline">  DenseMap<const MachineBasicBlock *, BlockChain *> BlockToChain;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">432</td>
    <td class="codeline"></td>
    <td class="lineNumber">432</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">433</td>
    <td class="codeline">#ifndef NDEBUG</td>
    <td class="lineNumber">433</td>
    <td class="codeline">#ifndef NDEBUG</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">434</td>
    <td class="codeline">  /// The set of basic blocks that have terminators that cannot be fully</td>
    <td class="lineNumber">434</td>
    <td class="codeline">  /// The set of basic blocks that have terminators that cannot be fully</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">435</td>
    <td class="codeline">  /// analyzed.  These basic blocks cannot be re-ordered safely by</td>
    <td class="lineNumber">435</td>
    <td class="codeline">  /// analyzed.  These basic blocks cannot be re-ordered safely by</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">436</td>
    <td class="codeline">  /// MachineBlockPlacement, and we must preserve physical layout of these</td>
    <td class="lineNumber">436</td>
    <td class="codeline">  /// MachineBlockPlacement, and we must preserve physical layout of these</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">437</td>
    <td class="codeline">  /// blocks and their successors through the pass.</td>
    <td class="lineNumber">437</td>
    <td class="codeline">  /// blocks and their successors through the pass.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">438</td>
    <td class="codeline">  SmallPtrSet<MachineBasicBlock *, 4> BlocksWithUnanalyzableExits;</td>
    <td class="lineNumber">438</td>
    <td class="codeline">  SmallPtrSet<MachineBasicBlock *, 4> BlocksWithUnanalyzableExits;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">439</td>
    <td class="codeline">#endif</td>
    <td class="lineNumber">439</td>
    <td class="codeline">#endif</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">440</td>
    <td class="codeline"></td>
    <td class="lineNumber">440</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">441</td>
    <td class="codeline">  /// Get block profile count or frequency according to UseProfileCount.</td>
    <td class="lineNumber">441</td>
    <td class="codeline">  /// Get block profile count or frequency according to UseProfileCount.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">442</td>
    <td class="codeline">  /// The return value is used to model tail duplication cost.</td>
    <td class="lineNumber">442</td>
    <td class="codeline">  /// The return value is used to model tail duplication cost.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">443</td>
    <td class="codeline">  BlockFrequency getBlockCountOrFrequency(const MachineBasicBlock *BB) {</td>
    <td class="lineNumber">443</td>
    <td class="codeline">  BlockFrequency getBlockCountOrFrequency(const MachineBasicBlock *BB) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">444</td>
    <td class="codeline">    if (UseProfileCount) {</td>
    <td class="lineNumber">444</td>
    <td class="codeline">    if (UseProfileCount) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">445</td>
    <td class="codeline">      auto Count = MBFI->getBlockProfileCount(BB);</td>
    <td class="lineNumber">445</td>
    <td class="codeline">      auto Count = MBFI->getBlockProfileCount(BB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">446</td>
    <td class="codeline">      if (Count)</td>
    <td class="lineNumber">446</td>
    <td class="codeline">      if (Count)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">447</td>
    <td class="codeline">        return *Count;</td>
    <td class="lineNumber">447</td>
    <td class="codeline">        return *Count;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">448</td>
    <td class="codeline">      else</td>
    <td class="lineNumber">448</td>
    <td class="codeline">      else</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">449</td>
    <td class="codeline">        return 0;</td>
    <td class="lineNumber">449</td>
    <td class="codeline">        return 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">450</td>
    <td class="codeline">    } else</td>
    <td class="lineNumber">450</td>
    <td class="codeline">    } else</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">451</td>
    <td class="codeline">      return MBFI->getBlockFreq(BB);</td>
    <td class="lineNumber">451</td>
    <td class="codeline">      return MBFI->getBlockFreq(BB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">452</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">452</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">453</td>
    <td class="codeline"></td>
    <td class="lineNumber">453</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">454</td>
    <td class="codeline">  /// Scale the DupThreshold according to basic block size.</td>
    <td class="lineNumber">454</td>
    <td class="codeline">  /// Scale the DupThreshold according to basic block size.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">455</td>
    <td class="codeline">  BlockFrequency scaleThreshold(MachineBasicBlock *BB);</td>
    <td class="lineNumber">455</td>
    <td class="codeline">  BlockFrequency scaleThreshold(MachineBasicBlock *BB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">456</td>
    <td class="codeline">  void initDupThreshold();</td>
    <td class="lineNumber">456</td>
    <td class="codeline">  void initDupThreshold();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">457</td>
    <td class="codeline"></td>
    <td class="lineNumber">457</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">458</td>
    <td class="codeline">  /// Decrease the UnscheduledPredecessors count for all blocks in chain, and</td>
    <td class="lineNumber">458</td>
    <td class="codeline">  /// Decrease the UnscheduledPredecessors count for all blocks in chain, and</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">459</td>
    <td class="codeline">  /// if the count goes to 0, add them to the appropriate work list.</td>
    <td class="lineNumber">459</td>
    <td class="codeline">  /// if the count goes to 0, add them to the appropriate work list.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">460</td>
    <td class="codeline">  void markChainSuccessors(</td>
    <td class="lineNumber">460</td>
    <td class="codeline">  void markChainSuccessors(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">461</td>
    <td class="codeline">      const BlockChain &Chain, const MachineBasicBlock *LoopHeaderBB,</td>
    <td class="lineNumber">461</td>
    <td class="codeline">      const BlockChain &Chain, const MachineBasicBlock *LoopHeaderBB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">462</td>
    <td class="codeline">      const BlockFilterSet *BlockFilter = nullptr);</td>
    <td class="lineNumber">462</td>
    <td class="codeline">      const BlockFilterSet *BlockFilter = nullptr);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">463</td>
    <td class="codeline"></td>
    <td class="lineNumber">463</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">464</td>
    <td class="codeline">  /// Decrease the UnscheduledPredecessors count for a single block, and</td>
    <td class="lineNumber">464</td>
    <td class="codeline">  /// Decrease the UnscheduledPredecessors count for a single block, and</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">465</td>
    <td class="codeline">  /// if the count goes to 0, add them to the appropriate work list.</td>
    <td class="lineNumber">465</td>
    <td class="codeline">  /// if the count goes to 0, add them to the appropriate work list.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">466</td>
    <td class="codeline">  void markBlockSuccessors(</td>
    <td class="lineNumber">466</td>
    <td class="codeline">  void markBlockSuccessors(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">467</td>
    <td class="codeline">      const BlockChain &Chain, const MachineBasicBlock *BB,</td>
    <td class="lineNumber">467</td>
    <td class="codeline">      const BlockChain &Chain, const MachineBasicBlock *BB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">468</td>
    <td class="codeline">      const MachineBasicBlock *LoopHeaderBB,</td>
    <td class="lineNumber">468</td>
    <td class="codeline">      const MachineBasicBlock *LoopHeaderBB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">469</td>
    <td class="codeline">      const BlockFilterSet *BlockFilter = nullptr);</td>
    <td class="lineNumber">469</td>
    <td class="codeline">      const BlockFilterSet *BlockFilter = nullptr);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">470</td>
    <td class="codeline"></td>
    <td class="lineNumber">470</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">471</td>
    <td class="codeline">  BranchProbability</td>
    <td class="lineNumber">471</td>
    <td class="codeline">  BranchProbability</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">472</td>
    <td class="codeline">  collectViableSuccessors(</td>
    <td class="lineNumber">472</td>
    <td class="codeline">  collectViableSuccessors(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">473</td>
    <td class="codeline">      const MachineBasicBlock *BB, const BlockChain &Chain,</td>
    <td class="lineNumber">473</td>
    <td class="codeline">      const MachineBasicBlock *BB, const BlockChain &Chain,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">474</td>
    <td class="codeline">      const BlockFilterSet *BlockFilter,</td>
    <td class="lineNumber">474</td>
    <td class="codeline">      const BlockFilterSet *BlockFilter,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">475</td>
    <td class="codeline">      SmallVector<MachineBasicBlock *, 4> &Successors);</td>
    <td class="lineNumber">475</td>
    <td class="codeline">      SmallVector<MachineBasicBlock *, 4> &Successors);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">476</td>
    <td class="codeline">  bool isBestSuccessor(MachineBasicBlock *BB, MachineBasicBlock *Pred,</td>
    <td class="lineNumber">476</td>
    <td class="codeline">  bool isBestSuccessor(MachineBasicBlock *BB, MachineBasicBlock *Pred,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">477</td>
    <td class="codeline">                       BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">477</td>
    <td class="codeline">                       BlockFilterSet *BlockFilter);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">478</td>
    <td class="codeline">  void findDuplicateCandidates(SmallVectorImpl<MachineBasicBlock *> &Candidates,</td>
    <td class="lineNumber">478</td>
    <td class="codeline">  void findDuplicateCandidates(SmallVectorImpl<MachineBasicBlock *> &Candidates,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">479</td>
    <td class="codeline">                               MachineBasicBlock *BB,</td>
    <td class="lineNumber">479</td>
    <td class="codeline">                               MachineBasicBlock *BB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">480</td>
    <td class="codeline">                               BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">480</td>
    <td class="codeline">                               BlockFilterSet *BlockFilter);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">481</td>
    <td class="codeline">  bool repeatedlyTailDuplicateBlock(</td>
    <td class="lineNumber">481</td>
    <td class="codeline">  bool repeatedlyTailDuplicateBlock(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">482</td>
    <td class="codeline">      MachineBasicBlock *BB, MachineBasicBlock *&LPred,</td>
    <td class="lineNumber">482</td>
    <td class="codeline">      MachineBasicBlock *BB, MachineBasicBlock *&LPred,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">483</td>
    <td class="codeline">      const MachineBasicBlock *LoopHeaderBB,</td>
    <td class="lineNumber">483</td>
    <td class="codeline">      const MachineBasicBlock *LoopHeaderBB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">484</td>
    <td class="codeline">      BlockChain &Chain, BlockFilterSet *BlockFilter,</td>
    <td class="lineNumber">484</td>
    <td class="codeline">      BlockChain &Chain, BlockFilterSet *BlockFilter,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">485</td>
    <td class="codeline">      MachineFunction::iterator &PrevUnplacedBlockIt);</td>
    <td class="lineNumber">485</td>
    <td class="codeline">      MachineFunction::iterator &PrevUnplacedBlockIt);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">486</td>
    <td class="codeline">  bool maybeTailDuplicateBlock(</td>
    <td class="lineNumber">486</td>
    <td class="codeline">  bool maybeTailDuplicateBlock(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">487</td>
    <td class="codeline">      MachineBasicBlock *BB, MachineBasicBlock *LPred,</td>
    <td class="lineNumber">487</td>
    <td class="codeline">      MachineBasicBlock *BB, MachineBasicBlock *LPred,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">488</td>
    <td class="codeline">      BlockChain &Chain, BlockFilterSet *BlockFilter,</td>
    <td class="lineNumber">488</td>
    <td class="codeline">      BlockChain &Chain, BlockFilterSet *BlockFilter,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">489</td>
    <td class="codeline">      MachineFunction::iterator &PrevUnplacedBlockIt,</td>
    <td class="lineNumber">489</td>
    <td class="codeline">      MachineFunction::iterator &PrevUnplacedBlockIt,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">490</td>
    <td class="codeline">      bool &DuplicatedToLPred);</td>
    <td class="lineNumber">490</td>
    <td class="codeline">      bool &DuplicatedToLPred);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">491</td>
    <td class="codeline">  bool hasBetterLayoutPredecessor(</td>
    <td class="lineNumber">491</td>
    <td class="codeline">  bool hasBetterLayoutPredecessor(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">492</td>
    <td class="codeline">      const MachineBasicBlock *BB, const MachineBasicBlock *Succ,</td>
    <td class="lineNumber">492</td>
    <td class="codeline">      const MachineBasicBlock *BB, const MachineBasicBlock *Succ,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">493</td>
    <td class="codeline">      const BlockChain &SuccChain, BranchProbability SuccProb,</td>
    <td class="lineNumber">493</td>
    <td class="codeline">      const BlockChain &SuccChain, BranchProbability SuccProb,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">494</td>
    <td class="codeline">      BranchProbability RealSuccProb, const BlockChain &Chain,</td>
    <td class="lineNumber">494</td>
    <td class="codeline">      BranchProbability RealSuccProb, const BlockChain &Chain,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">495</td>
    <td class="codeline">      const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">495</td>
    <td class="codeline">      const BlockFilterSet *BlockFilter);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">496</td>
    <td class="codeline">  BlockAndTailDupResult selectBestSuccessor(</td>
    <td class="lineNumber">496</td>
    <td class="codeline">  BlockAndTailDupResult selectBestSuccessor(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">497</td>
    <td class="codeline">      const MachineBasicBlock *BB, const BlockChain &Chain,</td>
    <td class="lineNumber">497</td>
    <td class="codeline">      const MachineBasicBlock *BB, const BlockChain &Chain,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">498</td>
    <td class="codeline">      const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">498</td>
    <td class="codeline">      const BlockFilterSet *BlockFilter);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">499</td>
    <td class="codeline">  MachineBasicBlock *selectBestCandidateBlock(</td>
    <td class="lineNumber">499</td>
    <td class="codeline">  MachineBasicBlock *selectBestCandidateBlock(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">500</td>
    <td class="codeline">      const BlockChain &Chain, SmallVectorImpl<MachineBasicBlock *> &WorkList);</td>
    <td class="lineNumber">500</td>
    <td class="codeline">      const BlockChain &Chain, SmallVectorImpl<MachineBasicBlock *> &WorkList);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">501</td>
    <td class="codeline">  MachineBasicBlock *getFirstUnplacedBlock(</td>
    <td class="lineNumber">501</td>
    <td class="codeline">  MachineBasicBlock *getFirstUnplacedBlock(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">502</td>
    <td class="codeline">      const BlockChain &PlacedChain,</td>
    <td class="lineNumber">502</td>
    <td class="codeline">      const BlockChain &PlacedChain,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">503</td>
    <td class="codeline">      MachineFunction::iterator &PrevUnplacedBlockIt,</td>
    <td class="lineNumber">503</td>
    <td class="codeline">      MachineFunction::iterator &PrevUnplacedBlockIt,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">504</td>
    <td class="codeline">      const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">504</td>
    <td class="codeline">      const BlockFilterSet *BlockFilter);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">505</td>
    <td class="codeline"></td>
    <td class="lineNumber">505</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">506</td>
    <td class="codeline">  /// Add a basic block to the work list if it is appropriate.</td>
    <td class="lineNumber">506</td>
    <td class="codeline">  /// Add a basic block to the work list if it is appropriate.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">507</td>
    <td class="codeline">  ///</td>
    <td class="lineNumber">507</td>
    <td class="codeline">  ///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">508</td>
    <td class="codeline">  /// If the optional parameter BlockFilter is provided, only MBB</td>
    <td class="lineNumber">508</td>
    <td class="codeline">  /// If the optional parameter BlockFilter is provided, only MBB</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">509</td>
    <td class="codeline">  /// present in the set will be added to the worklist. If nullptr</td>
    <td class="lineNumber">509</td>
    <td class="codeline">  /// present in the set will be added to the worklist. If nullptr</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">510</td>
    <td class="codeline">  /// is provided, no filtering occurs.</td>
    <td class="lineNumber">510</td>
    <td class="codeline">  /// is provided, no filtering occurs.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">511</td>
    <td class="codeline">  void fillWorkLists(const MachineBasicBlock *MBB,</td>
    <td class="lineNumber">511</td>
    <td class="codeline">  void fillWorkLists(const MachineBasicBlock *MBB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">512</td>
    <td class="codeline">                     SmallPtrSetImpl<BlockChain *> &UpdatedPreds,</td>
    <td class="lineNumber">512</td>
    <td class="codeline">                     SmallPtrSetImpl<BlockChain *> &UpdatedPreds,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">513</td>
    <td class="codeline">                     const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">513</td>
    <td class="codeline">                     const BlockFilterSet *BlockFilter);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">514</td>
    <td class="codeline"></td>
    <td class="lineNumber">514</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">515</td>
    <td class="codeline">  void buildChain(const MachineBasicBlock *BB, BlockChain &Chain,</td>
    <td class="lineNumber">515</td>
    <td class="codeline">  void buildChain(const MachineBasicBlock *BB, BlockChain &Chain,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">516</td>
    <td class="codeline">                  BlockFilterSet *BlockFilter = nullptr);</td>
    <td class="lineNumber">516</td>
    <td class="codeline">                  BlockFilterSet *BlockFilter = nullptr);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">517</td>
    <td class="codeline">  bool canMoveBottomBlockToTop(const MachineBasicBlock *BottomBlock,</td>
    <td class="lineNumber">517</td>
    <td class="codeline">  bool canMoveBottomBlockToTop(const MachineBasicBlock *BottomBlock,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">518</td>
    <td class="codeline">                               const MachineBasicBlock *OldTop);</td>
    <td class="lineNumber">518</td>
    <td class="codeline">                               const MachineBasicBlock *OldTop);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">519</td>
    <td class="codeline">  bool hasViableTopFallthrough(const MachineBasicBlock *Top,</td>
    <td class="lineNumber">519</td>
    <td class="codeline">  bool hasViableTopFallthrough(const MachineBasicBlock *Top,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">520</td>
    <td class="codeline">                               const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">520</td>
    <td class="codeline">                               const BlockFilterSet &LoopBlockSet);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">521</td>
    <td class="codeline">  BlockFrequency TopFallThroughFreq(const MachineBasicBlock *Top,</td>
    <td class="lineNumber">521</td>
    <td class="codeline">  BlockFrequency TopFallThroughFreq(const MachineBasicBlock *Top,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">522</td>
    <td class="codeline">                                    const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">522</td>
    <td class="codeline">                                    const BlockFilterSet &LoopBlockSet);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">523</td>
    <td class="codeline">  BlockFrequency FallThroughGains(const MachineBasicBlock *NewTop,</td>
    <td class="lineNumber">523</td>
    <td class="codeline">  BlockFrequency FallThroughGains(const MachineBasicBlock *NewTop,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">524</td>
    <td class="codeline">                                  const MachineBasicBlock *OldTop,</td>
    <td class="lineNumber">524</td>
    <td class="codeline">                                  const MachineBasicBlock *OldTop,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">525</td>
    <td class="codeline">                                  const MachineBasicBlock *ExitBB,</td>
    <td class="lineNumber">525</td>
    <td class="codeline">                                  const MachineBasicBlock *ExitBB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">526</td>
    <td class="codeline">                                  const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">526</td>
    <td class="codeline">                                  const BlockFilterSet &LoopBlockSet);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">527</td>
    <td class="codeline">  MachineBasicBlock *findBestLoopTopHelper(MachineBasicBlock *OldTop,</td>
    <td class="lineNumber">527</td>
    <td class="codeline">  MachineBasicBlock *findBestLoopTopHelper(MachineBasicBlock *OldTop,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">528</td>
    <td class="codeline">      const MachineLoop &L, const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">528</td>
    <td class="codeline">      const MachineLoop &L, const BlockFilterSet &LoopBlockSet);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">529</td>
    <td class="codeline">  MachineBasicBlock *findBestLoopTop(</td>
    <td class="lineNumber">529</td>
    <td class="codeline">  MachineBasicBlock *findBestLoopTop(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">530</td>
    <td class="codeline">      const MachineLoop &L, const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">530</td>
    <td class="codeline">      const MachineLoop &L, const BlockFilterSet &LoopBlockSet);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">531</td>
    <td class="codeline">  MachineBasicBlock *findBestLoopExit(</td>
    <td class="lineNumber">531</td>
    <td class="codeline">  MachineBasicBlock *findBestLoopExit(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">532</td>
    <td class="codeline">      const MachineLoop &L, const BlockFilterSet &LoopBlockSet,</td>
    <td class="lineNumber">532</td>
    <td class="codeline">      const MachineLoop &L, const BlockFilterSet &LoopBlockSet,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">533</td>
    <td class="codeline">      BlockFrequency &ExitFreq);</td>
    <td class="lineNumber">533</td>
    <td class="codeline">      BlockFrequency &ExitFreq);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">534</td>
    <td class="codeline">  BlockFilterSet collectLoopBlockSet(const MachineLoop &L);</td>
    <td class="lineNumber">534</td>
    <td class="codeline">  BlockFilterSet collectLoopBlockSet(const MachineLoop &L);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">535</td>
    <td class="codeline">  void buildLoopChains(const MachineLoop &L);</td>
    <td class="lineNumber">535</td>
    <td class="codeline">  void buildLoopChains(const MachineLoop &L);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">536</td>
    <td class="codeline">  void rotateLoop(</td>
    <td class="lineNumber">536</td>
    <td class="codeline">  void rotateLoop(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">537</td>
    <td class="codeline">      BlockChain &LoopChain, const MachineBasicBlock *ExitingBB,</td>
    <td class="lineNumber">537</td>
    <td class="codeline">      BlockChain &LoopChain, const MachineBasicBlock *ExitingBB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">538</td>
    <td class="codeline">      BlockFrequency ExitFreq, const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">538</td>
    <td class="codeline">      BlockFrequency ExitFreq, const BlockFilterSet &LoopBlockSet);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">539</td>
    <td class="codeline">  void rotateLoopWithProfile(</td>
    <td class="lineNumber">539</td>
    <td class="codeline">  void rotateLoopWithProfile(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">540</td>
    <td class="codeline">      BlockChain &LoopChain, const MachineLoop &L,</td>
    <td class="lineNumber">540</td>
    <td class="codeline">      BlockChain &LoopChain, const MachineLoop &L,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">541</td>
    <td class="codeline">      const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">541</td>
    <td class="codeline">      const BlockFilterSet &LoopBlockSet);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">542</td>
    <td class="codeline">  void buildCFGChains();</td>
    <td class="lineNumber">542</td>
    <td class="codeline">  void buildCFGChains();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">543</td>
    <td class="codeline">  void optimizeBranches();</td>
    <td class="lineNumber">543</td>
    <td class="codeline">  void optimizeBranches();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">544</td>
    <td class="codeline">  void alignBlocks();</td>
    <td class="lineNumber">544</td>
    <td class="codeline">  void alignBlocks();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">545</td>
    <td class="codeline">  /// Returns true if a block should be tail-duplicated to increase fallthrough</td>
    <td class="lineNumber">545</td>
    <td class="codeline">  /// Returns true if a block should be tail-duplicated to increase fallthrough</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">546</td>
    <td class="codeline">  /// opportunities.</td>
    <td class="lineNumber">546</td>
    <td class="codeline">  /// opportunities.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">547</td>
    <td class="codeline">  bool shouldTailDuplicate(MachineBasicBlock *BB);</td>
    <td class="lineNumber">547</td>
    <td class="codeline">  bool shouldTailDuplicate(MachineBasicBlock *BB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">548</td>
    <td class="codeline">  /// Check the edge frequencies to see if tail duplication will increase</td>
    <td class="lineNumber">548</td>
    <td class="codeline">  /// Check the edge frequencies to see if tail duplication will increase</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">549</td>
    <td class="codeline">  /// fallthroughs.</td>
    <td class="lineNumber">549</td>
    <td class="codeline">  /// fallthroughs.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">550</td>
    <td class="codeline">  bool isProfitableToTailDup(</td>
    <td class="lineNumber">550</td>
    <td class="codeline">  bool isProfitableToTailDup(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">551</td>
    <td class="codeline">    const MachineBasicBlock *BB, const MachineBasicBlock *Succ,</td>
    <td class="lineNumber">551</td>
    <td class="codeline">    const MachineBasicBlock *BB, const MachineBasicBlock *Succ,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">552</td>
    <td class="codeline">    BranchProbability QProb,</td>
    <td class="lineNumber">552</td>
    <td class="codeline">    BranchProbability QProb,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">553</td>
    <td class="codeline">    const BlockChain &Chain, const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">553</td>
    <td class="codeline">    const BlockChain &Chain, const BlockFilterSet *BlockFilter);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">554</td>
    <td class="codeline"></td>
    <td class="lineNumber">554</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">555</td>
    <td class="codeline">  /// Check for a trellis layout.</td>
    <td class="lineNumber">555</td>
    <td class="codeline">  /// Check for a trellis layout.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">556</td>
    <td class="codeline">  bool isTrellis(const MachineBasicBlock *BB,</td>
    <td class="lineNumber">556</td>
    <td class="codeline">  bool isTrellis(const MachineBasicBlock *BB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">557</td>
    <td class="codeline">                 const SmallVectorImpl<MachineBasicBlock *> &ViableSuccs,</td>
    <td class="lineNumber">557</td>
    <td class="codeline">                 const SmallVectorImpl<MachineBasicBlock *> &ViableSuccs,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">558</td>
    <td class="codeline">                 const BlockChain &Chain, const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">558</td>
    <td class="codeline">                 const BlockChain &Chain, const BlockFilterSet *BlockFilter);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">559</td>
    <td class="codeline"></td>
    <td class="lineNumber">559</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">560</td>
    <td class="codeline">  /// Get the best successor given a trellis layout.</td>
    <td class="lineNumber">560</td>
    <td class="codeline">  /// Get the best successor given a trellis layout.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">561</td>
    <td class="codeline">  BlockAndTailDupResult getBestTrellisSuccessor(</td>
    <td class="lineNumber">561</td>
    <td class="codeline">  BlockAndTailDupResult getBestTrellisSuccessor(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">562</td>
    <td class="codeline">      const MachineBasicBlock *BB,</td>
    <td class="lineNumber">562</td>
    <td class="codeline">      const MachineBasicBlock *BB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">563</td>
    <td class="codeline">      const SmallVectorImpl<MachineBasicBlock *> &ViableSuccs,</td>
    <td class="lineNumber">563</td>
    <td class="codeline">      const SmallVectorImpl<MachineBasicBlock *> &ViableSuccs,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">564</td>
    <td class="codeline">      BranchProbability AdjustedSumProb, const BlockChain &Chain,</td>
    <td class="lineNumber">564</td>
    <td class="codeline">      BranchProbability AdjustedSumProb, const BlockChain &Chain,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">565</td>
    <td class="codeline">      const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">565</td>
    <td class="codeline">      const BlockFilterSet *BlockFilter);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">566</td>
    <td class="codeline"></td>
    <td class="lineNumber">566</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">567</td>
    <td class="codeline">  /// Get the best pair of non-conflicting edges.</td>
    <td class="lineNumber">567</td>
    <td class="codeline">  /// Get the best pair of non-conflicting edges.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">568</td>
    <td class="codeline">  static std::pair<WeightedEdge, WeightedEdge> getBestNonConflictingEdges(</td>
    <td class="lineNumber">568</td>
    <td class="codeline">  static std::pair<WeightedEdge, WeightedEdge> getBestNonConflictingEdges(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">569</td>
    <td class="codeline">      const MachineBasicBlock *BB,</td>
    <td class="lineNumber">569</td>
    <td class="codeline">      const MachineBasicBlock *BB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">570</td>
    <td class="codeline">      MutableArrayRef<SmallVector<WeightedEdge, 8>> Edges);</td>
    <td class="lineNumber">570</td>
    <td class="codeline">      MutableArrayRef<SmallVector<WeightedEdge, 8>> Edges);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">571</td>
    <td class="codeline"></td>
    <td class="lineNumber">571</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">572</td>
    <td class="codeline">  /// Returns true if a block can tail duplicate into all unplaced</td>
    <td class="lineNumber">572</td>
    <td class="codeline">  /// Returns true if a block can tail duplicate into all unplaced</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">573</td>
    <td class="codeline">  /// predecessors. Filters based on loop.</td>
    <td class="lineNumber">573</td>
    <td class="codeline">  /// predecessors. Filters based on loop.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">574</td>
    <td class="codeline">  bool canTailDuplicateUnplacedPreds(</td>
    <td class="lineNumber">574</td>
    <td class="codeline">  bool canTailDuplicateUnplacedPreds(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">575</td>
    <td class="codeline">      const MachineBasicBlock *BB, MachineBasicBlock *Succ,</td>
    <td class="lineNumber">575</td>
    <td class="codeline">      const MachineBasicBlock *BB, MachineBasicBlock *Succ,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">576</td>
    <td class="codeline">      const BlockChain &Chain, const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">576</td>
    <td class="codeline">      const BlockChain &Chain, const BlockFilterSet *BlockFilter);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">577</td>
    <td class="codeline"></td>
    <td class="lineNumber">577</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">578</td>
    <td class="codeline">  /// Find chains of triangles to tail-duplicate where a global analysis works,</td>
    <td class="lineNumber">578</td>
    <td class="codeline">  /// Find chains of triangles to tail-duplicate where a global analysis works,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">579</td>
    <td class="codeline">  /// but a local analysis would not find them.</td>
    <td class="lineNumber">579</td>
    <td class="codeline">  /// but a local analysis would not find them.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">580</td>
    <td class="codeline">  void precomputeTriangleChains();</td>
    <td class="lineNumber">580</td>
    <td class="codeline">  void precomputeTriangleChains();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">581</td>
    <td class="codeline"></td>
    <td class="lineNumber">581</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">582</td>
    <td class="codeline">  /// Apply a post-processing step optimizing block placement.</td>
    <td class="lineNumber">582</td>
    <td class="codeline">  /// Apply a post-processing step optimizing block placement.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">583</td>
    <td class="codeline">  void applyExtTsp();</td>
    <td class="lineNumber">583</td>
    <td class="codeline">  void applyExtTsp();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">584</td>
    <td class="codeline"></td>
    <td class="lineNumber">584</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">585</td>
    <td class="codeline">  /// Modify the existing block placement in the function and adjust all jumps.</td>
    <td class="lineNumber">585</td>
    <td class="codeline">  /// Modify the existing block placement in the function and adjust all jumps.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">586</td>
    <td class="codeline">  void assignBlockOrder(const std::vector<const MachineBasicBlock *> &NewOrder);</td>
    <td class="lineNumber">586</td>
    <td class="codeline">  void assignBlockOrder(const std::vector<const MachineBasicBlock *> &NewOrder);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">587</td>
    <td class="codeline"></td>
    <td class="lineNumber">587</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">588</td>
    <td class="codeline">  /// Create a single CFG chain from the current block order.</td>
    <td class="lineNumber">588</td>
    <td class="codeline">  /// Create a single CFG chain from the current block order.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">589</td>
    <td class="codeline">  void createCFGChainExtTsp();</td>
    <td class="lineNumber">589</td>
    <td class="codeline">  void createCFGChainExtTsp();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">590</td>
    <td class="codeline"></td>
    <td class="lineNumber">590</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">591</td>
    <td class="codeline">public:</td>
    <td class="lineNumber">591</td>
    <td class="codeline">public:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">592</td>
    <td class="codeline">  static char ID; // Pass identification, replacement for typeid</td>
    <td class="lineNumber">592</td>
    <td class="codeline">  static char ID; // Pass identification, replacement for typeid</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">593</td>
    <td class="codeline"></td>
    <td class="lineNumber">593</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">594</td>
    <td class="codeline">  MachineBlockPlacement() : MachineFunctionPass(ID) {</td>
    <td class="lineNumber">594</td>
    <td class="codeline">  MachineBlockPlacement() : MachineFunctionPass(ID) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">595</td>
    <td class="codeline">    initializeMachineBlockPlacementPass(*PassRegistry::getPassRegistry());</td>
    <td class="lineNumber">595</td>
    <td class="codeline">    initializeMachineBlockPlacementPass(*PassRegistry::getPassRegistry());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">596</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">596</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">597</td>
    <td class="codeline"></td>
    <td class="lineNumber">597</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">598</td>
    <td class="codeline">  bool runOnMachineFunction(MachineFunction &F) override;</td>
    <td class="lineNumber">598</td>
    <td class="codeline">  bool runOnMachineFunction(MachineFunction &F) override;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">599</td>
    <td class="codeline"></td>
    <td class="lineNumber">599</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">600</td>
    <td class="codeline">  bool allowTailDupPlacement() const {</td>
    <td class="lineNumber">600</td>
    <td class="codeline">  bool allowTailDupPlacement() const {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">601</td>
    <td class="codeline">    assert(F);</td>
    <td class="lineNumber">601</td>
    <td class="codeline">    assert(F);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">602</td>
    <td class="codeline">    return TailDupPlacement && !F->getTarget().requiresStructuredCFG();</td>
    <td class="lineNumber">602</td>
    <td class="codeline">    return TailDupPlacement && !F->getTarget().requiresStructuredCFG();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">603</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">603</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">604</td>
    <td class="codeline"></td>
    <td class="lineNumber">604</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">605</td>
    <td class="codeline">  void getAnalysisUsage(AnalysisUsage &AU) const override {</td>
    <td class="lineNumber">605</td>
    <td class="codeline">  void getAnalysisUsage(AnalysisUsage &AU) const override {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">606</td>
    <td class="codeline">    AU.addRequired<MachineBranchProbabilityInfo>();</td>
    <td class="lineNumber">606</td>
    <td class="codeline">    AU.addRequired<MachineBranchProbabilityInfo>();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">607</td>
    <td class="codeline">    AU.addRequired<MachineBlockFrequencyInfo>();</td>
    <td class="lineNumber">607</td>
    <td class="codeline">    AU.addRequired<MachineBlockFrequencyInfo>();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">608</td>
    <td class="codeline">    if (TailDupPlacement)</td>
    <td class="lineNumber">608</td>
    <td class="codeline">    if (TailDupPlacement)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">609</td>
    <td class="codeline">      AU.addRequired<MachinePostDominatorTree>();</td>
    <td class="lineNumber">609</td>
    <td class="codeline">      AU.addRequired<MachinePostDominatorTree>();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">610</td>
    <td class="codeline">    AU.addRequired<MachineLoopInfo>();</td>
    <td class="lineNumber">610</td>
    <td class="codeline">    AU.addRequired<MachineLoopInfo>();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">611</td>
    <td class="codeline">    AU.addRequired<ProfileSummaryInfoWrapperPass>();</td>
    <td class="lineNumber">611</td>
    <td class="codeline">    AU.addRequired<ProfileSummaryInfoWrapperPass>();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">612</td>
    <td class="codeline">    AU.addRequired<TargetPassConfig>();</td>
    <td class="lineNumber">612</td>
    <td class="codeline">    AU.addRequired<TargetPassConfig>();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">613</td>
    <td class="codeline">    MachineFunctionPass::getAnalysisUsage(AU);</td>
    <td class="lineNumber">613</td>
    <td class="codeline">    MachineFunctionPass::getAnalysisUsage(AU);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">614</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">614</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">615</td>
    <td class="codeline">};</td>
    <td class="lineNumber">615</td>
    <td class="codeline">};</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">616</td>
    <td class="codeline"></td>
    <td class="lineNumber">616</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">617</td>
    <td class="codeline">} // end anonymous namespace</td>
    <td class="lineNumber">617</td>
    <td class="codeline">} // end anonymous namespace</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">618</td>
    <td class="codeline"></td>
    <td class="lineNumber">618</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">619</td>
    <td class="codeline">char MachineBlockPlacement::ID = 0;</td>
    <td class="lineNumber">619</td>
    <td class="codeline">char MachineBlockPlacement::ID = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">620</td>
    <td class="codeline"></td>
    <td class="lineNumber">620</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">621</td>
    <td class="codeline">char &llvm::MachineBlockPlacementID = MachineBlockPlacement::ID;</td>
    <td class="lineNumber">621</td>
    <td class="codeline">char &llvm::MachineBlockPlacementID = MachineBlockPlacement::ID;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">622</td>
    <td class="codeline"></td>
    <td class="lineNumber">622</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">623</td>
    <td class="codeline">INITIALIZE_PASS_BEGIN(MachineBlockPlacement, DEBUG_TYPE,</td>
    <td class="lineNumber">623</td>
    <td class="codeline">INITIALIZE_PASS_BEGIN(MachineBlockPlacement, DEBUG_TYPE,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">624</td>
    <td class="codeline">                      "Branch Probability Basic Block Placement", false, false)</td>
    <td class="lineNumber">624</td>
    <td class="codeline">                      "Branch Probability Basic Block Placement", false, false)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">625</td>
    <td class="codeline">INITIALIZE_PASS_DEPENDENCY(MachineBranchProbabilityInfo)</td>
    <td class="lineNumber">625</td>
    <td class="codeline">INITIALIZE_PASS_DEPENDENCY(MachineBranchProbabilityInfo)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">626</td>
    <td class="codeline">INITIALIZE_PASS_DEPENDENCY(MachineBlockFrequencyInfo)</td>
    <td class="lineNumber">626</td>
    <td class="codeline">INITIALIZE_PASS_DEPENDENCY(MachineBlockFrequencyInfo)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">627</td>
    <td class="codeline">INITIALIZE_PASS_DEPENDENCY(MachinePostDominatorTree)</td>
    <td class="lineNumber">627</td>
    <td class="codeline">INITIALIZE_PASS_DEPENDENCY(MachinePostDominatorTree)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">628</td>
    <td class="codeline">INITIALIZE_PASS_DEPENDENCY(MachineLoopInfo)</td>
    <td class="lineNumber">628</td>
    <td class="codeline">INITIALIZE_PASS_DEPENDENCY(MachineLoopInfo)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">629</td>
    <td class="codeline">INITIALIZE_PASS_DEPENDENCY(ProfileSummaryInfoWrapperPass)</td>
    <td class="lineNumber">629</td>
    <td class="codeline">INITIALIZE_PASS_DEPENDENCY(ProfileSummaryInfoWrapperPass)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">630</td>
    <td class="codeline">INITIALIZE_PASS_END(MachineBlockPlacement, DEBUG_TYPE,</td>
    <td class="lineNumber">630</td>
    <td class="codeline">INITIALIZE_PASS_END(MachineBlockPlacement, DEBUG_TYPE,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">631</td>
    <td class="codeline">                    "Branch Probability Basic Block Placement", false, false)</td>
    <td class="lineNumber">631</td>
    <td class="codeline">                    "Branch Probability Basic Block Placement", false, false)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">632</td>
    <td class="codeline"></td>
    <td class="lineNumber">632</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">633</td>
    <td class="codeline">#ifndef NDEBUG</td>
    <td class="lineNumber">633</td>
    <td class="codeline">#ifndef NDEBUG</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">634</td>
    <td class="codeline">/// Helper to print the name of a MBB.</td>
    <td class="lineNumber">634</td>
    <td class="codeline">/// Helper to print the name of a MBB.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">635</td>
    <td class="codeline">///</td>
    <td class="lineNumber">635</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">636</td>
    <td class="codeline">/// Only used by debug logging.</td>
    <td class="lineNumber">636</td>
    <td class="codeline">/// Only used by debug logging.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">637</td>
    <td class="codeline">static std::string getBlockName(const MachineBasicBlock *BB) {</td>
    <td class="lineNumber">637</td>
    <td class="codeline">static std::string getBlockName(const MachineBasicBlock *BB) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">638</td>
    <td class="codeline">  std::string Result;</td>
    <td class="lineNumber">638</td>
    <td class="codeline">  std::string Result;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">639</td>
    <td class="codeline">  raw_string_ostream OS(Result);</td>
    <td class="lineNumber">639</td>
    <td class="codeline">  raw_string_ostream OS(Result);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">640</td>
    <td class="codeline">  OS << printMBBReference(*BB);</td>
    <td class="lineNumber">640</td>
    <td class="codeline">  OS << printMBBReference(*BB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">641</td>
    <td class="codeline">  OS << " ('" << BB->getName() << "')";</td>
    <td class="lineNumber">641</td>
    <td class="codeline">  OS << " ('" << BB->getName() << "')";</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">642</td>
    <td class="codeline">  OS.flush();</td>
    <td class="lineNumber">642</td>
    <td class="codeline">  OS.flush();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">643</td>
    <td class="codeline">  return Result;</td>
    <td class="lineNumber">643</td>
    <td class="codeline">  return Result;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">644</td>
    <td class="codeline">}</td>
    <td class="lineNumber">644</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">645</td>
    <td class="codeline">#endif</td>
    <td class="lineNumber">645</td>
    <td class="codeline">#endif</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">646</td>
    <td class="codeline"></td>
    <td class="lineNumber">646</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">647</td>
    <td class="codeline">/// Mark a chain's successors as having one fewer preds.</td>
    <td class="lineNumber">647</td>
    <td class="codeline">/// Mark a chain's successors as having one fewer preds.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">648</td>
    <td class="codeline">///</td>
    <td class="lineNumber">648</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">649</td>
    <td class="codeline">/// When a chain is being merged into the "placed" chain, this routine will</td>
    <td class="lineNumber">649</td>
    <td class="codeline">/// When a chain is being merged into the "placed" chain, this routine will</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">650</td>
    <td class="codeline">/// quickly walk the successors of each block in the chain and mark them as</td>
    <td class="lineNumber">650</td>
    <td class="codeline">/// quickly walk the successors of each block in the chain and mark them as</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">651</td>
    <td class="codeline">/// having one fewer active predecessor. It also adds any successors of this</td>
    <td class="lineNumber">651</td>
    <td class="codeline">/// having one fewer active predecessor. It also adds any successors of this</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">652</td>
    <td class="codeline">/// chain which reach the zero-predecessor state to the appropriate worklist.</td>
    <td class="lineNumber">652</td>
    <td class="codeline">/// chain which reach the zero-predecessor state to the appropriate worklist.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">653</td>
    <td class="codeline">void MachineBlockPlacement::markChainSuccessors(</td>
    <td class="lineNumber">653</td>
    <td class="codeline">void MachineBlockPlacement::markChainSuccessors(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">654</td>
    <td class="codeline">    const BlockChain &Chain, const MachineBasicBlock *LoopHeaderBB,</td>
    <td class="lineNumber">654</td>
    <td class="codeline">    const BlockChain &Chain, const MachineBasicBlock *LoopHeaderBB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">655</td>
    <td class="codeline">    const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">655</td>
    <td class="codeline">    const BlockFilterSet *BlockFilter) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">656</td>
    <td class="codeline">  // Walk all the blocks in this chain, marking their successors as having</td>
    <td class="lineNumber">656</td>
    <td class="codeline">  // Walk all the blocks in this chain, marking their successors as having</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">657</td>
    <td class="codeline">  // a predecessor placed.</td>
    <td class="lineNumber">657</td>
    <td class="codeline">  // a predecessor placed.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">658</td>
    <td class="codeline">  for (MachineBasicBlock *MBB : Chain) {</td>
    <td class="lineNumber">658</td>
    <td class="codeline">  for (MachineBasicBlock *MBB : Chain) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">659</td>
    <td class="codeline">    markBlockSuccessors(Chain, MBB, LoopHeaderBB, BlockFilter);</td>
    <td class="lineNumber">659</td>
    <td class="codeline">    markBlockSuccessors(Chain, MBB, LoopHeaderBB, BlockFilter);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">660</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">660</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">661</td>
    <td class="codeline">}</td>
    <td class="lineNumber">661</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">662</td>
    <td class="codeline"></td>
    <td class="lineNumber">662</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">663</td>
    <td class="codeline">/// Mark a single block's successors as having one fewer preds.</td>
    <td class="lineNumber">663</td>
    <td class="codeline">/// Mark a single block's successors as having one fewer preds.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">664</td>
    <td class="codeline">///</td>
    <td class="lineNumber">664</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">665</td>
    <td class="codeline">/// Under normal circumstances, this is only called by markChainSuccessors,</td>
    <td class="lineNumber">665</td>
    <td class="codeline">/// Under normal circumstances, this is only called by markChainSuccessors,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">666</td>
    <td class="codeline">/// but if a block that was to be placed is completely tail-duplicated away,</td>
    <td class="lineNumber">666</td>
    <td class="codeline">/// but if a block that was to be placed is completely tail-duplicated away,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">667</td>
    <td class="codeline">/// and was duplicated into the chain end, we need to redo markBlockSuccessors</td>
    <td class="lineNumber">667</td>
    <td class="codeline">/// and was duplicated into the chain end, we need to redo markBlockSuccessors</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">668</td>
    <td class="codeline">/// for just that block.</td>
    <td class="lineNumber">668</td>
    <td class="codeline">/// for just that block.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">669</td>
    <td class="codeline">void MachineBlockPlacement::markBlockSuccessors(</td>
    <td class="lineNumber">669</td>
    <td class="codeline">void MachineBlockPlacement::markBlockSuccessors(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">670</td>
    <td class="codeline">    const BlockChain &Chain, const MachineBasicBlock *MBB,</td>
    <td class="lineNumber">670</td>
    <td class="codeline">    const BlockChain &Chain, const MachineBasicBlock *MBB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">671</td>
    <td class="codeline">    const MachineBasicBlock *LoopHeaderBB, const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">671</td>
    <td class="codeline">    const MachineBasicBlock *LoopHeaderBB, const BlockFilterSet *BlockFilter) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">672</td>
    <td class="codeline">  // Add any successors for which this is the only un-placed in-loop</td>
    <td class="lineNumber">672</td>
    <td class="codeline">  // Add any successors for which this is the only un-placed in-loop</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">673</td>
    <td class="codeline">  // predecessor to the worklist as a viable candidate for CFG-neutral</td>
    <td class="lineNumber">673</td>
    <td class="codeline">  // predecessor to the worklist as a viable candidate for CFG-neutral</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">674</td>
    <td class="codeline">  // placement. No subsequent placement of this block will violate the CFG</td>
    <td class="lineNumber">674</td>
    <td class="codeline">  // placement. No subsequent placement of this block will violate the CFG</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">675</td>
    <td class="codeline">  // shape, so we get to use heuristics to choose a favorable placement.</td>
    <td class="lineNumber">675</td>
    <td class="codeline">  // shape, so we get to use heuristics to choose a favorable placement.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">676</td>
    <td class="codeline">  for (MachineBasicBlock *Succ : MBB->successors()) {</td>
    <td class="lineNumber">676</td>
    <td class="codeline">  for (MachineBasicBlock *Succ : MBB->successors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">677</td>
    <td class="codeline">    if (BlockFilter && !BlockFilter->count(Succ))</td>
    <td class="lineNumber">677</td>
    <td class="codeline">    if (BlockFilter && !BlockFilter->count(Succ))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">678</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">678</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">679</td>
    <td class="codeline">    BlockChain &SuccChain = *BlockToChain[Succ];</td>
    <td class="lineNumber">679</td>
    <td class="codeline">    BlockChain &SuccChain = *BlockToChain[Succ];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">680</td>
    <td class="codeline">    // Disregard edges within a fixed chain, or edges to the loop header.</td>
    <td class="lineNumber">680</td>
    <td class="codeline">    // Disregard edges within a fixed chain, or edges to the loop header.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">681</td>
    <td class="codeline">    if (&Chain == &SuccChain || Succ == LoopHeaderBB)</td>
    <td class="lineNumber">681</td>
    <td class="codeline">    if (&Chain == &SuccChain || Succ == LoopHeaderBB)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">682</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">682</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">683</td>
    <td class="codeline"></td>
    <td class="lineNumber">683</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">684</td>
    <td class="codeline">    // This is a cross-chain edge that is within the loop, so decrement the</td>
    <td class="lineNumber">684</td>
    <td class="codeline">    // This is a cross-chain edge that is within the loop, so decrement the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">685</td>
    <td class="codeline">    // loop predecessor count of the destination chain.</td>
    <td class="lineNumber">685</td>
    <td class="codeline">    // loop predecessor count of the destination chain.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">686</td>
    <td class="codeline">    if (SuccChain.UnscheduledPredecessors == 0 ||</td>
    <td class="lineNumber">686</td>
    <td class="codeline">    if (SuccChain.UnscheduledPredecessors == 0 ||</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">687</td>
    <td class="codeline">        --SuccChain.UnscheduledPredecessors > 0)</td>
    <td class="lineNumber">687</td>
    <td class="codeline">        --SuccChain.UnscheduledPredecessors > 0)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">688</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">688</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">689</td>
    <td class="codeline"></td>
    <td class="lineNumber">689</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">690</td>
    <td class="codeline">    auto *NewBB = *SuccChain.begin();</td>
    <td class="lineNumber">690</td>
    <td class="codeline">    auto *NewBB = *SuccChain.begin();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">691</td>
    <td class="codeline">    if (NewBB->isEHPad())</td>
    <td class="lineNumber">691</td>
    <td class="codeline">    if (NewBB->isEHPad())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">692</td>
    <td class="codeline">      EHPadWorkList.push_back(NewBB);</td>
    <td class="lineNumber">692</td>
    <td class="codeline">      EHPadWorkList.push_back(NewBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">693</td>
    <td class="codeline">    else</td>
    <td class="lineNumber">693</td>
    <td class="codeline">    else</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">694</td>
    <td class="codeline">      BlockWorkList.push_back(NewBB);</td>
    <td class="lineNumber">694</td>
    <td class="codeline">      BlockWorkList.push_back(NewBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">695</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">695</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">696</td>
    <td class="codeline">}</td>
    <td class="lineNumber">696</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">697</td>
    <td class="codeline"></td>
    <td class="lineNumber">697</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">698</td>
    <td class="codeline">/// This helper function collects the set of successors of block</td>
    <td class="lineNumber">698</td>
    <td class="codeline">/// This helper function collects the set of successors of block</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">699</td>
    <td class="codeline">/// \p BB that are allowed to be its layout successors, and return</td>
    <td class="lineNumber">699</td>
    <td class="codeline">/// \p BB that are allowed to be its layout successors, and return</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">700</td>
    <td class="codeline">/// the total branch probability of edges from \p BB to those</td>
    <td class="lineNumber">700</td>
    <td class="codeline">/// the total branch probability of edges from \p BB to those</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">701</td>
    <td class="codeline">/// blocks.</td>
    <td class="lineNumber">701</td>
    <td class="codeline">/// blocks.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">702</td>
    <td class="codeline">BranchProbability MachineBlockPlacement::collectViableSuccessors(</td>
    <td class="lineNumber">702</td>
    <td class="codeline">BranchProbability MachineBlockPlacement::collectViableSuccessors(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">703</td>
    <td class="codeline">    const MachineBasicBlock *BB, const BlockChain &Chain,</td>
    <td class="lineNumber">703</td>
    <td class="codeline">    const MachineBasicBlock *BB, const BlockChain &Chain,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">704</td>
    <td class="codeline">    const BlockFilterSet *BlockFilter,</td>
    <td class="lineNumber">704</td>
    <td class="codeline">    const BlockFilterSet *BlockFilter,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">705</td>
    <td class="codeline">    SmallVector<MachineBasicBlock *, 4> &Successors) {</td>
    <td class="lineNumber">705</td>
    <td class="codeline">    SmallVector<MachineBasicBlock *, 4> &Successors) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">706</td>
    <td class="codeline">  // Adjust edge probabilities by excluding edges pointing to blocks that is</td>
    <td class="lineNumber">706</td>
    <td class="codeline">  // Adjust edge probabilities by excluding edges pointing to blocks that is</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">707</td>
    <td class="codeline">  // either not in BlockFilter or is already in the current chain. Consider the</td>
    <td class="lineNumber">707</td>
    <td class="codeline">  // either not in BlockFilter or is already in the current chain. Consider the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">708</td>
    <td class="codeline">  // following CFG:</td>
    <td class="lineNumber">708</td>
    <td class="codeline">  // following CFG:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">709</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">709</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">710</td>
    <td class="codeline">  //     --->A</td>
    <td class="lineNumber">710</td>
    <td class="codeline">  //     --->A</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">711</td>
    <td class="codeline">  //     |  / \</td>
    <td class="lineNumber">711</td>
    <td class="codeline">  //     |  / \</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">712</td>
    <td class="codeline">  //     | B   C</td>
    <td class="lineNumber">712</td>
    <td class="codeline">  //     | B   C</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">713</td>
    <td class="codeline">  //     |  \ / \</td>
    <td class="lineNumber">713</td>
    <td class="codeline">  //     |  \ / \</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">714</td>
    <td class="codeline">  //     ----D   E</td>
    <td class="lineNumber">714</td>
    <td class="codeline">  //     ----D   E</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">715</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">715</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">716</td>
    <td class="codeline">  // Assume A->C is very hot (>90%), and C->D has a 50% probability, then after</td>
    <td class="lineNumber">716</td>
    <td class="codeline">  // Assume A->C is very hot (>90%), and C->D has a 50% probability, then after</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">717</td>
    <td class="codeline">  // A->C is chosen as a fall-through, D won't be selected as a successor of C</td>
    <td class="lineNumber">717</td>
    <td class="codeline">  // A->C is chosen as a fall-through, D won't be selected as a successor of C</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">718</td>
    <td class="codeline">  // due to CFG constraint (the probability of C->D is not greater than</td>
    <td class="lineNumber">718</td>
    <td class="codeline">  // due to CFG constraint (the probability of C->D is not greater than</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">719</td>
    <td class="codeline">  // HotProb to break topo-order). If we exclude E that is not in BlockFilter</td>
    <td class="lineNumber">719</td>
    <td class="codeline">  // HotProb to break topo-order). If we exclude E that is not in BlockFilter</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">720</td>
    <td class="codeline">  // when calculating the probability of C->D, D will be selected and we</td>
    <td class="lineNumber">720</td>
    <td class="codeline">  // when calculating the probability of C->D, D will be selected and we</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">721</td>
    <td class="codeline">  // will get A C D B as the layout of this loop.</td>
    <td class="lineNumber">721</td>
    <td class="codeline">  // will get A C D B as the layout of this loop.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">722</td>
    <td class="codeline">  auto AdjustedSumProb = BranchProbability::getOne();</td>
    <td class="lineNumber">722</td>
    <td class="codeline">  auto AdjustedSumProb = BranchProbability::getOne();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">723</td>
    <td class="codeline">  for (MachineBasicBlock *Succ : BB->successors()) {</td>
    <td class="lineNumber">723</td>
    <td class="codeline">  for (MachineBasicBlock *Succ : BB->successors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">724</td>
    <td class="codeline">    bool SkipSucc = false;</td>
    <td class="lineNumber">724</td>
    <td class="codeline">    bool SkipSucc = false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">725</td>
    <td class="codeline">    if (Succ->isEHPad() || (BlockFilter && !BlockFilter->count(Succ))) {</td>
    <td class="lineNumber">725</td>
    <td class="codeline">    if (Succ->isEHPad() || (BlockFilter && !BlockFilter->count(Succ))) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">726</td>
    <td class="codeline">      SkipSucc = true;</td>
    <td class="lineNumber">726</td>
    <td class="codeline">      SkipSucc = true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">727</td>
    <td class="codeline">    } else {</td>
    <td class="lineNumber">727</td>
    <td class="codeline">    } else {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">728</td>
    <td class="codeline">      BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">728</td>
    <td class="codeline">      BlockChain *SuccChain = BlockToChain[Succ];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">729</td>
    <td class="codeline">      if (SuccChain == &Chain) {</td>
    <td class="lineNumber">729</td>
    <td class="codeline">      if (SuccChain == &Chain) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">730</td>
    <td class="codeline">        SkipSucc = true;</td>
    <td class="lineNumber">730</td>
    <td class="codeline">        SkipSucc = true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">731</td>
    <td class="codeline">      } else if (Succ != *SuccChain->begin()) {</td>
    <td class="lineNumber">731</td>
    <td class="codeline">      } else if (Succ != *SuccChain->begin()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">732</td>
    <td class="codeline">        LLVM_DEBUG(dbgs() << "    " << getBlockName(Succ)</td>
    <td class="lineNumber">732</td>
    <td class="codeline">        LLVM_DEBUG(dbgs() << "    " << getBlockName(Succ)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">733</td>
    <td class="codeline">                          << " -> Mid chain!\n");</td>
    <td class="lineNumber">733</td>
    <td class="codeline">                          << " -> Mid chain!\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">734</td>
    <td class="codeline">        continue;</td>
    <td class="lineNumber">734</td>
    <td class="codeline">        continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">735</td>
    <td class="codeline">      }</td>
    <td class="lineNumber">735</td>
    <td class="codeline">      }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">736</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">736</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">737</td>
    <td class="codeline">    if (SkipSucc)</td>
    <td class="lineNumber">737</td>
    <td class="codeline">    if (SkipSucc)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">738</td>
    <td class="codeline">      AdjustedSumProb -= MBPI->getEdgeProbability(BB, Succ);</td>
    <td class="lineNumber">738</td>
    <td class="codeline">      AdjustedSumProb -= MBPI->getEdgeProbability(BB, Succ);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">739</td>
    <td class="codeline">    else</td>
    <td class="lineNumber">739</td>
    <td class="codeline">    else</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">740</td>
    <td class="codeline">      Successors.push_back(Succ);</td>
    <td class="lineNumber">740</td>
    <td class="codeline">      Successors.push_back(Succ);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">741</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">741</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">742</td>
    <td class="codeline"></td>
    <td class="lineNumber">742</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">743</td>
    <td class="codeline">  return AdjustedSumProb;</td>
    <td class="lineNumber">743</td>
    <td class="codeline">  return AdjustedSumProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">744</td>
    <td class="codeline">}</td>
    <td class="lineNumber">744</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">745</td>
    <td class="codeline"></td>
    <td class="lineNumber">745</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">746</td>
    <td class="codeline">/// The helper function returns the branch probability that is adjusted</td>
    <td class="lineNumber">746</td>
    <td class="codeline">/// The helper function returns the branch probability that is adjusted</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">747</td>
    <td class="codeline">/// or normalized over the new total \p AdjustedSumProb.</td>
    <td class="lineNumber">747</td>
    <td class="codeline">/// or normalized over the new total \p AdjustedSumProb.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">748</td>
    <td class="codeline">static BranchProbability</td>
    <td class="lineNumber">748</td>
    <td class="codeline">static BranchProbability</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">749</td>
    <td class="codeline">getAdjustedProbability(BranchProbability OrigProb,</td>
    <td class="lineNumber">749</td>
    <td class="codeline">getAdjustedProbability(BranchProbability OrigProb,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">750</td>
    <td class="codeline">                       BranchProbability AdjustedSumProb) {</td>
    <td class="lineNumber">750</td>
    <td class="codeline">                       BranchProbability AdjustedSumProb) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">751</td>
    <td class="codeline">  BranchProbability SuccProb;</td>
    <td class="lineNumber">751</td>
    <td class="codeline">  BranchProbability SuccProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">752</td>
    <td class="codeline">  uint32_t SuccProbN = OrigProb.getNumerator();</td>
    <td class="lineNumber">752</td>
    <td class="codeline">  uint32_t SuccProbN = OrigProb.getNumerator();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">753</td>
    <td class="codeline">  uint32_t SuccProbD = AdjustedSumProb.getNumerator();</td>
    <td class="lineNumber">753</td>
    <td class="codeline">  uint32_t SuccProbD = AdjustedSumProb.getNumerator();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">754</td>
    <td class="codeline">  if (SuccProbN >= SuccProbD)</td>
    <td class="lineNumber">754</td>
    <td class="codeline">  if (SuccProbN >= SuccProbD)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">755</td>
    <td class="codeline">    SuccProb = BranchProbability::getOne();</td>
    <td class="lineNumber">755</td>
    <td class="codeline">    SuccProb = BranchProbability::getOne();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">756</td>
    <td class="codeline">  else</td>
    <td class="lineNumber">756</td>
    <td class="codeline">  else</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">757</td>
    <td class="codeline">    SuccProb = BranchProbability(SuccProbN, SuccProbD);</td>
    <td class="lineNumber">757</td>
    <td class="codeline">    SuccProb = BranchProbability(SuccProbN, SuccProbD);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">758</td>
    <td class="codeline"></td>
    <td class="lineNumber">758</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">759</td>
    <td class="codeline">  return SuccProb;</td>
    <td class="lineNumber">759</td>
    <td class="codeline">  return SuccProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">760</td>
    <td class="codeline">}</td>
    <td class="lineNumber">760</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">761</td>
    <td class="codeline"></td>
    <td class="lineNumber">761</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">762</td>
    <td class="codeline">/// Check if \p BB has exactly the successors in \p Successors.</td>
    <td class="lineNumber">762</td>
    <td class="codeline">/// Check if \p BB has exactly the successors in \p Successors.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">763</td>
    <td class="codeline">static bool</td>
    <td class="lineNumber">763</td>
    <td class="codeline">static bool</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">764</td>
    <td class="codeline">hasSameSuccessors(MachineBasicBlock &BB,</td>
    <td class="lineNumber">764</td>
    <td class="codeline">hasSameSuccessors(MachineBasicBlock &BB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">765</td>
    <td class="codeline">                  SmallPtrSetImpl<const MachineBasicBlock *> &Successors) {</td>
    <td class="lineNumber">765</td>
    <td class="codeline">                  SmallPtrSetImpl<const MachineBasicBlock *> &Successors) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">766</td>
    <td class="codeline">  if (BB.succ_size() != Successors.size())</td>
    <td class="lineNumber">766</td>
    <td class="codeline">  if (BB.succ_size() != Successors.size())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">767</td>
    <td class="codeline">    return false;</td>
    <td class="lineNumber">767</td>
    <td class="codeline">    return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">768</td>
    <td class="codeline">  // We don't want to count self-loops</td>
    <td class="lineNumber">768</td>
    <td class="codeline">  // We don't want to count self-loops</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">769</td>
    <td class="codeline">  if (Successors.count(&BB))</td>
    <td class="lineNumber">769</td>
    <td class="codeline">  if (Successors.count(&BB))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">770</td>
    <td class="codeline">    return false;</td>
    <td class="lineNumber">770</td>
    <td class="codeline">    return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">771</td>
    <td class="codeline">  for (MachineBasicBlock *Succ : BB.successors())</td>
    <td class="lineNumber">771</td>
    <td class="codeline">  for (MachineBasicBlock *Succ : BB.successors())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">772</td>
    <td class="codeline">    if (!Successors.count(Succ))</td>
    <td class="lineNumber">772</td>
    <td class="codeline">    if (!Successors.count(Succ))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">773</td>
    <td class="codeline">      return false;</td>
    <td class="lineNumber">773</td>
    <td class="codeline">      return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">774</td>
    <td class="codeline">  return true;</td>
    <td class="lineNumber">774</td>
    <td class="codeline">  return true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">775</td>
    <td class="codeline">}</td>
    <td class="lineNumber">775</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">776</td>
    <td class="codeline"></td>
    <td class="lineNumber">776</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">777</td>
    <td class="codeline">/// Check if a block should be tail duplicated to increase fallthrough</td>
    <td class="lineNumber">777</td>
    <td class="codeline">/// Check if a block should be tail duplicated to increase fallthrough</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">778</td>
    <td class="codeline">/// opportunities.</td>
    <td class="lineNumber">778</td>
    <td class="codeline">/// opportunities.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">779</td>
    <td class="codeline">/// \p BB Block to check.</td>
    <td class="lineNumber">779</td>
    <td class="codeline">/// \p BB Block to check.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">780</td>
    <td class="codeline">bool MachineBlockPlacement::shouldTailDuplicate(MachineBasicBlock *BB) {</td>
    <td class="lineNumber">780</td>
    <td class="codeline">bool MachineBlockPlacement::shouldTailDuplicate(MachineBasicBlock *BB) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">781</td>
    <td class="codeline">  // Blocks with single successors don't create additional fallthrough</td>
    <td class="lineNumber">781</td>
    <td class="codeline">  // Blocks with single successors don't create additional fallthrough</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">782</td>
    <td class="codeline">  // opportunities. Don't duplicate them. TODO: When conditional exits are</td>
    <td class="lineNumber">782</td>
    <td class="codeline">  // opportunities. Don't duplicate them. TODO: When conditional exits are</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">783</td>
    <td class="codeline">  // analyzable, allow them to be duplicated.</td>
    <td class="lineNumber">783</td>
    <td class="codeline">  // analyzable, allow them to be duplicated.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">784</td>
    <td class="codeline">  bool IsSimple = TailDup.isSimpleBB(BB);</td>
    <td class="lineNumber">784</td>
    <td class="codeline">  bool IsSimple = TailDup.isSimpleBB(BB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">785</td>
    <td class="codeline"></td>
    <td class="lineNumber">785</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">786</td>
    <td class="codeline">  if (BB->succ_size() == 1)</td>
    <td class="lineNumber">786</td>
    <td class="codeline">  if (BB->succ_size() == 1)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">787</td>
    <td class="codeline">    return false;</td>
    <td class="lineNumber">787</td>
    <td class="codeline">    return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">788</td>
    <td class="codeline">  return TailDup.shouldTailDuplicate(IsSimple, *BB);</td>
    <td class="lineNumber">788</td>
    <td class="codeline">  return TailDup.shouldTailDuplicate(IsSimple, *BB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">789</td>
    <td class="codeline">}</td>
    <td class="lineNumber">789</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">790</td>
    <td class="codeline"></td>
    <td class="lineNumber">790</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">791</td>
    <td class="codeline">/// Compare 2 BlockFrequency's with a small penalty for \p A.</td>
    <td class="lineNumber">791</td>
    <td class="codeline">/// Compare 2 BlockFrequency's with a small penalty for \p A.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">792</td>
    <td class="codeline">/// In order to be conservative, we apply a X% penalty to account for</td>
    <td class="lineNumber">792</td>
    <td class="codeline">/// In order to be conservative, we apply a X% penalty to account for</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">793</td>
    <td class="codeline">/// increased icache pressure and static heuristics. For small frequencies</td>
    <td class="lineNumber">793</td>
    <td class="codeline">/// increased icache pressure and static heuristics. For small frequencies</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">794</td>
    <td class="codeline">/// we use only the numerators to improve accuracy. For simplicity, we assume the</td>
    <td class="lineNumber">794</td>
    <td class="codeline">/// we use only the numerators to improve accuracy. For simplicity, we assume the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">795</td>
    <td class="codeline">/// penalty is less than 100%</td>
    <td class="lineNumber">795</td>
    <td class="codeline">/// penalty is less than 100%</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">796</td>
    <td class="codeline">/// TODO(iteratee): Use 64-bit fixed point edge frequencies everywhere.</td>
    <td class="lineNumber">796</td>
    <td class="codeline">/// TODO(iteratee): Use 64-bit fixed point edge frequencies everywhere.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">797</td>
    <td class="codeline">static bool greaterWithBias(BlockFrequency A, BlockFrequency B,</td>
    <td class="lineNumber">797</td>
    <td class="codeline">static bool greaterWithBias(BlockFrequency A, BlockFrequency B,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">798</td>
    <td class="codeline">                            uint64_t EntryFreq) {</td>
    <td class="lineNumber">798</td>
    <td class="codeline">                            uint64_t EntryFreq) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">799</td>
    <td class="codeline">  BranchProbability ThresholdProb(TailDupPlacementPenalty, 100);</td>
    <td class="lineNumber">799</td>
    <td class="codeline">  BranchProbability ThresholdProb(TailDupPlacementPenalty, 100);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">800</td>
    <td class="codeline">  BlockFrequency Gain = A - B;</td>
    <td class="lineNumber">800</td>
    <td class="codeline">  BlockFrequency Gain = A - B;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">801</td>
    <td class="codeline">  return (Gain / ThresholdProb).getFrequency() >= EntryFreq;</td>
    <td class="lineNumber">801</td>
    <td class="codeline">  return (Gain / ThresholdProb).getFrequency() >= EntryFreq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">802</td>
    <td class="codeline">}</td>
    <td class="lineNumber">802</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">803</td>
    <td class="codeline"></td>
    <td class="lineNumber">803</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">804</td>
    <td class="codeline">/// Check the edge frequencies to see if tail duplication will increase</td>
    <td class="lineNumber">804</td>
    <td class="codeline">/// Check the edge frequencies to see if tail duplication will increase</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">805</td>
    <td class="codeline">/// fallthroughs. It only makes sense to call this function when</td>
    <td class="lineNumber">805</td>
    <td class="codeline">/// fallthroughs. It only makes sense to call this function when</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">806</td>
    <td class="codeline">/// \p Succ would not be chosen otherwise. Tail duplication of \p Succ is</td>
    <td class="lineNumber">806</td>
    <td class="codeline">/// \p Succ would not be chosen otherwise. Tail duplication of \p Succ is</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">807</td>
    <td class="codeline">/// always locally profitable if we would have picked \p Succ without</td>
    <td class="lineNumber">807</td>
    <td class="codeline">/// always locally profitable if we would have picked \p Succ without</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">808</td>
    <td class="codeline">/// considering duplication.</td>
    <td class="lineNumber">808</td>
    <td class="codeline">/// considering duplication.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">809</td>
    <td class="codeline">bool MachineBlockPlacement::isProfitableToTailDup(</td>
    <td class="lineNumber">809</td>
    <td class="codeline">bool MachineBlockPlacement::isProfitableToTailDup(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">810</td>
    <td class="codeline">    const MachineBasicBlock *BB, const MachineBasicBlock *Succ,</td>
    <td class="lineNumber">810</td>
    <td class="codeline">    const MachineBasicBlock *BB, const MachineBasicBlock *Succ,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">811</td>
    <td class="codeline">    BranchProbability QProb,</td>
    <td class="lineNumber">811</td>
    <td class="codeline">    BranchProbability QProb,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">812</td>
    <td class="codeline">    const BlockChain &Chain, const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">812</td>
    <td class="codeline">    const BlockChain &Chain, const BlockFilterSet *BlockFilter) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">813</td>
    <td class="codeline">  // We need to do a probability calculation to make sure this is profitable.</td>
    <td class="lineNumber">813</td>
    <td class="codeline">  // We need to do a probability calculation to make sure this is profitable.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">814</td>
    <td class="codeline">  // First: does succ have a successor that post-dominates? This affects the</td>
    <td class="lineNumber">814</td>
    <td class="codeline">  // First: does succ have a successor that post-dominates? This affects the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">815</td>
    <td class="codeline">  // calculation. The 2 relevant cases are:</td>
    <td class="lineNumber">815</td>
    <td class="codeline">  // calculation. The 2 relevant cases are:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">816</td>
    <td class="codeline">  //    BB         BB</td>
    <td class="lineNumber">816</td>
    <td class="codeline">  //    BB         BB</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">817</td>
    <td class="codeline">  //    | \Qout    | \Qout</td>
    <td class="lineNumber">817</td>
    <td class="codeline">  //    | \Qout    | \Qout</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">818</td>
    <td class="codeline">  //   P|  C       |P C</td>
    <td class="lineNumber">818</td>
    <td class="codeline">  //   P|  C       |P C</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">819</td>
    <td class="codeline">  //    =   C'     =   C'</td>
    <td class="lineNumber">819</td>
    <td class="codeline">  //    =   C'     =   C'</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">820</td>
    <td class="codeline">  //    |  /Qin    |  /Qin</td>
    <td class="lineNumber">820</td>
    <td class="codeline">  //    |  /Qin    |  /Qin</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">821</td>
    <td class="codeline">  //    | /        | /</td>
    <td class="lineNumber">821</td>
    <td class="codeline">  //    | /        | /</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">822</td>
    <td class="codeline">  //    Succ       Succ</td>
    <td class="lineNumber">822</td>
    <td class="codeline">  //    Succ       Succ</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">823</td>
    <td class="codeline">  //    / \        | \  V</td>
    <td class="lineNumber">823</td>
    <td class="codeline">  //    / \        | \  V</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">824</td>
    <td class="codeline">  //  U/   =V      |U \</td>
    <td class="lineNumber">824</td>
    <td class="codeline">  //  U/   =V      |U \</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">825</td>
    <td class="codeline">  //  /     \      =   D</td>
    <td class="lineNumber">825</td>
    <td class="codeline">  //  /     \      =   D</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">826</td>
    <td class="codeline">  //  D      E     |  /</td>
    <td class="lineNumber">826</td>
    <td class="codeline">  //  D      E     |  /</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">827</td>
    <td class="codeline">  //               | /</td>
    <td class="lineNumber">827</td>
    <td class="codeline">  //               | /</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">828</td>
    <td class="codeline">  //               |/</td>
    <td class="lineNumber">828</td>
    <td class="codeline">  //               |/</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">829</td>
    <td class="codeline">  //               PDom</td>
    <td class="lineNumber">829</td>
    <td class="codeline">  //               PDom</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">830</td>
    <td class="codeline">  //  '=' : Branch taken for that CFG edge</td>
    <td class="lineNumber">830</td>
    <td class="codeline">  //  '=' : Branch taken for that CFG edge</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">831</td>
    <td class="codeline">  // In the second case, Placing Succ while duplicating it into C prevents the</td>
    <td class="lineNumber">831</td>
    <td class="codeline">  // In the second case, Placing Succ while duplicating it into C prevents the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">832</td>
    <td class="codeline">  // fallthrough of Succ into either D or PDom, because they now have C as an</td>
    <td class="lineNumber">832</td>
    <td class="codeline">  // fallthrough of Succ into either D or PDom, because they now have C as an</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">833</td>
    <td class="codeline">  // unplaced predecessor</td>
    <td class="lineNumber">833</td>
    <td class="codeline">  // unplaced predecessor</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">834</td>
    <td class="codeline"></td>
    <td class="lineNumber">834</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">835</td>
    <td class="codeline">  // Start by figuring out which case we fall into</td>
    <td class="lineNumber">835</td>
    <td class="codeline">  // Start by figuring out which case we fall into</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">836</td>
    <td class="codeline">  MachineBasicBlock *PDom = nullptr;</td>
    <td class="lineNumber">836</td>
    <td class="codeline">  MachineBasicBlock *PDom = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">837</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 4> SuccSuccs;</td>
    <td class="lineNumber">837</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 4> SuccSuccs;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">838</td>
    <td class="codeline">  // Only scan the relevant successors</td>
    <td class="lineNumber">838</td>
    <td class="codeline">  // Only scan the relevant successors</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">839</td>
    <td class="codeline">  auto AdjustedSuccSumProb =</td>
    <td class="lineNumber">839</td>
    <td class="codeline">  auto AdjustedSuccSumProb =</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">840</td>
    <td class="codeline">      collectViableSuccessors(Succ, Chain, BlockFilter, SuccSuccs);</td>
    <td class="lineNumber">840</td>
    <td class="codeline">      collectViableSuccessors(Succ, Chain, BlockFilter, SuccSuccs);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">841</td>
    <td class="codeline">  BranchProbability PProb = MBPI->getEdgeProbability(BB, Succ);</td>
    <td class="lineNumber">841</td>
    <td class="codeline">  BranchProbability PProb = MBPI->getEdgeProbability(BB, Succ);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">842</td>
    <td class="codeline">  auto BBFreq = MBFI->getBlockFreq(BB);</td>
    <td class="lineNumber">842</td>
    <td class="codeline">  auto BBFreq = MBFI->getBlockFreq(BB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">843</td>
    <td class="codeline">  auto SuccFreq = MBFI->getBlockFreq(Succ);</td>
    <td class="lineNumber">843</td>
    <td class="codeline">  auto SuccFreq = MBFI->getBlockFreq(Succ);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">844</td>
    <td class="codeline">  BlockFrequency P = BBFreq * PProb;</td>
    <td class="lineNumber">844</td>
    <td class="codeline">  BlockFrequency P = BBFreq * PProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">845</td>
    <td class="codeline">  BlockFrequency Qout = BBFreq * QProb;</td>
    <td class="lineNumber">845</td>
    <td class="codeline">  BlockFrequency Qout = BBFreq * QProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">846</td>
    <td class="codeline">  uint64_t EntryFreq = MBFI->getEntryFreq();</td>
    <td class="lineNumber">846</td>
    <td class="codeline">  uint64_t EntryFreq = MBFI->getEntryFreq();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">847</td>
    <td class="codeline">  // If there are no more successors, it is profitable to copy, as it strictly</td>
    <td class="lineNumber">847</td>
    <td class="codeline">  // If there are no more successors, it is profitable to copy, as it strictly</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">848</td>
    <td class="codeline">  // increases fallthrough.</td>
    <td class="lineNumber">848</td>
    <td class="codeline">  // increases fallthrough.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">849</td>
    <td class="codeline">  if (SuccSuccs.size() == 0)</td>
    <td class="lineNumber">849</td>
    <td class="codeline">  if (SuccSuccs.size() == 0)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">850</td>
    <td class="codeline">    return greaterWithBias(P, Qout, EntryFreq);</td>
    <td class="lineNumber">850</td>
    <td class="codeline">    return greaterWithBias(P, Qout, EntryFreq);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">851</td>
    <td class="codeline"></td>
    <td class="lineNumber">851</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">852</td>
    <td class="codeline">  auto BestSuccSucc = BranchProbability::getZero();</td>
    <td class="lineNumber">852</td>
    <td class="codeline">  auto BestSuccSucc = BranchProbability::getZero();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">853</td>
    <td class="codeline">  // Find the PDom or the best Succ if no PDom exists.</td>
    <td class="lineNumber">853</td>
    <td class="codeline">  // Find the PDom or the best Succ if no PDom exists.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">854</td>
    <td class="codeline">  for (MachineBasicBlock *SuccSucc : SuccSuccs) {</td>
    <td class="lineNumber">854</td>
    <td class="codeline">  for (MachineBasicBlock *SuccSucc : SuccSuccs) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">855</td>
    <td class="codeline">    auto Prob = MBPI->getEdgeProbability(Succ, SuccSucc);</td>
    <td class="lineNumber">855</td>
    <td class="codeline">    auto Prob = MBPI->getEdgeProbability(Succ, SuccSucc);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">856</td>
    <td class="codeline">    if (Prob > BestSuccSucc)</td>
    <td class="lineNumber">856</td>
    <td class="codeline">    if (Prob > BestSuccSucc)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">857</td>
    <td class="codeline">      BestSuccSucc = Prob;</td>
    <td class="lineNumber">857</td>
    <td class="codeline">      BestSuccSucc = Prob;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">858</td>
    <td class="codeline">    if (PDom == nullptr)</td>
    <td class="lineNumber">858</td>
    <td class="codeline">    if (PDom == nullptr)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">859</td>
    <td class="codeline">      if (MPDT->dominates(SuccSucc, Succ)) {</td>
    <td class="lineNumber">859</td>
    <td class="codeline">      if (MPDT->dominates(SuccSucc, Succ)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">860</td>
    <td class="codeline">        PDom = SuccSucc;</td>
    <td class="lineNumber">860</td>
    <td class="codeline">        PDom = SuccSucc;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">861</td>
    <td class="codeline">        break;</td>
    <td class="lineNumber">861</td>
    <td class="codeline">        break;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">862</td>
    <td class="codeline">      }</td>
    <td class="lineNumber">862</td>
    <td class="codeline">      }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">863</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">863</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">864</td>
    <td class="codeline">  // For the comparisons, we need to know Succ's best incoming edge that isn't</td>
    <td class="lineNumber">864</td>
    <td class="codeline">  // For the comparisons, we need to know Succ's best incoming edge that isn't</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">865</td>
    <td class="codeline">  // from BB.</td>
    <td class="lineNumber">865</td>
    <td class="codeline">  // from BB.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">866</td>
    <td class="codeline">  auto SuccBestPred = BlockFrequency(0);</td>
    <td class="lineNumber">866</td>
    <td class="codeline">  auto SuccBestPred = BlockFrequency(0);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">867</td>
    <td class="codeline">  for (MachineBasicBlock *SuccPred : Succ->predecessors()) {</td>
    <td class="lineNumber">867</td>
    <td class="codeline">  for (MachineBasicBlock *SuccPred : Succ->predecessors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">868</td>
    <td class="codeline">    if (SuccPred == Succ || SuccPred == BB</td>
    <td class="lineNumber">868</td>
    <td class="codeline">    if (SuccPred == Succ || SuccPred == BB</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">869</td>
    <td class="codeline">        || BlockToChain[SuccPred] == &Chain</td>
    <td class="lineNumber">869</td>
    <td class="codeline">        || BlockToChain[SuccPred] == &Chain</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">870</td>
    <td class="codeline">        || (BlockFilter && !BlockFilter->count(SuccPred)))</td>
    <td class="lineNumber">870</td>
    <td class="codeline">        || (BlockFilter && !BlockFilter->count(SuccPred)))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">871</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">871</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">872</td>
    <td class="codeline">    auto Freq = MBFI->getBlockFreq(SuccPred)</td>
    <td class="lineNumber">872</td>
    <td class="codeline">    auto Freq = MBFI->getBlockFreq(SuccPred)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">873</td>
    <td class="codeline">        * MBPI->getEdgeProbability(SuccPred, Succ);</td>
    <td class="lineNumber">873</td>
    <td class="codeline">        * MBPI->getEdgeProbability(SuccPred, Succ);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">874</td>
    <td class="codeline">    if (Freq > SuccBestPred)</td>
    <td class="lineNumber">874</td>
    <td class="codeline">    if (Freq > SuccBestPred)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">875</td>
    <td class="codeline">      SuccBestPred = Freq;</td>
    <td class="lineNumber">875</td>
    <td class="codeline">      SuccBestPred = Freq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">876</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">876</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">877</td>
    <td class="codeline">  // Qin is Succ's best unplaced incoming edge that isn't BB</td>
    <td class="lineNumber">877</td>
    <td class="codeline">  // Qin is Succ's best unplaced incoming edge that isn't BB</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">878</td>
    <td class="codeline">  BlockFrequency Qin = SuccBestPred;</td>
    <td class="lineNumber">878</td>
    <td class="codeline">  BlockFrequency Qin = SuccBestPred;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">879</td>
    <td class="codeline">  // If it doesn't have a post-dominating successor, here is the calculation:</td>
    <td class="lineNumber">879</td>
    <td class="codeline">  // If it doesn't have a post-dominating successor, here is the calculation:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">880</td>
    <td class="codeline">  //    BB        BB</td>
    <td class="lineNumber">880</td>
    <td class="codeline">  //    BB        BB</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">881</td>
    <td class="codeline">  //    | \Qout   |  \</td>
    <td class="lineNumber">881</td>
    <td class="codeline">  //    | \Qout   |  \</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">882</td>
    <td class="codeline">  //   P|  C      |   =</td>
    <td class="lineNumber">882</td>
    <td class="codeline">  //   P|  C      |   =</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">883</td>
    <td class="codeline">  //    =   C'    |    C</td>
    <td class="lineNumber">883</td>
    <td class="codeline">  //    =   C'    |    C</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">884</td>
    <td class="codeline">  //    |  /Qin   |     |</td>
    <td class="lineNumber">884</td>
    <td class="codeline">  //    |  /Qin   |     |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">885</td>
    <td class="codeline">  //    | /       |     C' (+Succ)</td>
    <td class="lineNumber">885</td>
    <td class="codeline">  //    | /       |     C' (+Succ)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">886</td>
    <td class="codeline">  //    Succ      Succ /|</td>
    <td class="lineNumber">886</td>
    <td class="codeline">  //    Succ      Succ /|</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">887</td>
    <td class="codeline">  //    / \       |  \/ |</td>
    <td class="lineNumber">887</td>
    <td class="codeline">  //    / \       |  \/ |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">888</td>
    <td class="codeline">  //  U/   =V     |  == |</td>
    <td class="lineNumber">888</td>
    <td class="codeline">  //  U/   =V     |  == |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">889</td>
    <td class="codeline">  //  /     \     | /  \|</td>
    <td class="lineNumber">889</td>
    <td class="codeline">  //  /     \     | /  \|</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">890</td>
    <td class="codeline">  //  D      E    D     E</td>
    <td class="lineNumber">890</td>
    <td class="codeline">  //  D      E    D     E</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">891</td>
    <td class="codeline">  //  '=' : Branch taken for that CFG edge</td>
    <td class="lineNumber">891</td>
    <td class="codeline">  //  '=' : Branch taken for that CFG edge</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">892</td>
    <td class="codeline">  //  Cost in the first case is: P + V</td>
    <td class="lineNumber">892</td>
    <td class="codeline">  //  Cost in the first case is: P + V</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">893</td>
    <td class="codeline">  //  For this calculation, we always assume P > Qout. If Qout > P</td>
    <td class="lineNumber">893</td>
    <td class="codeline">  //  For this calculation, we always assume P > Qout. If Qout > P</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">894</td>
    <td class="codeline">  //  The result of this function will be ignored at the caller.</td>
    <td class="lineNumber">894</td>
    <td class="codeline">  //  The result of this function will be ignored at the caller.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">895</td>
    <td class="codeline">  //  Let F = SuccFreq - Qin</td>
    <td class="lineNumber">895</td>
    <td class="codeline">  //  Let F = SuccFreq - Qin</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">896</td>
    <td class="codeline">  //  Cost in the second case is: Qout + min(Qin, F) * U + max(Qin, F) * V</td>
    <td class="lineNumber">896</td>
    <td class="codeline">  //  Cost in the second case is: Qout + min(Qin, F) * U + max(Qin, F) * V</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">897</td>
    <td class="codeline"></td>
    <td class="lineNumber">897</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">898</td>
    <td class="codeline">  if (PDom == nullptr || !Succ->isSuccessor(PDom)) {</td>
    <td class="lineNumber">898</td>
    <td class="codeline">  if (PDom == nullptr || !Succ->isSuccessor(PDom)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">899</td>
    <td class="codeline">    BranchProbability UProb = BestSuccSucc;</td>
    <td class="lineNumber">899</td>
    <td class="codeline">    BranchProbability UProb = BestSuccSucc;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">900</td>
    <td class="codeline">    BranchProbability VProb = AdjustedSuccSumProb - UProb;</td>
    <td class="lineNumber">900</td>
    <td class="codeline">    BranchProbability VProb = AdjustedSuccSumProb - UProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">901</td>
    <td class="codeline">    BlockFrequency F = SuccFreq - Qin;</td>
    <td class="lineNumber">901</td>
    <td class="codeline">    BlockFrequency F = SuccFreq - Qin;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">902</td>
    <td class="codeline">    BlockFrequency V = SuccFreq * VProb;</td>
    <td class="lineNumber">902</td>
    <td class="codeline">    BlockFrequency V = SuccFreq * VProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">903</td>
    <td class="codeline">    BlockFrequency QinU = std::min(Qin, F) * UProb;</td>
    <td class="lineNumber">903</td>
    <td class="codeline">    BlockFrequency QinU = std::min(Qin, F) * UProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">904</td>
    <td class="codeline">    BlockFrequency BaseCost = P + V;</td>
    <td class="lineNumber">904</td>
    <td class="codeline">    BlockFrequency BaseCost = P + V;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">905</td>
    <td class="codeline">    BlockFrequency DupCost = Qout + QinU + std::max(Qin, F) * VProb;</td>
    <td class="lineNumber">905</td>
    <td class="codeline">    BlockFrequency DupCost = Qout + QinU + std::max(Qin, F) * VProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">906</td>
    <td class="codeline">    return greaterWithBias(BaseCost, DupCost, EntryFreq);</td>
    <td class="lineNumber">906</td>
    <td class="codeline">    return greaterWithBias(BaseCost, DupCost, EntryFreq);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">907</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">907</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">908</td>
    <td class="codeline">  BranchProbability UProb = MBPI->getEdgeProbability(Succ, PDom);</td>
    <td class="lineNumber">908</td>
    <td class="codeline">  BranchProbability UProb = MBPI->getEdgeProbability(Succ, PDom);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">909</td>
    <td class="codeline">  BranchProbability VProb = AdjustedSuccSumProb - UProb;</td>
    <td class="lineNumber">909</td>
    <td class="codeline">  BranchProbability VProb = AdjustedSuccSumProb - UProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">910</td>
    <td class="codeline">  BlockFrequency U = SuccFreq * UProb;</td>
    <td class="lineNumber">910</td>
    <td class="codeline">  BlockFrequency U = SuccFreq * UProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">911</td>
    <td class="codeline">  BlockFrequency V = SuccFreq * VProb;</td>
    <td class="lineNumber">911</td>
    <td class="codeline">  BlockFrequency V = SuccFreq * VProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">912</td>
    <td class="codeline">  BlockFrequency F = SuccFreq - Qin;</td>
    <td class="lineNumber">912</td>
    <td class="codeline">  BlockFrequency F = SuccFreq - Qin;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">913</td>
    <td class="codeline">  // If there is a post-dominating successor, here is the calculation:</td>
    <td class="lineNumber">913</td>
    <td class="codeline">  // If there is a post-dominating successor, here is the calculation:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">914</td>
    <td class="codeline">  // BB         BB                 BB          BB</td>
    <td class="lineNumber">914</td>
    <td class="codeline">  // BB         BB                 BB          BB</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">915</td>
    <td class="codeline">  // | \Qout    |   \               | \Qout     |  \</td>
    <td class="lineNumber">915</td>
    <td class="codeline">  // | \Qout    |   \               | \Qout     |  \</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">916</td>
    <td class="codeline">  // |P C       |    =              |P C        |   =</td>
    <td class="lineNumber">916</td>
    <td class="codeline">  // |P C       |    =              |P C        |   =</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">917</td>
    <td class="codeline">  // =   C'     |P    C             =   C'      |P   C</td>
    <td class="lineNumber">917</td>
    <td class="codeline">  // =   C'     |P    C             =   C'      |P   C</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">918</td>
    <td class="codeline">  // |  /Qin    |      |            |  /Qin     |     |</td>
    <td class="lineNumber">918</td>
    <td class="codeline">  // |  /Qin    |      |            |  /Qin     |     |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">919</td>
    <td class="codeline">  // | /        |      C' (+Succ)   | /         |     C' (+Succ)</td>
    <td class="lineNumber">919</td>
    <td class="codeline">  // | /        |      C' (+Succ)   | /         |     C' (+Succ)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">920</td>
    <td class="codeline">  // Succ       Succ  /|            Succ        Succ /|</td>
    <td class="lineNumber">920</td>
    <td class="codeline">  // Succ       Succ  /|            Succ        Succ /|</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">921</td>
    <td class="codeline">  // | \  V     |   \/ |            | \  V      |  \/ |</td>
    <td class="lineNumber">921</td>
    <td class="codeline">  // | \  V     |   \/ |            | \  V      |  \/ |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">922</td>
    <td class="codeline">  // |U \       |U  /\ =?           |U =        |U /\ |</td>
    <td class="lineNumber">922</td>
    <td class="codeline">  // |U \       |U  /\ =?           |U =        |U /\ |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">923</td>
    <td class="codeline">  // =   D      = =  =?|            |   D       | =  =|</td>
    <td class="lineNumber">923</td>
    <td class="codeline">  // =   D      = =  =?|            |   D       | =  =|</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">924</td>
    <td class="codeline">  // |  /       |/     D            |  /        |/    D</td>
    <td class="lineNumber">924</td>
    <td class="codeline">  // |  /       |/     D            |  /        |/    D</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">925</td>
    <td class="codeline">  // | /        |     /             | =         |    /</td>
    <td class="lineNumber">925</td>
    <td class="codeline">  // | /        |     /             | =         |    /</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">926</td>
    <td class="codeline">  // |/         |    /              |/          |   =</td>
    <td class="lineNumber">926</td>
    <td class="codeline">  // |/         |    /              |/          |   =</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">927</td>
    <td class="codeline">  // Dom         Dom                Dom         Dom</td>
    <td class="lineNumber">927</td>
    <td class="codeline">  // Dom         Dom                Dom         Dom</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">928</td>
    <td class="codeline">  //  '=' : Branch taken for that CFG edge</td>
    <td class="lineNumber">928</td>
    <td class="codeline">  //  '=' : Branch taken for that CFG edge</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">929</td>
    <td class="codeline">  // The cost for taken branches in the first case is P + U</td>
    <td class="lineNumber">929</td>
    <td class="codeline">  // The cost for taken branches in the first case is P + U</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">930</td>
    <td class="codeline">  // Let F = SuccFreq - Qin</td>
    <td class="lineNumber">930</td>
    <td class="codeline">  // Let F = SuccFreq - Qin</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">931</td>
    <td class="codeline">  // The cost in the second case (assuming independence), given the layout:</td>
    <td class="lineNumber">931</td>
    <td class="codeline">  // The cost in the second case (assuming independence), given the layout:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">932</td>
    <td class="codeline">  // BB, Succ, (C+Succ), D, Dom or the layout:</td>
    <td class="lineNumber">932</td>
    <td class="codeline">  // BB, Succ, (C+Succ), D, Dom or the layout:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">933</td>
    <td class="codeline">  // BB, Succ, D, Dom, (C+Succ)</td>
    <td class="lineNumber">933</td>
    <td class="codeline">  // BB, Succ, D, Dom, (C+Succ)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">934</td>
    <td class="codeline">  // is Qout + max(F, Qin) * U + min(F, Qin)</td>
    <td class="lineNumber">934</td>
    <td class="codeline">  // is Qout + max(F, Qin) * U + min(F, Qin)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">935</td>
    <td class="codeline">  // compare P + U vs Qout + P * U + Qin.</td>
    <td class="lineNumber">935</td>
    <td class="codeline">  // compare P + U vs Qout + P * U + Qin.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">936</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">936</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">937</td>
    <td class="codeline">  // The 3rd and 4th cases cover when Dom would be chosen to follow Succ.</td>
    <td class="lineNumber">937</td>
    <td class="codeline">  // The 3rd and 4th cases cover when Dom would be chosen to follow Succ.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">938</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">938</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">939</td>
    <td class="codeline">  // For the 3rd case, the cost is P + 2 * V</td>
    <td class="lineNumber">939</td>
    <td class="codeline">  // For the 3rd case, the cost is P + 2 * V</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">940</td>
    <td class="codeline">  // For the 4th case, the cost is Qout + min(Qin, F) * U + max(Qin, F) * V + V</td>
    <td class="lineNumber">940</td>
    <td class="codeline">  // For the 4th case, the cost is Qout + min(Qin, F) * U + max(Qin, F) * V + V</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">941</td>
    <td class="codeline">  // We choose 4 over 3 when (P + V) > Qout + min(Qin, F) * U + max(Qin, F) * V</td>
    <td class="lineNumber">941</td>
    <td class="codeline">  // We choose 4 over 3 when (P + V) > Qout + min(Qin, F) * U + max(Qin, F) * V</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">942</td>
    <td class="codeline">  if (UProb > AdjustedSuccSumProb / 2 &&</td>
    <td class="lineNumber">942</td>
    <td class="codeline">  if (UProb > AdjustedSuccSumProb / 2 &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">943</td>
    <td class="codeline">      !hasBetterLayoutPredecessor(Succ, PDom, *BlockToChain[PDom], UProb, UProb,</td>
    <td class="lineNumber">943</td>
    <td class="codeline">      !hasBetterLayoutPredecessor(Succ, PDom, *BlockToChain[PDom], UProb, UProb,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">944</td>
    <td class="codeline">                                  Chain, BlockFilter))</td>
    <td class="lineNumber">944</td>
    <td class="codeline">                                  Chain, BlockFilter))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">945</td>
    <td class="codeline">    // Cases 3 & 4</td>
    <td class="lineNumber">945</td>
    <td class="codeline">    // Cases 3 & 4</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">946</td>
    <td class="codeline">    return greaterWithBias(</td>
    <td class="lineNumber">946</td>
    <td class="codeline">    return greaterWithBias(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">947</td>
    <td class="codeline">        (P + V), (Qout + std::max(Qin, F) * VProb + std::min(Qin, F) * UProb),</td>
    <td class="lineNumber">947</td>
    <td class="codeline">        (P + V), (Qout + std::max(Qin, F) * VProb + std::min(Qin, F) * UProb),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">948</td>
    <td class="codeline">        EntryFreq);</td>
    <td class="lineNumber">948</td>
    <td class="codeline">        EntryFreq);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">949</td>
    <td class="codeline">  // Cases 1 & 2</td>
    <td class="lineNumber">949</td>
    <td class="codeline">  // Cases 1 & 2</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">950</td>
    <td class="codeline">  return greaterWithBias((P + U),</td>
    <td class="lineNumber">950</td>
    <td class="codeline">  return greaterWithBias((P + U),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">951</td>
    <td class="codeline">                         (Qout + std::min(Qin, F) * AdjustedSuccSumProb +</td>
    <td class="lineNumber">951</td>
    <td class="codeline">                         (Qout + std::min(Qin, F) * AdjustedSuccSumProb +</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">952</td>
    <td class="codeline">                          std::max(Qin, F) * UProb),</td>
    <td class="lineNumber">952</td>
    <td class="codeline">                          std::max(Qin, F) * UProb),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">953</td>
    <td class="codeline">                         EntryFreq);</td>
    <td class="lineNumber">953</td>
    <td class="codeline">                         EntryFreq);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">954</td>
    <td class="codeline">}</td>
    <td class="lineNumber">954</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">955</td>
    <td class="codeline"></td>
    <td class="lineNumber">955</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">956</td>
    <td class="codeline">/// Check for a trellis layout. \p BB is the upper part of a trellis if its</td>
    <td class="lineNumber">956</td>
    <td class="codeline">/// Check for a trellis layout. \p BB is the upper part of a trellis if its</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">957</td>
    <td class="codeline">/// successors form the lower part of a trellis. A successor set S forms the</td>
    <td class="lineNumber">957</td>
    <td class="codeline">/// successors form the lower part of a trellis. A successor set S forms the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">958</td>
    <td class="codeline">/// lower part of a trellis if all of the predecessors of S are either in S or</td>
    <td class="lineNumber">958</td>
    <td class="codeline">/// lower part of a trellis if all of the predecessors of S are either in S or</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">959</td>
    <td class="codeline">/// have all of S as successors. We ignore trellises where BB doesn't have 2</td>
    <td class="lineNumber">959</td>
    <td class="codeline">/// have all of S as successors. We ignore trellises where BB doesn't have 2</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">960</td>
    <td class="codeline">/// successors because for fewer than 2, it's trivial, and for 3 or greater they</td>
    <td class="lineNumber">960</td>
    <td class="codeline">/// successors because for fewer than 2, it's trivial, and for 3 or greater they</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">961</td>
    <td class="codeline">/// are very uncommon and complex to compute optimally. Allowing edges within S</td>
    <td class="lineNumber">961</td>
    <td class="codeline">/// are very uncommon and complex to compute optimally. Allowing edges within S</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">962</td>
    <td class="codeline">/// is not strictly a trellis, but the same algorithm works, so we allow it.</td>
    <td class="lineNumber">962</td>
    <td class="codeline">/// is not strictly a trellis, but the same algorithm works, so we allow it.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">963</td>
    <td class="codeline">bool MachineBlockPlacement::isTrellis(</td>
    <td class="lineNumber">963</td>
    <td class="codeline">bool MachineBlockPlacement::isTrellis(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">964</td>
    <td class="codeline">    const MachineBasicBlock *BB,</td>
    <td class="lineNumber">964</td>
    <td class="codeline">    const MachineBasicBlock *BB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">965</td>
    <td class="codeline">    const SmallVectorImpl<MachineBasicBlock *> &ViableSuccs,</td>
    <td class="lineNumber">965</td>
    <td class="codeline">    const SmallVectorImpl<MachineBasicBlock *> &ViableSuccs,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">966</td>
    <td class="codeline">    const BlockChain &Chain, const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">966</td>
    <td class="codeline">    const BlockChain &Chain, const BlockFilterSet *BlockFilter) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">967</td>
    <td class="codeline">  // Technically BB could form a trellis with branching factor higher than 2.</td>
    <td class="lineNumber">967</td>
    <td class="codeline">  // Technically BB could form a trellis with branching factor higher than 2.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">968</td>
    <td class="codeline">  // But that's extremely uncommon.</td>
    <td class="lineNumber">968</td>
    <td class="codeline">  // But that's extremely uncommon.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">969</td>
    <td class="codeline">  if (BB->succ_size() != 2 || ViableSuccs.size() != 2)</td>
    <td class="lineNumber">969</td>
    <td class="codeline">  if (BB->succ_size() != 2 || ViableSuccs.size() != 2)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">970</td>
    <td class="codeline">    return false;</td>
    <td class="lineNumber">970</td>
    <td class="codeline">    return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">971</td>
    <td class="codeline"></td>
    <td class="lineNumber">971</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">972</td>
    <td class="codeline">  SmallPtrSet<const MachineBasicBlock *, 2> Successors(BB->succ_begin(),</td>
    <td class="lineNumber">972</td>
    <td class="codeline">  SmallPtrSet<const MachineBasicBlock *, 2> Successors(BB->succ_begin(),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">973</td>
    <td class="codeline">                                                       BB->succ_end());</td>
    <td class="lineNumber">973</td>
    <td class="codeline">                                                       BB->succ_end());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">974</td>
    <td class="codeline">  // To avoid reviewing the same predecessors twice.</td>
    <td class="lineNumber">974</td>
    <td class="codeline">  // To avoid reviewing the same predecessors twice.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">975</td>
    <td class="codeline">  SmallPtrSet<const MachineBasicBlock *, 8> SeenPreds;</td>
    <td class="lineNumber">975</td>
    <td class="codeline">  SmallPtrSet<const MachineBasicBlock *, 8> SeenPreds;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">976</td>
    <td class="codeline"></td>
    <td class="lineNumber">976</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">977</td>
    <td class="codeline">  for (MachineBasicBlock *Succ : ViableSuccs) {</td>
    <td class="lineNumber">977</td>
    <td class="codeline">  for (MachineBasicBlock *Succ : ViableSuccs) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">978</td>
    <td class="codeline">    int PredCount = 0;</td>
    <td class="lineNumber">978</td>
    <td class="codeline">    int PredCount = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">979</td>
    <td class="codeline">    for (auto *SuccPred : Succ->predecessors()) {</td>
    <td class="lineNumber">979</td>
    <td class="codeline">    for (auto *SuccPred : Succ->predecessors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">980</td>
    <td class="codeline">      // Allow triangle successors, but don't count them.</td>
    <td class="lineNumber">980</td>
    <td class="codeline">      // Allow triangle successors, but don't count them.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">981</td>
    <td class="codeline">      if (Successors.count(SuccPred)) {</td>
    <td class="lineNumber">981</td>
    <td class="codeline">      if (Successors.count(SuccPred)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">982</td>
    <td class="codeline">        // Make sure that it is actually a triangle.</td>
    <td class="lineNumber">982</td>
    <td class="codeline">        // Make sure that it is actually a triangle.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">983</td>
    <td class="codeline">        for (MachineBasicBlock *CheckSucc : SuccPred->successors())</td>
    <td class="lineNumber">983</td>
    <td class="codeline">        for (MachineBasicBlock *CheckSucc : SuccPred->successors())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">984</td>
    <td class="codeline">          if (!Successors.count(CheckSucc))</td>
    <td class="lineNumber">984</td>
    <td class="codeline">          if (!Successors.count(CheckSucc))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">985</td>
    <td class="codeline">            return false;</td>
    <td class="lineNumber">985</td>
    <td class="codeline">            return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">986</td>
    <td class="codeline">        continue;</td>
    <td class="lineNumber">986</td>
    <td class="codeline">        continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">987</td>
    <td class="codeline">      }</td>
    <td class="lineNumber">987</td>
    <td class="codeline">      }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">988</td>
    <td class="codeline">      const BlockChain *PredChain = BlockToChain[SuccPred];</td>
    <td class="lineNumber">988</td>
    <td class="codeline">      const BlockChain *PredChain = BlockToChain[SuccPred];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">989</td>
    <td class="codeline">      if (SuccPred == BB || (BlockFilter && !BlockFilter->count(SuccPred)) ||</td>
    <td class="lineNumber">989</td>
    <td class="codeline">      if (SuccPred == BB || (BlockFilter && !BlockFilter->count(SuccPred)) ||</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">990</td>
    <td class="codeline">          PredChain == &Chain || PredChain == BlockToChain[Succ])</td>
    <td class="lineNumber">990</td>
    <td class="codeline">          PredChain == &Chain || PredChain == BlockToChain[Succ])</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">991</td>
    <td class="codeline">        continue;</td>
    <td class="lineNumber">991</td>
    <td class="codeline">        continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">992</td>
    <td class="codeline">      ++PredCount;</td>
    <td class="lineNumber">992</td>
    <td class="codeline">      ++PredCount;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">993</td>
    <td class="codeline">      // Perform the successor check only once.</td>
    <td class="lineNumber">993</td>
    <td class="codeline">      // Perform the successor check only once.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">994</td>
    <td class="codeline">      if (!SeenPreds.insert(SuccPred).second)</td>
    <td class="lineNumber">994</td>
    <td class="codeline">      if (!SeenPreds.insert(SuccPred).second)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">995</td>
    <td class="codeline">        continue;</td>
    <td class="lineNumber">995</td>
    <td class="codeline">        continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">996</td>
    <td class="codeline">      if (!hasSameSuccessors(*SuccPred, Successors))</td>
    <td class="lineNumber">996</td>
    <td class="codeline">      if (!hasSameSuccessors(*SuccPred, Successors))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">997</td>
    <td class="codeline">        return false;</td>
    <td class="lineNumber">997</td>
    <td class="codeline">        return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">998</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">998</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">999</td>
    <td class="codeline">    // If one of the successors has only BB as a predecessor, it is not a</td>
    <td class="lineNumber">999</td>
    <td class="codeline">    // If one of the successors has only BB as a predecessor, it is not a</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1000</td>
    <td class="codeline">    // trellis.</td>
    <td class="lineNumber">1000</td>
    <td class="codeline">    // trellis.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1001</td>
    <td class="codeline">    if (PredCount < 1)</td>
    <td class="lineNumber">1001</td>
    <td class="codeline">    if (PredCount < 1)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1002</td>
    <td class="codeline">      return false;</td>
    <td class="lineNumber">1002</td>
    <td class="codeline">      return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1003</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">1003</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1004</td>
    <td class="codeline">  return true;</td>
    <td class="lineNumber">1004</td>
    <td class="codeline">  return true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1005</td>
    <td class="codeline">}</td>
    <td class="lineNumber">1005</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1006</td>
    <td class="codeline"></td>
    <td class="lineNumber">1006</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1007</td>
    <td class="codeline">/// Pick the highest total weight pair of edges that can both be laid out.</td>
    <td class="lineNumber">1007</td>
    <td class="codeline">/// Pick the highest total weight pair of edges that can both be laid out.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1008</td>
    <td class="codeline">/// The edges in \p Edges[0] are assumed to have a different destination than</td>
    <td class="lineNumber">1008</td>
    <td class="codeline">/// The edges in \p Edges[0] are assumed to have a different destination than</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1009</td>
    <td class="codeline">/// the edges in \p Edges[1]. Simple counting shows that the best pair is either</td>
    <td class="lineNumber">1009</td>
    <td class="codeline">/// the edges in \p Edges[1]. Simple counting shows that the best pair is either</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1010</td>
    <td class="codeline">/// the individual highest weight edges to the 2 different destinations, or in</td>
    <td class="lineNumber">1010</td>
    <td class="codeline">/// the individual highest weight edges to the 2 different destinations, or in</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1011</td>
    <td class="codeline">/// case of a conflict, one of them should be replaced with a 2nd best edge.</td>
    <td class="lineNumber">1011</td>
    <td class="codeline">/// case of a conflict, one of them should be replaced with a 2nd best edge.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1012</td>
    <td class="codeline">std::pair<MachineBlockPlacement::WeightedEdge,</td>
    <td class="lineNumber">1012</td>
    <td class="codeline">std::pair<MachineBlockPlacement::WeightedEdge,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1013</td>
    <td class="codeline">          MachineBlockPlacement::WeightedEdge></td>
    <td class="lineNumber">1013</td>
    <td class="codeline">          MachineBlockPlacement::WeightedEdge></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1014</td>
    <td class="codeline">MachineBlockPlacement::getBestNonConflictingEdges(</td>
    <td class="lineNumber">1014</td>
    <td class="codeline">MachineBlockPlacement::getBestNonConflictingEdges(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1015</td>
    <td class="codeline">    const MachineBasicBlock *BB,</td>
    <td class="lineNumber">1015</td>
    <td class="codeline">    const MachineBasicBlock *BB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1016</td>
    <td class="codeline">    MutableArrayRef<SmallVector<MachineBlockPlacement::WeightedEdge, 8>></td>
    <td class="lineNumber">1016</td>
    <td class="codeline">    MutableArrayRef<SmallVector<MachineBlockPlacement::WeightedEdge, 8>></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1017</td>
    <td class="codeline">        Edges) {</td>
    <td class="lineNumber">1017</td>
    <td class="codeline">        Edges) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1018</td>
    <td class="codeline">  // Sort the edges, and then for each successor, find the best incoming</td>
    <td class="lineNumber">1018</td>
    <td class="codeline">  // Sort the edges, and then for each successor, find the best incoming</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1019</td>
    <td class="codeline">  // predecessor. If the best incoming predecessors aren't the same,</td>
    <td class="lineNumber">1019</td>
    <td class="codeline">  // predecessor. If the best incoming predecessors aren't the same,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1020</td>
    <td class="codeline">  // then that is clearly the best layout. If there is a conflict, one of the</td>
    <td class="lineNumber">1020</td>
    <td class="codeline">  // then that is clearly the best layout. If there is a conflict, one of the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1021</td>
    <td class="codeline">  // successors will have to fallthrough from the second best predecessor. We</td>
    <td class="lineNumber">1021</td>
    <td class="codeline">  // successors will have to fallthrough from the second best predecessor. We</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1022</td>
    <td class="codeline">  // compare which combination is better overall.</td>
    <td class="lineNumber">1022</td>
    <td class="codeline">  // compare which combination is better overall.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1023</td>
    <td class="codeline"></td>
    <td class="lineNumber">1023</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1024</td>
    <td class="codeline">  // Sort for highest frequency.</td>
    <td class="lineNumber">1024</td>
    <td class="codeline">  // Sort for highest frequency.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1025</td>
    <td class="codeline">  auto Cmp = [](WeightedEdge A, WeightedEdge B) { return A.Weight > B.Weight; };</td>
    <td class="lineNumber">1025</td>
    <td class="codeline">  auto Cmp = [](WeightedEdge A, WeightedEdge B) { return A.Weight > B.Weight; };</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1026</td>
    <td class="codeline"></td>
    <td class="lineNumber">1026</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1027</td>
    <td class="codeline">  llvm::stable_sort(Edges[0], Cmp);</td>
    <td class="lineNumber">1027</td>
    <td class="codeline">  llvm::stable_sort(Edges[0], Cmp);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1028</td>
    <td class="codeline">  llvm::stable_sort(Edges[1], Cmp);</td>
    <td class="lineNumber">1028</td>
    <td class="codeline">  llvm::stable_sort(Edges[1], Cmp);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1029</td>
    <td class="codeline">  auto BestA = Edges[0].begin();</td>
    <td class="lineNumber">1029</td>
    <td class="codeline">  auto BestA = Edges[0].begin();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1030</td>
    <td class="codeline">  auto BestB = Edges[1].begin();</td>
    <td class="lineNumber">1030</td>
    <td class="codeline">  auto BestB = Edges[1].begin();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1031</td>
    <td class="codeline">  // Arrange for the correct answer to be in BestA and BestB</td>
    <td class="lineNumber">1031</td>
    <td class="codeline">  // Arrange for the correct answer to be in BestA and BestB</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1032</td>
    <td class="codeline">  // If the 2 best edges don't conflict, the answer is already there.</td>
    <td class="lineNumber">1032</td>
    <td class="codeline">  // If the 2 best edges don't conflict, the answer is already there.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1033</td>
    <td class="codeline">  if (BestA->Src == BestB->Src) {</td>
    <td class="lineNumber">1033</td>
    <td class="codeline">  if (BestA->Src == BestB->Src) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1034</td>
    <td class="codeline">    // Compare the total fallthrough of (Best + Second Best) for both pairs</td>
    <td class="lineNumber">1034</td>
    <td class="codeline">    // Compare the total fallthrough of (Best + Second Best) for both pairs</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1035</td>
    <td class="codeline">    auto SecondBestA = std::next(BestA);</td>
    <td class="lineNumber">1035</td>
    <td class="codeline">    auto SecondBestA = std::next(BestA);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1036</td>
    <td class="codeline">    auto SecondBestB = std::next(BestB);</td>
    <td class="lineNumber">1036</td>
    <td class="codeline">    auto SecondBestB = std::next(BestB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1037</td>
    <td class="codeline">    BlockFrequency BestAScore = BestA->Weight + SecondBestB->Weight;</td>
    <td class="lineNumber">1037</td>
    <td class="codeline">    BlockFrequency BestAScore = BestA->Weight + SecondBestB->Weight;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1038</td>
    <td class="codeline">    BlockFrequency BestBScore = BestB->Weight + SecondBestA->Weight;</td>
    <td class="lineNumber">1038</td>
    <td class="codeline">    BlockFrequency BestBScore = BestB->Weight + SecondBestA->Weight;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1039</td>
    <td class="codeline">    if (BestAScore < BestBScore)</td>
    <td class="lineNumber">1039</td>
    <td class="codeline">    if (BestAScore < BestBScore)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1040</td>
    <td class="codeline">      BestA = SecondBestA;</td>
    <td class="lineNumber">1040</td>
    <td class="codeline">      BestA = SecondBestA;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1041</td>
    <td class="codeline">    else</td>
    <td class="lineNumber">1041</td>
    <td class="codeline">    else</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1042</td>
    <td class="codeline">      BestB = SecondBestB;</td>
    <td class="lineNumber">1042</td>
    <td class="codeline">      BestB = SecondBestB;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1043</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">1043</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1044</td>
    <td class="codeline">  // Arrange for the BB edge to be in BestA if it exists.</td>
    <td class="lineNumber">1044</td>
    <td class="codeline">  // Arrange for the BB edge to be in BestA if it exists.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1045</td>
    <td class="codeline">  if (BestB->Src == BB)</td>
    <td class="lineNumber">1045</td>
    <td class="codeline">  if (BestB->Src == BB)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1046</td>
    <td class="codeline">    std::swap(BestA, BestB);</td>
    <td class="lineNumber">1046</td>
    <td class="codeline">    std::swap(BestA, BestB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1047</td>
    <td class="codeline">  return std::make_pair(*BestA, *BestB);</td>
    <td class="lineNumber">1047</td>
    <td class="codeline">  return std::make_pair(*BestA, *BestB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1048</td>
    <td class="codeline">}</td>
    <td class="lineNumber">1048</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1049</td>
    <td class="codeline"></td>
    <td class="lineNumber">1049</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1050</td>
    <td class="codeline">/// Get the best successor from \p BB based on \p BB being part of a trellis.</td>
    <td class="lineNumber">1050</td>
    <td class="codeline">/// Get the best successor from \p BB based on \p BB being part of a trellis.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1051</td>
    <td class="codeline">/// We only handle trellises with 2 successors, so the algorithm is</td>
    <td class="lineNumber">1051</td>
    <td class="codeline">/// We only handle trellises with 2 successors, so the algorithm is</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1052</td>
    <td class="codeline">/// straightforward: Find the best pair of edges that don't conflict. We find</td>
    <td class="lineNumber">1052</td>
    <td class="codeline">/// straightforward: Find the best pair of edges that don't conflict. We find</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1053</td>
    <td class="codeline">/// the best incoming edge for each successor in the trellis. If those conflict,</td>
    <td class="lineNumber">1053</td>
    <td class="codeline">/// the best incoming edge for each successor in the trellis. If those conflict,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1054</td>
    <td class="codeline">/// we consider which of them should be replaced with the second best.</td>
    <td class="lineNumber">1054</td>
    <td class="codeline">/// we consider which of them should be replaced with the second best.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1055</td>
    <td class="codeline">/// Upon return the two best edges will be in \p BestEdges. If one of the edges</td>
    <td class="lineNumber">1055</td>
    <td class="codeline">/// Upon return the two best edges will be in \p BestEdges. If one of the edges</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1056</td>
    <td class="codeline">/// comes from \p BB, it will be in \p BestEdges[0]</td>
    <td class="lineNumber">1056</td>
    <td class="codeline">/// comes from \p BB, it will be in \p BestEdges[0]</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1057</td>
    <td class="codeline">MachineBlockPlacement::BlockAndTailDupResult</td>
    <td class="lineNumber">1057</td>
    <td class="codeline">MachineBlockPlacement::BlockAndTailDupResult</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1058</td>
    <td class="codeline">MachineBlockPlacement::getBestTrellisSuccessor(</td>
    <td class="lineNumber">1058</td>
    <td class="codeline">MachineBlockPlacement::getBestTrellisSuccessor(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1059</td>
    <td class="codeline">    const MachineBasicBlock *BB,</td>
    <td class="lineNumber">1059</td>
    <td class="codeline">    const MachineBasicBlock *BB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1060</td>
    <td class="codeline">    const SmallVectorImpl<MachineBasicBlock *> &ViableSuccs,</td>
    <td class="lineNumber">1060</td>
    <td class="codeline">    const SmallVectorImpl<MachineBasicBlock *> &ViableSuccs,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1061</td>
    <td class="codeline">    BranchProbability AdjustedSumProb, const BlockChain &Chain,</td>
    <td class="lineNumber">1061</td>
    <td class="codeline">    BranchProbability AdjustedSumProb, const BlockChain &Chain,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1062</td>
    <td class="codeline">    const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">1062</td>
    <td class="codeline">    const BlockFilterSet *BlockFilter) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1063</td>
    <td class="codeline"></td>
    <td class="lineNumber">1063</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1064</td>
    <td class="codeline">  BlockAndTailDupResult Result = {nullptr, false};</td>
    <td class="lineNumber">1064</td>
    <td class="codeline">  BlockAndTailDupResult Result = {nullptr, false};</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1065</td>
    <td class="codeline">  SmallPtrSet<const MachineBasicBlock *, 4> Successors(BB->succ_begin(),</td>
    <td class="lineNumber">1065</td>
    <td class="codeline">  SmallPtrSet<const MachineBasicBlock *, 4> Successors(BB->succ_begin(),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1066</td>
    <td class="codeline">                                                       BB->succ_end());</td>
    <td class="lineNumber">1066</td>
    <td class="codeline">                                                       BB->succ_end());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1067</td>
    <td class="codeline"></td>
    <td class="lineNumber">1067</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1068</td>
    <td class="codeline">  // We assume size 2 because it's common. For general n, we would have to do</td>
    <td class="lineNumber">1068</td>
    <td class="codeline">  // We assume size 2 because it's common. For general n, we would have to do</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1069</td>
    <td class="codeline">  // the Hungarian algorithm, but it's not worth the complexity because more</td>
    <td class="lineNumber">1069</td>
    <td class="codeline">  // the Hungarian algorithm, but it's not worth the complexity because more</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1070</td>
    <td class="codeline">  // than 2 successors is fairly uncommon, and a trellis even more so.</td>
    <td class="lineNumber">1070</td>
    <td class="codeline">  // than 2 successors is fairly uncommon, and a trellis even more so.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1071</td>
    <td class="codeline">  if (Successors.size() != 2 || ViableSuccs.size() != 2)</td>
    <td class="lineNumber">1071</td>
    <td class="codeline">  if (Successors.size() != 2 || ViableSuccs.size() != 2)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1072</td>
    <td class="codeline">    return Result;</td>
    <td class="lineNumber">1072</td>
    <td class="codeline">    return Result;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1073</td>
    <td class="codeline"></td>
    <td class="lineNumber">1073</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1074</td>
    <td class="codeline">  // Collect the edge frequencies of all edges that form the trellis.</td>
    <td class="lineNumber">1074</td>
    <td class="codeline">  // Collect the edge frequencies of all edges that form the trellis.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1075</td>
    <td class="codeline">  SmallVector<WeightedEdge, 8> Edges[2];</td>
    <td class="lineNumber">1075</td>
    <td class="codeline">  SmallVector<WeightedEdge, 8> Edges[2];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1076</td>
    <td class="codeline">  int SuccIndex = 0;</td>
    <td class="lineNumber">1076</td>
    <td class="codeline">  int SuccIndex = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1077</td>
    <td class="codeline">  for (auto *Succ : ViableSuccs) {</td>
    <td class="lineNumber">1077</td>
    <td class="codeline">  for (auto *Succ : ViableSuccs) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1078</td>
    <td class="codeline">    for (MachineBasicBlock *SuccPred : Succ->predecessors()) {</td>
    <td class="lineNumber">1078</td>
    <td class="codeline">    for (MachineBasicBlock *SuccPred : Succ->predecessors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1079</td>
    <td class="codeline">      // Skip any placed predecessors that are not BB</td>
    <td class="lineNumber">1079</td>
    <td class="codeline">      // Skip any placed predecessors that are not BB</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1080</td>
    <td class="codeline">      if (SuccPred != BB)</td>
    <td class="lineNumber">1080</td>
    <td class="codeline">      if (SuccPred != BB)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1081</td>
    <td class="codeline">        if ((BlockFilter && !BlockFilter->count(SuccPred)) ||</td>
    <td class="lineNumber">1081</td>
    <td class="codeline">        if ((BlockFilter && !BlockFilter->count(SuccPred)) ||</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1082</td>
    <td class="codeline">            BlockToChain[SuccPred] == &Chain ||</td>
    <td class="lineNumber">1082</td>
    <td class="codeline">            BlockToChain[SuccPred] == &Chain ||</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1083</td>
    <td class="codeline">            BlockToChain[SuccPred] == BlockToChain[Succ])</td>
    <td class="lineNumber">1083</td>
    <td class="codeline">            BlockToChain[SuccPred] == BlockToChain[Succ])</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1084</td>
    <td class="codeline">          continue;</td>
    <td class="lineNumber">1084</td>
    <td class="codeline">          continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1085</td>
    <td class="codeline">      BlockFrequency EdgeFreq = MBFI->getBlockFreq(SuccPred) *</td>
    <td class="lineNumber">1085</td>
    <td class="codeline">      BlockFrequency EdgeFreq = MBFI->getBlockFreq(SuccPred) *</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1086</td>
    <td class="codeline">                                MBPI->getEdgeProbability(SuccPred, Succ);</td>
    <td class="lineNumber">1086</td>
    <td class="codeline">                                MBPI->getEdgeProbability(SuccPred, Succ);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1087</td>
    <td class="codeline">      Edges[SuccIndex].push_back({EdgeFreq, SuccPred, Succ});</td>
    <td class="lineNumber">1087</td>
    <td class="codeline">      Edges[SuccIndex].push_back({EdgeFreq, SuccPred, Succ});</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1088</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">1088</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1089</td>
    <td class="codeline">    ++SuccIndex;</td>
    <td class="lineNumber">1089</td>
    <td class="codeline">    ++SuccIndex;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1090</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">1090</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1091</td>
    <td class="codeline"></td>
    <td class="lineNumber">1091</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1092</td>
    <td class="codeline">  // Pick the best combination of 2 edges from all the edges in the trellis.</td>
    <td class="lineNumber">1092</td>
    <td class="codeline">  // Pick the best combination of 2 edges from all the edges in the trellis.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1093</td>
    <td class="codeline">  WeightedEdge BestA, BestB;</td>
    <td class="lineNumber">1093</td>
    <td class="codeline">  WeightedEdge BestA, BestB;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1094</td>
    <td class="codeline">  std::tie(BestA, BestB) = getBestNonConflictingEdges(BB, Edges);</td>
    <td class="lineNumber">1094</td>
    <td class="codeline">  std::tie(BestA, BestB) = getBestNonConflictingEdges(BB, Edges);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1095</td>
    <td class="codeline"></td>
    <td class="lineNumber">1095</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1096</td>
    <td class="codeline">  if (BestA.Src != BB) {</td>
    <td class="lineNumber">1096</td>
    <td class="codeline">  if (BestA.Src != BB) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1097</td>
    <td class="codeline">    // If we have a trellis, and BB doesn't have the best fallthrough edges,</td>
    <td class="lineNumber">1097</td>
    <td class="codeline">    // If we have a trellis, and BB doesn't have the best fallthrough edges,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1098</td>
    <td class="codeline">    // we shouldn't choose any successor. We've already looked and there's a</td>
    <td class="lineNumber">1098</td>
    <td class="codeline">    // we shouldn't choose any successor. We've already looked and there's a</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1099</td>
    <td class="codeline">    // better fallthrough edge for all the successors.</td>
    <td class="lineNumber">1099</td>
    <td class="codeline">    // better fallthrough edge for all the successors.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1100</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "Trellis, but not one of the chosen edges.\n");</td>
    <td class="lineNumber">1100</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "Trellis, but not one of the chosen edges.\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1101</td>
    <td class="codeline">    return Result;</td>
    <td class="lineNumber">1101</td>
    <td class="codeline">    return Result;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1102</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">1102</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1103</td>
    <td class="codeline"></td>
    <td class="lineNumber">1103</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1104</td>
    <td class="codeline">  // Did we pick the triangle edge? If tail-duplication is profitable, do</td>
    <td class="lineNumber">1104</td>
    <td class="codeline">  // Did we pick the triangle edge? If tail-duplication is profitable, do</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1105</td>
    <td class="codeline">  // that instead. Otherwise merge the triangle edge now while we know it is</td>
    <td class="lineNumber">1105</td>
    <td class="codeline">  // that instead. Otherwise merge the triangle edge now while we know it is</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1106</td>
    <td class="codeline">  // optimal.</td>
    <td class="lineNumber">1106</td>
    <td class="codeline">  // optimal.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1107</td>
    <td class="codeline">  if (BestA.Dest == BestB.Src) {</td>
    <td class="lineNumber">1107</td>
    <td class="codeline">  if (BestA.Dest == BestB.Src) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1108</td>
    <td class="codeline">    // The edges are BB->Succ1->Succ2, and we're looking to see if BB->Succ2</td>
    <td class="lineNumber">1108</td>
    <td class="codeline">    // The edges are BB->Succ1->Succ2, and we're looking to see if BB->Succ2</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1109</td>
    <td class="codeline">    // would be better.</td>
    <td class="lineNumber">1109</td>
    <td class="codeline">    // would be better.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1110</td>
    <td class="codeline">    MachineBasicBlock *Succ1 = BestA.Dest;</td>
    <td class="lineNumber">1110</td>
    <td class="codeline">    MachineBasicBlock *Succ1 = BestA.Dest;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1111</td>
    <td class="codeline">    MachineBasicBlock *Succ2 = BestB.Dest;</td>
    <td class="lineNumber">1111</td>
    <td class="codeline">    MachineBasicBlock *Succ2 = BestB.Dest;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1112</td>
    <td class="codeline">    // Check to see if tail-duplication would be profitable.</td>
    <td class="lineNumber">1112</td>
    <td class="codeline">    // Check to see if tail-duplication would be profitable.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1113</td>
    <td class="codeline">    if (allowTailDupPlacement() && shouldTailDuplicate(Succ2) &&</td>
    <td class="lineNumber">1113</td>
    <td class="codeline">    if (allowTailDupPlacement() && shouldTailDuplicate(Succ2) &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1114</td>
    <td class="codeline">        canTailDuplicateUnplacedPreds(BB, Succ2, Chain, BlockFilter) &&</td>
    <td class="lineNumber">1114</td>
    <td class="codeline">        canTailDuplicateUnplacedPreds(BB, Succ2, Chain, BlockFilter) &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1115</td>
    <td class="codeline">        isProfitableToTailDup(BB, Succ2, MBPI->getEdgeProbability(BB, Succ1),</td>
    <td class="lineNumber">1115</td>
    <td class="codeline">        isProfitableToTailDup(BB, Succ2, MBPI->getEdgeProbability(BB, Succ1),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1116</td>
    <td class="codeline">                              Chain, BlockFilter)) {</td>
    <td class="lineNumber">1116</td>
    <td class="codeline">                              Chain, BlockFilter)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1117</td>
    <td class="codeline">      LLVM_DEBUG(BranchProbability Succ2Prob = getAdjustedProbability(</td>
    <td class="lineNumber">1117</td>
    <td class="codeline">      LLVM_DEBUG(BranchProbability Succ2Prob = getAdjustedProbability(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1118</td>
    <td class="codeline">                     MBPI->getEdgeProbability(BB, Succ2), AdjustedSumProb);</td>
    <td class="lineNumber">1118</td>
    <td class="codeline">                     MBPI->getEdgeProbability(BB, Succ2), AdjustedSumProb);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1119</td>
    <td class="codeline">                 dbgs() << "    Selected: " << getBlockName(Succ2)</td>
    <td class="lineNumber">1119</td>
    <td class="codeline">                 dbgs() << "    Selected: " << getBlockName(Succ2)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1120</td>
    <td class="codeline">                        << ", probability: " << Succ2Prob</td>
    <td class="lineNumber">1120</td>
    <td class="codeline">                        << ", probability: " << Succ2Prob</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1121</td>
    <td class="codeline">                        << " (Tail Duplicate)\n");</td>
    <td class="lineNumber">1121</td>
    <td class="codeline">                        << " (Tail Duplicate)\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1122</td>
    <td class="codeline">      Result.BB = Succ2;</td>
    <td class="lineNumber">1122</td>
    <td class="codeline">      Result.BB = Succ2;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1123</td>
    <td class="codeline">      Result.ShouldTailDup = true;</td>
    <td class="lineNumber">1123</td>
    <td class="codeline">      Result.ShouldTailDup = true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1124</td>
    <td class="codeline">      return Result;</td>
    <td class="lineNumber">1124</td>
    <td class="codeline">      return Result;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1125</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">1125</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1126</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">1126</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1127</td>
    <td class="codeline">  // We have already computed the optimal edge for the other side of the</td>
    <td class="lineNumber">1127</td>
    <td class="codeline">  // We have already computed the optimal edge for the other side of the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1128</td>
    <td class="codeline">  // trellis.</td>
    <td class="lineNumber">1128</td>
    <td class="codeline">  // trellis.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1129</td>
    <td class="codeline">  ComputedEdges[BestB.Src] = { BestB.Dest, false };</td>
    <td class="lineNumber">1129</td>
    <td class="codeline">  ComputedEdges[BestB.Src] = { BestB.Dest, false };</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1130</td>
    <td class="codeline"></td>
    <td class="lineNumber">1130</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1131</td>
    <td class="codeline">  auto TrellisSucc = BestA.Dest;</td>
    <td class="lineNumber">1131</td>
    <td class="codeline">  auto TrellisSucc = BestA.Dest;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1132</td>
    <td class="codeline">  LLVM_DEBUG(BranchProbability SuccProb = getAdjustedProbability(</td>
    <td class="lineNumber">1132</td>
    <td class="codeline">  LLVM_DEBUG(BranchProbability SuccProb = getAdjustedProbability(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1133</td>
    <td class="codeline">                 MBPI->getEdgeProbability(BB, TrellisSucc), AdjustedSumProb);</td>
    <td class="lineNumber">1133</td>
    <td class="codeline">                 MBPI->getEdgeProbability(BB, TrellisSucc), AdjustedSumProb);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1134</td>
    <td class="codeline">             dbgs() << "    Selected: " << getBlockName(TrellisSucc)</td>
    <td class="lineNumber">1134</td>
    <td class="codeline">             dbgs() << "    Selected: " << getBlockName(TrellisSucc)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1135</td>
    <td class="codeline">                    << ", probability: " << SuccProb << " (Trellis)\n");</td>
    <td class="lineNumber">1135</td>
    <td class="codeline">                    << ", probability: " << SuccProb << " (Trellis)\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1136</td>
    <td class="codeline">  Result.BB = TrellisSucc;</td>
    <td class="lineNumber">1136</td>
    <td class="codeline">  Result.BB = TrellisSucc;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1137</td>
    <td class="codeline">  return Result;</td>
    <td class="lineNumber">1137</td>
    <td class="codeline">  return Result;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1138</td>
    <td class="codeline">}</td>
    <td class="lineNumber">1138</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1139</td>
    <td class="codeline"></td>
    <td class="lineNumber">1139</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1140</td>
    <td class="codeline">/// When the option allowTailDupPlacement() is on, this method checks if the</td>
    <td class="lineNumber">1140</td>
    <td class="codeline">/// When the option allowTailDupPlacement() is on, this method checks if the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1141</td>
    <td class="codeline">/// fallthrough candidate block \p Succ (of block \p BB) can be tail-duplicated</td>
    <td class="lineNumber">1141</td>
    <td class="codeline">/// fallthrough candidate block \p Succ (of block \p BB) can be tail-duplicated</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1142</td>
    <td class="codeline">/// into all of its unplaced, unfiltered predecessors, that are not BB.</td>
    <td class="lineNumber">1142</td>
    <td class="codeline">/// into all of its unplaced, unfiltered predecessors, that are not BB.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1143</td>
    <td class="codeline">bool MachineBlockPlacement::canTailDuplicateUnplacedPreds(</td>
    <td class="lineNumber">1143</td>
    <td class="codeline">bool MachineBlockPlacement::canTailDuplicateUnplacedPreds(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1144</td>
    <td class="codeline">    const MachineBasicBlock *BB, MachineBasicBlock *Succ,</td>
    <td class="lineNumber">1144</td>
    <td class="codeline">    const MachineBasicBlock *BB, MachineBasicBlock *Succ,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1145</td>
    <td class="codeline">    const BlockChain &Chain, const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">1145</td>
    <td class="codeline">    const BlockChain &Chain, const BlockFilterSet *BlockFilter) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1146</td>
    <td class="codeline">  if (!shouldTailDuplicate(Succ))</td>
    <td class="lineNumber">1146</td>
    <td class="codeline">  if (!shouldTailDuplicate(Succ))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1147</td>
    <td class="codeline">    return false;</td>
    <td class="lineNumber">1147</td>
    <td class="codeline">    return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1148</td>
    <td class="codeline"></td>
    <td class="lineNumber">1148</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1149</td>
    <td class="codeline">  // The result of canTailDuplicate.</td>
    <td class="lineNumber">1149</td>
    <td class="codeline">  // The result of canTailDuplicate.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1150</td>
    <td class="codeline">  bool Duplicate = true;</td>
    <td class="lineNumber">1150</td>
    <td class="codeline">  bool Duplicate = true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1151</td>
    <td class="codeline">  // Number of possible duplication.</td>
    <td class="lineNumber">1151</td>
    <td class="codeline">  // Number of possible duplication.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1152</td>
    <td class="codeline">  unsigned int NumDup = 0;</td>
    <td class="lineNumber">1152</td>
    <td class="codeline">  unsigned int NumDup = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1153</td>
    <td class="codeline"></td>
    <td class="lineNumber">1153</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1154</td>
    <td class="codeline">  // For CFG checking.</td>
    <td class="lineNumber">1154</td>
    <td class="codeline">  // For CFG checking.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1155</td>
    <td class="codeline">  SmallPtrSet<const MachineBasicBlock *, 4> Successors(BB->succ_begin(),</td>
    <td class="lineNumber">1155</td>
    <td class="codeline">  SmallPtrSet<const MachineBasicBlock *, 4> Successors(BB->succ_begin(),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1156</td>
    <td class="codeline">                                                       BB->succ_end());</td>
    <td class="lineNumber">1156</td>
    <td class="codeline">                                                       BB->succ_end());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1157</td>
    <td class="codeline">  for (MachineBasicBlock *Pred : Succ->predecessors()) {</td>
    <td class="lineNumber">1157</td>
    <td class="codeline">  for (MachineBasicBlock *Pred : Succ->predecessors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1158</td>
    <td class="codeline">    // Make sure all unplaced and unfiltered predecessors can be</td>
    <td class="lineNumber">1158</td>
    <td class="codeline">    // Make sure all unplaced and unfiltered predecessors can be</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1159</td>
    <td class="codeline">    // tail-duplicated into.</td>
    <td class="lineNumber">1159</td>
    <td class="codeline">    // tail-duplicated into.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1160</td>
    <td class="codeline">    // Skip any blocks that are already placed or not in this loop.</td>
    <td class="lineNumber">1160</td>
    <td class="codeline">    // Skip any blocks that are already placed or not in this loop.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1161</td>
    <td class="codeline">    if (Pred == BB || (BlockFilter && !BlockFilter->count(Pred))</td>
    <td class="lineNumber">1161</td>
    <td class="codeline">    if (Pred == BB || (BlockFilter && !BlockFilter->count(Pred))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1162</td>
    <td class="codeline">        || (BlockToChain[Pred] == &Chain && !Succ->succ_empty()))</td>
    <td class="lineNumber">1162</td>
    <td class="codeline">        || (BlockToChain[Pred] == &Chain && !Succ->succ_empty()))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1163</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">1163</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1164</td>
    <td class="codeline">    if (!TailDup.canTailDuplicate(Succ, Pred)) {</td>
    <td class="lineNumber">1164</td>
    <td class="codeline">    if (!TailDup.canTailDuplicate(Succ, Pred)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1165</td>
    <td class="codeline">      if (Successors.size() > 1 && hasSameSuccessors(*Pred, Successors))</td>
    <td class="lineNumber">1165</td>
    <td class="codeline">      if (Successors.size() > 1 && hasSameSuccessors(*Pred, Successors))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1166</td>
    <td class="codeline">        // This will result in a trellis after tail duplication, so we don't</td>
    <td class="lineNumber">1166</td>
    <td class="codeline">        // This will result in a trellis after tail duplication, so we don't</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1167</td>
    <td class="codeline">        // need to copy Succ into this predecessor. In the presence</td>
    <td class="lineNumber">1167</td>
    <td class="codeline">        // need to copy Succ into this predecessor. In the presence</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1168</td>
    <td class="codeline">        // of a trellis tail duplication can continue to be profitable.</td>
    <td class="lineNumber">1168</td>
    <td class="codeline">        // of a trellis tail duplication can continue to be profitable.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1169</td>
    <td class="codeline">        // For example:</td>
    <td class="lineNumber">1169</td>
    <td class="codeline">        // For example:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1170</td>
    <td class="codeline">        // A            A</td>
    <td class="lineNumber">1170</td>
    <td class="codeline">        // A            A</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1171</td>
    <td class="codeline">        // |\           |\</td>
    <td class="lineNumber">1171</td>
    <td class="codeline">        // |\           |\</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1172</td>
    <td class="codeline">        // | \          | \</td>
    <td class="lineNumber">1172</td>
    <td class="codeline">        // | \          | \</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1173</td>
    <td class="codeline">        // |  C         |  C+BB</td>
    <td class="lineNumber">1173</td>
    <td class="codeline">        // |  C         |  C+BB</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1174</td>
    <td class="codeline">        // | /          |  |</td>
    <td class="lineNumber">1174</td>
    <td class="codeline">        // | /          |  |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1175</td>
    <td class="codeline">        // |/           |  |</td>
    <td class="lineNumber">1175</td>
    <td class="codeline">        // |/           |  |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1176</td>
    <td class="codeline">        // BB    =>     BB |</td>
    <td class="lineNumber">1176</td>
    <td class="codeline">        // BB    =>     BB |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1177</td>
    <td class="codeline">        // |\           |\/|</td>
    <td class="lineNumber">1177</td>
    <td class="codeline">        // |\           |\/|</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1178</td>
    <td class="codeline">        // | \          |/\|</td>
    <td class="lineNumber">1178</td>
    <td class="codeline">        // | \          |/\|</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1179</td>
    <td class="codeline">        // |  D         |  D</td>
    <td class="lineNumber">1179</td>
    <td class="codeline">        // |  D         |  D</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1180</td>
    <td class="codeline">        // | /          | /</td>
    <td class="lineNumber">1180</td>
    <td class="codeline">        // | /          | /</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1181</td>
    <td class="codeline">        // |/           |/</td>
    <td class="lineNumber">1181</td>
    <td class="codeline">        // |/           |/</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1182</td>
    <td class="codeline">        // Succ         Succ</td>
    <td class="lineNumber">1182</td>
    <td class="codeline">        // Succ         Succ</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1183</td>
    <td class="codeline">        //</td>
    <td class="lineNumber">1183</td>
    <td class="codeline">        //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1184</td>
    <td class="codeline">        // After BB was duplicated into C, the layout looks like the one on the</td>
    <td class="lineNumber">1184</td>
    <td class="codeline">        // After BB was duplicated into C, the layout looks like the one on the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1185</td>
    <td class="codeline">        // right. BB and C now have the same successors. When considering</td>
    <td class="lineNumber">1185</td>
    <td class="codeline">        // right. BB and C now have the same successors. When considering</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1186</td>
    <td class="codeline">        // whether Succ can be duplicated into all its unplaced predecessors, we</td>
    <td class="lineNumber">1186</td>
    <td class="codeline">        // whether Succ can be duplicated into all its unplaced predecessors, we</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1187</td>
    <td class="codeline">        // ignore C.</td>
    <td class="lineNumber">1187</td>
    <td class="codeline">        // ignore C.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1188</td>
    <td class="codeline">        // We can do this because C already has a profitable fallthrough, namely</td>
    <td class="lineNumber">1188</td>
    <td class="codeline">        // We can do this because C already has a profitable fallthrough, namely</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1189</td>
    <td class="codeline">        // D. TODO(iteratee): ignore sufficiently cold predecessors for</td>
    <td class="lineNumber">1189</td>
    <td class="codeline">        // D. TODO(iteratee): ignore sufficiently cold predecessors for</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1190</td>
    <td class="codeline">        // duplication and for this test.</td>
    <td class="lineNumber">1190</td>
    <td class="codeline">        // duplication and for this test.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1191</td>
    <td class="codeline">        //</td>
    <td class="lineNumber">1191</td>
    <td class="codeline">        //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1192</td>
    <td class="codeline">        // This allows trellises to be laid out in 2 separate chains</td>
    <td class="lineNumber">1192</td>
    <td class="codeline">        // This allows trellises to be laid out in 2 separate chains</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1193</td>
    <td class="codeline">        // (A,B,Succ,...) and later (C,D,...) This is a reasonable heuristic</td>
    <td class="lineNumber">1193</td>
    <td class="codeline">        // (A,B,Succ,...) and later (C,D,...) This is a reasonable heuristic</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1194</td>
    <td class="codeline">        // because it allows the creation of 2 fallthrough paths with links</td>
    <td class="lineNumber">1194</td>
    <td class="codeline">        // because it allows the creation of 2 fallthrough paths with links</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1195</td>
    <td class="codeline">        // between them, and we correctly identify the best layout for these</td>
    <td class="lineNumber">1195</td>
    <td class="codeline">        // between them, and we correctly identify the best layout for these</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1196</td>
    <td class="codeline">        // CFGs. We want to extend trellises that the user created in addition</td>
    <td class="lineNumber">1196</td>
    <td class="codeline">        // CFGs. We want to extend trellises that the user created in addition</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1197</td>
    <td class="codeline">        // to trellises created by tail-duplication, so we just look for the</td>
    <td class="lineNumber">1197</td>
    <td class="codeline">        // to trellises created by tail-duplication, so we just look for the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1198</td>
    <td class="codeline">        // CFG.</td>
    <td class="lineNumber">1198</td>
    <td class="codeline">        // CFG.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1199</td>
    <td class="codeline">        continue;</td>
    <td class="lineNumber">1199</td>
    <td class="codeline">        continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1200</td>
    <td class="codeline">      Duplicate = false;</td>
    <td class="lineNumber">1200</td>
    <td class="codeline">      Duplicate = false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1201</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">1201</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1202</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">1202</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1203</td>
    <td class="codeline">    NumDup++;</td>
    <td class="lineNumber">1203</td>
    <td class="codeline">    NumDup++;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1204</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">1204</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1205</td>
    <td class="codeline"></td>
    <td class="lineNumber">1205</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1206</td>
    <td class="codeline">  // No possible duplication in current filter set.</td>
    <td class="lineNumber">1206</td>
    <td class="codeline">  // No possible duplication in current filter set.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1207</td>
    <td class="codeline">  if (NumDup == 0)</td>
    <td class="lineNumber">1207</td>
    <td class="codeline">  if (NumDup == 0)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1208</td>
    <td class="codeline">    return false;</td>
    <td class="lineNumber">1208</td>
    <td class="codeline">    return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1209</td>
    <td class="codeline"></td>
    <td class="lineNumber">1209</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1210</td>
    <td class="codeline">  // If profile information is available, findDuplicateCandidates can do more</td>
    <td class="lineNumber">1210</td>
    <td class="codeline">  // If profile information is available, findDuplicateCandidates can do more</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1211</td>
    <td class="codeline">  // precise benefit analysis.</td>
    <td class="lineNumber">1211</td>
    <td class="codeline">  // precise benefit analysis.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1212</td>
    <td class="codeline">  if (F->getFunction().hasProfileData())</td>
    <td class="lineNumber">1212</td>
    <td class="codeline">  if (F->getFunction().hasProfileData())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1213</td>
    <td class="codeline">    return true;</td>
    <td class="lineNumber">1213</td>
    <td class="codeline">    return true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1214</td>
    <td class="codeline"></td>
    <td class="lineNumber">1214</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1215</td>
    <td class="codeline">  // This is mainly for function exit BB.</td>
    <td class="lineNumber">1215</td>
    <td class="codeline">  // This is mainly for function exit BB.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1216</td>
    <td class="codeline">  // The integrated tail duplication is really designed for increasing</td>
    <td class="lineNumber">1216</td>
    <td class="codeline">  // The integrated tail duplication is really designed for increasing</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1217</td>
    <td class="codeline">  // fallthrough from predecessors from Succ to its successors. We may need</td>
    <td class="lineNumber">1217</td>
    <td class="codeline">  // fallthrough from predecessors from Succ to its successors. We may need</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1218</td>
    <td class="codeline">  // other machanism to handle different cases.</td>
    <td class="lineNumber">1218</td>
    <td class="codeline">  // other machanism to handle different cases.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1219</td>
    <td class="codeline">  if (Succ->succ_empty())</td>
    <td class="lineNumber">1219</td>
    <td class="codeline">  if (Succ->succ_empty())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1220</td>
    <td class="codeline">    return true;</td>
    <td class="lineNumber">1220</td>
    <td class="codeline">    return true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1221</td>
    <td class="codeline"></td>
    <td class="lineNumber">1221</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1222</td>
    <td class="codeline">  // Plus the already placed predecessor.</td>
    <td class="lineNumber">1222</td>
    <td class="codeline">  // Plus the already placed predecessor.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1223</td>
    <td class="codeline">  NumDup++;</td>
    <td class="lineNumber">1223</td>
    <td class="codeline">  NumDup++;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1224</td>
    <td class="codeline"></td>
    <td class="lineNumber">1224</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1225</td>
    <td class="codeline">  // If the duplication candidate has more unplaced predecessors than</td>
    <td class="lineNumber">1225</td>
    <td class="codeline">  // If the duplication candidate has more unplaced predecessors than</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1226</td>
    <td class="codeline">  // successors, the extra duplication can't bring more fallthrough.</td>
    <td class="lineNumber">1226</td>
    <td class="codeline">  // successors, the extra duplication can't bring more fallthrough.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1227</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">1227</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1228</td>
    <td class="codeline">  //     Pred1 Pred2 Pred3</td>
    <td class="lineNumber">1228</td>
    <td class="codeline">  //     Pred1 Pred2 Pred3</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1229</td>
    <td class="codeline">  //         \   |   /</td>
    <td class="lineNumber">1229</td>
    <td class="codeline">  //         \   |   /</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1230</td>
    <td class="codeline">  //          \  |  /</td>
    <td class="lineNumber">1230</td>
    <td class="codeline">  //          \  |  /</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1231</td>
    <td class="codeline">  //           \ | /</td>
    <td class="lineNumber">1231</td>
    <td class="codeline">  //           \ | /</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1232</td>
    <td class="codeline">  //            Dup</td>
    <td class="lineNumber">1232</td>
    <td class="codeline">  //            Dup</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1233</td>
    <td class="codeline">  //            / \</td>
    <td class="lineNumber">1233</td>
    <td class="codeline">  //            / \</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1234</td>
    <td class="codeline">  //           /   \</td>
    <td class="lineNumber">1234</td>
    <td class="codeline">  //           /   \</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1235</td>
    <td class="codeline">  //       Succ1  Succ2</td>
    <td class="lineNumber">1235</td>
    <td class="codeline">  //       Succ1  Succ2</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1236</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">1236</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1237</td>
    <td class="codeline">  // In this example Dup has 2 successors and 3 predecessors, duplication of Dup</td>
    <td class="lineNumber">1237</td>
    <td class="codeline">  // In this example Dup has 2 successors and 3 predecessors, duplication of Dup</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1238</td>
    <td class="codeline">  // can increase the fallthrough from Pred1 to Succ1 and from Pred2 to Succ2,</td>
    <td class="lineNumber">1238</td>
    <td class="codeline">  // can increase the fallthrough from Pred1 to Succ1 and from Pred2 to Succ2,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1239</td>
    <td class="codeline">  // but the duplication into Pred3 can't increase fallthrough.</td>
    <td class="lineNumber">1239</td>
    <td class="codeline">  // but the duplication into Pred3 can't increase fallthrough.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1240</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">1240</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1241</td>
    <td class="codeline">  // A small number of extra duplication may not hurt too much. We need a better</td>
    <td class="lineNumber">1241</td>
    <td class="codeline">  // A small number of extra duplication may not hurt too much. We need a better</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1242</td>
    <td class="codeline">  // heuristic to handle it.</td>
    <td class="lineNumber">1242</td>
    <td class="codeline">  // heuristic to handle it.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1243</td>
    <td class="codeline">  if ((NumDup > Succ->succ_size()) || !Duplicate)</td>
    <td class="lineNumber">1243</td>
    <td class="codeline">  if ((NumDup > Succ->succ_size()) || !Duplicate)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1244</td>
    <td class="codeline">    return false;</td>
    <td class="lineNumber">1244</td>
    <td class="codeline">    return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1245</td>
    <td class="codeline"></td>
    <td class="lineNumber">1245</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1246</td>
    <td class="codeline">  return true;</td>
    <td class="lineNumber">1246</td>
    <td class="codeline">  return true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1247</td>
    <td class="codeline">}</td>
    <td class="lineNumber">1247</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1248</td>
    <td class="codeline"></td>
    <td class="lineNumber">1248</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1249</td>
    <td class="codeline">/// Find chains of triangles where we believe it would be profitable to</td>
    <td class="lineNumber">1249</td>
    <td class="codeline">/// Find chains of triangles where we believe it would be profitable to</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1250</td>
    <td class="codeline">/// tail-duplicate them all, but a local analysis would not find them.</td>
    <td class="lineNumber">1250</td>
    <td class="codeline">/// tail-duplicate them all, but a local analysis would not find them.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1251</td>
    <td class="codeline">/// There are 3 ways this can be profitable:</td>
    <td class="lineNumber">1251</td>
    <td class="codeline">/// There are 3 ways this can be profitable:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1252</td>
    <td class="codeline">/// 1) The post-dominators marked 50% are actually taken 55% (This shrinks with</td>
    <td class="lineNumber">1252</td>
    <td class="codeline">/// 1) The post-dominators marked 50% are actually taken 55% (This shrinks with</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1253</td>
    <td class="codeline">///    longer chains)</td>
    <td class="lineNumber">1253</td>
    <td class="codeline">///    longer chains)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1254</td>
    <td class="codeline">/// 2) The chains are statically correlated. Branch probabilities have a very</td>
    <td class="lineNumber">1254</td>
    <td class="codeline">/// 2) The chains are statically correlated. Branch probabilities have a very</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1255</td>
    <td class="codeline">///    U-shaped distribution.</td>
    <td class="lineNumber">1255</td>
    <td class="codeline">///    U-shaped distribution.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1256</td>
    <td class="codeline">///    [http://nrs.harvard.edu/urn-3:HUL.InstRepos:24015805]</td>
    <td class="lineNumber">1256</td>
    <td class="codeline">///    [http://nrs.harvard.edu/urn-3:HUL.InstRepos:24015805]</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1257</td>
    <td class="codeline">///    If the branches in a chain are likely to be from the same side of the</td>
    <td class="lineNumber">1257</td>
    <td class="codeline">///    If the branches in a chain are likely to be from the same side of the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1258</td>
    <td class="codeline">///    distribution as their predecessor, but are independent at runtime, this</td>
    <td class="lineNumber">1258</td>
    <td class="codeline">///    distribution as their predecessor, but are independent at runtime, this</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1259</td>
    <td class="codeline">///    transformation is profitable. (Because the cost of being wrong is a small</td>
    <td class="lineNumber">1259</td>
    <td class="codeline">///    transformation is profitable. (Because the cost of being wrong is a small</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1260</td>
    <td class="codeline">///    fixed cost, unlike the standard triangle layout where the cost of being</td>
    <td class="lineNumber">1260</td>
    <td class="codeline">///    fixed cost, unlike the standard triangle layout where the cost of being</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1261</td>
    <td class="codeline">///    wrong scales with the # of triangles.)</td>
    <td class="lineNumber">1261</td>
    <td class="codeline">///    wrong scales with the # of triangles.)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1262</td>
    <td class="codeline">/// 3) The chains are dynamically correlated. If the probability that a previous</td>
    <td class="lineNumber">1262</td>
    <td class="codeline">/// 3) The chains are dynamically correlated. If the probability that a previous</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1263</td>
    <td class="codeline">///    branch was taken positively influences whether the next branch will be</td>
    <td class="lineNumber">1263</td>
    <td class="codeline">///    branch was taken positively influences whether the next branch will be</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1264</td>
    <td class="codeline">///    taken</td>
    <td class="lineNumber">1264</td>
    <td class="codeline">///    taken</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1265</td>
    <td class="codeline">/// We believe that 2 and 3 are common enough to justify the small margin in 1.</td>
    <td class="lineNumber">1265</td>
    <td class="codeline">/// We believe that 2 and 3 are common enough to justify the small margin in 1.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1266</td>
    <td class="codeline">void MachineBlockPlacement::precomputeTriangleChains() {</td>
    <td class="lineNumber">1266</td>
    <td class="codeline">void MachineBlockPlacement::precomputeTriangleChains() {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1267</td>
    <td class="codeline">  struct TriangleChain {</td>
    <td class="lineNumber">1267</td>
    <td class="codeline">  struct TriangleChain {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1268</td>
    <td class="codeline">    std::vector<MachineBasicBlock *> Edges;</td>
    <td class="lineNumber">1268</td>
    <td class="codeline">    std::vector<MachineBasicBlock *> Edges;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1269</td>
    <td class="codeline"></td>
    <td class="lineNumber">1269</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1270</td>
    <td class="codeline">    TriangleChain(MachineBasicBlock *src, MachineBasicBlock *dst)</td>
    <td class="lineNumber">1270</td>
    <td class="codeline">    TriangleChain(MachineBasicBlock *src, MachineBasicBlock *dst)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1271</td>
    <td class="codeline">        : Edges({src, dst}) {}</td>
    <td class="lineNumber">1271</td>
    <td class="codeline">        : Edges({src, dst}) {}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1272</td>
    <td class="codeline"></td>
    <td class="lineNumber">1272</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1273</td>
    <td class="codeline">    void append(MachineBasicBlock *dst) {</td>
    <td class="lineNumber">1273</td>
    <td class="codeline">    void append(MachineBasicBlock *dst) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1274</td>
    <td class="codeline">      assert(getKey()->isSuccessor(dst) &&</td>
    <td class="lineNumber">1274</td>
    <td class="codeline">      assert(getKey()->isSuccessor(dst) &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1275</td>
    <td class="codeline">             "Attempting to append a block that is not a successor.");</td>
    <td class="lineNumber">1275</td>
    <td class="codeline">             "Attempting to append a block that is not a successor.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1276</td>
    <td class="codeline">      Edges.push_back(dst);</td>
    <td class="lineNumber">1276</td>
    <td class="codeline">      Edges.push_back(dst);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1277</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">1277</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1278</td>
    <td class="codeline"></td>
    <td class="lineNumber">1278</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1279</td>
    <td class="codeline">    unsigned count() const { return Edges.size() - 1; }</td>
    <td class="lineNumber">1279</td>
    <td class="codeline">    unsigned count() const { return Edges.size() - 1; }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1280</td>
    <td class="codeline"></td>
    <td class="lineNumber">1280</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1281</td>
    <td class="codeline">    MachineBasicBlock *getKey() const {</td>
    <td class="lineNumber">1281</td>
    <td class="codeline">    MachineBasicBlock *getKey() const {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1282</td>
    <td class="codeline">      return Edges.back();</td>
    <td class="lineNumber">1282</td>
    <td class="codeline">      return Edges.back();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1283</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">1283</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1284</td>
    <td class="codeline">  };</td>
    <td class="lineNumber">1284</td>
    <td class="codeline">  };</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1285</td>
    <td class="codeline"></td>
    <td class="lineNumber">1285</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1286</td>
    <td class="codeline">  if (TriangleChainCount == 0)</td>
    <td class="lineNumber">1286</td>
    <td class="codeline">  if (TriangleChainCount == 0)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1287</td>
    <td class="codeline">    return;</td>
    <td class="lineNumber">1287</td>
    <td class="codeline">    return;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1288</td>
    <td class="codeline"></td>
    <td class="lineNumber">1288</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1289</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "Pre-computing triangle chains.\n");</td>
    <td class="lineNumber">1289</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "Pre-computing triangle chains.\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1290</td>
    <td class="codeline">  // Map from last block to the chain that contains it. This allows us to extend</td>
    <td class="lineNumber">1290</td>
    <td class="codeline">  // Map from last block to the chain that contains it. This allows us to extend</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1291</td>
    <td class="codeline">  // chains as we find new triangles.</td>
    <td class="lineNumber">1291</td>
    <td class="codeline">  // chains as we find new triangles.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1292</td>
    <td class="codeline">  DenseMap<const MachineBasicBlock *, TriangleChain> TriangleChainMap;</td>
    <td class="lineNumber">1292</td>
    <td class="codeline">  DenseMap<const MachineBasicBlock *, TriangleChain> TriangleChainMap;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1293</td>
    <td class="codeline">  for (MachineBasicBlock &BB : *F) {</td>
    <td class="lineNumber">1293</td>
    <td class="codeline">  for (MachineBasicBlock &BB : *F) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1294</td>
    <td class="codeline">    // If BB doesn't have 2 successors, it doesn't start a triangle.</td>
    <td class="lineNumber">1294</td>
    <td class="codeline">    // If BB doesn't have 2 successors, it doesn't start a triangle.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1295</td>
    <td class="codeline">    if (BB.succ_size() != 2)</td>
    <td class="lineNumber">1295</td>
    <td class="codeline">    if (BB.succ_size() != 2)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1296</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">1296</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1297</td>
    <td class="codeline">    MachineBasicBlock *PDom = nullptr;</td>
    <td class="lineNumber">1297</td>
    <td class="codeline">    MachineBasicBlock *PDom = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1298</td>
    <td class="codeline">    for (MachineBasicBlock *Succ : BB.successors()) {</td>
    <td class="lineNumber">1298</td>
    <td class="codeline">    for (MachineBasicBlock *Succ : BB.successors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1299</td>
    <td class="codeline">      if (!MPDT->dominates(Succ, &BB))</td>
    <td class="lineNumber">1299</td>
    <td class="codeline">      if (!MPDT->dominates(Succ, &BB))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1300</td>
    <td class="codeline">        continue;</td>
    <td class="lineNumber">1300</td>
    <td class="codeline">        continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1301</td>
    <td class="codeline">      PDom = Succ;</td>
    <td class="lineNumber">1301</td>
    <td class="codeline">      PDom = Succ;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1302</td>
    <td class="codeline">      break;</td>
    <td class="lineNumber">1302</td>
    <td class="codeline">      break;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1303</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">1303</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1304</td>
    <td class="codeline">    // If BB doesn't have a post-dominating successor, it doesn't form a</td>
    <td class="lineNumber">1304</td>
    <td class="codeline">    // If BB doesn't have a post-dominating successor, it doesn't form a</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1305</td>
    <td class="codeline">    // triangle.</td>
    <td class="lineNumber">1305</td>
    <td class="codeline">    // triangle.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1306</td>
    <td class="codeline">    if (PDom == nullptr)</td>
    <td class="lineNumber">1306</td>
    <td class="codeline">    if (PDom == nullptr)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1307</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">1307</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1308</td>
    <td class="codeline">    // If PDom has a hint that it is low probability, skip this triangle.</td>
    <td class="lineNumber">1308</td>
    <td class="codeline">    // If PDom has a hint that it is low probability, skip this triangle.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1309</td>
    <td class="codeline">    if (MBPI->getEdgeProbability(&BB, PDom) < BranchProbability(50, 100))</td>
    <td class="lineNumber">1309</td>
    <td class="codeline">    if (MBPI->getEdgeProbability(&BB, PDom) < BranchProbability(50, 100))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1310</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">1310</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1311</td>
    <td class="codeline">    // If PDom isn't eligible for duplication, this isn't the kind of triangle</td>
    <td class="lineNumber">1311</td>
    <td class="codeline">    // If PDom isn't eligible for duplication, this isn't the kind of triangle</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1312</td>
    <td class="codeline">    // we're looking for.</td>
    <td class="lineNumber">1312</td>
    <td class="codeline">    // we're looking for.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1313</td>
    <td class="codeline">    if (!shouldTailDuplicate(PDom))</td>
    <td class="lineNumber">1313</td>
    <td class="codeline">    if (!shouldTailDuplicate(PDom))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1314</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">1314</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1315</td>
    <td class="codeline">    bool CanTailDuplicate = true;</td>
    <td class="lineNumber">1315</td>
    <td class="codeline">    bool CanTailDuplicate = true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1316</td>
    <td class="codeline">    // If PDom can't tail-duplicate into it's non-BB predecessors, then this</td>
    <td class="lineNumber">1316</td>
    <td class="codeline">    // If PDom can't tail-duplicate into it's non-BB predecessors, then this</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1317</td>
    <td class="codeline">    // isn't the kind of triangle we're looking for.</td>
    <td class="lineNumber">1317</td>
    <td class="codeline">    // isn't the kind of triangle we're looking for.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1318</td>
    <td class="codeline">    for (MachineBasicBlock* Pred : PDom->predecessors()) {</td>
    <td class="lineNumber">1318</td>
    <td class="codeline">    for (MachineBasicBlock* Pred : PDom->predecessors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1319</td>
    <td class="codeline">      if (Pred == &BB)</td>
    <td class="lineNumber">1319</td>
    <td class="codeline">      if (Pred == &BB)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1320</td>
    <td class="codeline">        continue;</td>
    <td class="lineNumber">1320</td>
    <td class="codeline">        continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1321</td>
    <td class="codeline">      if (!TailDup.canTailDuplicate(PDom, Pred)) {</td>
    <td class="lineNumber">1321</td>
    <td class="codeline">      if (!TailDup.canTailDuplicate(PDom, Pred)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1322</td>
    <td class="codeline">        CanTailDuplicate = false;</td>
    <td class="lineNumber">1322</td>
    <td class="codeline">        CanTailDuplicate = false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1323</td>
    <td class="codeline">        break;</td>
    <td class="lineNumber">1323</td>
    <td class="codeline">        break;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1324</td>
    <td class="codeline">      }</td>
    <td class="lineNumber">1324</td>
    <td class="codeline">      }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1325</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">1325</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1326</td>
    <td class="codeline">    // If we can't tail-duplicate PDom to its predecessors, then skip this</td>
    <td class="lineNumber">1326</td>
    <td class="codeline">    // If we can't tail-duplicate PDom to its predecessors, then skip this</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1327</td>
    <td class="codeline">    // triangle.</td>
    <td class="lineNumber">1327</td>
    <td class="codeline">    // triangle.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1328</td>
    <td class="codeline">    if (!CanTailDuplicate)</td>
    <td class="lineNumber">1328</td>
    <td class="codeline">    if (!CanTailDuplicate)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1329</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">1329</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1330</td>
    <td class="codeline"></td>
    <td class="lineNumber">1330</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1331</td>
    <td class="codeline">    // Now we have an interesting triangle. Insert it if it's not part of an</td>
    <td class="lineNumber">1331</td>
    <td class="codeline">    // Now we have an interesting triangle. Insert it if it's not part of an</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1332</td>
    <td class="codeline">    // existing chain.</td>
    <td class="lineNumber">1332</td>
    <td class="codeline">    // existing chain.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1333</td>
    <td class="codeline">    // Note: This cannot be replaced with a call insert() or emplace() because</td>
    <td class="lineNumber">1333</td>
    <td class="codeline">    // Note: This cannot be replaced with a call insert() or emplace() because</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1334</td>
    <td class="codeline">    // the find key is BB, but the insert/emplace key is PDom.</td>
    <td class="lineNumber">1334</td>
    <td class="codeline">    // the find key is BB, but the insert/emplace key is PDom.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1335</td>
    <td class="codeline">    auto Found = TriangleChainMap.find(&BB);</td>
    <td class="lineNumber">1335</td>
    <td class="codeline">    auto Found = TriangleChainMap.find(&BB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1336</td>
    <td class="codeline">    // If it is, remove the chain from the map, grow it, and put it back in the</td>
    <td class="lineNumber">1336</td>
    <td class="codeline">    // If it is, remove the chain from the map, grow it, and put it back in the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1337</td>
    <td class="codeline">    // map with the end as the new key.</td>
    <td class="lineNumber">1337</td>
    <td class="codeline">    // map with the end as the new key.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1338</td>
    <td class="codeline">    if (Found != TriangleChainMap.end()) {</td>
    <td class="lineNumber">1338</td>
    <td class="codeline">    if (Found != TriangleChainMap.end()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1339</td>
    <td class="codeline">      TriangleChain Chain = std::move(Found->second);</td>
    <td class="lineNumber">1339</td>
    <td class="codeline">      TriangleChain Chain = std::move(Found->second);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1340</td>
    <td class="codeline">      TriangleChainMap.erase(Found);</td>
    <td class="lineNumber">1340</td>
    <td class="codeline">      TriangleChainMap.erase(Found);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1341</td>
    <td class="codeline">      Chain.append(PDom);</td>
    <td class="lineNumber">1341</td>
    <td class="codeline">      Chain.append(PDom);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1342</td>
    <td class="codeline">      TriangleChainMap.insert(std::make_pair(Chain.getKey(), std::move(Chain)));</td>
    <td class="lineNumber">1342</td>
    <td class="codeline">      TriangleChainMap.insert(std::make_pair(Chain.getKey(), std::move(Chain)));</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1343</td>
    <td class="codeline">    } else {</td>
    <td class="lineNumber">1343</td>
    <td class="codeline">    } else {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1344</td>
    <td class="codeline">      auto InsertResult = TriangleChainMap.try_emplace(PDom, &BB, PDom);</td>
    <td class="lineNumber">1344</td>
    <td class="codeline">      auto InsertResult = TriangleChainMap.try_emplace(PDom, &BB, PDom);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1345</td>
    <td class="codeline">      assert(InsertResult.second && "Block seen twice.");</td>
    <td class="lineNumber">1345</td>
    <td class="codeline">      assert(InsertResult.second && "Block seen twice.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1346</td>
    <td class="codeline">      (void)InsertResult;</td>
    <td class="lineNumber">1346</td>
    <td class="codeline">      (void)InsertResult;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1347</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">1347</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1348</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">1348</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1349</td>
    <td class="codeline"></td>
    <td class="lineNumber">1349</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1350</td>
    <td class="codeline">  // Iterating over a DenseMap is safe here, because the only thing in the body</td>
    <td class="lineNumber">1350</td>
    <td class="codeline">  // Iterating over a DenseMap is safe here, because the only thing in the body</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1351</td>
    <td class="codeline">  // of the loop is inserting into another DenseMap (ComputedEdges).</td>
    <td class="lineNumber">1351</td>
    <td class="codeline">  // of the loop is inserting into another DenseMap (ComputedEdges).</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1352</td>
    <td class="codeline">  // ComputedEdges is never iterated, so this doesn't lead to non-determinism.</td>
    <td class="lineNumber">1352</td>
    <td class="codeline">  // ComputedEdges is never iterated, so this doesn't lead to non-determinism.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1353</td>
    <td class="codeline">  for (auto &ChainPair : TriangleChainMap) {</td>
    <td class="lineNumber">1353</td>
    <td class="codeline">  for (auto &ChainPair : TriangleChainMap) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1354</td>
    <td class="codeline">    TriangleChain &Chain = ChainPair.second;</td>
    <td class="lineNumber">1354</td>
    <td class="codeline">    TriangleChain &Chain = ChainPair.second;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1355</td>
    <td class="codeline">    // Benchmarking has shown that due to branch correlation duplicating 2 or</td>
    <td class="lineNumber">1355</td>
    <td class="codeline">    // Benchmarking has shown that due to branch correlation duplicating 2 or</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1356</td>
    <td class="codeline">    // more triangles is profitable, despite the calculations assuming</td>
    <td class="lineNumber">1356</td>
    <td class="codeline">    // more triangles is profitable, despite the calculations assuming</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1357</td>
    <td class="codeline">    // independence.</td>
    <td class="lineNumber">1357</td>
    <td class="codeline">    // independence.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1358</td>
    <td class="codeline">    if (Chain.count() < TriangleChainCount)</td>
    <td class="lineNumber">1358</td>
    <td class="codeline">    if (Chain.count() < TriangleChainCount)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1359</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">1359</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1360</td>
    <td class="codeline">    MachineBasicBlock *dst = Chain.Edges.back();</td>
    <td class="lineNumber">1360</td>
    <td class="codeline">    MachineBasicBlock *dst = Chain.Edges.back();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1361</td>
    <td class="codeline">    Chain.Edges.pop_back();</td>
    <td class="lineNumber">1361</td>
    <td class="codeline">    Chain.Edges.pop_back();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1362</td>
    <td class="codeline">    for (MachineBasicBlock *src : reverse(Chain.Edges)) {</td>
    <td class="lineNumber">1362</td>
    <td class="codeline">    for (MachineBasicBlock *src : reverse(Chain.Edges)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1363</td>
    <td class="codeline">      LLVM_DEBUG(dbgs() << "Marking edge: " << getBlockName(src) << "->"</td>
    <td class="lineNumber">1363</td>
    <td class="codeline">      LLVM_DEBUG(dbgs() << "Marking edge: " << getBlockName(src) << "->"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1364</td>
    <td class="codeline">                        << getBlockName(dst)</td>
    <td class="lineNumber">1364</td>
    <td class="codeline">                        << getBlockName(dst)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1365</td>
    <td class="codeline">                        << " as pre-computed based on triangles.\n");</td>
    <td class="lineNumber">1365</td>
    <td class="codeline">                        << " as pre-computed based on triangles.\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1366</td>
    <td class="codeline"></td>
    <td class="lineNumber">1366</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1367</td>
    <td class="codeline">      auto InsertResult = ComputedEdges.insert({src, {dst, true}});</td>
    <td class="lineNumber">1367</td>
    <td class="codeline">      auto InsertResult = ComputedEdges.insert({src, {dst, true}});</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1368</td>
    <td class="codeline">      assert(InsertResult.second && "Block seen twice.");</td>
    <td class="lineNumber">1368</td>
    <td class="codeline">      assert(InsertResult.second && "Block seen twice.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1369</td>
    <td class="codeline">      (void)InsertResult;</td>
    <td class="lineNumber">1369</td>
    <td class="codeline">      (void)InsertResult;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1370</td>
    <td class="codeline"></td>
    <td class="lineNumber">1370</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1371</td>
    <td class="codeline">      dst = src;</td>
    <td class="lineNumber">1371</td>
    <td class="codeline">      dst = src;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1372</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">1372</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1373</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">1373</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1374</td>
    <td class="codeline">}</td>
    <td class="lineNumber">1374</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1375</td>
    <td class="codeline"></td>
    <td class="lineNumber">1375</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1376</td>
    <td class="codeline">// When profile is not present, return the StaticLikelyProb.</td>
    <td class="lineNumber">1376</td>
    <td class="codeline">// When profile is not present, return the StaticLikelyProb.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1377</td>
    <td class="codeline">// When profile is available, we need to handle the triangle-shape CFG.</td>
    <td class="lineNumber">1377</td>
    <td class="codeline">// When profile is available, we need to handle the triangle-shape CFG.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1378</td>
    <td class="codeline">static BranchProbability getLayoutSuccessorProbThreshold(</td>
    <td class="lineNumber">1378</td>
    <td class="codeline">static BranchProbability getLayoutSuccessorProbThreshold(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1379</td>
    <td class="codeline">      const MachineBasicBlock *BB) {</td>
    <td class="lineNumber">1379</td>
    <td class="codeline">      const MachineBasicBlock *BB) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1380</td>
    <td class="codeline">  if (!BB->getParent()->getFunction().hasProfileData())</td>
    <td class="lineNumber">1380</td>
    <td class="codeline">  if (!BB->getParent()->getFunction().hasProfileData())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1381</td>
    <td class="codeline">    return BranchProbability(StaticLikelyProb, 100);</td>
    <td class="lineNumber">1381</td>
    <td class="codeline">    return BranchProbability(StaticLikelyProb, 100);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1382</td>
    <td class="codeline">  if (BB->succ_size() == 2) {</td>
    <td class="lineNumber">1382</td>
    <td class="codeline">  if (BB->succ_size() == 2) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1383</td>
    <td class="codeline">    const MachineBasicBlock *Succ1 = *BB->succ_begin();</td>
    <td class="lineNumber">1383</td>
    <td class="codeline">    const MachineBasicBlock *Succ1 = *BB->succ_begin();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1384</td>
    <td class="codeline">    const MachineBasicBlock *Succ2 = *(BB->succ_begin() + 1);</td>
    <td class="lineNumber">1384</td>
    <td class="codeline">    const MachineBasicBlock *Succ2 = *(BB->succ_begin() + 1);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1385</td>
    <td class="codeline">    if (Succ1->isSuccessor(Succ2) || Succ2->isSuccessor(Succ1)) {</td>
    <td class="lineNumber">1385</td>
    <td class="codeline">    if (Succ1->isSuccessor(Succ2) || Succ2->isSuccessor(Succ1)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1386</td>
    <td class="codeline">      /* See case 1 below for the cost analysis. For BB->Succ to</td>
    <td class="lineNumber">1386</td>
    <td class="codeline">      /* See case 1 below for the cost analysis. For BB->Succ to</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1387</td>
    <td class="codeline">       * be taken with smaller cost, the following needs to hold:</td>
    <td class="lineNumber">1387</td>
    <td class="codeline">       * be taken with smaller cost, the following needs to hold:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1388</td>
    <td class="codeline">       *   Prob(BB->Succ) > 2 * Prob(BB->Pred)</td>
    <td class="lineNumber">1388</td>
    <td class="codeline">       *   Prob(BB->Succ) > 2 * Prob(BB->Pred)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1389</td>
    <td class="codeline">       *   So the threshold T in the calculation below</td>
    <td class="lineNumber">1389</td>
    <td class="codeline">       *   So the threshold T in the calculation below</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1390</td>
    <td class="codeline">       *   (1-T) * Prob(BB->Succ) > T * Prob(BB->Pred)</td>
    <td class="lineNumber">1390</td>
    <td class="codeline">       *   (1-T) * Prob(BB->Succ) > T * Prob(BB->Pred)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1391</td>
    <td class="codeline">       *   So T / (1 - T) = 2, Yielding T = 2/3</td>
    <td class="lineNumber">1391</td>
    <td class="codeline">       *   So T / (1 - T) = 2, Yielding T = 2/3</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1392</td>
    <td class="codeline">       * Also adding user specified branch bias, we have</td>
    <td class="lineNumber">1392</td>
    <td class="codeline">       * Also adding user specified branch bias, we have</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1393</td>
    <td class="codeline">       *   T = (2/3)*(ProfileLikelyProb/50)</td>
    <td class="lineNumber">1393</td>
    <td class="codeline">       *   T = (2/3)*(ProfileLikelyProb/50)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1394</td>
    <td class="codeline">       *     = (2*ProfileLikelyProb)/150)</td>
    <td class="lineNumber">1394</td>
    <td class="codeline">       *     = (2*ProfileLikelyProb)/150)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1395</td>
    <td class="codeline">       */</td>
    <td class="lineNumber">1395</td>
    <td class="codeline">       */</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1396</td>
    <td class="codeline">      return BranchProbability(2 * ProfileLikelyProb, 150);</td>
    <td class="lineNumber">1396</td>
    <td class="codeline">      return BranchProbability(2 * ProfileLikelyProb, 150);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1397</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">1397</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1398</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">1398</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1399</td>
    <td class="codeline">  return BranchProbability(ProfileLikelyProb, 100);</td>
    <td class="lineNumber">1399</td>
    <td class="codeline">  return BranchProbability(ProfileLikelyProb, 100);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1400</td>
    <td class="codeline">}</td>
    <td class="lineNumber">1400</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1401</td>
    <td class="codeline"></td>
    <td class="lineNumber">1401</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1402</td>
    <td class="codeline">/// Checks to see if the layout candidate block \p Succ has a better layout</td>
    <td class="lineNumber">1402</td>
    <td class="codeline">/// Checks to see if the layout candidate block \p Succ has a better layout</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1403</td>
    <td class="codeline">/// predecessor than \c BB. If yes, returns true.</td>
    <td class="lineNumber">1403</td>
    <td class="codeline">/// predecessor than \c BB. If yes, returns true.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1404</td>
    <td class="codeline">/// \p SuccProb: The probability adjusted for only remaining blocks.</td>
    <td class="lineNumber">1404</td>
    <td class="codeline">/// \p SuccProb: The probability adjusted for only remaining blocks.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1405</td>
    <td class="codeline">///   Only used for logging</td>
    <td class="lineNumber">1405</td>
    <td class="codeline">///   Only used for logging</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1406</td>
    <td class="codeline">/// \p RealSuccProb: The un-adjusted probability.</td>
    <td class="lineNumber">1406</td>
    <td class="codeline">/// \p RealSuccProb: The un-adjusted probability.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1407</td>
    <td class="codeline">/// \p Chain: The chain that BB belongs to and Succ is being considered for.</td>
    <td class="lineNumber">1407</td>
    <td class="codeline">/// \p Chain: The chain that BB belongs to and Succ is being considered for.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1408</td>
    <td class="codeline">/// \p BlockFilter: if non-null, the set of blocks that make up the loop being</td>
    <td class="lineNumber">1408</td>
    <td class="codeline">/// \p BlockFilter: if non-null, the set of blocks that make up the loop being</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1409</td>
    <td class="codeline">///    considered</td>
    <td class="lineNumber">1409</td>
    <td class="codeline">///    considered</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1410</td>
    <td class="codeline">bool MachineBlockPlacement::hasBetterLayoutPredecessor(</td>
    <td class="lineNumber">1410</td>
    <td class="codeline">bool MachineBlockPlacement::hasBetterLayoutPredecessor(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1411</td>
    <td class="codeline">    const MachineBasicBlock *BB, const MachineBasicBlock *Succ,</td>
    <td class="lineNumber">1411</td>
    <td class="codeline">    const MachineBasicBlock *BB, const MachineBasicBlock *Succ,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1412</td>
    <td class="codeline">    const BlockChain &SuccChain, BranchProbability SuccProb,</td>
    <td class="lineNumber">1412</td>
    <td class="codeline">    const BlockChain &SuccChain, BranchProbability SuccProb,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1413</td>
    <td class="codeline">    BranchProbability RealSuccProb, const BlockChain &Chain,</td>
    <td class="lineNumber">1413</td>
    <td class="codeline">    BranchProbability RealSuccProb, const BlockChain &Chain,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1414</td>
    <td class="codeline">    const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">1414</td>
    <td class="codeline">    const BlockFilterSet *BlockFilter) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1415</td>
    <td class="codeline"></td>
    <td class="lineNumber">1415</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1416</td>
    <td class="codeline">  // There isn't a better layout when there are no unscheduled predecessors.</td>
    <td class="lineNumber">1416</td>
    <td class="codeline">  // There isn't a better layout when there are no unscheduled predecessors.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1417</td>
    <td class="codeline">  if (SuccChain.UnscheduledPredecessors == 0)</td>
    <td class="lineNumber">1417</td>
    <td class="codeline">  if (SuccChain.UnscheduledPredecessors == 0)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1418</td>
    <td class="codeline">    return false;</td>
    <td class="lineNumber">1418</td>
    <td class="codeline">    return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1419</td>
    <td class="codeline"></td>
    <td class="lineNumber">1419</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1420</td>
    <td class="codeline">  // There are two basic scenarios here:</td>
    <td class="lineNumber">1420</td>
    <td class="codeline">  // There are two basic scenarios here:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1421</td>
    <td class="codeline">  // -------------------------------------</td>
    <td class="lineNumber">1421</td>
    <td class="codeline">  // -------------------------------------</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1422</td>
    <td class="codeline">  // Case 1: triangular shape CFG (if-then):</td>
    <td class="lineNumber">1422</td>
    <td class="codeline">  // Case 1: triangular shape CFG (if-then):</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1423</td>
    <td class="codeline">  //     BB</td>
    <td class="lineNumber">1423</td>
    <td class="codeline">  //     BB</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1424</td>
    <td class="codeline">  //     | \</td>
    <td class="lineNumber">1424</td>
    <td class="codeline">  //     | \</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1425</td>
    <td class="codeline">  //     |  \</td>
    <td class="lineNumber">1425</td>
    <td class="codeline">  //     |  \</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1426</td>
    <td class="codeline">  //     |   Pred</td>
    <td class="lineNumber">1426</td>
    <td class="codeline">  //     |   Pred</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1427</td>
    <td class="codeline">  //     |   /</td>
    <td class="lineNumber">1427</td>
    <td class="codeline">  //     |   /</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1428</td>
    <td class="codeline">  //     Succ</td>
    <td class="lineNumber">1428</td>
    <td class="codeline">  //     Succ</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1429</td>
    <td class="codeline">  // In this case, we are evaluating whether to select edge -> Succ, e.g.</td>
    <td class="lineNumber">1429</td>
    <td class="codeline">  // In this case, we are evaluating whether to select edge -> Succ, e.g.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1430</td>
    <td class="codeline">  // set Succ as the layout successor of BB. Picking Succ as BB's</td>
    <td class="lineNumber">1430</td>
    <td class="codeline">  // set Succ as the layout successor of BB. Picking Succ as BB's</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1431</td>
    <td class="codeline">  // successor breaks the CFG constraints (FIXME: define these constraints).</td>
    <td class="lineNumber">1431</td>
    <td class="codeline">  // successor breaks the CFG constraints (FIXME: define these constraints).</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1432</td>
    <td class="codeline">  // With this layout, Pred BB</td>
    <td class="lineNumber">1432</td>
    <td class="codeline">  // With this layout, Pred BB</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1433</td>
    <td class="codeline">  // is forced to be outlined, so the overall cost will be cost of the</td>
    <td class="lineNumber">1433</td>
    <td class="codeline">  // is forced to be outlined, so the overall cost will be cost of the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1434</td>
    <td class="codeline">  // branch taken from BB to Pred, plus the cost of back taken branch</td>
    <td class="lineNumber">1434</td>
    <td class="codeline">  // branch taken from BB to Pred, plus the cost of back taken branch</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1435</td>
    <td class="codeline">  // from Pred to Succ, as well as the additional cost associated</td>
    <td class="lineNumber">1435</td>
    <td class="codeline">  // from Pred to Succ, as well as the additional cost associated</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1436</td>
    <td class="codeline">  // with the needed unconditional jump instruction from Pred To Succ.</td>
    <td class="lineNumber">1436</td>
    <td class="codeline">  // with the needed unconditional jump instruction from Pred To Succ.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1437</td>
    <td class="codeline"></td>
    <td class="lineNumber">1437</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1438</td>
    <td class="codeline">  // The cost of the topological order layout is the taken branch cost</td>
    <td class="lineNumber">1438</td>
    <td class="codeline">  // The cost of the topological order layout is the taken branch cost</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1439</td>
    <td class="codeline">  // from BB to Succ, so to make BB->Succ a viable candidate, the following</td>
    <td class="lineNumber">1439</td>
    <td class="codeline">  // from BB to Succ, so to make BB->Succ a viable candidate, the following</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1440</td>
    <td class="codeline">  // must hold:</td>
    <td class="lineNumber">1440</td>
    <td class="codeline">  // must hold:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1441</td>
    <td class="codeline">  //     2 * freq(BB->Pred) * taken_branch_cost + unconditional_jump_cost</td>
    <td class="lineNumber">1441</td>
    <td class="codeline">  //     2 * freq(BB->Pred) * taken_branch_cost + unconditional_jump_cost</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1442</td>
    <td class="codeline">  //      < freq(BB->Succ) *  taken_branch_cost.</td>
    <td class="lineNumber">1442</td>
    <td class="codeline">  //      < freq(BB->Succ) *  taken_branch_cost.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1443</td>
    <td class="codeline">  // Ignoring unconditional jump cost, we get</td>
    <td class="lineNumber">1443</td>
    <td class="codeline">  // Ignoring unconditional jump cost, we get</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1444</td>
    <td class="codeline">  //    freq(BB->Succ) > 2 * freq(BB->Pred), i.e.,</td>
    <td class="lineNumber">1444</td>
    <td class="codeline">  //    freq(BB->Succ) > 2 * freq(BB->Pred), i.e.,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1445</td>
    <td class="codeline">  //    prob(BB->Succ) > 2 * prob(BB->Pred)</td>
    <td class="lineNumber">1445</td>
    <td class="codeline">  //    prob(BB->Succ) > 2 * prob(BB->Pred)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1446</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">1446</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1447</td>
    <td class="codeline">  // When real profile data is available, we can precisely compute the</td>
    <td class="lineNumber">1447</td>
    <td class="codeline">  // When real profile data is available, we can precisely compute the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1448</td>
    <td class="codeline">  // probability threshold that is needed for edge BB->Succ to be considered.</td>
    <td class="lineNumber">1448</td>
    <td class="codeline">  // probability threshold that is needed for edge BB->Succ to be considered.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1449</td>
    <td class="codeline">  // Without profile data, the heuristic requires the branch bias to be</td>
    <td class="lineNumber">1449</td>
    <td class="codeline">  // Without profile data, the heuristic requires the branch bias to be</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1450</td>
    <td class="codeline">  // a lot larger to make sure the signal is very strong (e.g. 80% default).</td>
    <td class="lineNumber">1450</td>
    <td class="codeline">  // a lot larger to make sure the signal is very strong (e.g. 80% default).</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1451</td>
    <td class="codeline">  // -----------------------------------------------------------------</td>
    <td class="lineNumber">1451</td>
    <td class="codeline">  // -----------------------------------------------------------------</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1452</td>
    <td class="codeline">  // Case 2: diamond like CFG (if-then-else):</td>
    <td class="lineNumber">1452</td>
    <td class="codeline">  // Case 2: diamond like CFG (if-then-else):</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1453</td>
    <td class="codeline">  //     S</td>
    <td class="lineNumber">1453</td>
    <td class="codeline">  //     S</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1454</td>
    <td class="codeline">  //    / \</td>
    <td class="lineNumber">1454</td>
    <td class="codeline">  //    / \</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1455</td>
    <td class="codeline">  //   |   \</td>
    <td class="lineNumber">1455</td>
    <td class="codeline">  //   |   \</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1456</td>
    <td class="codeline">  //  BB    Pred</td>
    <td class="lineNumber">1456</td>
    <td class="codeline">  //  BB    Pred</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1457</td>
    <td class="codeline">  //   \    /</td>
    <td class="lineNumber">1457</td>
    <td class="codeline">  //   \    /</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1458</td>
    <td class="codeline">  //    Succ</td>
    <td class="lineNumber">1458</td>
    <td class="codeline">  //    Succ</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1459</td>
    <td class="codeline">  //    ..</td>
    <td class="lineNumber">1459</td>
    <td class="codeline">  //    ..</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1460</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">1460</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1461</td>
    <td class="codeline">  // The current block is BB and edge BB->Succ is now being evaluated.</td>
    <td class="lineNumber">1461</td>
    <td class="codeline">  // The current block is BB and edge BB->Succ is now being evaluated.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1462</td>
    <td class="codeline">  // Note that edge S->BB was previously already selected because</td>
    <td class="lineNumber">1462</td>
    <td class="codeline">  // Note that edge S->BB was previously already selected because</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1463</td>
    <td class="codeline">  // prob(S->BB) > prob(S->Pred).</td>
    <td class="lineNumber">1463</td>
    <td class="codeline">  // prob(S->BB) > prob(S->Pred).</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1464</td>
    <td class="codeline">  // At this point, 2 blocks can be placed after BB: Pred or Succ. If we</td>
    <td class="lineNumber">1464</td>
    <td class="codeline">  // At this point, 2 blocks can be placed after BB: Pred or Succ. If we</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1465</td>
    <td class="codeline">  // choose Pred, we will have a topological ordering as shown on the left</td>
    <td class="lineNumber">1465</td>
    <td class="codeline">  // choose Pred, we will have a topological ordering as shown on the left</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1466</td>
    <td class="codeline">  // in the picture below. If we choose Succ, we have the solution as shown</td>
    <td class="lineNumber">1466</td>
    <td class="codeline">  // in the picture below. If we choose Succ, we have the solution as shown</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1467</td>
    <td class="codeline">  // on the right:</td>
    <td class="lineNumber">1467</td>
    <td class="codeline">  // on the right:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1468</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">1468</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1469</td>
    <td class="codeline">  //   topo-order:</td>
    <td class="lineNumber">1469</td>
    <td class="codeline">  //   topo-order:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1470</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">1470</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1471</td>
    <td class="codeline">  //       S-----                             ---S</td>
    <td class="lineNumber">1471</td>
    <td class="codeline">  //       S-----                             ---S</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1472</td>
    <td class="codeline">  //       |    |                             |  |</td>
    <td class="lineNumber">1472</td>
    <td class="codeline">  //       |    |                             |  |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1473</td>
    <td class="codeline">  //    ---BB   |                             |  BB</td>
    <td class="lineNumber">1473</td>
    <td class="codeline">  //    ---BB   |                             |  BB</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1474</td>
    <td class="codeline">  //    |       |                             |  |</td>
    <td class="lineNumber">1474</td>
    <td class="codeline">  //    |       |                             |  |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1475</td>
    <td class="codeline">  //    |  Pred--                             |  Succ--</td>
    <td class="lineNumber">1475</td>
    <td class="codeline">  //    |  Pred--                             |  Succ--</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1476</td>
    <td class="codeline">  //    |  |                                  |       |</td>
    <td class="lineNumber">1476</td>
    <td class="codeline">  //    |  |                                  |       |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1477</td>
    <td class="codeline">  //    ---Succ                               ---Pred--</td>
    <td class="lineNumber">1477</td>
    <td class="codeline">  //    ---Succ                               ---Pred--</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1478</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">1478</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1479</td>
    <td class="codeline">  // cost = freq(S->Pred) + freq(BB->Succ)    cost = 2 * freq (S->Pred)</td>
    <td class="lineNumber">1479</td>
    <td class="codeline">  // cost = freq(S->Pred) + freq(BB->Succ)    cost = 2 * freq (S->Pred)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1480</td>
    <td class="codeline">  //      = freq(S->Pred) + freq(S->BB)</td>
    <td class="lineNumber">1480</td>
    <td class="codeline">  //      = freq(S->Pred) + freq(S->BB)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1481</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">1481</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1482</td>
    <td class="codeline">  // If we have profile data (i.e, branch probabilities can be trusted), the</td>
    <td class="lineNumber">1482</td>
    <td class="codeline">  // If we have profile data (i.e, branch probabilities can be trusted), the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1483</td>
    <td class="codeline">  // cost (number of taken branches) with layout S->BB->Succ->Pred is 2 *</td>
    <td class="lineNumber">1483</td>
    <td class="codeline">  // cost (number of taken branches) with layout S->BB->Succ->Pred is 2 *</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1484</td>
    <td class="codeline">  // freq(S->Pred) while the cost of topo order is freq(S->Pred) + freq(S->BB).</td>
    <td class="lineNumber">1484</td>
    <td class="codeline">  // freq(S->Pred) while the cost of topo order is freq(S->Pred) + freq(S->BB).</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1485</td>
    <td class="codeline">  // We know Prob(S->BB) > Prob(S->Pred), so freq(S->BB) > freq(S->Pred), which</td>
    <td class="lineNumber">1485</td>
    <td class="codeline">  // We know Prob(S->BB) > Prob(S->Pred), so freq(S->BB) > freq(S->Pred), which</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1486</td>
    <td class="codeline">  // means the cost of topological order is greater.</td>
    <td class="lineNumber">1486</td>
    <td class="codeline">  // means the cost of topological order is greater.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1487</td>
    <td class="codeline">  // When profile data is not available, however, we need to be more</td>
    <td class="lineNumber">1487</td>
    <td class="codeline">  // When profile data is not available, however, we need to be more</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1488</td>
    <td class="codeline">  // conservative. If the branch prediction is wrong, breaking the topo-order</td>
    <td class="lineNumber">1488</td>
    <td class="codeline">  // conservative. If the branch prediction is wrong, breaking the topo-order</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1489</td>
    <td class="codeline">  // will actually yield a layout with large cost. For this reason, we need</td>
    <td class="lineNumber">1489</td>
    <td class="codeline">  // will actually yield a layout with large cost. For this reason, we need</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1490</td>
    <td class="codeline">  // strong biased branch at block S with Prob(S->BB) in order to select</td>
    <td class="lineNumber">1490</td>
    <td class="codeline">  // strong biased branch at block S with Prob(S->BB) in order to select</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1491</td>
    <td class="codeline">  // BB->Succ. This is equivalent to looking the CFG backward with backward</td>
    <td class="lineNumber">1491</td>
    <td class="codeline">  // BB->Succ. This is equivalent to looking the CFG backward with backward</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1492</td>
    <td class="codeline">  // edge: Prob(Succ->BB) needs to >= HotProb in order to be selected (without</td>
    <td class="lineNumber">1492</td>
    <td class="codeline">  // edge: Prob(Succ->BB) needs to >= HotProb in order to be selected (without</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1493</td>
    <td class="codeline">  // profile data).</td>
    <td class="lineNumber">1493</td>
    <td class="codeline">  // profile data).</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1494</td>
    <td class="codeline">  // --------------------------------------------------------------------------</td>
    <td class="lineNumber">1494</td>
    <td class="codeline">  // --------------------------------------------------------------------------</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1495</td>
    <td class="codeline">  // Case 3: forked diamond</td>
    <td class="lineNumber">1495</td>
    <td class="codeline">  // Case 3: forked diamond</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1496</td>
    <td class="codeline">  //       S</td>
    <td class="lineNumber">1496</td>
    <td class="codeline">  //       S</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1497</td>
    <td class="codeline">  //      / \</td>
    <td class="lineNumber">1497</td>
    <td class="codeline">  //      / \</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1498</td>
    <td class="codeline">  //     /   \</td>
    <td class="lineNumber">1498</td>
    <td class="codeline">  //     /   \</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1499</td>
    <td class="codeline">  //   BB    Pred</td>
    <td class="lineNumber">1499</td>
    <td class="codeline">  //   BB    Pred</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1500</td>
    <td class="codeline">  //   | \   / |</td>
    <td class="lineNumber">1500</td>
    <td class="codeline">  //   | \   / |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1501</td>
    <td class="codeline">  //   |  \ /  |</td>
    <td class="lineNumber">1501</td>
    <td class="codeline">  //   |  \ /  |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1502</td>
    <td class="codeline">  //   |   X   |</td>
    <td class="lineNumber">1502</td>
    <td class="codeline">  //   |   X   |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1503</td>
    <td class="codeline">  //   |  / \  |</td>
    <td class="lineNumber">1503</td>
    <td class="codeline">  //   |  / \  |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1504</td>
    <td class="codeline">  //   | /   \ |</td>
    <td class="lineNumber">1504</td>
    <td class="codeline">  //   | /   \ |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1505</td>
    <td class="codeline">  //   S1     S2</td>
    <td class="lineNumber">1505</td>
    <td class="codeline">  //   S1     S2</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1506</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">1506</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1507</td>
    <td class="codeline">  // The current block is BB and edge BB->S1 is now being evaluated.</td>
    <td class="lineNumber">1507</td>
    <td class="codeline">  // The current block is BB and edge BB->S1 is now being evaluated.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1508</td>
    <td class="codeline">  // As above S->BB was already selected because</td>
    <td class="lineNumber">1508</td>
    <td class="codeline">  // As above S->BB was already selected because</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1509</td>
    <td class="codeline">  // prob(S->BB) > prob(S->Pred). Assume that prob(BB->S1) >= prob(BB->S2).</td>
    <td class="lineNumber">1509</td>
    <td class="codeline">  // prob(S->BB) > prob(S->Pred). Assume that prob(BB->S1) >= prob(BB->S2).</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1510</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">1510</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1511</td>
    <td class="codeline">  // topo-order:</td>
    <td class="lineNumber">1511</td>
    <td class="codeline">  // topo-order:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1512</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">1512</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1513</td>
    <td class="codeline">  //     S-------|                     ---S</td>
    <td class="lineNumber">1513</td>
    <td class="codeline">  //     S-------|                     ---S</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1514</td>
    <td class="codeline">  //     |       |                     |  |</td>
    <td class="lineNumber">1514</td>
    <td class="codeline">  //     |       |                     |  |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1515</td>
    <td class="codeline">  //  ---BB      |                     |  BB</td>
    <td class="lineNumber">1515</td>
    <td class="codeline">  //  ---BB      |                     |  BB</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1516</td>
    <td class="codeline">  //  |          |                     |  |</td>
    <td class="lineNumber">1516</td>
    <td class="codeline">  //  |          |                     |  |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1517</td>
    <td class="codeline">  //  |  Pred----|                     |  S1----</td>
    <td class="lineNumber">1517</td>
    <td class="codeline">  //  |  Pred----|                     |  S1----</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1518</td>
    <td class="codeline">  //  |  |                             |       |</td>
    <td class="lineNumber">1518</td>
    <td class="codeline">  //  |  |                             |       |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1519</td>
    <td class="codeline">  //  --(S1 or S2)                     ---Pred--</td>
    <td class="lineNumber">1519</td>
    <td class="codeline">  //  --(S1 or S2)                     ---Pred--</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1520</td>
    <td class="codeline">  //                                        |</td>
    <td class="lineNumber">1520</td>
    <td class="codeline">  //                                        |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1521</td>
    <td class="codeline">  //                                       S2</td>
    <td class="lineNumber">1521</td>
    <td class="codeline">  //                                       S2</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1522</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">1522</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1523</td>
    <td class="codeline">  // topo-cost = freq(S->Pred) + freq(BB->S1) + freq(BB->S2)</td>
    <td class="lineNumber">1523</td>
    <td class="codeline">  // topo-cost = freq(S->Pred) + freq(BB->S1) + freq(BB->S2)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1524</td>
    <td class="codeline">  //    + min(freq(Pred->S1), freq(Pred->S2))</td>
    <td class="lineNumber">1524</td>
    <td class="codeline">  //    + min(freq(Pred->S1), freq(Pred->S2))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1525</td>
    <td class="codeline">  // Non-topo-order cost:</td>
    <td class="lineNumber">1525</td>
    <td class="codeline">  // Non-topo-order cost:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1526</td>
    <td class="codeline">  // non-topo-cost = 2 * freq(S->Pred) + freq(BB->S2).</td>
    <td class="lineNumber">1526</td>
    <td class="codeline">  // non-topo-cost = 2 * freq(S->Pred) + freq(BB->S2).</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1527</td>
    <td class="codeline">  // To be conservative, we can assume that min(freq(Pred->S1), freq(Pred->S2))</td>
    <td class="lineNumber">1527</td>
    <td class="codeline">  // To be conservative, we can assume that min(freq(Pred->S1), freq(Pred->S2))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1528</td>
    <td class="codeline">  // is 0. Then the non topo layout is better when</td>
    <td class="lineNumber">1528</td>
    <td class="codeline">  // is 0. Then the non topo layout is better when</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1529</td>
    <td class="codeline">  // freq(S->Pred) < freq(BB->S1).</td>
    <td class="lineNumber">1529</td>
    <td class="codeline">  // freq(S->Pred) < freq(BB->S1).</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1530</td>
    <td class="codeline">  // This is exactly what is checked below.</td>
    <td class="lineNumber">1530</td>
    <td class="codeline">  // This is exactly what is checked below.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1531</td>
    <td class="codeline">  // Note there are other shapes that apply (Pred may not be a single block,</td>
    <td class="lineNumber">1531</td>
    <td class="codeline">  // Note there are other shapes that apply (Pred may not be a single block,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1532</td>
    <td class="codeline">  // but they all fit this general pattern.)</td>
    <td class="lineNumber">1532</td>
    <td class="codeline">  // but they all fit this general pattern.)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1533</td>
    <td class="codeline">  BranchProbability HotProb = getLayoutSuccessorProbThreshold(BB);</td>
    <td class="lineNumber">1533</td>
    <td class="codeline">  BranchProbability HotProb = getLayoutSuccessorProbThreshold(BB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1534</td>
    <td class="codeline"></td>
    <td class="lineNumber">1534</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1535</td>
    <td class="codeline">  // Make sure that a hot successor doesn't have a globally more</td>
    <td class="lineNumber">1535</td>
    <td class="codeline">  // Make sure that a hot successor doesn't have a globally more</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1536</td>
    <td class="codeline">  // important predecessor.</td>
    <td class="lineNumber">1536</td>
    <td class="codeline">  // important predecessor.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1537</td>
    <td class="codeline">  BlockFrequency CandidateEdgeFreq = MBFI->getBlockFreq(BB) * RealSuccProb;</td>
    <td class="lineNumber">1537</td>
    <td class="codeline">  BlockFrequency CandidateEdgeFreq = MBFI->getBlockFreq(BB) * RealSuccProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1538</td>
    <td class="codeline">  bool BadCFGConflict = false;</td>
    <td class="lineNumber">1538</td>
    <td class="codeline">  bool BadCFGConflict = false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1539</td>
    <td class="codeline"></td>
    <td class="lineNumber">1539</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1540</td>
    <td class="codeline">  for (MachineBasicBlock *Pred : Succ->predecessors()) {</td>
    <td class="lineNumber">1540</td>
    <td class="codeline">  for (MachineBasicBlock *Pred : Succ->predecessors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1541</td>
    <td class="codeline">    BlockChain *PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">1541</td>
    <td class="codeline">    BlockChain *PredChain = BlockToChain[Pred];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1542</td>
    <td class="codeline">    if (Pred == Succ || PredChain == &SuccChain ||</td>
    <td class="lineNumber">1542</td>
    <td class="codeline">    if (Pred == Succ || PredChain == &SuccChain ||</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1543</td>
    <td class="codeline">        (BlockFilter && !BlockFilter->count(Pred)) ||</td>
    <td class="lineNumber">1543</td>
    <td class="codeline">        (BlockFilter && !BlockFilter->count(Pred)) ||</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1544</td>
    <td class="codeline">        PredChain == &Chain || Pred != *std::prev(PredChain->end()) ||</td>
    <td class="lineNumber">1544</td>
    <td class="codeline">        PredChain == &Chain || Pred != *std::prev(PredChain->end()) ||</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1545</td>
    <td class="codeline">        // This check is redundant except for look ahead. This function is</td>
    <td class="lineNumber">1545</td>
    <td class="codeline">        // This check is redundant except for look ahead. This function is</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1546</td>
    <td class="codeline">        // called for lookahead by isProfitableToTailDup when BB hasn't been</td>
    <td class="lineNumber">1546</td>
    <td class="codeline">        // called for lookahead by isProfitableToTailDup when BB hasn't been</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1547</td>
    <td class="codeline">        // placed yet.</td>
    <td class="lineNumber">1547</td>
    <td class="codeline">        // placed yet.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1548</td>
    <td class="codeline">        (Pred == BB))</td>
    <td class="lineNumber">1548</td>
    <td class="codeline">        (Pred == BB))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1549</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">1549</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1550</td>
    <td class="codeline">    // Do backward checking.</td>
    <td class="lineNumber">1550</td>
    <td class="codeline">    // Do backward checking.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1551</td>
    <td class="codeline">    // For all cases above, we need a backward checking to filter out edges that</td>
    <td class="lineNumber">1551</td>
    <td class="codeline">    // For all cases above, we need a backward checking to filter out edges that</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1552</td>
    <td class="codeline">    // are not 'strongly' biased.</td>
    <td class="lineNumber">1552</td>
    <td class="codeline">    // are not 'strongly' biased.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1553</td>
    <td class="codeline">    // BB  Pred</td>
    <td class="lineNumber">1553</td>
    <td class="codeline">    // BB  Pred</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1554</td>
    <td class="codeline">    //  \ /</td>
    <td class="lineNumber">1554</td>
    <td class="codeline">    //  \ /</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1555</td>
    <td class="codeline">    //  Succ</td>
    <td class="lineNumber">1555</td>
    <td class="codeline">    //  Succ</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1556</td>
    <td class="codeline">    // We select edge BB->Succ if</td>
    <td class="lineNumber">1556</td>
    <td class="codeline">    // We select edge BB->Succ if</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1557</td>
    <td class="codeline">    //      freq(BB->Succ) > freq(Succ) * HotProb</td>
    <td class="lineNumber">1557</td>
    <td class="codeline">    //      freq(BB->Succ) > freq(Succ) * HotProb</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1558</td>
    <td class="codeline">    //      i.e. freq(BB->Succ) > freq(BB->Succ) * HotProb + freq(Pred->Succ) *</td>
    <td class="lineNumber">1558</td>
    <td class="codeline">    //      i.e. freq(BB->Succ) > freq(BB->Succ) * HotProb + freq(Pred->Succ) *</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1559</td>
    <td class="codeline">    //      HotProb</td>
    <td class="lineNumber">1559</td>
    <td class="codeline">    //      HotProb</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1560</td>
    <td class="codeline">    //      i.e. freq((BB->Succ) * (1 - HotProb) > freq(Pred->Succ) * HotProb</td>
    <td class="lineNumber">1560</td>
    <td class="codeline">    //      i.e. freq((BB->Succ) * (1 - HotProb) > freq(Pred->Succ) * HotProb</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1561</td>
    <td class="codeline">    // Case 1 is covered too, because the first equation reduces to:</td>
    <td class="lineNumber">1561</td>
    <td class="codeline">    // Case 1 is covered too, because the first equation reduces to:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1562</td>
    <td class="codeline">    // prob(BB->Succ) > HotProb. (freq(Succ) = freq(BB) for a triangle)</td>
    <td class="lineNumber">1562</td>
    <td class="codeline">    // prob(BB->Succ) > HotProb. (freq(Succ) = freq(BB) for a triangle)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1563</td>
    <td class="codeline">    BlockFrequency PredEdgeFreq =</td>
    <td class="lineNumber">1563</td>
    <td class="codeline">    BlockFrequency PredEdgeFreq =</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1564</td>
    <td class="codeline">        MBFI->getBlockFreq(Pred) * MBPI->getEdgeProbability(Pred, Succ);</td>
    <td class="lineNumber">1564</td>
    <td class="codeline">        MBFI->getBlockFreq(Pred) * MBPI->getEdgeProbability(Pred, Succ);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1565</td>
    <td class="codeline">    if (PredEdgeFreq * HotProb >= CandidateEdgeFreq * HotProb.getCompl()) {</td>
    <td class="lineNumber">1565</td>
    <td class="codeline">    if (PredEdgeFreq * HotProb >= CandidateEdgeFreq * HotProb.getCompl()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1566</td>
    <td class="codeline">      BadCFGConflict = true;</td>
    <td class="lineNumber">1566</td>
    <td class="codeline">      BadCFGConflict = true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1567</td>
    <td class="codeline">      break;</td>
    <td class="lineNumber">1567</td>
    <td class="codeline">      break;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1568</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">1568</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1569</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">1569</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1570</td>
    <td class="codeline"></td>
    <td class="lineNumber">1570</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1571</td>
    <td class="codeline">  if (BadCFGConflict) {</td>
    <td class="lineNumber">1571</td>
    <td class="codeline">  if (BadCFGConflict) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1572</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "    Not a candidate: " << getBlockName(Succ) << " -> "</td>
    <td class="lineNumber">1572</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "    Not a candidate: " << getBlockName(Succ) << " -> "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1573</td>
    <td class="codeline">                      << SuccProb << " (prob) (non-cold CFG conflict)\n");</td>
    <td class="lineNumber">1573</td>
    <td class="codeline">                      << SuccProb << " (prob) (non-cold CFG conflict)\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1574</td>
    <td class="codeline">    return true;</td>
    <td class="lineNumber">1574</td>
    <td class="codeline">    return true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1575</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">1575</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1576</td>
    <td class="codeline"></td>
    <td class="lineNumber">1576</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1577</td>
    <td class="codeline">  return false;</td>
    <td class="lineNumber">1577</td>
    <td class="codeline">  return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1578</td>
    <td class="codeline">}</td>
    <td class="lineNumber">1578</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1579</td>
    <td class="codeline"></td>
    <td class="lineNumber">1579</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1580</td>
    <td class="codeline">/// Select the best successor for a block.</td>
    <td class="lineNumber">1580</td>
    <td class="codeline">/// Select the best successor for a block.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1581</td>
    <td class="codeline">///</td>
    <td class="lineNumber">1581</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1582</td>
    <td class="codeline">/// This looks across all successors of a particular block and attempts to</td>
    <td class="lineNumber">1582</td>
    <td class="codeline">/// This looks across all successors of a particular block and attempts to</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1583</td>
    <td class="codeline">/// select the "best" one to be the layout successor. It only considers direct</td>
    <td class="lineNumber">1583</td>
    <td class="codeline">/// select the "best" one to be the layout successor. It only considers direct</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1584</td>
    <td class="codeline">/// successors which also pass the block filter. It will attempt to avoid</td>
    <td class="lineNumber">1584</td>
    <td class="codeline">/// successors which also pass the block filter. It will attempt to avoid</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1585</td>
    <td class="codeline">/// breaking CFG structure, but cave and break such structures in the case of</td>
    <td class="lineNumber">1585</td>
    <td class="codeline">/// breaking CFG structure, but cave and break such structures in the case of</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1586</td>
    <td class="codeline">/// very hot successor edges.</td>
    <td class="lineNumber">1586</td>
    <td class="codeline">/// very hot successor edges.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1587</td>
    <td class="codeline">///</td>
    <td class="lineNumber">1587</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1588</td>
    <td class="codeline">/// \returns The best successor block found, or null if none are viable, along</td>
    <td class="lineNumber">1588</td>
    <td class="codeline">/// \returns The best successor block found, or null if none are viable, along</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1589</td>
    <td class="codeline">/// with a boolean indicating if tail duplication is necessary.</td>
    <td class="lineNumber">1589</td>
    <td class="codeline">/// with a boolean indicating if tail duplication is necessary.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1590</td>
    <td class="codeline">MachineBlockPlacement::BlockAndTailDupResult</td>
    <td class="lineNumber">1590</td>
    <td class="codeline">MachineBlockPlacement::BlockAndTailDupResult</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1591</td>
    <td class="codeline">MachineBlockPlacement::selectBestSuccessor(</td>
    <td class="lineNumber">1591</td>
    <td class="codeline">MachineBlockPlacement::selectBestSuccessor(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1592</td>
    <td class="codeline">    const MachineBasicBlock *BB, const BlockChain &Chain,</td>
    <td class="lineNumber">1592</td>
    <td class="codeline">    const MachineBasicBlock *BB, const BlockChain &Chain,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1593</td>
    <td class="codeline">    const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">1593</td>
    <td class="codeline">    const BlockFilterSet *BlockFilter) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1594</td>
    <td class="codeline">  const BranchProbability HotProb(StaticLikelyProb, 100);</td>
    <td class="lineNumber">1594</td>
    <td class="codeline">  const BranchProbability HotProb(StaticLikelyProb, 100);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1595</td>
    <td class="codeline"></td>
    <td class="lineNumber">1595</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1596</td>
    <td class="codeline">  BlockAndTailDupResult BestSucc = { nullptr, false };</td>
    <td class="lineNumber">1596</td>
    <td class="codeline">  BlockAndTailDupResult BestSucc = { nullptr, false };</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1597</td>
    <td class="codeline">  auto BestProb = BranchProbability::getZero();</td>
    <td class="lineNumber">1597</td>
    <td class="codeline">  auto BestProb = BranchProbability::getZero();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1598</td>
    <td class="codeline"></td>
    <td class="lineNumber">1598</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1599</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 4> Successors;</td>
    <td class="lineNumber">1599</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 4> Successors;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1600</td>
    <td class="codeline">  auto AdjustedSumProb =</td>
    <td class="lineNumber">1600</td>
    <td class="codeline">  auto AdjustedSumProb =</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1601</td>
    <td class="codeline">      collectViableSuccessors(BB, Chain, BlockFilter, Successors);</td>
    <td class="lineNumber">1601</td>
    <td class="codeline">      collectViableSuccessors(BB, Chain, BlockFilter, Successors);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1602</td>
    <td class="codeline"></td>
    <td class="lineNumber">1602</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1603</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "Selecting best successor for: " << getBlockName(BB)</td>
    <td class="lineNumber">1603</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "Selecting best successor for: " << getBlockName(BB)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1604</td>
    <td class="codeline">                    << "\n");</td>
    <td class="lineNumber">1604</td>
    <td class="codeline">                    << "\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1605</td>
    <td class="codeline"></td>
    <td class="lineNumber">1605</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1606</td>
    <td class="codeline">  // if we already precomputed the best successor for BB, return that if still</td>
    <td class="lineNumber">1606</td>
    <td class="codeline">  // if we already precomputed the best successor for BB, return that if still</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1607</td>
    <td class="codeline">  // applicable.</td>
    <td class="lineNumber">1607</td>
    <td class="codeline">  // applicable.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1608</td>
    <td class="codeline">  auto FoundEdge = ComputedEdges.find(BB);</td>
    <td class="lineNumber">1608</td>
    <td class="codeline">  auto FoundEdge = ComputedEdges.find(BB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1609</td>
    <td class="codeline">  if (FoundEdge != ComputedEdges.end()) {</td>
    <td class="lineNumber">1609</td>
    <td class="codeline">  if (FoundEdge != ComputedEdges.end()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1610</td>
    <td class="codeline">    MachineBasicBlock *Succ = FoundEdge->second.BB;</td>
    <td class="lineNumber">1610</td>
    <td class="codeline">    MachineBasicBlock *Succ = FoundEdge->second.BB;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1611</td>
    <td class="codeline">    ComputedEdges.erase(FoundEdge);</td>
    <td class="lineNumber">1611</td>
    <td class="codeline">    ComputedEdges.erase(FoundEdge);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1612</td>
    <td class="codeline">    BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">1612</td>
    <td class="codeline">    BlockChain *SuccChain = BlockToChain[Succ];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1613</td>
    <td class="codeline">    if (BB->isSuccessor(Succ) && (!BlockFilter || BlockFilter->count(Succ)) &&</td>
    <td class="lineNumber">1613</td>
    <td class="codeline">    if (BB->isSuccessor(Succ) && (!BlockFilter || BlockFilter->count(Succ)) &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1614</td>
    <td class="codeline">        SuccChain != &Chain && Succ == *SuccChain->begin())</td>
    <td class="lineNumber">1614</td>
    <td class="codeline">        SuccChain != &Chain && Succ == *SuccChain->begin())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1615</td>
    <td class="codeline">      return FoundEdge->second;</td>
    <td class="lineNumber">1615</td>
    <td class="codeline">      return FoundEdge->second;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1616</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">1616</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1617</td>
    <td class="codeline"></td>
    <td class="lineNumber">1617</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1618</td>
    <td class="codeline">  // if BB is part of a trellis, Use the trellis to determine the optimal</td>
    <td class="lineNumber">1618</td>
    <td class="codeline">  // if BB is part of a trellis, Use the trellis to determine the optimal</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1619</td>
    <td class="codeline">  // fallthrough edges</td>
    <td class="lineNumber">1619</td>
    <td class="codeline">  // fallthrough edges</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1620</td>
    <td class="codeline">  if (isTrellis(BB, Successors, Chain, BlockFilter))</td>
    <td class="lineNumber">1620</td>
    <td class="codeline">  if (isTrellis(BB, Successors, Chain, BlockFilter))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1621</td>
    <td class="codeline">    return getBestTrellisSuccessor(BB, Successors, AdjustedSumProb, Chain,</td>
    <td class="lineNumber">1621</td>
    <td class="codeline">    return getBestTrellisSuccessor(BB, Successors, AdjustedSumProb, Chain,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1622</td>
    <td class="codeline">                                   BlockFilter);</td>
    <td class="lineNumber">1622</td>
    <td class="codeline">                                   BlockFilter);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1623</td>
    <td class="codeline"></td>
    <td class="lineNumber">1623</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1624</td>
    <td class="codeline">  // For blocks with CFG violations, we may be able to lay them out anyway with</td>
    <td class="lineNumber">1624</td>
    <td class="codeline">  // For blocks with CFG violations, we may be able to lay them out anyway with</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1625</td>
    <td class="codeline">  // tail-duplication. We keep this vector so we can perform the probability</td>
    <td class="lineNumber">1625</td>
    <td class="codeline">  // tail-duplication. We keep this vector so we can perform the probability</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1626</td>
    <td class="codeline">  // calculations the minimum number of times.</td>
    <td class="lineNumber">1626</td>
    <td class="codeline">  // calculations the minimum number of times.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1627</td>
    <td class="codeline">  SmallVector<std::pair<BranchProbability, MachineBasicBlock *>, 4></td>
    <td class="lineNumber">1627</td>
    <td class="codeline">  SmallVector<std::pair<BranchProbability, MachineBasicBlock *>, 4></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1628</td>
    <td class="codeline">      DupCandidates;</td>
    <td class="lineNumber">1628</td>
    <td class="codeline">      DupCandidates;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1629</td>
    <td class="codeline">  for (MachineBasicBlock *Succ : Successors) {</td>
    <td class="lineNumber">1629</td>
    <td class="codeline">  for (MachineBasicBlock *Succ : Successors) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1630</td>
    <td class="codeline">    auto RealSuccProb = MBPI->getEdgeProbability(BB, Succ);</td>
    <td class="lineNumber">1630</td>
    <td class="codeline">    auto RealSuccProb = MBPI->getEdgeProbability(BB, Succ);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1631</td>
    <td class="codeline">    BranchProbability SuccProb =</td>
    <td class="lineNumber">1631</td>
    <td class="codeline">    BranchProbability SuccProb =</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1632</td>
    <td class="codeline">        getAdjustedProbability(RealSuccProb, AdjustedSumProb);</td>
    <td class="lineNumber">1632</td>
    <td class="codeline">        getAdjustedProbability(RealSuccProb, AdjustedSumProb);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1633</td>
    <td class="codeline"></td>
    <td class="lineNumber">1633</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1634</td>
    <td class="codeline">    BlockChain &SuccChain = *BlockToChain[Succ];</td>
    <td class="lineNumber">1634</td>
    <td class="codeline">    BlockChain &SuccChain = *BlockToChain[Succ];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1635</td>
    <td class="codeline">    // Skip the edge \c BB->Succ if block \c Succ has a better layout</td>
    <td class="lineNumber">1635</td>
    <td class="codeline">    // Skip the edge \c BB->Succ if block \c Succ has a better layout</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1636</td>
    <td class="codeline">    // predecessor that yields lower global cost.</td>
    <td class="lineNumber">1636</td>
    <td class="codeline">    // predecessor that yields lower global cost.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1637</td>
    <td class="codeline">    if (hasBetterLayoutPredecessor(BB, Succ, SuccChain, SuccProb, RealSuccProb,</td>
    <td class="lineNumber">1637</td>
    <td class="codeline">    if (hasBetterLayoutPredecessor(BB, Succ, SuccChain, SuccProb, RealSuccProb,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1638</td>
    <td class="codeline">                                   Chain, BlockFilter)) {</td>
    <td class="lineNumber">1638</td>
    <td class="codeline">                                   Chain, BlockFilter)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1639</td>
    <td class="codeline">      // If tail duplication would make Succ profitable, place it.</td>
    <td class="lineNumber">1639</td>
    <td class="codeline">      // If tail duplication would make Succ profitable, place it.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1640</td>
    <td class="codeline">      if (allowTailDupPlacement() && shouldTailDuplicate(Succ))</td>
    <td class="lineNumber">1640</td>
    <td class="codeline">      if (allowTailDupPlacement() && shouldTailDuplicate(Succ))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1641</td>
    <td class="codeline">        DupCandidates.emplace_back(SuccProb, Succ);</td>
    <td class="lineNumber">1641</td>
    <td class="codeline">        DupCandidates.emplace_back(SuccProb, Succ);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1642</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">1642</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1643</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">1643</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1644</td>
    <td class="codeline"></td>
    <td class="lineNumber">1644</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1645</td>
    <td class="codeline">    LLVM_DEBUG(</td>
    <td class="lineNumber">1645</td>
    <td class="codeline">    LLVM_DEBUG(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1646</td>
    <td class="codeline">        dbgs() << "    Candidate: " << getBlockName(Succ)</td>
    <td class="lineNumber">1646</td>
    <td class="codeline">        dbgs() << "    Candidate: " << getBlockName(Succ)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1647</td>
    <td class="codeline">               << ", probability: " << SuccProb</td>
    <td class="lineNumber">1647</td>
    <td class="codeline">               << ", probability: " << SuccProb</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1648</td>
    <td class="codeline">               << (SuccChain.UnscheduledPredecessors != 0 ? " (CFG break)" : "")</td>
    <td class="lineNumber">1648</td>
    <td class="codeline">               << (SuccChain.UnscheduledPredecessors != 0 ? " (CFG break)" : "")</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1649</td>
    <td class="codeline">               << "\n");</td>
    <td class="lineNumber">1649</td>
    <td class="codeline">               << "\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1650</td>
    <td class="codeline"></td>
    <td class="lineNumber">1650</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1651</td>
    <td class="codeline">    if (BestSucc.BB && BestProb >= SuccProb) {</td>
    <td class="lineNumber">1651</td>
    <td class="codeline">    if (BestSucc.BB && BestProb >= SuccProb) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1652</td>
    <td class="codeline">      LLVM_DEBUG(dbgs() << "    Not the best candidate, continuing\n");</td>
    <td class="lineNumber">1652</td>
    <td class="codeline">      LLVM_DEBUG(dbgs() << "    Not the best candidate, continuing\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1653</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">1653</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1654</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">1654</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1655</td>
    <td class="codeline"></td>
    <td class="lineNumber">1655</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1656</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "    Setting it as best candidate\n");</td>
    <td class="lineNumber">1656</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "    Setting it as best candidate\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1657</td>
    <td class="codeline">    BestSucc.BB = Succ;</td>
    <td class="lineNumber">1657</td>
    <td class="codeline">    BestSucc.BB = Succ;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1658</td>
    <td class="codeline">    BestProb = SuccProb;</td>
    <td class="lineNumber">1658</td>
    <td class="codeline">    BestProb = SuccProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1659</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">1659</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1660</td>
    <td class="codeline">  // Handle the tail duplication candidates in order of decreasing probability.</td>
    <td class="lineNumber">1660</td>
    <td class="codeline">  // Handle the tail duplication candidates in order of decreasing probability.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1661</td>
    <td class="codeline">  // Stop at the first one that is profitable. Also stop if they are less</td>
    <td class="lineNumber">1661</td>
    <td class="codeline">  // Stop at the first one that is profitable. Also stop if they are less</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1662</td>
    <td class="codeline">  // profitable than BestSucc. Position is important because we preserve it and</td>
    <td class="lineNumber">1662</td>
    <td class="codeline">  // profitable than BestSucc. Position is important because we preserve it and</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1663</td>
    <td class="codeline">  // prefer first best match. Here we aren't comparing in order, so we capture</td>
    <td class="lineNumber">1663</td>
    <td class="codeline">  // prefer first best match. Here we aren't comparing in order, so we capture</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1664</td>
    <td class="codeline">  // the position instead.</td>
    <td class="lineNumber">1664</td>
    <td class="codeline">  // the position instead.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1665</td>
    <td class="codeline">  llvm::stable_sort(DupCandidates,</td>
    <td class="lineNumber">1665</td>
    <td class="codeline">  llvm::stable_sort(DupCandidates,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1666</td>
    <td class="codeline">                    [](std::tuple<BranchProbability, MachineBasicBlock *> L,</td>
    <td class="lineNumber">1666</td>
    <td class="codeline">                    [](std::tuple<BranchProbability, MachineBasicBlock *> L,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1667</td>
    <td class="codeline">                       std::tuple<BranchProbability, MachineBasicBlock *> R) {</td>
    <td class="lineNumber">1667</td>
    <td class="codeline">                       std::tuple<BranchProbability, MachineBasicBlock *> R) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1668</td>
    <td class="codeline">                      return std::get<0>(L) > std::get<0>(R);</td>
    <td class="lineNumber">1668</td>
    <td class="codeline">                      return std::get<0>(L) > std::get<0>(R);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1669</td>
    <td class="codeline">                    });</td>
    <td class="lineNumber">1669</td>
    <td class="codeline">                    });</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1670</td>
    <td class="codeline">  for (auto &Tup : DupCandidates) {</td>
    <td class="lineNumber">1670</td>
    <td class="codeline">  for (auto &Tup : DupCandidates) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1671</td>
    <td class="codeline">    BranchProbability DupProb;</td>
    <td class="lineNumber">1671</td>
    <td class="codeline">    BranchProbability DupProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1672</td>
    <td class="codeline">    MachineBasicBlock *Succ;</td>
    <td class="lineNumber">1672</td>
    <td class="codeline">    MachineBasicBlock *Succ;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1673</td>
    <td class="codeline">    std::tie(DupProb, Succ) = Tup;</td>
    <td class="lineNumber">1673</td>
    <td class="codeline">    std::tie(DupProb, Succ) = Tup;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1674</td>
    <td class="codeline">    if (DupProb < BestProb)</td>
    <td class="lineNumber">1674</td>
    <td class="codeline">    if (DupProb < BestProb)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1675</td>
    <td class="codeline">      break;</td>
    <td class="lineNumber">1675</td>
    <td class="codeline">      break;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1676</td>
    <td class="codeline">    if (canTailDuplicateUnplacedPreds(BB, Succ, Chain, BlockFilter)</td>
    <td class="lineNumber">1676</td>
    <td class="codeline">    if (canTailDuplicateUnplacedPreds(BB, Succ, Chain, BlockFilter)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1677</td>
    <td class="codeline">        && (isProfitableToTailDup(BB, Succ, BestProb, Chain, BlockFilter))) {</td>
    <td class="lineNumber">1677</td>
    <td class="codeline">        && (isProfitableToTailDup(BB, Succ, BestProb, Chain, BlockFilter))) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1678</td>
    <td class="codeline">      LLVM_DEBUG(dbgs() << "    Candidate: " << getBlockName(Succ)</td>
    <td class="lineNumber">1678</td>
    <td class="codeline">      LLVM_DEBUG(dbgs() << "    Candidate: " << getBlockName(Succ)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1679</td>
    <td class="codeline">                        << ", probability: " << DupProb</td>
    <td class="lineNumber">1679</td>
    <td class="codeline">                        << ", probability: " << DupProb</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1680</td>
    <td class="codeline">                        << " (Tail Duplicate)\n");</td>
    <td class="lineNumber">1680</td>
    <td class="codeline">                        << " (Tail Duplicate)\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1681</td>
    <td class="codeline">      BestSucc.BB = Succ;</td>
    <td class="lineNumber">1681</td>
    <td class="codeline">      BestSucc.BB = Succ;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1682</td>
    <td class="codeline">      BestSucc.ShouldTailDup = true;</td>
    <td class="lineNumber">1682</td>
    <td class="codeline">      BestSucc.ShouldTailDup = true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1683</td>
    <td class="codeline">      break;</td>
    <td class="lineNumber">1683</td>
    <td class="codeline">      break;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1684</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">1684</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1685</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">1685</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1686</td>
    <td class="codeline"></td>
    <td class="lineNumber">1686</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1687</td>
    <td class="codeline">  if (BestSucc.BB)</td>
    <td class="lineNumber">1687</td>
    <td class="codeline">  if (BestSucc.BB)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1688</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "    Selected: " << getBlockName(BestSucc.BB) << "\n");</td>
    <td class="lineNumber">1688</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "    Selected: " << getBlockName(BestSucc.BB) << "\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1689</td>
    <td class="codeline"></td>
    <td class="lineNumber">1689</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1690</td>
    <td class="codeline">  return BestSucc;</td>
    <td class="lineNumber">1690</td>
    <td class="codeline">  return BestSucc;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1691</td>
    <td class="codeline">}</td>
    <td class="lineNumber">1691</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1692</td>
    <td class="codeline"></td>
    <td class="lineNumber">1692</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1693</td>
    <td class="codeline">/// Select the best block from a worklist.</td>
    <td class="lineNumber">1693</td>
    <td class="codeline">/// Select the best block from a worklist.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1694</td>
    <td class="codeline">///</td>
    <td class="lineNumber">1694</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1695</td>
    <td class="codeline">/// This looks through the provided worklist as a list of candidate basic</td>
    <td class="lineNumber">1695</td>
    <td class="codeline">/// This looks through the provided worklist as a list of candidate basic</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1696</td>
    <td class="codeline">/// blocks and select the most profitable one to place. The definition of</td>
    <td class="lineNumber">1696</td>
    <td class="codeline">/// blocks and select the most profitable one to place. The definition of</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1697</td>
    <td class="codeline">/// profitable only really makes sense in the context of a loop. This returns</td>
    <td class="lineNumber">1697</td>
    <td class="codeline">/// profitable only really makes sense in the context of a loop. This returns</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1698</td>
    <td class="codeline">/// the most frequently visited block in the worklist, which in the case of</td>
    <td class="lineNumber">1698</td>
    <td class="codeline">/// the most frequently visited block in the worklist, which in the case of</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1699</td>
    <td class="codeline">/// a loop, is the one most desirable to be physically close to the rest of the</td>
    <td class="lineNumber">1699</td>
    <td class="codeline">/// a loop, is the one most desirable to be physically close to the rest of the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1700</td>
    <td class="codeline">/// loop body in order to improve i-cache behavior.</td>
    <td class="lineNumber">1700</td>
    <td class="codeline">/// loop body in order to improve i-cache behavior.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1701</td>
    <td class="codeline">///</td>
    <td class="lineNumber">1701</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1702</td>
    <td class="codeline">/// \returns The best block found, or null if none are viable.</td>
    <td class="lineNumber">1702</td>
    <td class="codeline">/// \returns The best block found, or null if none are viable.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1703</td>
    <td class="codeline">MachineBasicBlock *MachineBlockPlacement::selectBestCandidateBlock(</td>
    <td class="lineNumber">1703</td>
    <td class="codeline">MachineBasicBlock *MachineBlockPlacement::selectBestCandidateBlock(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1704</td>
    <td class="codeline">    const BlockChain &Chain, SmallVectorImpl<MachineBasicBlock *> &WorkList) {</td>
    <td class="lineNumber">1704</td>
    <td class="codeline">    const BlockChain &Chain, SmallVectorImpl<MachineBasicBlock *> &WorkList) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1705</td>
    <td class="codeline">  // Once we need to walk the worklist looking for a candidate, cleanup the</td>
    <td class="lineNumber">1705</td>
    <td class="codeline">  // Once we need to walk the worklist looking for a candidate, cleanup the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1706</td>
    <td class="codeline">  // worklist of already placed entries.</td>
    <td class="lineNumber">1706</td>
    <td class="codeline">  // worklist of already placed entries.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1707</td>
    <td class="codeline">  // FIXME: If this shows up on profiles, it could be folded (at the cost of</td>
    <td class="lineNumber">1707</td>
    <td class="codeline">  // FIXME: If this shows up on profiles, it could be folded (at the cost of</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1708</td>
    <td class="codeline">  // some code complexity) into the loop below.</td>
    <td class="lineNumber">1708</td>
    <td class="codeline">  // some code complexity) into the loop below.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1709</td>
    <td class="codeline">  llvm::erase_if(WorkList, [&](MachineBasicBlock *BB) {</td>
    <td class="lineNumber">1709</td>
    <td class="codeline">  llvm::erase_if(WorkList, [&](MachineBasicBlock *BB) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1710</td>
    <td class="codeline">    return BlockToChain.lookup(BB) == &Chain;</td>
    <td class="lineNumber">1710</td>
    <td class="codeline">    return BlockToChain.lookup(BB) == &Chain;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1711</td>
    <td class="codeline">  });</td>
    <td class="lineNumber">1711</td>
    <td class="codeline">  });</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1712</td>
    <td class="codeline"></td>
    <td class="lineNumber">1712</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1713</td>
    <td class="codeline">  if (WorkList.empty())</td>
    <td class="lineNumber">1713</td>
    <td class="codeline">  if (WorkList.empty())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1714</td>
    <td class="codeline">    return nullptr;</td>
    <td class="lineNumber">1714</td>
    <td class="codeline">    return nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1715</td>
    <td class="codeline"></td>
    <td class="lineNumber">1715</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1716</td>
    <td class="codeline">  bool IsEHPad = WorkList[0]->isEHPad();</td>
    <td class="lineNumber">1716</td>
    <td class="codeline">  bool IsEHPad = WorkList[0]->isEHPad();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1717</td>
    <td class="codeline"></td>
    <td class="lineNumber">1717</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1718</td>
    <td class="codeline">  MachineBasicBlock *BestBlock = nullptr;</td>
    <td class="lineNumber">1718</td>
    <td class="codeline">  MachineBasicBlock *BestBlock = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1719</td>
    <td class="codeline">  BlockFrequency BestFreq;</td>
    <td class="lineNumber">1719</td>
    <td class="codeline">  BlockFrequency BestFreq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1720</td>
    <td class="codeline">  for (MachineBasicBlock *MBB : WorkList) {</td>
    <td class="lineNumber">1720</td>
    <td class="codeline">  for (MachineBasicBlock *MBB : WorkList) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1721</td>
    <td class="codeline">    assert(MBB->isEHPad() == IsEHPad &&</td>
    <td class="lineNumber">1721</td>
    <td class="codeline">    assert(MBB->isEHPad() == IsEHPad &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1722</td>
    <td class="codeline">           "EHPad mismatch between block and work list.");</td>
    <td class="lineNumber">1722</td>
    <td class="codeline">           "EHPad mismatch between block and work list.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1723</td>
    <td class="codeline"></td>
    <td class="lineNumber">1723</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1724</td>
    <td class="codeline">    BlockChain &SuccChain = *BlockToChain[MBB];</td>
    <td class="lineNumber">1724</td>
    <td class="codeline">    BlockChain &SuccChain = *BlockToChain[MBB];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1725</td>
    <td class="codeline">    if (&SuccChain == &Chain)</td>
    <td class="lineNumber">1725</td>
    <td class="codeline">    if (&SuccChain == &Chain)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1726</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">1726</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1727</td>
    <td class="codeline"></td>
    <td class="lineNumber">1727</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1728</td>
    <td class="codeline">    assert(SuccChain.UnscheduledPredecessors == 0 &&</td>
    <td class="lineNumber">1728</td>
    <td class="codeline">    assert(SuccChain.UnscheduledPredecessors == 0 &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1729</td>
    <td class="codeline">           "Found CFG-violating block");</td>
    <td class="lineNumber">1729</td>
    <td class="codeline">           "Found CFG-violating block");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1730</td>
    <td class="codeline"></td>
    <td class="lineNumber">1730</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1731</td>
    <td class="codeline">    BlockFrequency CandidateFreq = MBFI->getBlockFreq(MBB);</td>
    <td class="lineNumber">1731</td>
    <td class="codeline">    BlockFrequency CandidateFreq = MBFI->getBlockFreq(MBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1732</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "    " << getBlockName(MBB) << " -> ";</td>
    <td class="lineNumber">1732</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "    " << getBlockName(MBB) << " -> ";</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1733</td>
    <td class="codeline">               MBFI->printBlockFreq(dbgs(), CandidateFreq) << " (freq)\n");</td>
    <td class="lineNumber">1733</td>
    <td class="codeline">               MBFI->printBlockFreq(dbgs(), CandidateFreq) << " (freq)\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1734</td>
    <td class="codeline"></td>
    <td class="lineNumber">1734</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1735</td>
    <td class="codeline">    // For ehpad, we layout the least probable first as to avoid jumping back</td>
    <td class="lineNumber">1735</td>
    <td class="codeline">    // For ehpad, we layout the least probable first as to avoid jumping back</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1736</td>
    <td class="codeline">    // from least probable landingpads to more probable ones.</td>
    <td class="lineNumber">1736</td>
    <td class="codeline">    // from least probable landingpads to more probable ones.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1737</td>
    <td class="codeline">    //</td>
    <td class="lineNumber">1737</td>
    <td class="codeline">    //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1738</td>
    <td class="codeline">    // FIXME: Using probability is probably (!) not the best way to achieve</td>
    <td class="lineNumber">1738</td>
    <td class="codeline">    // FIXME: Using probability is probably (!) not the best way to achieve</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1739</td>
    <td class="codeline">    // this. We should probably have a more principled approach to layout</td>
    <td class="lineNumber">1739</td>
    <td class="codeline">    // this. We should probably have a more principled approach to layout</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1740</td>
    <td class="codeline">    // cleanup code.</td>
    <td class="lineNumber">1740</td>
    <td class="codeline">    // cleanup code.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1741</td>
    <td class="codeline">    //</td>
    <td class="lineNumber">1741</td>
    <td class="codeline">    //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1742</td>
    <td class="codeline">    // The goal is to get:</td>
    <td class="lineNumber">1742</td>
    <td class="codeline">    // The goal is to get:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1743</td>
    <td class="codeline">    //</td>
    <td class="lineNumber">1743</td>
    <td class="codeline">    //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1744</td>
    <td class="codeline">    //                 +--------------------------+</td>
    <td class="lineNumber">1744</td>
    <td class="codeline">    //                 +--------------------------+</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1745</td>
    <td class="codeline">    //                 |                          V</td>
    <td class="lineNumber">1745</td>
    <td class="codeline">    //                 |                          V</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1746</td>
    <td class="codeline">    // InnerLp -> InnerCleanup    OuterLp -> OuterCleanup -> Resume</td>
    <td class="lineNumber">1746</td>
    <td class="codeline">    // InnerLp -> InnerCleanup    OuterLp -> OuterCleanup -> Resume</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1747</td>
    <td class="codeline">    //</td>
    <td class="lineNumber">1747</td>
    <td class="codeline">    //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1748</td>
    <td class="codeline">    // Rather than:</td>
    <td class="lineNumber">1748</td>
    <td class="codeline">    // Rather than:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1749</td>
    <td class="codeline">    //</td>
    <td class="lineNumber">1749</td>
    <td class="codeline">    //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1750</td>
    <td class="codeline">    //                 +-------------------------------------+</td>
    <td class="lineNumber">1750</td>
    <td class="codeline">    //                 +-------------------------------------+</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1751</td>
    <td class="codeline">    //                 V                                     |</td>
    <td class="lineNumber">1751</td>
    <td class="codeline">    //                 V                                     |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1752</td>
    <td class="codeline">    // OuterLp -> OuterCleanup -> Resume     InnerLp -> InnerCleanup</td>
    <td class="lineNumber">1752</td>
    <td class="codeline">    // OuterLp -> OuterCleanup -> Resume     InnerLp -> InnerCleanup</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1753</td>
    <td class="codeline">    if (BestBlock && (IsEHPad ^ (BestFreq >= CandidateFreq)))</td>
    <td class="lineNumber">1753</td>
    <td class="codeline">    if (BestBlock && (IsEHPad ^ (BestFreq >= CandidateFreq)))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1754</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">1754</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1755</td>
    <td class="codeline"></td>
    <td class="lineNumber">1755</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1756</td>
    <td class="codeline">    BestBlock = MBB;</td>
    <td class="lineNumber">1756</td>
    <td class="codeline">    BestBlock = MBB;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1757</td>
    <td class="codeline">    BestFreq = CandidateFreq;</td>
    <td class="lineNumber">1757</td>
    <td class="codeline">    BestFreq = CandidateFreq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1758</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">1758</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1759</td>
    <td class="codeline"></td>
    <td class="lineNumber">1759</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1760</td>
    <td class="codeline">  return BestBlock;</td>
    <td class="lineNumber">1760</td>
    <td class="codeline">  return BestBlock;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1761</td>
    <td class="codeline">}</td>
    <td class="lineNumber">1761</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1762</td>
    <td class="codeline"></td>
    <td class="lineNumber">1762</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1763</td>
    <td class="codeline">/// Retrieve the first unplaced basic block.</td>
    <td class="lineNumber">1763</td>
    <td class="codeline">/// Retrieve the first unplaced basic block.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1764</td>
    <td class="codeline">///</td>
    <td class="lineNumber">1764</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1765</td>
    <td class="codeline">/// This routine is called when we are unable to use the CFG to walk through</td>
    <td class="lineNumber">1765</td>
    <td class="codeline">/// This routine is called when we are unable to use the CFG to walk through</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1766</td>
    <td class="codeline">/// all of the basic blocks and form a chain due to unnatural loops in the CFG.</td>
    <td class="lineNumber">1766</td>
    <td class="codeline">/// all of the basic blocks and form a chain due to unnatural loops in the CFG.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1767</td>
    <td class="codeline">/// We walk through the function's blocks in order, starting from the</td>
    <td class="lineNumber">1767</td>
    <td class="codeline">/// We walk through the function's blocks in order, starting from the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1768</td>
    <td class="codeline">/// LastUnplacedBlockIt. We update this iterator on each call to avoid</td>
    <td class="lineNumber">1768</td>
    <td class="codeline">/// LastUnplacedBlockIt. We update this iterator on each call to avoid</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1769</td>
    <td class="codeline">/// re-scanning the entire sequence on repeated calls to this routine.</td>
    <td class="lineNumber">1769</td>
    <td class="codeline">/// re-scanning the entire sequence on repeated calls to this routine.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1770</td>
    <td class="codeline">MachineBasicBlock *MachineBlockPlacement::getFirstUnplacedBlock(</td>
    <td class="lineNumber">1770</td>
    <td class="codeline">MachineBasicBlock *MachineBlockPlacement::getFirstUnplacedBlock(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1771</td>
    <td class="codeline">    const BlockChain &PlacedChain,</td>
    <td class="lineNumber">1771</td>
    <td class="codeline">    const BlockChain &PlacedChain,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1772</td>
    <td class="codeline">    MachineFunction::iterator &PrevUnplacedBlockIt,</td>
    <td class="lineNumber">1772</td>
    <td class="codeline">    MachineFunction::iterator &PrevUnplacedBlockIt,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1773</td>
    <td class="codeline">    const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">1773</td>
    <td class="codeline">    const BlockFilterSet *BlockFilter) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1774</td>
    <td class="codeline">  for (MachineFunction::iterator I = PrevUnplacedBlockIt, E = F->end(); I != E;</td>
    <td class="lineNumber">1774</td>
    <td class="codeline">  for (MachineFunction::iterator I = PrevUnplacedBlockIt, E = F->end(); I != E;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1775</td>
    <td class="codeline">       ++I) {</td>
    <td class="lineNumber">1775</td>
    <td class="codeline">       ++I) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1776</td>
    <td class="codeline">    if (BlockFilter && !BlockFilter->count(&*I))</td>
    <td class="lineNumber">1776</td>
    <td class="codeline">    if (BlockFilter && !BlockFilter->count(&*I))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1777</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">1777</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1778</td>
    <td class="codeline">    if (BlockToChain[&*I] != &PlacedChain) {</td>
    <td class="lineNumber">1778</td>
    <td class="codeline">    if (BlockToChain[&*I] != &PlacedChain) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1779</td>
    <td class="codeline">      PrevUnplacedBlockIt = I;</td>
    <td class="lineNumber">1779</td>
    <td class="codeline">      PrevUnplacedBlockIt = I;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1780</td>
    <td class="codeline">      // Now select the head of the chain to which the unplaced block belongs</td>
    <td class="lineNumber">1780</td>
    <td class="codeline">      // Now select the head of the chain to which the unplaced block belongs</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1781</td>
    <td class="codeline">      // as the block to place. This will force the entire chain to be placed,</td>
    <td class="lineNumber">1781</td>
    <td class="codeline">      // as the block to place. This will force the entire chain to be placed,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1782</td>
    <td class="codeline">      // and satisfies the requirements of merging chains.</td>
    <td class="lineNumber">1782</td>
    <td class="codeline">      // and satisfies the requirements of merging chains.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1783</td>
    <td class="codeline">      return *BlockToChain[&*I]->begin();</td>
    <td class="lineNumber">1783</td>
    <td class="codeline">      return *BlockToChain[&*I]->begin();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1784</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">1784</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1785</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">1785</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1786</td>
    <td class="codeline">  return nullptr;</td>
    <td class="lineNumber">1786</td>
    <td class="codeline">  return nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1787</td>
    <td class="codeline">}</td>
    <td class="lineNumber">1787</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1788</td>
    <td class="codeline"></td>
    <td class="lineNumber">1788</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1789</td>
    <td class="codeline">void MachineBlockPlacement::fillWorkLists(</td>
    <td class="lineNumber">1789</td>
    <td class="codeline">void MachineBlockPlacement::fillWorkLists(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1790</td>
    <td class="codeline">    const MachineBasicBlock *MBB,</td>
    <td class="lineNumber">1790</td>
    <td class="codeline">    const MachineBasicBlock *MBB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1791</td>
    <td class="codeline">    SmallPtrSetImpl<BlockChain *> &UpdatedPreds,</td>
    <td class="lineNumber">1791</td>
    <td class="codeline">    SmallPtrSetImpl<BlockChain *> &UpdatedPreds,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1792</td>
    <td class="codeline">    const BlockFilterSet *BlockFilter = nullptr) {</td>
    <td class="lineNumber">1792</td>
    <td class="codeline">    const BlockFilterSet *BlockFilter = nullptr) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1793</td>
    <td class="codeline">  BlockChain &Chain = *BlockToChain[MBB];</td>
    <td class="lineNumber">1793</td>
    <td class="codeline">  BlockChain &Chain = *BlockToChain[MBB];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1794</td>
    <td class="codeline">  if (!UpdatedPreds.insert(&Chain).second)</td>
    <td class="lineNumber">1794</td>
    <td class="codeline">  if (!UpdatedPreds.insert(&Chain).second)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1795</td>
    <td class="codeline">    return;</td>
    <td class="lineNumber">1795</td>
    <td class="codeline">    return;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1796</td>
    <td class="codeline"></td>
    <td class="lineNumber">1796</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1797</td>
    <td class="codeline">  assert(</td>
    <td class="lineNumber">1797</td>
    <td class="codeline">  assert(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1798</td>
    <td class="codeline">      Chain.UnscheduledPredecessors == 0 &&</td>
    <td class="lineNumber">1798</td>
    <td class="codeline">      Chain.UnscheduledPredecessors == 0 &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1799</td>
    <td class="codeline">      "Attempting to place block with unscheduled predecessors in worklist.");</td>
    <td class="lineNumber">1799</td>
    <td class="codeline">      "Attempting to place block with unscheduled predecessors in worklist.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1800</td>
    <td class="codeline">  for (MachineBasicBlock *ChainBB : Chain) {</td>
    <td class="lineNumber">1800</td>
    <td class="codeline">  for (MachineBasicBlock *ChainBB : Chain) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1801</td>
    <td class="codeline">    assert(BlockToChain[ChainBB] == &Chain &&</td>
    <td class="lineNumber">1801</td>
    <td class="codeline">    assert(BlockToChain[ChainBB] == &Chain &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1802</td>
    <td class="codeline">           "Block in chain doesn't match BlockToChain map.");</td>
    <td class="lineNumber">1802</td>
    <td class="codeline">           "Block in chain doesn't match BlockToChain map.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1803</td>
    <td class="codeline">    for (MachineBasicBlock *Pred : ChainBB->predecessors()) {</td>
    <td class="lineNumber">1803</td>
    <td class="codeline">    for (MachineBasicBlock *Pred : ChainBB->predecessors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1804</td>
    <td class="codeline">      if (BlockFilter && !BlockFilter->count(Pred))</td>
    <td class="lineNumber">1804</td>
    <td class="codeline">      if (BlockFilter && !BlockFilter->count(Pred))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1805</td>
    <td class="codeline">        continue;</td>
    <td class="lineNumber">1805</td>
    <td class="codeline">        continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1806</td>
    <td class="codeline">      if (BlockToChain[Pred] == &Chain)</td>
    <td class="lineNumber">1806</td>
    <td class="codeline">      if (BlockToChain[Pred] == &Chain)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1807</td>
    <td class="codeline">        continue;</td>
    <td class="lineNumber">1807</td>
    <td class="codeline">        continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1808</td>
    <td class="codeline">      ++Chain.UnscheduledPredecessors;</td>
    <td class="lineNumber">1808</td>
    <td class="codeline">      ++Chain.UnscheduledPredecessors;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1809</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">1809</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1810</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">1810</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1811</td>
    <td class="codeline"></td>
    <td class="lineNumber">1811</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1812</td>
    <td class="codeline">  if (Chain.UnscheduledPredecessors != 0)</td>
    <td class="lineNumber">1812</td>
    <td class="codeline">  if (Chain.UnscheduledPredecessors != 0)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1813</td>
    <td class="codeline">    return;</td>
    <td class="lineNumber">1813</td>
    <td class="codeline">    return;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1814</td>
    <td class="codeline"></td>
    <td class="lineNumber">1814</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1815</td>
    <td class="codeline">  MachineBasicBlock *BB = *Chain.begin();</td>
    <td class="lineNumber">1815</td>
    <td class="codeline">  MachineBasicBlock *BB = *Chain.begin();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1816</td>
    <td class="codeline">  if (BB->isEHPad())</td>
    <td class="lineNumber">1816</td>
    <td class="codeline">  if (BB->isEHPad())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1817</td>
    <td class="codeline">    EHPadWorkList.push_back(BB);</td>
    <td class="lineNumber">1817</td>
    <td class="codeline">    EHPadWorkList.push_back(BB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1818</td>
    <td class="codeline">  else</td>
    <td class="lineNumber">1818</td>
    <td class="codeline">  else</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1819</td>
    <td class="codeline">    BlockWorkList.push_back(BB);</td>
    <td class="lineNumber">1819</td>
    <td class="codeline">    BlockWorkList.push_back(BB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1820</td>
    <td class="codeline">}</td>
    <td class="lineNumber">1820</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1821</td>
    <td class="codeline"></td>
    <td class="lineNumber">1821</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1822</td>
    <td class="codeline">void MachineBlockPlacement::buildChain(</td>
    <td class="lineNumber">1822</td>
    <td class="codeline">void MachineBlockPlacement::buildChain(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1823</td>
    <td class="codeline">    const MachineBasicBlock *HeadBB, BlockChain &Chain,</td>
    <td class="lineNumber">1823</td>
    <td class="codeline">    const MachineBasicBlock *HeadBB, BlockChain &Chain,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1824</td>
    <td class="codeline">    BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">1824</td>
    <td class="codeline">    BlockFilterSet *BlockFilter) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1825</td>
    <td class="codeline">  assert(HeadBB && "BB must not be null.\n");</td>
    <td class="lineNumber">1825</td>
    <td class="codeline">  assert(HeadBB && "BB must not be null.\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1826</td>
    <td class="codeline">  assert(BlockToChain[HeadBB] == &Chain && "BlockToChainMap mis-match.\n");</td>
    <td class="lineNumber">1826</td>
    <td class="codeline">  assert(BlockToChain[HeadBB] == &Chain && "BlockToChainMap mis-match.\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1827</td>
    <td class="codeline">  MachineFunction::iterator PrevUnplacedBlockIt = F->begin();</td>
    <td class="lineNumber">1827</td>
    <td class="codeline">  MachineFunction::iterator PrevUnplacedBlockIt = F->begin();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1828</td>
    <td class="codeline"></td>
    <td class="lineNumber">1828</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1829</td>
    <td class="codeline">  const MachineBasicBlock *LoopHeaderBB = HeadBB;</td>
    <td class="lineNumber">1829</td>
    <td class="codeline">  const MachineBasicBlock *LoopHeaderBB = HeadBB;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1830</td>
    <td class="codeline">  markChainSuccessors(Chain, LoopHeaderBB, BlockFilter);</td>
    <td class="lineNumber">1830</td>
    <td class="codeline">  markChainSuccessors(Chain, LoopHeaderBB, BlockFilter);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1831</td>
    <td class="codeline">  MachineBasicBlock *BB = *std::prev(Chain.end());</td>
    <td class="lineNumber">1831</td>
    <td class="codeline">  MachineBasicBlock *BB = *std::prev(Chain.end());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1832</td>
    <td class="codeline">  while (true) {</td>
    <td class="lineNumber">1832</td>
    <td class="codeline">  while (true) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1833</td>
    <td class="codeline">    assert(BB && "null block found at end of chain in loop.");</td>
    <td class="lineNumber">1833</td>
    <td class="codeline">    assert(BB && "null block found at end of chain in loop.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1834</td>
    <td class="codeline">    assert(BlockToChain[BB] == &Chain && "BlockToChainMap mis-match in loop.");</td>
    <td class="lineNumber">1834</td>
    <td class="codeline">    assert(BlockToChain[BB] == &Chain && "BlockToChainMap mis-match in loop.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1835</td>
    <td class="codeline">    assert(*std::prev(Chain.end()) == BB && "BB Not found at end of chain.");</td>
    <td class="lineNumber">1835</td>
    <td class="codeline">    assert(*std::prev(Chain.end()) == BB && "BB Not found at end of chain.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1836</td>
    <td class="codeline"></td>
    <td class="lineNumber">1836</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1837</td>
    <td class="codeline"></td>
    <td class="lineNumber">1837</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1838</td>
    <td class="codeline">    // Look for the best viable successor if there is one to place immediately</td>
    <td class="lineNumber">1838</td>
    <td class="codeline">    // Look for the best viable successor if there is one to place immediately</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1839</td>
    <td class="codeline">    // after this block.</td>
    <td class="lineNumber">1839</td>
    <td class="codeline">    // after this block.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1840</td>
    <td class="codeline">    auto Result = selectBestSuccessor(BB, Chain, BlockFilter);</td>
    <td class="lineNumber">1840</td>
    <td class="codeline">    auto Result = selectBestSuccessor(BB, Chain, BlockFilter);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1841</td>
    <td class="codeline">    MachineBasicBlock* BestSucc = Result.BB;</td>
    <td class="lineNumber">1841</td>
    <td class="codeline">    MachineBasicBlock* BestSucc = Result.BB;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1842</td>
    <td class="codeline">    bool ShouldTailDup = Result.ShouldTailDup;</td>
    <td class="lineNumber">1842</td>
    <td class="codeline">    bool ShouldTailDup = Result.ShouldTailDup;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1843</td>
    <td class="codeline">    if (allowTailDupPlacement())</td>
    <td class="lineNumber">1843</td>
    <td class="codeline">    if (allowTailDupPlacement())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1844</td>
    <td class="codeline">      ShouldTailDup |= (BestSucc && canTailDuplicateUnplacedPreds(BB, BestSucc,</td>
    <td class="lineNumber">1844</td>
    <td class="codeline">      ShouldTailDup |= (BestSucc && canTailDuplicateUnplacedPreds(BB, BestSucc,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1845</td>
    <td class="codeline">                                                                  Chain,</td>
    <td class="lineNumber">1845</td>
    <td class="codeline">                                                                  Chain,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1846</td>
    <td class="codeline">                                                                  BlockFilter));</td>
    <td class="lineNumber">1846</td>
    <td class="codeline">                                                                  BlockFilter));</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1847</td>
    <td class="codeline"></td>
    <td class="lineNumber">1847</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1848</td>
    <td class="codeline">    // If an immediate successor isn't available, look for the best viable</td>
    <td class="lineNumber">1848</td>
    <td class="codeline">    // If an immediate successor isn't available, look for the best viable</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1849</td>
    <td class="codeline">    // block among those we've identified as not violating the loop's CFG at</td>
    <td class="lineNumber">1849</td>
    <td class="codeline">    // block among those we've identified as not violating the loop's CFG at</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1850</td>
    <td class="codeline">    // this point. This won't be a fallthrough, but it will increase locality.</td>
    <td class="lineNumber">1850</td>
    <td class="codeline">    // this point. This won't be a fallthrough, but it will increase locality.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1851</td>
    <td class="codeline">    if (!BestSucc)</td>
    <td class="lineNumber">1851</td>
    <td class="codeline">    if (!BestSucc)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1852</td>
    <td class="codeline">      BestSucc = selectBestCandidateBlock(Chain, BlockWorkList);</td>
    <td class="lineNumber">1852</td>
    <td class="codeline">      BestSucc = selectBestCandidateBlock(Chain, BlockWorkList);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1853</td>
    <td class="codeline">    if (!BestSucc)</td>
    <td class="lineNumber">1853</td>
    <td class="codeline">    if (!BestSucc)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1854</td>
    <td class="codeline">      BestSucc = selectBestCandidateBlock(Chain, EHPadWorkList);</td>
    <td class="lineNumber">1854</td>
    <td class="codeline">      BestSucc = selectBestCandidateBlock(Chain, EHPadWorkList);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1855</td>
    <td class="codeline"></td>
    <td class="lineNumber">1855</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1856</td>
    <td class="codeline">    if (!BestSucc) {</td>
    <td class="lineNumber">1856</td>
    <td class="codeline">    if (!BestSucc) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1857</td>
    <td class="codeline">      BestSucc = getFirstUnplacedBlock(Chain, PrevUnplacedBlockIt, BlockFilter);</td>
    <td class="lineNumber">1857</td>
    <td class="codeline">      BestSucc = getFirstUnplacedBlock(Chain, PrevUnplacedBlockIt, BlockFilter);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1858</td>
    <td class="codeline">      if (!BestSucc)</td>
    <td class="lineNumber">1858</td>
    <td class="codeline">      if (!BestSucc)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1859</td>
    <td class="codeline">        break;</td>
    <td class="lineNumber">1859</td>
    <td class="codeline">        break;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1860</td>
    <td class="codeline"></td>
    <td class="lineNumber">1860</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1861</td>
    <td class="codeline">      LLVM_DEBUG(dbgs() << "Unnatural loop CFG detected, forcibly merging the "</td>
    <td class="lineNumber">1861</td>
    <td class="codeline">      LLVM_DEBUG(dbgs() << "Unnatural loop CFG detected, forcibly merging the "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1862</td>
    <td class="codeline">                           "layout successor until the CFG reduces\n");</td>
    <td class="lineNumber">1862</td>
    <td class="codeline">                           "layout successor until the CFG reduces\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1863</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">1863</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1864</td>
    <td class="codeline"></td>
    <td class="lineNumber">1864</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1865</td>
    <td class="codeline">    // Placement may have changed tail duplication opportunities.</td>
    <td class="lineNumber">1865</td>
    <td class="codeline">    // Placement may have changed tail duplication opportunities.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1866</td>
    <td class="codeline">    // Check for that now.</td>
    <td class="lineNumber">1866</td>
    <td class="codeline">    // Check for that now.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1867</td>
    <td class="codeline">    if (allowTailDupPlacement() && BestSucc && ShouldTailDup) {</td>
    <td class="lineNumber">1867</td>
    <td class="codeline">    if (allowTailDupPlacement() && BestSucc && ShouldTailDup) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1868</td>
    <td class="codeline">      repeatedlyTailDuplicateBlock(BestSucc, BB, LoopHeaderBB, Chain,</td>
    <td class="lineNumber">1868</td>
    <td class="codeline">      repeatedlyTailDuplicateBlock(BestSucc, BB, LoopHeaderBB, Chain,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1869</td>
    <td class="codeline">                                       BlockFilter, PrevUnplacedBlockIt);</td>
    <td class="lineNumber">1869</td>
    <td class="codeline">                                       BlockFilter, PrevUnplacedBlockIt);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1870</td>
    <td class="codeline">      // If the chosen successor was duplicated into BB, don't bother laying</td>
    <td class="lineNumber">1870</td>
    <td class="codeline">      // If the chosen successor was duplicated into BB, don't bother laying</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1871</td>
    <td class="codeline">      // it out, just go round the loop again with BB as the chain end.</td>
    <td class="lineNumber">1871</td>
    <td class="codeline">      // it out, just go round the loop again with BB as the chain end.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1872</td>
    <td class="codeline">      if (!BB->isSuccessor(BestSucc))</td>
    <td class="lineNumber">1872</td>
    <td class="codeline">      if (!BB->isSuccessor(BestSucc))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1873</td>
    <td class="codeline">        continue;</td>
    <td class="lineNumber">1873</td>
    <td class="codeline">        continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1874</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">1874</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1875</td>
    <td class="codeline"></td>
    <td class="lineNumber">1875</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1876</td>
    <td class="codeline">    // Place this block, updating the datastructures to reflect its placement.</td>
    <td class="lineNumber">1876</td>
    <td class="codeline">    // Place this block, updating the datastructures to reflect its placement.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1877</td>
    <td class="codeline">    BlockChain &SuccChain = *BlockToChain[BestSucc];</td>
    <td class="lineNumber">1877</td>
    <td class="codeline">    BlockChain &SuccChain = *BlockToChain[BestSucc];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1878</td>
    <td class="codeline">    // Zero out UnscheduledPredecessors for the successor we're about to merge in case</td>
    <td class="lineNumber">1878</td>
    <td class="codeline">    // Zero out UnscheduledPredecessors for the successor we're about to merge in case</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1879</td>
    <td class="codeline">    // we selected a successor that didn't fit naturally into the CFG.</td>
    <td class="lineNumber">1879</td>
    <td class="codeline">    // we selected a successor that didn't fit naturally into the CFG.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1880</td>
    <td class="codeline">    SuccChain.UnscheduledPredecessors = 0;</td>
    <td class="lineNumber">1880</td>
    <td class="codeline">    SuccChain.UnscheduledPredecessors = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1881</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "Merging from " << getBlockName(BB) << " to "</td>
    <td class="lineNumber">1881</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "Merging from " << getBlockName(BB) << " to "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1882</td>
    <td class="codeline">                      << getBlockName(BestSucc) << "\n");</td>
    <td class="lineNumber">1882</td>
    <td class="codeline">                      << getBlockName(BestSucc) << "\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1883</td>
    <td class="codeline">    markChainSuccessors(SuccChain, LoopHeaderBB, BlockFilter);</td>
    <td class="lineNumber">1883</td>
    <td class="codeline">    markChainSuccessors(SuccChain, LoopHeaderBB, BlockFilter);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1884</td>
    <td class="codeline">    Chain.merge(BestSucc, &SuccChain);</td>
    <td class="lineNumber">1884</td>
    <td class="codeline">    Chain.merge(BestSucc, &SuccChain);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1885</td>
    <td class="codeline">    BB = *std::prev(Chain.end());</td>
    <td class="lineNumber">1885</td>
    <td class="codeline">    BB = *std::prev(Chain.end());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1886</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">1886</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1887</td>
    <td class="codeline"></td>
    <td class="lineNumber">1887</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1888</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "Finished forming chain for header block "</td>
    <td class="lineNumber">1888</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "Finished forming chain for header block "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1889</td>
    <td class="codeline">                    << getBlockName(*Chain.begin()) << "\n");</td>
    <td class="lineNumber">1889</td>
    <td class="codeline">                    << getBlockName(*Chain.begin()) << "\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1890</td>
    <td class="codeline">}</td>
    <td class="lineNumber">1890</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1891</td>
    <td class="codeline"></td>
    <td class="lineNumber">1891</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1892</td>
    <td class="codeline">// If bottom of block BB has only one successor OldTop, in most cases it is</td>
    <td class="lineNumber">1892</td>
    <td class="codeline">// If bottom of block BB has only one successor OldTop, in most cases it is</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1893</td>
    <td class="codeline">// profitable to move it before OldTop, except the following case:</td>
    <td class="lineNumber">1893</td>
    <td class="codeline">// profitable to move it before OldTop, except the following case:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1894</td>
    <td class="codeline">//</td>
    <td class="lineNumber">1894</td>
    <td class="codeline">//</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1895</td>
    <td class="codeline">//     -->OldTop<-</td>
    <td class="lineNumber">1895</td>
    <td class="codeline">//     -->OldTop<-</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1896</td>
    <td class="codeline">//     |    .    |</td>
    <td class="lineNumber">1896</td>
    <td class="codeline">//     |    .    |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1897</td>
    <td class="codeline">//     |    .    |</td>
    <td class="lineNumber">1897</td>
    <td class="codeline">//     |    .    |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1898</td>
    <td class="codeline">//     |    .    |</td>
    <td class="lineNumber">1898</td>
    <td class="codeline">//     |    .    |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1899</td>
    <td class="codeline">//     ---Pred   |</td>
    <td class="lineNumber">1899</td>
    <td class="codeline">//     ---Pred   |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1900</td>
    <td class="codeline">//          |    |</td>
    <td class="lineNumber">1900</td>
    <td class="codeline">//          |    |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1901</td>
    <td class="codeline">//         BB-----</td>
    <td class="lineNumber">1901</td>
    <td class="codeline">//         BB-----</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1902</td>
    <td class="codeline">//</td>
    <td class="lineNumber">1902</td>
    <td class="codeline">//</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1903</td>
    <td class="codeline">// If BB is moved before OldTop, Pred needs a taken branch to BB, and it can't</td>
    <td class="lineNumber">1903</td>
    <td class="codeline">// If BB is moved before OldTop, Pred needs a taken branch to BB, and it can't</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1904</td>
    <td class="codeline">// layout the other successor below it, so it can't reduce taken branch.</td>
    <td class="lineNumber">1904</td>
    <td class="codeline">// layout the other successor below it, so it can't reduce taken branch.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1905</td>
    <td class="codeline">// In this case we keep its original layout.</td>
    <td class="lineNumber">1905</td>
    <td class="codeline">// In this case we keep its original layout.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1906</td>
    <td class="codeline">bool</td>
    <td class="lineNumber">1906</td>
    <td class="codeline">bool</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1907</td>
    <td class="codeline">MachineBlockPlacement::canMoveBottomBlockToTop(</td>
    <td class="lineNumber">1907</td>
    <td class="codeline">MachineBlockPlacement::canMoveBottomBlockToTop(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1908</td>
    <td class="codeline">    const MachineBasicBlock *BottomBlock,</td>
    <td class="lineNumber">1908</td>
    <td class="codeline">    const MachineBasicBlock *BottomBlock,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1909</td>
    <td class="codeline">    const MachineBasicBlock *OldTop) {</td>
    <td class="lineNumber">1909</td>
    <td class="codeline">    const MachineBasicBlock *OldTop) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1910</td>
    <td class="codeline">  if (BottomBlock->pred_size() != 1)</td>
    <td class="lineNumber">1910</td>
    <td class="codeline">  if (BottomBlock->pred_size() != 1)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1911</td>
    <td class="codeline">    return true;</td>
    <td class="lineNumber">1911</td>
    <td class="codeline">    return true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1912</td>
    <td class="codeline">  MachineBasicBlock *Pred = *BottomBlock->pred_begin();</td>
    <td class="lineNumber">1912</td>
    <td class="codeline">  MachineBasicBlock *Pred = *BottomBlock->pred_begin();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1913</td>
    <td class="codeline">  if (Pred->succ_size() != 2)</td>
    <td class="lineNumber">1913</td>
    <td class="codeline">  if (Pred->succ_size() != 2)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1914</td>
    <td class="codeline">    return true;</td>
    <td class="lineNumber">1914</td>
    <td class="codeline">    return true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1915</td>
    <td class="codeline"></td>
    <td class="lineNumber">1915</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1916</td>
    <td class="codeline">  MachineBasicBlock *OtherBB = *Pred->succ_begin();</td>
    <td class="lineNumber">1916</td>
    <td class="codeline">  MachineBasicBlock *OtherBB = *Pred->succ_begin();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1917</td>
    <td class="codeline">  if (OtherBB == BottomBlock)</td>
    <td class="lineNumber">1917</td>
    <td class="codeline">  if (OtherBB == BottomBlock)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1918</td>
    <td class="codeline">    OtherBB = *Pred->succ_rbegin();</td>
    <td class="lineNumber">1918</td>
    <td class="codeline">    OtherBB = *Pred->succ_rbegin();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1919</td>
    <td class="codeline">  if (OtherBB == OldTop)</td>
    <td class="lineNumber">1919</td>
    <td class="codeline">  if (OtherBB == OldTop)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1920</td>
    <td class="codeline">    return false;</td>
    <td class="lineNumber">1920</td>
    <td class="codeline">    return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1921</td>
    <td class="codeline"></td>
    <td class="lineNumber">1921</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1922</td>
    <td class="codeline">  return true;</td>
    <td class="lineNumber">1922</td>
    <td class="codeline">  return true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1923</td>
    <td class="codeline">}</td>
    <td class="lineNumber">1923</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1924</td>
    <td class="codeline"></td>
    <td class="lineNumber">1924</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1925</td>
    <td class="codeline">// Find out the possible fall through frequence to the top of a loop.</td>
    <td class="lineNumber">1925</td>
    <td class="codeline">// Find out the possible fall through frequence to the top of a loop.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1926</td>
    <td class="codeline">BlockFrequency</td>
    <td class="lineNumber">1926</td>
    <td class="codeline">BlockFrequency</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1927</td>
    <td class="codeline">MachineBlockPlacement::TopFallThroughFreq(</td>
    <td class="lineNumber">1927</td>
    <td class="codeline">MachineBlockPlacement::TopFallThroughFreq(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1928</td>
    <td class="codeline">    const MachineBasicBlock *Top,</td>
    <td class="lineNumber">1928</td>
    <td class="codeline">    const MachineBasicBlock *Top,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1929</td>
    <td class="codeline">    const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">1929</td>
    <td class="codeline">    const BlockFilterSet &LoopBlockSet) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1930</td>
    <td class="codeline">  BlockFrequency MaxFreq = 0;</td>
    <td class="lineNumber">1930</td>
    <td class="codeline">  BlockFrequency MaxFreq = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1931</td>
    <td class="codeline">  for (MachineBasicBlock *Pred : Top->predecessors()) {</td>
    <td class="lineNumber">1931</td>
    <td class="codeline">  for (MachineBasicBlock *Pred : Top->predecessors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1932</td>
    <td class="codeline">    BlockChain *PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">1932</td>
    <td class="codeline">    BlockChain *PredChain = BlockToChain[Pred];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1933</td>
    <td class="codeline">    if (!LoopBlockSet.count(Pred) &&</td>
    <td class="lineNumber">1933</td>
    <td class="codeline">    if (!LoopBlockSet.count(Pred) &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1934</td>
    <td class="codeline">        (!PredChain || Pred == *std::prev(PredChain->end()))) {</td>
    <td class="lineNumber">1934</td>
    <td class="codeline">        (!PredChain || Pred == *std::prev(PredChain->end()))) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1935</td>
    <td class="codeline">      // Found a Pred block can be placed before Top.</td>
    <td class="lineNumber">1935</td>
    <td class="codeline">      // Found a Pred block can be placed before Top.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1936</td>
    <td class="codeline">      // Check if Top is the best successor of Pred.</td>
    <td class="lineNumber">1936</td>
    <td class="codeline">      // Check if Top is the best successor of Pred.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1937</td>
    <td class="codeline">      auto TopProb = MBPI->getEdgeProbability(Pred, Top);</td>
    <td class="lineNumber">1937</td>
    <td class="codeline">      auto TopProb = MBPI->getEdgeProbability(Pred, Top);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1938</td>
    <td class="codeline">      bool TopOK = true;</td>
    <td class="lineNumber">1938</td>
    <td class="codeline">      bool TopOK = true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1939</td>
    <td class="codeline">      for (MachineBasicBlock *Succ : Pred->successors()) {</td>
    <td class="lineNumber">1939</td>
    <td class="codeline">      for (MachineBasicBlock *Succ : Pred->successors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1940</td>
    <td class="codeline">        auto SuccProb = MBPI->getEdgeProbability(Pred, Succ);</td>
    <td class="lineNumber">1940</td>
    <td class="codeline">        auto SuccProb = MBPI->getEdgeProbability(Pred, Succ);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1941</td>
    <td class="codeline">        BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">1941</td>
    <td class="codeline">        BlockChain *SuccChain = BlockToChain[Succ];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1942</td>
    <td class="codeline">        // Check if Succ can be placed after Pred.</td>
    <td class="lineNumber">1942</td>
    <td class="codeline">        // Check if Succ can be placed after Pred.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1943</td>
    <td class="codeline">        // Succ should not be in any chain, or it is the head of some chain.</td>
    <td class="lineNumber">1943</td>
    <td class="codeline">        // Succ should not be in any chain, or it is the head of some chain.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1944</td>
    <td class="codeline">        if (!LoopBlockSet.count(Succ) && (SuccProb > TopProb) &&</td>
    <td class="lineNumber">1944</td>
    <td class="codeline">        if (!LoopBlockSet.count(Succ) && (SuccProb > TopProb) &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1945</td>
    <td class="codeline">            (!SuccChain || Succ == *SuccChain->begin())) {</td>
    <td class="lineNumber">1945</td>
    <td class="codeline">            (!SuccChain || Succ == *SuccChain->begin())) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1946</td>
    <td class="codeline">          TopOK = false;</td>
    <td class="lineNumber">1946</td>
    <td class="codeline">          TopOK = false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1947</td>
    <td class="codeline">          break;</td>
    <td class="lineNumber">1947</td>
    <td class="codeline">          break;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1948</td>
    <td class="codeline">        }</td>
    <td class="lineNumber">1948</td>
    <td class="codeline">        }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1949</td>
    <td class="codeline">      }</td>
    <td class="lineNumber">1949</td>
    <td class="codeline">      }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1950</td>
    <td class="codeline">      if (TopOK) {</td>
    <td class="lineNumber">1950</td>
    <td class="codeline">      if (TopOK) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1951</td>
    <td class="codeline">        BlockFrequency EdgeFreq = MBFI->getBlockFreq(Pred) *</td>
    <td class="lineNumber">1951</td>
    <td class="codeline">        BlockFrequency EdgeFreq = MBFI->getBlockFreq(Pred) *</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1952</td>
    <td class="codeline">                                  MBPI->getEdgeProbability(Pred, Top);</td>
    <td class="lineNumber">1952</td>
    <td class="codeline">                                  MBPI->getEdgeProbability(Pred, Top);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1953</td>
    <td class="codeline">        if (EdgeFreq > MaxFreq)</td>
    <td class="lineNumber">1953</td>
    <td class="codeline">        if (EdgeFreq > MaxFreq)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1954</td>
    <td class="codeline">          MaxFreq = EdgeFreq;</td>
    <td class="lineNumber">1954</td>
    <td class="codeline">          MaxFreq = EdgeFreq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1955</td>
    <td class="codeline">      }</td>
    <td class="lineNumber">1955</td>
    <td class="codeline">      }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1956</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">1956</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1957</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">1957</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1958</td>
    <td class="codeline">  return MaxFreq;</td>
    <td class="lineNumber">1958</td>
    <td class="codeline">  return MaxFreq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1959</td>
    <td class="codeline">}</td>
    <td class="lineNumber">1959</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1960</td>
    <td class="codeline"></td>
    <td class="lineNumber">1960</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1961</td>
    <td class="codeline">// Compute the fall through gains when move NewTop before OldTop.</td>
    <td class="lineNumber">1961</td>
    <td class="codeline">// Compute the fall through gains when move NewTop before OldTop.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1962</td>
    <td class="codeline">//</td>
    <td class="lineNumber">1962</td>
    <td class="codeline">//</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1963</td>
    <td class="codeline">// In following diagram, edges marked as "-" are reduced fallthrough, edges</td>
    <td class="lineNumber">1963</td>
    <td class="codeline">// In following diagram, edges marked as "-" are reduced fallthrough, edges</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1964</td>
    <td class="codeline">// marked as "+" are increased fallthrough, this function computes</td>
    <td class="lineNumber">1964</td>
    <td class="codeline">// marked as "+" are increased fallthrough, this function computes</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1965</td>
    <td class="codeline">//</td>
    <td class="lineNumber">1965</td>
    <td class="codeline">//</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1966</td>
    <td class="codeline">//      SUM(increased fallthrough) - SUM(decreased fallthrough)</td>
    <td class="lineNumber">1966</td>
    <td class="codeline">//      SUM(increased fallthrough) - SUM(decreased fallthrough)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1967</td>
    <td class="codeline">//</td>
    <td class="lineNumber">1967</td>
    <td class="codeline">//</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1968</td>
    <td class="codeline">//              |</td>
    <td class="lineNumber">1968</td>
    <td class="codeline">//              |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1969</td>
    <td class="codeline">//              | -</td>
    <td class="lineNumber">1969</td>
    <td class="codeline">//              | -</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1970</td>
    <td class="codeline">//              V</td>
    <td class="lineNumber">1970</td>
    <td class="codeline">//              V</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1971</td>
    <td class="codeline">//        --->OldTop</td>
    <td class="lineNumber">1971</td>
    <td class="codeline">//        --->OldTop</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1972</td>
    <td class="codeline">//        |     .</td>
    <td class="lineNumber">1972</td>
    <td class="codeline">//        |     .</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1973</td>
    <td class="codeline">//        |     .</td>
    <td class="lineNumber">1973</td>
    <td class="codeline">//        |     .</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1974</td>
    <td class="codeline">//       +|     .    +</td>
    <td class="lineNumber">1974</td>
    <td class="codeline">//       +|     .    +</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1975</td>
    <td class="codeline">//        |   Pred ---></td>
    <td class="lineNumber">1975</td>
    <td class="codeline">//        |   Pred ---></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1976</td>
    <td class="codeline">//        |     |-</td>
    <td class="lineNumber">1976</td>
    <td class="codeline">//        |     |-</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1977</td>
    <td class="codeline">//        |     V</td>
    <td class="lineNumber">1977</td>
    <td class="codeline">//        |     V</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1978</td>
    <td class="codeline">//        --- NewTop <---</td>
    <td class="lineNumber">1978</td>
    <td class="codeline">//        --- NewTop <---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1979</td>
    <td class="codeline">//              |-</td>
    <td class="lineNumber">1979</td>
    <td class="codeline">//              |-</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1980</td>
    <td class="codeline">//              V</td>
    <td class="lineNumber">1980</td>
    <td class="codeline">//              V</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1981</td>
    <td class="codeline">//</td>
    <td class="lineNumber">1981</td>
    <td class="codeline">//</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1982</td>
    <td class="codeline">BlockFrequency</td>
    <td class="lineNumber">1982</td>
    <td class="codeline">BlockFrequency</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1983</td>
    <td class="codeline">MachineBlockPlacement::FallThroughGains(</td>
    <td class="lineNumber">1983</td>
    <td class="codeline">MachineBlockPlacement::FallThroughGains(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1984</td>
    <td class="codeline">    const MachineBasicBlock *NewTop,</td>
    <td class="lineNumber">1984</td>
    <td class="codeline">    const MachineBasicBlock *NewTop,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1985</td>
    <td class="codeline">    const MachineBasicBlock *OldTop,</td>
    <td class="lineNumber">1985</td>
    <td class="codeline">    const MachineBasicBlock *OldTop,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1986</td>
    <td class="codeline">    const MachineBasicBlock *ExitBB,</td>
    <td class="lineNumber">1986</td>
    <td class="codeline">    const MachineBasicBlock *ExitBB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1987</td>
    <td class="codeline">    const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">1987</td>
    <td class="codeline">    const BlockFilterSet &LoopBlockSet) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1988</td>
    <td class="codeline">  BlockFrequency FallThrough2Top = TopFallThroughFreq(OldTop, LoopBlockSet);</td>
    <td class="lineNumber">1988</td>
    <td class="codeline">  BlockFrequency FallThrough2Top = TopFallThroughFreq(OldTop, LoopBlockSet);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1989</td>
    <td class="codeline">  BlockFrequency FallThrough2Exit = 0;</td>
    <td class="lineNumber">1989</td>
    <td class="codeline">  BlockFrequency FallThrough2Exit = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1990</td>
    <td class="codeline">  if (ExitBB)</td>
    <td class="lineNumber">1990</td>
    <td class="codeline">  if (ExitBB)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1991</td>
    <td class="codeline">    FallThrough2Exit = MBFI->getBlockFreq(NewTop) *</td>
    <td class="lineNumber">1991</td>
    <td class="codeline">    FallThrough2Exit = MBFI->getBlockFreq(NewTop) *</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1992</td>
    <td class="codeline">        MBPI->getEdgeProbability(NewTop, ExitBB);</td>
    <td class="lineNumber">1992</td>
    <td class="codeline">        MBPI->getEdgeProbability(NewTop, ExitBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1993</td>
    <td class="codeline">  BlockFrequency BackEdgeFreq = MBFI->getBlockFreq(NewTop) *</td>
    <td class="lineNumber">1993</td>
    <td class="codeline">  BlockFrequency BackEdgeFreq = MBFI->getBlockFreq(NewTop) *</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1994</td>
    <td class="codeline">      MBPI->getEdgeProbability(NewTop, OldTop);</td>
    <td class="lineNumber">1994</td>
    <td class="codeline">      MBPI->getEdgeProbability(NewTop, OldTop);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1995</td>
    <td class="codeline"></td>
    <td class="lineNumber">1995</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1996</td>
    <td class="codeline">  // Find the best Pred of NewTop.</td>
    <td class="lineNumber">1996</td>
    <td class="codeline">  // Find the best Pred of NewTop.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1997</td>
    <td class="codeline">   MachineBasicBlock *BestPred = nullptr;</td>
    <td class="lineNumber">1997</td>
    <td class="codeline">   MachineBasicBlock *BestPred = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1998</td>
    <td class="codeline">   BlockFrequency FallThroughFromPred = 0;</td>
    <td class="lineNumber">1998</td>
    <td class="codeline">   BlockFrequency FallThroughFromPred = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1999</td>
    <td class="codeline">   for (MachineBasicBlock *Pred : NewTop->predecessors()) {</td>
    <td class="lineNumber">1999</td>
    <td class="codeline">   for (MachineBasicBlock *Pred : NewTop->predecessors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2000</td>
    <td class="codeline">     if (!LoopBlockSet.count(Pred))</td>
    <td class="lineNumber">2000</td>
    <td class="codeline">     if (!LoopBlockSet.count(Pred))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2001</td>
    <td class="codeline">       continue;</td>
    <td class="lineNumber">2001</td>
    <td class="codeline">       continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2002</td>
    <td class="codeline">     BlockChain *PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">2002</td>
    <td class="codeline">     BlockChain *PredChain = BlockToChain[Pred];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2003</td>
    <td class="codeline">     if (!PredChain || Pred == *std::prev(PredChain->end())) {</td>
    <td class="lineNumber">2003</td>
    <td class="codeline">     if (!PredChain || Pred == *std::prev(PredChain->end())) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2004</td>
    <td class="codeline">       BlockFrequency EdgeFreq = MBFI->getBlockFreq(Pred) *</td>
    <td class="lineNumber">2004</td>
    <td class="codeline">       BlockFrequency EdgeFreq = MBFI->getBlockFreq(Pred) *</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2005</td>
    <td class="codeline">           MBPI->getEdgeProbability(Pred, NewTop);</td>
    <td class="lineNumber">2005</td>
    <td class="codeline">           MBPI->getEdgeProbability(Pred, NewTop);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2006</td>
    <td class="codeline">       if (EdgeFreq > FallThroughFromPred) {</td>
    <td class="lineNumber">2006</td>
    <td class="codeline">       if (EdgeFreq > FallThroughFromPred) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2007</td>
    <td class="codeline">         FallThroughFromPred = EdgeFreq;</td>
    <td class="lineNumber">2007</td>
    <td class="codeline">         FallThroughFromPred = EdgeFreq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2008</td>
    <td class="codeline">         BestPred = Pred;</td>
    <td class="lineNumber">2008</td>
    <td class="codeline">         BestPred = Pred;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2009</td>
    <td class="codeline">       }</td>
    <td class="lineNumber">2009</td>
    <td class="codeline">       }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2010</td>
    <td class="codeline">     }</td>
    <td class="lineNumber">2010</td>
    <td class="codeline">     }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2011</td>
    <td class="codeline">   }</td>
    <td class="lineNumber">2011</td>
    <td class="codeline">   }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2012</td>
    <td class="codeline"></td>
    <td class="lineNumber">2012</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2013</td>
    <td class="codeline">   // If NewTop is not placed after Pred, another successor can be placed</td>
    <td class="lineNumber">2013</td>
    <td class="codeline">   // If NewTop is not placed after Pred, another successor can be placed</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2014</td>
    <td class="codeline">   // after Pred.</td>
    <td class="lineNumber">2014</td>
    <td class="codeline">   // after Pred.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2015</td>
    <td class="codeline">   BlockFrequency NewFreq = 0;</td>
    <td class="lineNumber">2015</td>
    <td class="codeline">   BlockFrequency NewFreq = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2016</td>
    <td class="codeline">   if (BestPred) {</td>
    <td class="lineNumber">2016</td>
    <td class="codeline">   if (BestPred) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2017</td>
    <td class="codeline">     for (MachineBasicBlock *Succ : BestPred->successors()) {</td>
    <td class="lineNumber">2017</td>
    <td class="codeline">     for (MachineBasicBlock *Succ : BestPred->successors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2018</td>
    <td class="codeline">       if ((Succ == NewTop) || (Succ == BestPred) || !LoopBlockSet.count(Succ))</td>
    <td class="lineNumber">2018</td>
    <td class="codeline">       if ((Succ == NewTop) || (Succ == BestPred) || !LoopBlockSet.count(Succ))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2019</td>
    <td class="codeline">         continue;</td>
    <td class="lineNumber">2019</td>
    <td class="codeline">         continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2020</td>
    <td class="codeline">       if (ComputedEdges.contains(Succ))</td>
    <td class="lineNumber">2020</td>
    <td class="codeline">       if (ComputedEdges.contains(Succ))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2021</td>
    <td class="codeline">         continue;</td>
    <td class="lineNumber">2021</td>
    <td class="codeline">         continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2022</td>
    <td class="codeline">       BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">2022</td>
    <td class="codeline">       BlockChain *SuccChain = BlockToChain[Succ];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2023</td>
    <td class="codeline">       if ((SuccChain && (Succ != *SuccChain->begin())) ||</td>
    <td class="lineNumber">2023</td>
    <td class="codeline">       if ((SuccChain && (Succ != *SuccChain->begin())) ||</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2024</td>
    <td class="codeline">           (SuccChain == BlockToChain[BestPred]))</td>
    <td class="lineNumber">2024</td>
    <td class="codeline">           (SuccChain == BlockToChain[BestPred]))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2025</td>
    <td class="codeline">         continue;</td>
    <td class="lineNumber">2025</td>
    <td class="codeline">         continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2026</td>
    <td class="codeline">       BlockFrequency EdgeFreq = MBFI->getBlockFreq(BestPred) *</td>
    <td class="lineNumber">2026</td>
    <td class="codeline">       BlockFrequency EdgeFreq = MBFI->getBlockFreq(BestPred) *</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2027</td>
    <td class="codeline">           MBPI->getEdgeProbability(BestPred, Succ);</td>
    <td class="lineNumber">2027</td>
    <td class="codeline">           MBPI->getEdgeProbability(BestPred, Succ);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2028</td>
    <td class="codeline">       if (EdgeFreq > NewFreq)</td>
    <td class="lineNumber">2028</td>
    <td class="codeline">       if (EdgeFreq > NewFreq)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2029</td>
    <td class="codeline">         NewFreq = EdgeFreq;</td>
    <td class="lineNumber">2029</td>
    <td class="codeline">         NewFreq = EdgeFreq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2030</td>
    <td class="codeline">     }</td>
    <td class="lineNumber">2030</td>
    <td class="codeline">     }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2031</td>
    <td class="codeline">     BlockFrequency OrigEdgeFreq = MBFI->getBlockFreq(BestPred) *</td>
    <td class="lineNumber">2031</td>
    <td class="codeline">     BlockFrequency OrigEdgeFreq = MBFI->getBlockFreq(BestPred) *</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2032</td>
    <td class="codeline">         MBPI->getEdgeProbability(BestPred, NewTop);</td>
    <td class="lineNumber">2032</td>
    <td class="codeline">         MBPI->getEdgeProbability(BestPred, NewTop);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2033</td>
    <td class="codeline">     if (NewFreq > OrigEdgeFreq) {</td>
    <td class="lineNumber">2033</td>
    <td class="codeline">     if (NewFreq > OrigEdgeFreq) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2034</td>
    <td class="codeline">       // If NewTop is not the best successor of Pred, then Pred doesn't</td>
    <td class="lineNumber">2034</td>
    <td class="codeline">       // If NewTop is not the best successor of Pred, then Pred doesn't</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2035</td>
    <td class="codeline">       // fallthrough to NewTop. So there is no FallThroughFromPred and</td>
    <td class="lineNumber">2035</td>
    <td class="codeline">       // fallthrough to NewTop. So there is no FallThroughFromPred and</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2036</td>
    <td class="codeline">       // NewFreq.</td>
    <td class="lineNumber">2036</td>
    <td class="codeline">       // NewFreq.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2037</td>
    <td class="codeline">       NewFreq = 0;</td>
    <td class="lineNumber">2037</td>
    <td class="codeline">       NewFreq = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2038</td>
    <td class="codeline">       FallThroughFromPred = 0;</td>
    <td class="lineNumber">2038</td>
    <td class="codeline">       FallThroughFromPred = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2039</td>
    <td class="codeline">     }</td>
    <td class="lineNumber">2039</td>
    <td class="codeline">     }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2040</td>
    <td class="codeline">   }</td>
    <td class="lineNumber">2040</td>
    <td class="codeline">   }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2041</td>
    <td class="codeline"></td>
    <td class="lineNumber">2041</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2042</td>
    <td class="codeline">   BlockFrequency Result = 0;</td>
    <td class="lineNumber">2042</td>
    <td class="codeline">   BlockFrequency Result = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2043</td>
    <td class="codeline">   BlockFrequency Gains = BackEdgeFreq + NewFreq;</td>
    <td class="lineNumber">2043</td>
    <td class="codeline">   BlockFrequency Gains = BackEdgeFreq + NewFreq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2044</td>
    <td class="codeline">   BlockFrequency Lost = FallThrough2Top + FallThrough2Exit +</td>
    <td class="lineNumber">2044</td>
    <td class="codeline">   BlockFrequency Lost = FallThrough2Top + FallThrough2Exit +</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2045</td>
    <td class="codeline">       FallThroughFromPred;</td>
    <td class="lineNumber">2045</td>
    <td class="codeline">       FallThroughFromPred;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2046</td>
    <td class="codeline">   if (Gains > Lost)</td>
    <td class="lineNumber">2046</td>
    <td class="codeline">   if (Gains > Lost)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2047</td>
    <td class="codeline">     Result = Gains - Lost;</td>
    <td class="lineNumber">2047</td>
    <td class="codeline">     Result = Gains - Lost;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2048</td>
    <td class="codeline">   return Result;</td>
    <td class="lineNumber">2048</td>
    <td class="codeline">   return Result;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2049</td>
    <td class="codeline">}</td>
    <td class="lineNumber">2049</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2050</td>
    <td class="codeline"></td>
    <td class="lineNumber">2050</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2051</td>
    <td class="codeline">/// Helper function of findBestLoopTop. Find the best loop top block</td>
    <td class="lineNumber">2051</td>
    <td class="codeline">/// Helper function of findBestLoopTop. Find the best loop top block</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2052</td>
    <td class="codeline">/// from predecessors of old top.</td>
    <td class="lineNumber">2052</td>
    <td class="codeline">/// from predecessors of old top.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2053</td>
    <td class="codeline">///</td>
    <td class="lineNumber">2053</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2054</td>
    <td class="codeline">/// Look for a block which is strictly better than the old top for laying</td>
    <td class="lineNumber">2054</td>
    <td class="codeline">/// Look for a block which is strictly better than the old top for laying</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2055</td>
    <td class="codeline">/// out before the old top of the loop. This looks for only two patterns:</td>
    <td class="lineNumber">2055</td>
    <td class="codeline">/// out before the old top of the loop. This looks for only two patterns:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2056</td>
    <td class="codeline">///</td>
    <td class="lineNumber">2056</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2057</td>
    <td class="codeline">///     1. a block has only one successor, the old loop top</td>
    <td class="lineNumber">2057</td>
    <td class="codeline">///     1. a block has only one successor, the old loop top</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2058</td>
    <td class="codeline">///</td>
    <td class="lineNumber">2058</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2059</td>
    <td class="codeline">///        Because such a block will always result in an unconditional jump,</td>
    <td class="lineNumber">2059</td>
    <td class="codeline">///        Because such a block will always result in an unconditional jump,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2060</td>
    <td class="codeline">///        rotating it in front of the old top is always profitable.</td>
    <td class="lineNumber">2060</td>
    <td class="codeline">///        rotating it in front of the old top is always profitable.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2061</td>
    <td class="codeline">///</td>
    <td class="lineNumber">2061</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2062</td>
    <td class="codeline">///     2. a block has two successors, one is old top, another is exit</td>
    <td class="lineNumber">2062</td>
    <td class="codeline">///     2. a block has two successors, one is old top, another is exit</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2063</td>
    <td class="codeline">///        and it has more than one predecessors</td>
    <td class="lineNumber">2063</td>
    <td class="codeline">///        and it has more than one predecessors</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2064</td>
    <td class="codeline">///</td>
    <td class="lineNumber">2064</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2065</td>
    <td class="codeline">///        If it is below one of its predecessors P, only P can fall through to</td>
    <td class="lineNumber">2065</td>
    <td class="codeline">///        If it is below one of its predecessors P, only P can fall through to</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2066</td>
    <td class="codeline">///        it, all other predecessors need a jump to it, and another conditional</td>
    <td class="lineNumber">2066</td>
    <td class="codeline">///        it, all other predecessors need a jump to it, and another conditional</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2067</td>
    <td class="codeline">///        jump to loop header. If it is moved before loop header, all its</td>
    <td class="lineNumber">2067</td>
    <td class="codeline">///        jump to loop header. If it is moved before loop header, all its</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2068</td>
    <td class="codeline">///        predecessors jump to it, then fall through to loop header. So all its</td>
    <td class="lineNumber">2068</td>
    <td class="codeline">///        predecessors jump to it, then fall through to loop header. So all its</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2069</td>
    <td class="codeline">///        predecessors except P can reduce one taken branch.</td>
    <td class="lineNumber">2069</td>
    <td class="codeline">///        predecessors except P can reduce one taken branch.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2070</td>
    <td class="codeline">///        At the same time, move it before old top increases the taken branch</td>
    <td class="lineNumber">2070</td>
    <td class="codeline">///        At the same time, move it before old top increases the taken branch</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2071</td>
    <td class="codeline">///        to loop exit block, so the reduced taken branch will be compared with</td>
    <td class="lineNumber">2071</td>
    <td class="codeline">///        to loop exit block, so the reduced taken branch will be compared with</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2072</td>
    <td class="codeline">///        the increased taken branch to the loop exit block.</td>
    <td class="lineNumber">2072</td>
    <td class="codeline">///        the increased taken branch to the loop exit block.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2073</td>
    <td class="codeline">MachineBasicBlock *</td>
    <td class="lineNumber">2073</td>
    <td class="codeline">MachineBasicBlock *</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2074</td>
    <td class="codeline">MachineBlockPlacement::findBestLoopTopHelper(</td>
    <td class="lineNumber">2074</td>
    <td class="codeline">MachineBlockPlacement::findBestLoopTopHelper(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2075</td>
    <td class="codeline">    MachineBasicBlock *OldTop,</td>
    <td class="lineNumber">2075</td>
    <td class="codeline">    MachineBasicBlock *OldTop,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2076</td>
    <td class="codeline">    const MachineLoop &L,</td>
    <td class="lineNumber">2076</td>
    <td class="codeline">    const MachineLoop &L,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2077</td>
    <td class="codeline">    const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">2077</td>
    <td class="codeline">    const BlockFilterSet &LoopBlockSet) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2078</td>
    <td class="codeline">  // Check that the header hasn't been fused with a preheader block due to</td>
    <td class="lineNumber">2078</td>
    <td class="codeline">  // Check that the header hasn't been fused with a preheader block due to</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2079</td>
    <td class="codeline">  // crazy branches. If it has, we need to start with the header at the top to</td>
    <td class="lineNumber">2079</td>
    <td class="codeline">  // crazy branches. If it has, we need to start with the header at the top to</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2080</td>
    <td class="codeline">  // prevent pulling the preheader into the loop body.</td>
    <td class="lineNumber">2080</td>
    <td class="codeline">  // prevent pulling the preheader into the loop body.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2081</td>
    <td class="codeline">  BlockChain &HeaderChain = *BlockToChain[OldTop];</td>
    <td class="lineNumber">2081</td>
    <td class="codeline">  BlockChain &HeaderChain = *BlockToChain[OldTop];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2082</td>
    <td class="codeline">  if (!LoopBlockSet.count(*HeaderChain.begin()))</td>
    <td class="lineNumber">2082</td>
    <td class="codeline">  if (!LoopBlockSet.count(*HeaderChain.begin()))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2083</td>
    <td class="codeline">    return OldTop;</td>
    <td class="lineNumber">2083</td>
    <td class="codeline">    return OldTop;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2084</td>
    <td class="codeline">  if (OldTop != *HeaderChain.begin())</td>
    <td class="lineNumber">2084</td>
    <td class="codeline">  if (OldTop != *HeaderChain.begin())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2085</td>
    <td class="codeline">    return OldTop;</td>
    <td class="lineNumber">2085</td>
    <td class="codeline">    return OldTop;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2086</td>
    <td class="codeline"></td>
    <td class="lineNumber">2086</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2087</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "Finding best loop top for: " << getBlockName(OldTop)</td>
    <td class="lineNumber">2087</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "Finding best loop top for: " << getBlockName(OldTop)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2088</td>
    <td class="codeline">                    << "\n");</td>
    <td class="lineNumber">2088</td>
    <td class="codeline">                    << "\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2089</td>
    <td class="codeline"></td>
    <td class="lineNumber">2089</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2090</td>
    <td class="codeline">  BlockFrequency BestGains = 0;</td>
    <td class="lineNumber">2090</td>
    <td class="codeline">  BlockFrequency BestGains = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2091</td>
    <td class="codeline">  MachineBasicBlock *BestPred = nullptr;</td>
    <td class="lineNumber">2091</td>
    <td class="codeline">  MachineBasicBlock *BestPred = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2092</td>
    <td class="codeline">  for (MachineBasicBlock *Pred : OldTop->predecessors()) {</td>
    <td class="lineNumber">2092</td>
    <td class="codeline">  for (MachineBasicBlock *Pred : OldTop->predecessors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2093</td>
    <td class="codeline">    if (!LoopBlockSet.count(Pred))</td>
    <td class="lineNumber">2093</td>
    <td class="codeline">    if (!LoopBlockSet.count(Pred))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2094</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">2094</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2095</td>
    <td class="codeline">    if (Pred == L.getHeader())</td>
    <td class="lineNumber">2095</td>
    <td class="codeline">    if (Pred == L.getHeader())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2096</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">2096</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2097</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "   old top pred: " << getBlockName(Pred) << ", has "</td>
    <td class="lineNumber">2097</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "   old top pred: " << getBlockName(Pred) << ", has "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2098</td>
    <td class="codeline">                      << Pred->succ_size() << " successors, ";</td>
    <td class="lineNumber">2098</td>
    <td class="codeline">                      << Pred->succ_size() << " successors, ";</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2099</td>
    <td class="codeline">               MBFI->printBlockFreq(dbgs(), Pred) << " freq\n");</td>
    <td class="lineNumber">2099</td>
    <td class="codeline">               MBFI->printBlockFreq(dbgs(), Pred) << " freq\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2100</td>
    <td class="codeline">    if (Pred->succ_size() > 2)</td>
    <td class="lineNumber">2100</td>
    <td class="codeline">    if (Pred->succ_size() > 2)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2101</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">2101</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2102</td>
    <td class="codeline"></td>
    <td class="lineNumber">2102</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2103</td>
    <td class="codeline">    MachineBasicBlock *OtherBB = nullptr;</td>
    <td class="lineNumber">2103</td>
    <td class="codeline">    MachineBasicBlock *OtherBB = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2104</td>
    <td class="codeline">    if (Pred->succ_size() == 2) {</td>
    <td class="lineNumber">2104</td>
    <td class="codeline">    if (Pred->succ_size() == 2) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2105</td>
    <td class="codeline">      OtherBB = *Pred->succ_begin();</td>
    <td class="lineNumber">2105</td>
    <td class="codeline">      OtherBB = *Pred->succ_begin();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2106</td>
    <td class="codeline">      if (OtherBB == OldTop)</td>
    <td class="lineNumber">2106</td>
    <td class="codeline">      if (OtherBB == OldTop)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2107</td>
    <td class="codeline">        OtherBB = *Pred->succ_rbegin();</td>
    <td class="lineNumber">2107</td>
    <td class="codeline">        OtherBB = *Pred->succ_rbegin();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2108</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2108</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2109</td>
    <td class="codeline"></td>
    <td class="lineNumber">2109</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2110</td>
    <td class="codeline">    if (!canMoveBottomBlockToTop(Pred, OldTop))</td>
    <td class="lineNumber">2110</td>
    <td class="codeline">    if (!canMoveBottomBlockToTop(Pred, OldTop))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2111</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">2111</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2112</td>
    <td class="codeline"></td>
    <td class="lineNumber">2112</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2113</td>
    <td class="codeline">    BlockFrequency Gains = FallThroughGains(Pred, OldTop, OtherBB,</td>
    <td class="lineNumber">2113</td>
    <td class="codeline">    BlockFrequency Gains = FallThroughGains(Pred, OldTop, OtherBB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2114</td>
    <td class="codeline">                                            LoopBlockSet);</td>
    <td class="lineNumber">2114</td>
    <td class="codeline">                                            LoopBlockSet);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2115</td>
    <td class="codeline">    if ((Gains > 0) && (Gains > BestGains ||</td>
    <td class="lineNumber">2115</td>
    <td class="codeline">    if ((Gains > 0) && (Gains > BestGains ||</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2116</td>
    <td class="codeline">        ((Gains == BestGains) && Pred->isLayoutSuccessor(OldTop)))) {</td>
    <td class="lineNumber">2116</td>
    <td class="codeline">        ((Gains == BestGains) && Pred->isLayoutSuccessor(OldTop)))) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2117</td>
    <td class="codeline">      BestPred = Pred;</td>
    <td class="lineNumber">2117</td>
    <td class="codeline">      BestPred = Pred;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2118</td>
    <td class="codeline">      BestGains = Gains;</td>
    <td class="lineNumber">2118</td>
    <td class="codeline">      BestGains = Gains;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2119</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2119</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2120</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">2120</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2121</td>
    <td class="codeline"></td>
    <td class="lineNumber">2121</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2122</td>
    <td class="codeline">  // If no direct predecessor is fine, just use the loop header.</td>
    <td class="lineNumber">2122</td>
    <td class="codeline">  // If no direct predecessor is fine, just use the loop header.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2123</td>
    <td class="codeline">  if (!BestPred) {</td>
    <td class="lineNumber">2123</td>
    <td class="codeline">  if (!BestPred) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2124</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "    final top unchanged\n");</td>
    <td class="lineNumber">2124</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "    final top unchanged\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2125</td>
    <td class="codeline">    return OldTop;</td>
    <td class="lineNumber">2125</td>
    <td class="codeline">    return OldTop;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2126</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">2126</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2127</td>
    <td class="codeline"></td>
    <td class="lineNumber">2127</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2128</td>
    <td class="codeline">  // Walk backwards through any straight line of predecessors.</td>
    <td class="lineNumber">2128</td>
    <td class="codeline">  // Walk backwards through any straight line of predecessors.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2129</td>
    <td class="codeline">  while (BestPred->pred_size() == 1 &&</td>
    <td class="lineNumber">2129</td>
    <td class="codeline">  while (BestPred->pred_size() == 1 &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2130</td>
    <td class="codeline">         (*BestPred->pred_begin())->succ_size() == 1 &&</td>
    <td class="lineNumber">2130</td>
    <td class="codeline">         (*BestPred->pred_begin())->succ_size() == 1 &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2131</td>
    <td class="codeline">         *BestPred->pred_begin() != L.getHeader())</td>
    <td class="lineNumber">2131</td>
    <td class="codeline">         *BestPred->pred_begin() != L.getHeader())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2132</td>
    <td class="codeline">    BestPred = *BestPred->pred_begin();</td>
    <td class="lineNumber">2132</td>
    <td class="codeline">    BestPred = *BestPred->pred_begin();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2133</td>
    <td class="codeline"></td>
    <td class="lineNumber">2133</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2134</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "    final top: " << getBlockName(BestPred) << "\n");</td>
    <td class="lineNumber">2134</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "    final top: " << getBlockName(BestPred) << "\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2135</td>
    <td class="codeline">  return BestPred;</td>
    <td class="lineNumber">2135</td>
    <td class="codeline">  return BestPred;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2136</td>
    <td class="codeline">}</td>
    <td class="lineNumber">2136</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2137</td>
    <td class="codeline"></td>
    <td class="lineNumber">2137</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2138</td>
    <td class="codeline">/// Find the best loop top block for layout.</td>
    <td class="lineNumber">2138</td>
    <td class="codeline">/// Find the best loop top block for layout.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2139</td>
    <td class="codeline">///</td>
    <td class="lineNumber">2139</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2140</td>
    <td class="codeline">/// This function iteratively calls findBestLoopTopHelper, until no new better</td>
    <td class="lineNumber">2140</td>
    <td class="codeline">/// This function iteratively calls findBestLoopTopHelper, until no new better</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2141</td>
    <td class="codeline">/// BB can be found.</td>
    <td class="lineNumber">2141</td>
    <td class="codeline">/// BB can be found.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2142</td>
    <td class="codeline">MachineBasicBlock *</td>
    <td class="lineNumber">2142</td>
    <td class="codeline">MachineBasicBlock *</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2143</td>
    <td class="codeline">MachineBlockPlacement::findBestLoopTop(const MachineLoop &L,</td>
    <td class="lineNumber">2143</td>
    <td class="codeline">MachineBlockPlacement::findBestLoopTop(const MachineLoop &L,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2144</td>
    <td class="codeline">                                       const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">2144</td>
    <td class="codeline">                                       const BlockFilterSet &LoopBlockSet) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2145</td>
    <td class="codeline">  // Placing the latch block before the header may introduce an extra branch</td>
    <td class="lineNumber">2145</td>
    <td class="codeline">  // Placing the latch block before the header may introduce an extra branch</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2146</td>
    <td class="codeline">  // that skips this block the first time the loop is executed, which we want</td>
    <td class="lineNumber">2146</td>
    <td class="codeline">  // that skips this block the first time the loop is executed, which we want</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2147</td>
    <td class="codeline">  // to avoid when optimising for size.</td>
    <td class="lineNumber">2147</td>
    <td class="codeline">  // to avoid when optimising for size.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2148</td>
    <td class="codeline">  // FIXME: in theory there is a case that does not introduce a new branch,</td>
    <td class="lineNumber">2148</td>
    <td class="codeline">  // FIXME: in theory there is a case that does not introduce a new branch,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2149</td>
    <td class="codeline">  // i.e. when the layout predecessor does not fallthrough to the loop header.</td>
    <td class="lineNumber">2149</td>
    <td class="codeline">  // i.e. when the layout predecessor does not fallthrough to the loop header.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2150</td>
    <td class="codeline">  // In practice this never happens though: there always seems to be a preheader</td>
    <td class="lineNumber">2150</td>
    <td class="codeline">  // In practice this never happens though: there always seems to be a preheader</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2151</td>
    <td class="codeline">  // that can fallthrough and that is also placed before the header.</td>
    <td class="lineNumber">2151</td>
    <td class="codeline">  // that can fallthrough and that is also placed before the header.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2152</td>
    <td class="codeline">  bool OptForSize = F->getFunction().hasOptSize() ||</td>
    <td class="lineNumber">2152</td>
    <td class="codeline">  bool OptForSize = F->getFunction().hasOptSize() ||</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2153</td>
    <td class="codeline">                    llvm::shouldOptimizeForSize(L.getHeader(), PSI, MBFI.get());</td>
    <td class="lineNumber">2153</td>
    <td class="codeline">                    llvm::shouldOptimizeForSize(L.getHeader(), PSI, MBFI.get());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2154</td>
    <td class="codeline">  if (OptForSize)</td>
    <td class="lineNumber">2154</td>
    <td class="codeline">  if (OptForSize)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2155</td>
    <td class="codeline">    return L.getHeader();</td>
    <td class="lineNumber">2155</td>
    <td class="codeline">    return L.getHeader();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2156</td>
    <td class="codeline"></td>
    <td class="lineNumber">2156</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2157</td>
    <td class="codeline">  MachineBasicBlock *OldTop = nullptr;</td>
    <td class="lineNumber">2157</td>
    <td class="codeline">  MachineBasicBlock *OldTop = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2158</td>
    <td class="codeline">  MachineBasicBlock *NewTop = L.getHeader();</td>
    <td class="lineNumber">2158</td>
    <td class="codeline">  MachineBasicBlock *NewTop = L.getHeader();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2159</td>
    <td class="codeline">  while (NewTop != OldTop) {</td>
    <td class="lineNumber">2159</td>
    <td class="codeline">  while (NewTop != OldTop) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2160</td>
    <td class="codeline">    OldTop = NewTop;</td>
    <td class="lineNumber">2160</td>
    <td class="codeline">    OldTop = NewTop;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2161</td>
    <td class="codeline">    NewTop = findBestLoopTopHelper(OldTop, L, LoopBlockSet);</td>
    <td class="lineNumber">2161</td>
    <td class="codeline">    NewTop = findBestLoopTopHelper(OldTop, L, LoopBlockSet);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2162</td>
    <td class="codeline">    if (NewTop != OldTop)</td>
    <td class="lineNumber">2162</td>
    <td class="codeline">    if (NewTop != OldTop)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2163</td>
    <td class="codeline">      ComputedEdges[NewTop] = { OldTop, false };</td>
    <td class="lineNumber">2163</td>
    <td class="codeline">      ComputedEdges[NewTop] = { OldTop, false };</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2164</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">2164</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2165</td>
    <td class="codeline">  return NewTop;</td>
    <td class="lineNumber">2165</td>
    <td class="codeline">  return NewTop;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2166</td>
    <td class="codeline">}</td>
    <td class="lineNumber">2166</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2167</td>
    <td class="codeline"></td>
    <td class="lineNumber">2167</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2168</td>
    <td class="codeline">/// Find the best loop exiting block for layout.</td>
    <td class="lineNumber">2168</td>
    <td class="codeline">/// Find the best loop exiting block for layout.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2169</td>
    <td class="codeline">///</td>
    <td class="lineNumber">2169</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2170</td>
    <td class="codeline">/// This routine implements the logic to analyze the loop looking for the best</td>
    <td class="lineNumber">2170</td>
    <td class="codeline">/// This routine implements the logic to analyze the loop looking for the best</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2171</td>
    <td class="codeline">/// block to layout at the top of the loop. Typically this is done to maximize</td>
    <td class="lineNumber">2171</td>
    <td class="codeline">/// block to layout at the top of the loop. Typically this is done to maximize</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2172</td>
    <td class="codeline">/// fallthrough opportunities.</td>
    <td class="lineNumber">2172</td>
    <td class="codeline">/// fallthrough opportunities.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2173</td>
    <td class="codeline">MachineBasicBlock *</td>
    <td class="lineNumber">2173</td>
    <td class="codeline">MachineBasicBlock *</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2174</td>
    <td class="codeline">MachineBlockPlacement::findBestLoopExit(const MachineLoop &L,</td>
    <td class="lineNumber">2174</td>
    <td class="codeline">MachineBlockPlacement::findBestLoopExit(const MachineLoop &L,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2175</td>
    <td class="codeline">                                        const BlockFilterSet &LoopBlockSet,</td>
    <td class="lineNumber">2175</td>
    <td class="codeline">                                        const BlockFilterSet &LoopBlockSet,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2176</td>
    <td class="codeline">                                        BlockFrequency &ExitFreq) {</td>
    <td class="lineNumber">2176</td>
    <td class="codeline">                                        BlockFrequency &ExitFreq) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2177</td>
    <td class="codeline">  // We don't want to layout the loop linearly in all cases. If the loop header</td>
    <td class="lineNumber">2177</td>
    <td class="codeline">  // We don't want to layout the loop linearly in all cases. If the loop header</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2178</td>
    <td class="codeline">  // is just a normal basic block in the loop, we want to look for what block</td>
    <td class="lineNumber">2178</td>
    <td class="codeline">  // is just a normal basic block in the loop, we want to look for what block</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2179</td>
    <td class="codeline">  // within the loop is the best one to layout at the top. However, if the loop</td>
    <td class="lineNumber">2179</td>
    <td class="codeline">  // within the loop is the best one to layout at the top. However, if the loop</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2180</td>
    <td class="codeline">  // header has be pre-merged into a chain due to predecessors not having</td>
    <td class="lineNumber">2180</td>
    <td class="codeline">  // header has be pre-merged into a chain due to predecessors not having</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2181</td>
    <td class="codeline">  // analyzable branches, *and* the predecessor it is merged with is *not* part</td>
    <td class="lineNumber">2181</td>
    <td class="codeline">  // analyzable branches, *and* the predecessor it is merged with is *not* part</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2182</td>
    <td class="codeline">  // of the loop, rotating the header into the middle of the loop will create</td>
    <td class="lineNumber">2182</td>
    <td class="codeline">  // of the loop, rotating the header into the middle of the loop will create</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2183</td>
    <td class="codeline">  // a non-contiguous range of blocks which is Very Bad. So start with the</td>
    <td class="lineNumber">2183</td>
    <td class="codeline">  // a non-contiguous range of blocks which is Very Bad. So start with the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2184</td>
    <td class="codeline">  // header and only rotate if safe.</td>
    <td class="lineNumber">2184</td>
    <td class="codeline">  // header and only rotate if safe.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2185</td>
    <td class="codeline">  BlockChain &HeaderChain = *BlockToChain[L.getHeader()];</td>
    <td class="lineNumber">2185</td>
    <td class="codeline">  BlockChain &HeaderChain = *BlockToChain[L.getHeader()];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2186</td>
    <td class="codeline">  if (!LoopBlockSet.count(*HeaderChain.begin()))</td>
    <td class="lineNumber">2186</td>
    <td class="codeline">  if (!LoopBlockSet.count(*HeaderChain.begin()))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2187</td>
    <td class="codeline">    return nullptr;</td>
    <td class="lineNumber">2187</td>
    <td class="codeline">    return nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2188</td>
    <td class="codeline"></td>
    <td class="lineNumber">2188</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2189</td>
    <td class="codeline">  BlockFrequency BestExitEdgeFreq;</td>
    <td class="lineNumber">2189</td>
    <td class="codeline">  BlockFrequency BestExitEdgeFreq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2190</td>
    <td class="codeline">  unsigned BestExitLoopDepth = 0;</td>
    <td class="lineNumber">2190</td>
    <td class="codeline">  unsigned BestExitLoopDepth = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2191</td>
    <td class="codeline">  MachineBasicBlock *ExitingBB = nullptr;</td>
    <td class="lineNumber">2191</td>
    <td class="codeline">  MachineBasicBlock *ExitingBB = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2192</td>
    <td class="codeline">  // If there are exits to outer loops, loop rotation can severely limit</td>
    <td class="lineNumber">2192</td>
    <td class="codeline">  // If there are exits to outer loops, loop rotation can severely limit</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2193</td>
    <td class="codeline">  // fallthrough opportunities unless it selects such an exit. Keep a set of</td>
    <td class="lineNumber">2193</td>
    <td class="codeline">  // fallthrough opportunities unless it selects such an exit. Keep a set of</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2194</td>
    <td class="codeline">  // blocks where rotating to exit with that block will reach an outer loop.</td>
    <td class="lineNumber">2194</td>
    <td class="codeline">  // blocks where rotating to exit with that block will reach an outer loop.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2195</td>
    <td class="codeline">  SmallPtrSet<MachineBasicBlock *, 4> BlocksExitingToOuterLoop;</td>
    <td class="lineNumber">2195</td>
    <td class="codeline">  SmallPtrSet<MachineBasicBlock *, 4> BlocksExitingToOuterLoop;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2196</td>
    <td class="codeline"></td>
    <td class="lineNumber">2196</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2197</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "Finding best loop exit for: "</td>
    <td class="lineNumber">2197</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "Finding best loop exit for: "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2198</td>
    <td class="codeline">                    << getBlockName(L.getHeader()) << "\n");</td>
    <td class="lineNumber">2198</td>
    <td class="codeline">                    << getBlockName(L.getHeader()) << "\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2199</td>
    <td class="codeline">  for (MachineBasicBlock *MBB : L.getBlocks()) {</td>
    <td class="lineNumber">2199</td>
    <td class="codeline">  for (MachineBasicBlock *MBB : L.getBlocks()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2200</td>
    <td class="codeline">    BlockChain &Chain = *BlockToChain[MBB];</td>
    <td class="lineNumber">2200</td>
    <td class="codeline">    BlockChain &Chain = *BlockToChain[MBB];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2201</td>
    <td class="codeline">    // Ensure that this block is at the end of a chain; otherwise it could be</td>
    <td class="lineNumber">2201</td>
    <td class="codeline">    // Ensure that this block is at the end of a chain; otherwise it could be</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2202</td>
    <td class="codeline">    // mid-way through an inner loop or a successor of an unanalyzable branch.</td>
    <td class="lineNumber">2202</td>
    <td class="codeline">    // mid-way through an inner loop or a successor of an unanalyzable branch.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2203</td>
    <td class="codeline">    if (MBB != *std::prev(Chain.end()))</td>
    <td class="lineNumber">2203</td>
    <td class="codeline">    if (MBB != *std::prev(Chain.end()))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2204</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">2204</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2205</td>
    <td class="codeline"></td>
    <td class="lineNumber">2205</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2206</td>
    <td class="codeline">    // Now walk the successors. We need to establish whether this has a viable</td>
    <td class="lineNumber">2206</td>
    <td class="codeline">    // Now walk the successors. We need to establish whether this has a viable</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2207</td>
    <td class="codeline">    // exiting successor and whether it has a viable non-exiting successor.</td>
    <td class="lineNumber">2207</td>
    <td class="codeline">    // exiting successor and whether it has a viable non-exiting successor.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2208</td>
    <td class="codeline">    // We store the old exiting state and restore it if a viable looping</td>
    <td class="lineNumber">2208</td>
    <td class="codeline">    // We store the old exiting state and restore it if a viable looping</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2209</td>
    <td class="codeline">    // successor isn't found.</td>
    <td class="lineNumber">2209</td>
    <td class="codeline">    // successor isn't found.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2210</td>
    <td class="codeline">    MachineBasicBlock *OldExitingBB = ExitingBB;</td>
    <td class="lineNumber">2210</td>
    <td class="codeline">    MachineBasicBlock *OldExitingBB = ExitingBB;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2211</td>
    <td class="codeline">    BlockFrequency OldBestExitEdgeFreq = BestExitEdgeFreq;</td>
    <td class="lineNumber">2211</td>
    <td class="codeline">    BlockFrequency OldBestExitEdgeFreq = BestExitEdgeFreq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2212</td>
    <td class="codeline">    bool HasLoopingSucc = false;</td>
    <td class="lineNumber">2212</td>
    <td class="codeline">    bool HasLoopingSucc = false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2213</td>
    <td class="codeline">    for (MachineBasicBlock *Succ : MBB->successors()) {</td>
    <td class="lineNumber">2213</td>
    <td class="codeline">    for (MachineBasicBlock *Succ : MBB->successors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2214</td>
    <td class="codeline">      if (Succ->isEHPad())</td>
    <td class="lineNumber">2214</td>
    <td class="codeline">      if (Succ->isEHPad())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2215</td>
    <td class="codeline">        continue;</td>
    <td class="lineNumber">2215</td>
    <td class="codeline">        continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2216</td>
    <td class="codeline">      if (Succ == MBB)</td>
    <td class="lineNumber">2216</td>
    <td class="codeline">      if (Succ == MBB)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2217</td>
    <td class="codeline">        continue;</td>
    <td class="lineNumber">2217</td>
    <td class="codeline">        continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2218</td>
    <td class="codeline">      BlockChain &SuccChain = *BlockToChain[Succ];</td>
    <td class="lineNumber">2218</td>
    <td class="codeline">      BlockChain &SuccChain = *BlockToChain[Succ];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2219</td>
    <td class="codeline">      // Don't split chains, either this chain or the successor's chain.</td>
    <td class="lineNumber">2219</td>
    <td class="codeline">      // Don't split chains, either this chain or the successor's chain.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2220</td>
    <td class="codeline">      if (&Chain == &SuccChain) {</td>
    <td class="lineNumber">2220</td>
    <td class="codeline">      if (&Chain == &SuccChain) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2221</td>
    <td class="codeline">        LLVM_DEBUG(dbgs() << "    exiting: " << getBlockName(MBB) << " -> "</td>
    <td class="lineNumber">2221</td>
    <td class="codeline">        LLVM_DEBUG(dbgs() << "    exiting: " << getBlockName(MBB) << " -> "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2222</td>
    <td class="codeline">                          << getBlockName(Succ) << " (chain conflict)\n");</td>
    <td class="lineNumber">2222</td>
    <td class="codeline">                          << getBlockName(Succ) << " (chain conflict)\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2223</td>
    <td class="codeline">        continue;</td>
    <td class="lineNumber">2223</td>
    <td class="codeline">        continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2224</td>
    <td class="codeline">      }</td>
    <td class="lineNumber">2224</td>
    <td class="codeline">      }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2225</td>
    <td class="codeline"></td>
    <td class="lineNumber">2225</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2226</td>
    <td class="codeline">      auto SuccProb = MBPI->getEdgeProbability(MBB, Succ);</td>
    <td class="lineNumber">2226</td>
    <td class="codeline">      auto SuccProb = MBPI->getEdgeProbability(MBB, Succ);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2227</td>
    <td class="codeline">      if (LoopBlockSet.count(Succ)) {</td>
    <td class="lineNumber">2227</td>
    <td class="codeline">      if (LoopBlockSet.count(Succ)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2228</td>
    <td class="codeline">        LLVM_DEBUG(dbgs() << "    looping: " << getBlockName(MBB) << " -> "</td>
    <td class="lineNumber">2228</td>
    <td class="codeline">        LLVM_DEBUG(dbgs() << "    looping: " << getBlockName(MBB) << " -> "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2229</td>
    <td class="codeline">                          << getBlockName(Succ) << " (" << SuccProb << ")\n");</td>
    <td class="lineNumber">2229</td>
    <td class="codeline">                          << getBlockName(Succ) << " (" << SuccProb << ")\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2230</td>
    <td class="codeline">        HasLoopingSucc = true;</td>
    <td class="lineNumber">2230</td>
    <td class="codeline">        HasLoopingSucc = true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2231</td>
    <td class="codeline">        continue;</td>
    <td class="lineNumber">2231</td>
    <td class="codeline">        continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2232</td>
    <td class="codeline">      }</td>
    <td class="lineNumber">2232</td>
    <td class="codeline">      }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2233</td>
    <td class="codeline"></td>
    <td class="lineNumber">2233</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2234</td>
    <td class="codeline">      unsigned SuccLoopDepth = 0;</td>
    <td class="lineNumber">2234</td>
    <td class="codeline">      unsigned SuccLoopDepth = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2235</td>
    <td class="codeline">      if (MachineLoop *ExitLoop = MLI->getLoopFor(Succ)) {</td>
    <td class="lineNumber">2235</td>
    <td class="codeline">      if (MachineLoop *ExitLoop = MLI->getLoopFor(Succ)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2236</td>
    <td class="codeline">        SuccLoopDepth = ExitLoop->getLoopDepth();</td>
    <td class="lineNumber">2236</td>
    <td class="codeline">        SuccLoopDepth = ExitLoop->getLoopDepth();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2237</td>
    <td class="codeline">        if (ExitLoop->contains(&L))</td>
    <td class="lineNumber">2237</td>
    <td class="codeline">        if (ExitLoop->contains(&L))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2238</td>
    <td class="codeline">          BlocksExitingToOuterLoop.insert(MBB);</td>
    <td class="lineNumber">2238</td>
    <td class="codeline">          BlocksExitingToOuterLoop.insert(MBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2239</td>
    <td class="codeline">      }</td>
    <td class="lineNumber">2239</td>
    <td class="codeline">      }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2240</td>
    <td class="codeline"></td>
    <td class="lineNumber">2240</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2241</td>
    <td class="codeline">      BlockFrequency ExitEdgeFreq = MBFI->getBlockFreq(MBB) * SuccProb;</td>
    <td class="lineNumber">2241</td>
    <td class="codeline">      BlockFrequency ExitEdgeFreq = MBFI->getBlockFreq(MBB) * SuccProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2242</td>
    <td class="codeline">      LLVM_DEBUG(dbgs() << "    exiting: " << getBlockName(MBB) << " -> "</td>
    <td class="lineNumber">2242</td>
    <td class="codeline">      LLVM_DEBUG(dbgs() << "    exiting: " << getBlockName(MBB) << " -> "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2243</td>
    <td class="codeline">                        << getBlockName(Succ) << " [L:" << SuccLoopDepth</td>
    <td class="lineNumber">2243</td>
    <td class="codeline">                        << getBlockName(Succ) << " [L:" << SuccLoopDepth</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2244</td>
    <td class="codeline">                        << "] (";</td>
    <td class="lineNumber">2244</td>
    <td class="codeline">                        << "] (";</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2245</td>
    <td class="codeline">                 MBFI->printBlockFreq(dbgs(), ExitEdgeFreq) << ")\n");</td>
    <td class="lineNumber">2245</td>
    <td class="codeline">                 MBFI->printBlockFreq(dbgs(), ExitEdgeFreq) << ")\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2246</td>
    <td class="codeline">      // Note that we bias this toward an existing layout successor to retain</td>
    <td class="lineNumber">2246</td>
    <td class="codeline">      // Note that we bias this toward an existing layout successor to retain</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2247</td>
    <td class="codeline">      // incoming order in the absence of better information. The exit must have</td>
    <td class="lineNumber">2247</td>
    <td class="codeline">      // incoming order in the absence of better information. The exit must have</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2248</td>
    <td class="codeline">      // a frequency higher than the current exit before we consider breaking</td>
    <td class="lineNumber">2248</td>
    <td class="codeline">      // a frequency higher than the current exit before we consider breaking</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2249</td>
    <td class="codeline">      // the layout.</td>
    <td class="lineNumber">2249</td>
    <td class="codeline">      // the layout.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2250</td>
    <td class="codeline">      BranchProbability Bias(100 - ExitBlockBias, 100);</td>
    <td class="lineNumber">2250</td>
    <td class="codeline">      BranchProbability Bias(100 - ExitBlockBias, 100);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2251</td>
    <td class="codeline">      if (!ExitingBB || SuccLoopDepth > BestExitLoopDepth ||</td>
    <td class="lineNumber">2251</td>
    <td class="codeline">      if (!ExitingBB || SuccLoopDepth > BestExitLoopDepth ||</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2252</td>
    <td class="codeline">          ExitEdgeFreq > BestExitEdgeFreq ||</td>
    <td class="lineNumber">2252</td>
    <td class="codeline">          ExitEdgeFreq > BestExitEdgeFreq ||</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2253</td>
    <td class="codeline">          (MBB->isLayoutSuccessor(Succ) &&</td>
    <td class="lineNumber">2253</td>
    <td class="codeline">          (MBB->isLayoutSuccessor(Succ) &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2254</td>
    <td class="codeline">           !(ExitEdgeFreq < BestExitEdgeFreq * Bias))) {</td>
    <td class="lineNumber">2254</td>
    <td class="codeline">           !(ExitEdgeFreq < BestExitEdgeFreq * Bias))) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2255</td>
    <td class="codeline">        BestExitEdgeFreq = ExitEdgeFreq;</td>
    <td class="lineNumber">2255</td>
    <td class="codeline">        BestExitEdgeFreq = ExitEdgeFreq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2256</td>
    <td class="codeline">        ExitingBB = MBB;</td>
    <td class="lineNumber">2256</td>
    <td class="codeline">        ExitingBB = MBB;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2257</td>
    <td class="codeline">      }</td>
    <td class="lineNumber">2257</td>
    <td class="codeline">      }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2258</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2258</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2259</td>
    <td class="codeline"></td>
    <td class="lineNumber">2259</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2260</td>
    <td class="codeline">    if (!HasLoopingSucc) {</td>
    <td class="lineNumber">2260</td>
    <td class="codeline">    if (!HasLoopingSucc) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2261</td>
    <td class="codeline">      // Restore the old exiting state, no viable looping successor was found.</td>
    <td class="lineNumber">2261</td>
    <td class="codeline">      // Restore the old exiting state, no viable looping successor was found.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2262</td>
    <td class="codeline">      ExitingBB = OldExitingBB;</td>
    <td class="lineNumber">2262</td>
    <td class="codeline">      ExitingBB = OldExitingBB;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2263</td>
    <td class="codeline">      BestExitEdgeFreq = OldBestExitEdgeFreq;</td>
    <td class="lineNumber">2263</td>
    <td class="codeline">      BestExitEdgeFreq = OldBestExitEdgeFreq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2264</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2264</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2265</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">2265</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2266</td>
    <td class="codeline">  // Without a candidate exiting block or with only a single block in the</td>
    <td class="lineNumber">2266</td>
    <td class="codeline">  // Without a candidate exiting block or with only a single block in the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2267</td>
    <td class="codeline">  // loop, just use the loop header to layout the loop.</td>
    <td class="lineNumber">2267</td>
    <td class="codeline">  // loop, just use the loop header to layout the loop.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2268</td>
    <td class="codeline">  if (!ExitingBB) {</td>
    <td class="lineNumber">2268</td>
    <td class="codeline">  if (!ExitingBB) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2269</td>
    <td class="codeline">    LLVM_DEBUG(</td>
    <td class="lineNumber">2269</td>
    <td class="codeline">    LLVM_DEBUG(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2270</td>
    <td class="codeline">        dbgs() << "    No other candidate exit blocks, using loop header\n");</td>
    <td class="lineNumber">2270</td>
    <td class="codeline">        dbgs() << "    No other candidate exit blocks, using loop header\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2271</td>
    <td class="codeline">    return nullptr;</td>
    <td class="lineNumber">2271</td>
    <td class="codeline">    return nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2272</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">2272</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2273</td>
    <td class="codeline">  if (L.getNumBlocks() == 1) {</td>
    <td class="lineNumber">2273</td>
    <td class="codeline">  if (L.getNumBlocks() == 1) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2274</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "    Loop has 1 block, using loop header as exit\n");</td>
    <td class="lineNumber">2274</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "    Loop has 1 block, using loop header as exit\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2275</td>
    <td class="codeline">    return nullptr;</td>
    <td class="lineNumber">2275</td>
    <td class="codeline">    return nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2276</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">2276</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2277</td>
    <td class="codeline"></td>
    <td class="lineNumber">2277</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2278</td>
    <td class="codeline">  // Also, if we have exit blocks which lead to outer loops but didn't select</td>
    <td class="lineNumber">2278</td>
    <td class="codeline">  // Also, if we have exit blocks which lead to outer loops but didn't select</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2279</td>
    <td class="codeline">  // one of them as the exiting block we are rotating toward, disable loop</td>
    <td class="lineNumber">2279</td>
    <td class="codeline">  // one of them as the exiting block we are rotating toward, disable loop</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2280</td>
    <td class="codeline">  // rotation altogether.</td>
    <td class="lineNumber">2280</td>
    <td class="codeline">  // rotation altogether.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2281</td>
    <td class="codeline">  if (!BlocksExitingToOuterLoop.empty() &&</td>
    <td class="lineNumber">2281</td>
    <td class="codeline">  if (!BlocksExitingToOuterLoop.empty() &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2282</td>
    <td class="codeline">      !BlocksExitingToOuterLoop.count(ExitingBB))</td>
    <td class="lineNumber">2282</td>
    <td class="codeline">      !BlocksExitingToOuterLoop.count(ExitingBB))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2283</td>
    <td class="codeline">    return nullptr;</td>
    <td class="lineNumber">2283</td>
    <td class="codeline">    return nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2284</td>
    <td class="codeline"></td>
    <td class="lineNumber">2284</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2285</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "  Best exiting block: " << getBlockName(ExitingBB)</td>
    <td class="lineNumber">2285</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "  Best exiting block: " << getBlockName(ExitingBB)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2286</td>
    <td class="codeline">                    << "\n");</td>
    <td class="lineNumber">2286</td>
    <td class="codeline">                    << "\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2287</td>
    <td class="codeline">  ExitFreq = BestExitEdgeFreq;</td>
    <td class="lineNumber">2287</td>
    <td class="codeline">  ExitFreq = BestExitEdgeFreq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2288</td>
    <td class="codeline">  return ExitingBB;</td>
    <td class="lineNumber">2288</td>
    <td class="codeline">  return ExitingBB;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2289</td>
    <td class="codeline">}</td>
    <td class="lineNumber">2289</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2290</td>
    <td class="codeline"></td>
    <td class="lineNumber">2290</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2291</td>
    <td class="codeline">/// Check if there is a fallthrough to loop header Top.</td>
    <td class="lineNumber">2291</td>
    <td class="codeline">/// Check if there is a fallthrough to loop header Top.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2292</td>
    <td class="codeline">///</td>
    <td class="lineNumber">2292</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2293</td>
    <td class="codeline">///   1. Look for a Pred that can be layout before Top.</td>
    <td class="lineNumber">2293</td>
    <td class="codeline">///   1. Look for a Pred that can be layout before Top.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2294</td>
    <td class="codeline">///   2. Check if Top is the most possible successor of Pred.</td>
    <td class="lineNumber">2294</td>
    <td class="codeline">///   2. Check if Top is the most possible successor of Pred.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2295</td>
    <td class="codeline">bool</td>
    <td class="lineNumber">2295</td>
    <td class="codeline">bool</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2296</td>
    <td class="codeline">MachineBlockPlacement::hasViableTopFallthrough(</td>
    <td class="lineNumber">2296</td>
    <td class="codeline">MachineBlockPlacement::hasViableTopFallthrough(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2297</td>
    <td class="codeline">    const MachineBasicBlock *Top,</td>
    <td class="lineNumber">2297</td>
    <td class="codeline">    const MachineBasicBlock *Top,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2298</td>
    <td class="codeline">    const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">2298</td>
    <td class="codeline">    const BlockFilterSet &LoopBlockSet) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2299</td>
    <td class="codeline">  for (MachineBasicBlock *Pred : Top->predecessors()) {</td>
    <td class="lineNumber">2299</td>
    <td class="codeline">  for (MachineBasicBlock *Pred : Top->predecessors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2300</td>
    <td class="codeline">    BlockChain *PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">2300</td>
    <td class="codeline">    BlockChain *PredChain = BlockToChain[Pred];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2301</td>
    <td class="codeline">    if (!LoopBlockSet.count(Pred) &&</td>
    <td class="lineNumber">2301</td>
    <td class="codeline">    if (!LoopBlockSet.count(Pred) &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2302</td>
    <td class="codeline">        (!PredChain || Pred == *std::prev(PredChain->end()))) {</td>
    <td class="lineNumber">2302</td>
    <td class="codeline">        (!PredChain || Pred == *std::prev(PredChain->end()))) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2303</td>
    <td class="codeline">      // Found a Pred block can be placed before Top.</td>
    <td class="lineNumber">2303</td>
    <td class="codeline">      // Found a Pred block can be placed before Top.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2304</td>
    <td class="codeline">      // Check if Top is the best successor of Pred.</td>
    <td class="lineNumber">2304</td>
    <td class="codeline">      // Check if Top is the best successor of Pred.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2305</td>
    <td class="codeline">      auto TopProb = MBPI->getEdgeProbability(Pred, Top);</td>
    <td class="lineNumber">2305</td>
    <td class="codeline">      auto TopProb = MBPI->getEdgeProbability(Pred, Top);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2306</td>
    <td class="codeline">      bool TopOK = true;</td>
    <td class="lineNumber">2306</td>
    <td class="codeline">      bool TopOK = true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2307</td>
    <td class="codeline">      for (MachineBasicBlock *Succ : Pred->successors()) {</td>
    <td class="lineNumber">2307</td>
    <td class="codeline">      for (MachineBasicBlock *Succ : Pred->successors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2308</td>
    <td class="codeline">        auto SuccProb = MBPI->getEdgeProbability(Pred, Succ);</td>
    <td class="lineNumber">2308</td>
    <td class="codeline">        auto SuccProb = MBPI->getEdgeProbability(Pred, Succ);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2309</td>
    <td class="codeline">        BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">2309</td>
    <td class="codeline">        BlockChain *SuccChain = BlockToChain[Succ];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2310</td>
    <td class="codeline">        // Check if Succ can be placed after Pred.</td>
    <td class="lineNumber">2310</td>
    <td class="codeline">        // Check if Succ can be placed after Pred.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2311</td>
    <td class="codeline">        // Succ should not be in any chain, or it is the head of some chain.</td>
    <td class="lineNumber">2311</td>
    <td class="codeline">        // Succ should not be in any chain, or it is the head of some chain.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2312</td>
    <td class="codeline">        if ((!SuccChain || Succ == *SuccChain->begin()) && SuccProb > TopProb) {</td>
    <td class="lineNumber">2312</td>
    <td class="codeline">        if ((!SuccChain || Succ == *SuccChain->begin()) && SuccProb > TopProb) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2313</td>
    <td class="codeline">          TopOK = false;</td>
    <td class="lineNumber">2313</td>
    <td class="codeline">          TopOK = false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2314</td>
    <td class="codeline">          break;</td>
    <td class="lineNumber">2314</td>
    <td class="codeline">          break;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2315</td>
    <td class="codeline">        }</td>
    <td class="lineNumber">2315</td>
    <td class="codeline">        }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2316</td>
    <td class="codeline">      }</td>
    <td class="lineNumber">2316</td>
    <td class="codeline">      }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2317</td>
    <td class="codeline">      if (TopOK)</td>
    <td class="lineNumber">2317</td>
    <td class="codeline">      if (TopOK)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2318</td>
    <td class="codeline">        return true;</td>
    <td class="lineNumber">2318</td>
    <td class="codeline">        return true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2319</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2319</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2320</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">2320</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2321</td>
    <td class="codeline">  return false;</td>
    <td class="lineNumber">2321</td>
    <td class="codeline">  return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2322</td>
    <td class="codeline">}</td>
    <td class="lineNumber">2322</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2323</td>
    <td class="codeline"></td>
    <td class="lineNumber">2323</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2324</td>
    <td class="codeline">/// Attempt to rotate an exiting block to the bottom of the loop.</td>
    <td class="lineNumber">2324</td>
    <td class="codeline">/// Attempt to rotate an exiting block to the bottom of the loop.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2325</td>
    <td class="codeline">///</td>
    <td class="lineNumber">2325</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2326</td>
    <td class="codeline">/// Once we have built a chain, try to rotate it to line up the hot exit block</td>
    <td class="lineNumber">2326</td>
    <td class="codeline">/// Once we have built a chain, try to rotate it to line up the hot exit block</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2327</td>
    <td class="codeline">/// with fallthrough out of the loop if doing so doesn't introduce unnecessary</td>
    <td class="lineNumber">2327</td>
    <td class="codeline">/// with fallthrough out of the loop if doing so doesn't introduce unnecessary</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2328</td>
    <td class="codeline">/// branches. For example, if the loop has fallthrough into its header and out</td>
    <td class="lineNumber">2328</td>
    <td class="codeline">/// branches. For example, if the loop has fallthrough into its header and out</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2329</td>
    <td class="codeline">/// of its bottom already, don't rotate it.</td>
    <td class="lineNumber">2329</td>
    <td class="codeline">/// of its bottom already, don't rotate it.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2330</td>
    <td class="codeline">void MachineBlockPlacement::rotateLoop(BlockChain &LoopChain,</td>
    <td class="lineNumber">2330</td>
    <td class="codeline">void MachineBlockPlacement::rotateLoop(BlockChain &LoopChain,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2331</td>
    <td class="codeline">                                       const MachineBasicBlock *ExitingBB,</td>
    <td class="lineNumber">2331</td>
    <td class="codeline">                                       const MachineBasicBlock *ExitingBB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2332</td>
    <td class="codeline">                                       BlockFrequency ExitFreq,</td>
    <td class="lineNumber">2332</td>
    <td class="codeline">                                       BlockFrequency ExitFreq,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2333</td>
    <td class="codeline">                                       const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">2333</td>
    <td class="codeline">                                       const BlockFilterSet &LoopBlockSet) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2334</td>
    <td class="codeline">  if (!ExitingBB)</td>
    <td class="lineNumber">2334</td>
    <td class="codeline">  if (!ExitingBB)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2335</td>
    <td class="codeline">    return;</td>
    <td class="lineNumber">2335</td>
    <td class="codeline">    return;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2336</td>
    <td class="codeline"></td>
    <td class="lineNumber">2336</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2337</td>
    <td class="codeline">  MachineBasicBlock *Top = *LoopChain.begin();</td>
    <td class="lineNumber">2337</td>
    <td class="codeline">  MachineBasicBlock *Top = *LoopChain.begin();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2338</td>
    <td class="codeline">  MachineBasicBlock *Bottom = *std::prev(LoopChain.end());</td>
    <td class="lineNumber">2338</td>
    <td class="codeline">  MachineBasicBlock *Bottom = *std::prev(LoopChain.end());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2339</td>
    <td class="codeline"></td>
    <td class="lineNumber">2339</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2340</td>
    <td class="codeline">  // If ExitingBB is already the last one in a chain then nothing to do.</td>
    <td class="lineNumber">2340</td>
    <td class="codeline">  // If ExitingBB is already the last one in a chain then nothing to do.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2341</td>
    <td class="codeline">  if (Bottom == ExitingBB)</td>
    <td class="lineNumber">2341</td>
    <td class="codeline">  if (Bottom == ExitingBB)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2342</td>
    <td class="codeline">    return;</td>
    <td class="lineNumber">2342</td>
    <td class="codeline">    return;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2343</td>
    <td class="codeline"></td>
    <td class="lineNumber">2343</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2344</td>
    <td class="codeline">  // The entry block should always be the first BB in a function.</td>
    <td class="lineNumber">2344</td>
    <td class="codeline">  // The entry block should always be the first BB in a function.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2345</td>
    <td class="codeline">  if (Top->isEntryBlock())</td>
    <td class="lineNumber">2345</td>
    <td class="codeline">  if (Top->isEntryBlock())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2346</td>
    <td class="codeline">    return;</td>
    <td class="lineNumber">2346</td>
    <td class="codeline">    return;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2347</td>
    <td class="codeline"></td>
    <td class="lineNumber">2347</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2348</td>
    <td class="codeline">  bool ViableTopFallthrough = hasViableTopFallthrough(Top, LoopBlockSet);</td>
    <td class="lineNumber">2348</td>
    <td class="codeline">  bool ViableTopFallthrough = hasViableTopFallthrough(Top, LoopBlockSet);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2349</td>
    <td class="codeline"></td>
    <td class="lineNumber">2349</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2350</td>
    <td class="codeline">  // If the header has viable fallthrough, check whether the current loop</td>
    <td class="lineNumber">2350</td>
    <td class="codeline">  // If the header has viable fallthrough, check whether the current loop</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2351</td>
    <td class="codeline">  // bottom is a viable exiting block. If so, bail out as rotating will</td>
    <td class="lineNumber">2351</td>
    <td class="codeline">  // bottom is a viable exiting block. If so, bail out as rotating will</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2352</td>
    <td class="codeline">  // introduce an unnecessary branch.</td>
    <td class="lineNumber">2352</td>
    <td class="codeline">  // introduce an unnecessary branch.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2353</td>
    <td class="codeline">  if (ViableTopFallthrough) {</td>
    <td class="lineNumber">2353</td>
    <td class="codeline">  if (ViableTopFallthrough) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2354</td>
    <td class="codeline">    for (MachineBasicBlock *Succ : Bottom->successors()) {</td>
    <td class="lineNumber">2354</td>
    <td class="codeline">    for (MachineBasicBlock *Succ : Bottom->successors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2355</td>
    <td class="codeline">      BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">2355</td>
    <td class="codeline">      BlockChain *SuccChain = BlockToChain[Succ];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2356</td>
    <td class="codeline">      if (!LoopBlockSet.count(Succ) &&</td>
    <td class="lineNumber">2356</td>
    <td class="codeline">      if (!LoopBlockSet.count(Succ) &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2357</td>
    <td class="codeline">          (!SuccChain || Succ == *SuccChain->begin()))</td>
    <td class="lineNumber">2357</td>
    <td class="codeline">          (!SuccChain || Succ == *SuccChain->begin()))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2358</td>
    <td class="codeline">        return;</td>
    <td class="lineNumber">2358</td>
    <td class="codeline">        return;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2359</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2359</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2360</td>
    <td class="codeline"></td>
    <td class="lineNumber">2360</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2361</td>
    <td class="codeline">    // Rotate will destroy the top fallthrough, we need to ensure the new exit</td>
    <td class="lineNumber">2361</td>
    <td class="codeline">    // Rotate will destroy the top fallthrough, we need to ensure the new exit</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2362</td>
    <td class="codeline">    // frequency is larger than top fallthrough.</td>
    <td class="lineNumber">2362</td>
    <td class="codeline">    // frequency is larger than top fallthrough.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2363</td>
    <td class="codeline">    BlockFrequency FallThrough2Top = TopFallThroughFreq(Top, LoopBlockSet);</td>
    <td class="lineNumber">2363</td>
    <td class="codeline">    BlockFrequency FallThrough2Top = TopFallThroughFreq(Top, LoopBlockSet);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2364</td>
    <td class="codeline">    if (FallThrough2Top >= ExitFreq)</td>
    <td class="lineNumber">2364</td>
    <td class="codeline">    if (FallThrough2Top >= ExitFreq)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2365</td>
    <td class="codeline">      return;</td>
    <td class="lineNumber">2365</td>
    <td class="codeline">      return;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2366</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">2366</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2367</td>
    <td class="codeline"></td>
    <td class="lineNumber">2367</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2368</td>
    <td class="codeline">  BlockChain::iterator ExitIt = llvm::find(LoopChain, ExitingBB);</td>
    <td class="lineNumber">2368</td>
    <td class="codeline">  BlockChain::iterator ExitIt = llvm::find(LoopChain, ExitingBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2369</td>
    <td class="codeline">  if (ExitIt == LoopChain.end())</td>
    <td class="lineNumber">2369</td>
    <td class="codeline">  if (ExitIt == LoopChain.end())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2370</td>
    <td class="codeline">    return;</td>
    <td class="lineNumber">2370</td>
    <td class="codeline">    return;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2371</td>
    <td class="codeline"></td>
    <td class="lineNumber">2371</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2372</td>
    <td class="codeline">  // Rotating a loop exit to the bottom when there is a fallthrough to top</td>
    <td class="lineNumber">2372</td>
    <td class="codeline">  // Rotating a loop exit to the bottom when there is a fallthrough to top</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2373</td>
    <td class="codeline">  // trades the entry fallthrough for an exit fallthrough.</td>
    <td class="lineNumber">2373</td>
    <td class="codeline">  // trades the entry fallthrough for an exit fallthrough.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2374</td>
    <td class="codeline">  // If there is no bottom->top edge, but the chosen exit block does have</td>
    <td class="lineNumber">2374</td>
    <td class="codeline">  // If there is no bottom->top edge, but the chosen exit block does have</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2375</td>
    <td class="codeline">  // a fallthrough, we break that fallthrough for nothing in return.</td>
    <td class="lineNumber">2375</td>
    <td class="codeline">  // a fallthrough, we break that fallthrough for nothing in return.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2376</td>
    <td class="codeline"></td>
    <td class="lineNumber">2376</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2377</td>
    <td class="codeline">  // Let's consider an example. We have a built chain of basic blocks</td>
    <td class="lineNumber">2377</td>
    <td class="codeline">  // Let's consider an example. We have a built chain of basic blocks</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2378</td>
    <td class="codeline">  // B1, B2, ..., Bn, where Bk is a ExitingBB - chosen exit block.</td>
    <td class="lineNumber">2378</td>
    <td class="codeline">  // B1, B2, ..., Bn, where Bk is a ExitingBB - chosen exit block.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2379</td>
    <td class="codeline">  // By doing a rotation we get</td>
    <td class="lineNumber">2379</td>
    <td class="codeline">  // By doing a rotation we get</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2380</td>
    <td class="codeline">  // Bk+1, ..., Bn, B1, ..., Bk</td>
    <td class="lineNumber">2380</td>
    <td class="codeline">  // Bk+1, ..., Bn, B1, ..., Bk</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2381</td>
    <td class="codeline">  // Break of fallthrough to B1 is compensated by a fallthrough from Bk.</td>
    <td class="lineNumber">2381</td>
    <td class="codeline">  // Break of fallthrough to B1 is compensated by a fallthrough from Bk.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2382</td>
    <td class="codeline">  // If we had a fallthrough Bk -> Bk+1 it is broken now.</td>
    <td class="lineNumber">2382</td>
    <td class="codeline">  // If we had a fallthrough Bk -> Bk+1 it is broken now.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2383</td>
    <td class="codeline">  // It might be compensated by fallthrough Bn -> B1.</td>
    <td class="lineNumber">2383</td>
    <td class="codeline">  // It might be compensated by fallthrough Bn -> B1.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2384</td>
    <td class="codeline">  // So we have a condition to avoid creation of extra branch by loop rotation.</td>
    <td class="lineNumber">2384</td>
    <td class="codeline">  // So we have a condition to avoid creation of extra branch by loop rotation.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2385</td>
    <td class="codeline">  // All below must be true to avoid loop rotation:</td>
    <td class="lineNumber">2385</td>
    <td class="codeline">  // All below must be true to avoid loop rotation:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2386</td>
    <td class="codeline">  //   If there is a fallthrough to top (B1)</td>
    <td class="lineNumber">2386</td>
    <td class="codeline">  //   If there is a fallthrough to top (B1)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2387</td>
    <td class="codeline">  //   There was fallthrough from chosen exit block (Bk) to next one (Bk+1)</td>
    <td class="lineNumber">2387</td>
    <td class="codeline">  //   There was fallthrough from chosen exit block (Bk) to next one (Bk+1)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2388</td>
    <td class="codeline">  //   There is no fallthrough from bottom (Bn) to top (B1).</td>
    <td class="lineNumber">2388</td>
    <td class="codeline">  //   There is no fallthrough from bottom (Bn) to top (B1).</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2389</td>
    <td class="codeline">  // Please note that there is no exit fallthrough from Bn because we checked it</td>
    <td class="lineNumber">2389</td>
    <td class="codeline">  // Please note that there is no exit fallthrough from Bn because we checked it</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2390</td>
    <td class="codeline">  // above.</td>
    <td class="lineNumber">2390</td>
    <td class="codeline">  // above.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2391</td>
    <td class="codeline">  if (ViableTopFallthrough) {</td>
    <td class="lineNumber">2391</td>
    <td class="codeline">  if (ViableTopFallthrough) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2392</td>
    <td class="codeline">    assert(std::next(ExitIt) != LoopChain.end() &&</td>
    <td class="lineNumber">2392</td>
    <td class="codeline">    assert(std::next(ExitIt) != LoopChain.end() &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2393</td>
    <td class="codeline">           "Exit should not be last BB");</td>
    <td class="lineNumber">2393</td>
    <td class="codeline">           "Exit should not be last BB");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2394</td>
    <td class="codeline">    MachineBasicBlock *NextBlockInChain = *std::next(ExitIt);</td>
    <td class="lineNumber">2394</td>
    <td class="codeline">    MachineBasicBlock *NextBlockInChain = *std::next(ExitIt);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2395</td>
    <td class="codeline">    if (ExitingBB->isSuccessor(NextBlockInChain))</td>
    <td class="lineNumber">2395</td>
    <td class="codeline">    if (ExitingBB->isSuccessor(NextBlockInChain))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2396</td>
    <td class="codeline">      if (!Bottom->isSuccessor(Top))</td>
    <td class="lineNumber">2396</td>
    <td class="codeline">      if (!Bottom->isSuccessor(Top))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2397</td>
    <td class="codeline">        return;</td>
    <td class="lineNumber">2397</td>
    <td class="codeline">        return;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2398</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">2398</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2399</td>
    <td class="codeline"></td>
    <td class="lineNumber">2399</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2400</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "Rotating loop to put exit " << getBlockName(ExitingBB)</td>
    <td class="lineNumber">2400</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "Rotating loop to put exit " << getBlockName(ExitingBB)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2401</td>
    <td class="codeline">                    << " at bottom\n");</td>
    <td class="lineNumber">2401</td>
    <td class="codeline">                    << " at bottom\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2402</td>
    <td class="codeline">  std::rotate(LoopChain.begin(), std::next(ExitIt), LoopChain.end());</td>
    <td class="lineNumber">2402</td>
    <td class="codeline">  std::rotate(LoopChain.begin(), std::next(ExitIt), LoopChain.end());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2403</td>
    <td class="codeline">}</td>
    <td class="lineNumber">2403</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2404</td>
    <td class="codeline"></td>
    <td class="lineNumber">2404</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2405</td>
    <td class="codeline">/// Attempt to rotate a loop based on profile data to reduce branch cost.</td>
    <td class="lineNumber">2405</td>
    <td class="codeline">/// Attempt to rotate a loop based on profile data to reduce branch cost.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2406</td>
    <td class="codeline">///</td>
    <td class="lineNumber">2406</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2407</td>
    <td class="codeline">/// With profile data, we can determine the cost in terms of missed fall through</td>
    <td class="lineNumber">2407</td>
    <td class="codeline">/// With profile data, we can determine the cost in terms of missed fall through</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2408</td>
    <td class="codeline">/// opportunities when rotating a loop chain and select the best rotation.</td>
    <td class="lineNumber">2408</td>
    <td class="codeline">/// opportunities when rotating a loop chain and select the best rotation.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2409</td>
    <td class="codeline">/// Basically, there are three kinds of cost to consider for each rotation:</td>
    <td class="lineNumber">2409</td>
    <td class="codeline">/// Basically, there are three kinds of cost to consider for each rotation:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2410</td>
    <td class="codeline">///    1. The possibly missed fall through edge (if it exists) from BB out of</td>
    <td class="lineNumber">2410</td>
    <td class="codeline">///    1. The possibly missed fall through edge (if it exists) from BB out of</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2411</td>
    <td class="codeline">///    the loop to the loop header.</td>
    <td class="lineNumber">2411</td>
    <td class="codeline">///    the loop to the loop header.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2412</td>
    <td class="codeline">///    2. The possibly missed fall through edges (if they exist) from the loop</td>
    <td class="lineNumber">2412</td>
    <td class="codeline">///    2. The possibly missed fall through edges (if they exist) from the loop</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2413</td>
    <td class="codeline">///    exits to BB out of the loop.</td>
    <td class="lineNumber">2413</td>
    <td class="codeline">///    exits to BB out of the loop.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2414</td>
    <td class="codeline">///    3. The missed fall through edge (if it exists) from the last BB to the</td>
    <td class="lineNumber">2414</td>
    <td class="codeline">///    3. The missed fall through edge (if it exists) from the last BB to the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2415</td>
    <td class="codeline">///    first BB in the loop chain.</td>
    <td class="lineNumber">2415</td>
    <td class="codeline">///    first BB in the loop chain.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2416</td>
    <td class="codeline">///  Therefore, the cost for a given rotation is the sum of costs listed above.</td>
    <td class="lineNumber">2416</td>
    <td class="codeline">///  Therefore, the cost for a given rotation is the sum of costs listed above.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2417</td>
    <td class="codeline">///  We select the best rotation with the smallest cost.</td>
    <td class="lineNumber">2417</td>
    <td class="codeline">///  We select the best rotation with the smallest cost.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2418</td>
    <td class="codeline">void MachineBlockPlacement::rotateLoopWithProfile(</td>
    <td class="lineNumber">2418</td>
    <td class="codeline">void MachineBlockPlacement::rotateLoopWithProfile(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2419</td>
    <td class="codeline">    BlockChain &LoopChain, const MachineLoop &L,</td>
    <td class="lineNumber">2419</td>
    <td class="codeline">    BlockChain &LoopChain, const MachineLoop &L,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2420</td>
    <td class="codeline">    const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">2420</td>
    <td class="codeline">    const BlockFilterSet &LoopBlockSet) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2421</td>
    <td class="codeline">  auto RotationPos = LoopChain.end();</td>
    <td class="lineNumber">2421</td>
    <td class="codeline">  auto RotationPos = LoopChain.end();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2422</td>
    <td class="codeline">  MachineBasicBlock *ChainHeaderBB = *LoopChain.begin();</td>
    <td class="lineNumber">2422</td>
    <td class="codeline">  MachineBasicBlock *ChainHeaderBB = *LoopChain.begin();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2423</td>
    <td class="codeline"></td>
    <td class="lineNumber">2423</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2424</td>
    <td class="codeline">  // The entry block should always be the first BB in a function.</td>
    <td class="lineNumber">2424</td>
    <td class="codeline">  // The entry block should always be the first BB in a function.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2425</td>
    <td class="codeline">  if (ChainHeaderBB->isEntryBlock())</td>
    <td class="lineNumber">2425</td>
    <td class="codeline">  if (ChainHeaderBB->isEntryBlock())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2426</td>
    <td class="codeline">    return;</td>
    <td class="lineNumber">2426</td>
    <td class="codeline">    return;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2427</td>
    <td class="codeline"></td>
    <td class="lineNumber">2427</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2428</td>
    <td class="codeline">  BlockFrequency SmallestRotationCost = BlockFrequency::getMaxFrequency();</td>
    <td class="lineNumber">2428</td>
    <td class="codeline">  BlockFrequency SmallestRotationCost = BlockFrequency::getMaxFrequency();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2429</td>
    <td class="codeline"></td>
    <td class="lineNumber">2429</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2430</td>
    <td class="codeline">  // A utility lambda that scales up a block frequency by dividing it by a</td>
    <td class="lineNumber">2430</td>
    <td class="codeline">  // A utility lambda that scales up a block frequency by dividing it by a</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2431</td>
    <td class="codeline">  // branch probability which is the reciprocal of the scale.</td>
    <td class="lineNumber">2431</td>
    <td class="codeline">  // branch probability which is the reciprocal of the scale.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2432</td>
    <td class="codeline">  auto ScaleBlockFrequency = [](BlockFrequency Freq,</td>
    <td class="lineNumber">2432</td>
    <td class="codeline">  auto ScaleBlockFrequency = [](BlockFrequency Freq,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2433</td>
    <td class="codeline">                                unsigned Scale) -> BlockFrequency {</td>
    <td class="lineNumber">2433</td>
    <td class="codeline">                                unsigned Scale) -> BlockFrequency {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2434</td>
    <td class="codeline">    if (Scale == 0)</td>
    <td class="lineNumber">2434</td>
    <td class="codeline">    if (Scale == 0)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2435</td>
    <td class="codeline">      return 0;</td>
    <td class="lineNumber">2435</td>
    <td class="codeline">      return 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2436</td>
    <td class="codeline">    // Use operator / between BlockFrequency and BranchProbability to implement</td>
    <td class="lineNumber">2436</td>
    <td class="codeline">    // Use operator / between BlockFrequency and BranchProbability to implement</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2437</td>
    <td class="codeline">    // saturating multiplication.</td>
    <td class="lineNumber">2437</td>
    <td class="codeline">    // saturating multiplication.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2438</td>
    <td class="codeline">    return Freq / BranchProbability(1, Scale);</td>
    <td class="lineNumber">2438</td>
    <td class="codeline">    return Freq / BranchProbability(1, Scale);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2439</td>
    <td class="codeline">  };</td>
    <td class="lineNumber">2439</td>
    <td class="codeline">  };</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2440</td>
    <td class="codeline"></td>
    <td class="lineNumber">2440</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2441</td>
    <td class="codeline">  // Compute the cost of the missed fall-through edge to the loop header if the</td>
    <td class="lineNumber">2441</td>
    <td class="codeline">  // Compute the cost of the missed fall-through edge to the loop header if the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2442</td>
    <td class="codeline">  // chain head is not the loop header. As we only consider natural loops with</td>
    <td class="lineNumber">2442</td>
    <td class="codeline">  // chain head is not the loop header. As we only consider natural loops with</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2443</td>
    <td class="codeline">  // single header, this computation can be done only once.</td>
    <td class="lineNumber">2443</td>
    <td class="codeline">  // single header, this computation can be done only once.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2444</td>
    <td class="codeline">  BlockFrequency HeaderFallThroughCost(0);</td>
    <td class="lineNumber">2444</td>
    <td class="codeline">  BlockFrequency HeaderFallThroughCost(0);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2445</td>
    <td class="codeline">  for (auto *Pred : ChainHeaderBB->predecessors()) {</td>
    <td class="lineNumber">2445</td>
    <td class="codeline">  for (auto *Pred : ChainHeaderBB->predecessors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2446</td>
    <td class="codeline">    BlockChain *PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">2446</td>
    <td class="codeline">    BlockChain *PredChain = BlockToChain[Pred];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2447</td>
    <td class="codeline">    if (!LoopBlockSet.count(Pred) &&</td>
    <td class="lineNumber">2447</td>
    <td class="codeline">    if (!LoopBlockSet.count(Pred) &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2448</td>
    <td class="codeline">        (!PredChain || Pred == *std::prev(PredChain->end()))) {</td>
    <td class="lineNumber">2448</td>
    <td class="codeline">        (!PredChain || Pred == *std::prev(PredChain->end()))) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2449</td>
    <td class="codeline">      auto EdgeFreq = MBFI->getBlockFreq(Pred) *</td>
    <td class="lineNumber">2449</td>
    <td class="codeline">      auto EdgeFreq = MBFI->getBlockFreq(Pred) *</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2450</td>
    <td class="codeline">          MBPI->getEdgeProbability(Pred, ChainHeaderBB);</td>
    <td class="lineNumber">2450</td>
    <td class="codeline">          MBPI->getEdgeProbability(Pred, ChainHeaderBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2451</td>
    <td class="codeline">      auto FallThruCost = ScaleBlockFrequency(EdgeFreq, MisfetchCost);</td>
    <td class="lineNumber">2451</td>
    <td class="codeline">      auto FallThruCost = ScaleBlockFrequency(EdgeFreq, MisfetchCost);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2452</td>
    <td class="codeline">      // If the predecessor has only an unconditional jump to the header, we</td>
    <td class="lineNumber">2452</td>
    <td class="codeline">      // If the predecessor has only an unconditional jump to the header, we</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2453</td>
    <td class="codeline">      // need to consider the cost of this jump.</td>
    <td class="lineNumber">2453</td>
    <td class="codeline">      // need to consider the cost of this jump.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2454</td>
    <td class="codeline">      if (Pred->succ_size() == 1)</td>
    <td class="lineNumber">2454</td>
    <td class="codeline">      if (Pred->succ_size() == 1)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2455</td>
    <td class="codeline">        FallThruCost += ScaleBlockFrequency(EdgeFreq, JumpInstCost);</td>
    <td class="lineNumber">2455</td>
    <td class="codeline">        FallThruCost += ScaleBlockFrequency(EdgeFreq, JumpInstCost);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2456</td>
    <td class="codeline">      HeaderFallThroughCost = std::max(HeaderFallThroughCost, FallThruCost);</td>
    <td class="lineNumber">2456</td>
    <td class="codeline">      HeaderFallThroughCost = std::max(HeaderFallThroughCost, FallThruCost);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2457</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2457</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2458</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">2458</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2459</td>
    <td class="codeline"></td>
    <td class="lineNumber">2459</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2460</td>
    <td class="codeline">  // Here we collect all exit blocks in the loop, and for each exit we find out</td>
    <td class="lineNumber">2460</td>
    <td class="codeline">  // Here we collect all exit blocks in the loop, and for each exit we find out</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2461</td>
    <td class="codeline">  // its hottest exit edge. For each loop rotation, we define the loop exit cost</td>
    <td class="lineNumber">2461</td>
    <td class="codeline">  // its hottest exit edge. For each loop rotation, we define the loop exit cost</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2462</td>
    <td class="codeline">  // as the sum of frequencies of exit edges we collect here, excluding the exit</td>
    <td class="lineNumber">2462</td>
    <td class="codeline">  // as the sum of frequencies of exit edges we collect here, excluding the exit</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2463</td>
    <td class="codeline">  // edge from the tail of the loop chain.</td>
    <td class="lineNumber">2463</td>
    <td class="codeline">  // edge from the tail of the loop chain.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2464</td>
    <td class="codeline">  SmallVector<std::pair<MachineBasicBlock *, BlockFrequency>, 4> ExitsWithFreq;</td>
    <td class="lineNumber">2464</td>
    <td class="codeline">  SmallVector<std::pair<MachineBasicBlock *, BlockFrequency>, 4> ExitsWithFreq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2465</td>
    <td class="codeline">  for (auto *BB : LoopChain) {</td>
    <td class="lineNumber">2465</td>
    <td class="codeline">  for (auto *BB : LoopChain) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2466</td>
    <td class="codeline">    auto LargestExitEdgeProb = BranchProbability::getZero();</td>
    <td class="lineNumber">2466</td>
    <td class="codeline">    auto LargestExitEdgeProb = BranchProbability::getZero();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2467</td>
    <td class="codeline">    for (auto *Succ : BB->successors()) {</td>
    <td class="lineNumber">2467</td>
    <td class="codeline">    for (auto *Succ : BB->successors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2468</td>
    <td class="codeline">      BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">2468</td>
    <td class="codeline">      BlockChain *SuccChain = BlockToChain[Succ];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2469</td>
    <td class="codeline">      if (!LoopBlockSet.count(Succ) &&</td>
    <td class="lineNumber">2469</td>
    <td class="codeline">      if (!LoopBlockSet.count(Succ) &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2470</td>
    <td class="codeline">          (!SuccChain || Succ == *SuccChain->begin())) {</td>
    <td class="lineNumber">2470</td>
    <td class="codeline">          (!SuccChain || Succ == *SuccChain->begin())) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2471</td>
    <td class="codeline">        auto SuccProb = MBPI->getEdgeProbability(BB, Succ);</td>
    <td class="lineNumber">2471</td>
    <td class="codeline">        auto SuccProb = MBPI->getEdgeProbability(BB, Succ);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2472</td>
    <td class="codeline">        LargestExitEdgeProb = std::max(LargestExitEdgeProb, SuccProb);</td>
    <td class="lineNumber">2472</td>
    <td class="codeline">        LargestExitEdgeProb = std::max(LargestExitEdgeProb, SuccProb);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2473</td>
    <td class="codeline">      }</td>
    <td class="lineNumber">2473</td>
    <td class="codeline">      }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2474</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2474</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2475</td>
    <td class="codeline">    if (LargestExitEdgeProb > BranchProbability::getZero()) {</td>
    <td class="lineNumber">2475</td>
    <td class="codeline">    if (LargestExitEdgeProb > BranchProbability::getZero()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2476</td>
    <td class="codeline">      auto ExitFreq = MBFI->getBlockFreq(BB) * LargestExitEdgeProb;</td>
    <td class="lineNumber">2476</td>
    <td class="codeline">      auto ExitFreq = MBFI->getBlockFreq(BB) * LargestExitEdgeProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2477</td>
    <td class="codeline">      ExitsWithFreq.emplace_back(BB, ExitFreq);</td>
    <td class="lineNumber">2477</td>
    <td class="codeline">      ExitsWithFreq.emplace_back(BB, ExitFreq);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2478</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2478</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2479</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">2479</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2480</td>
    <td class="codeline"></td>
    <td class="lineNumber">2480</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2481</td>
    <td class="codeline">  // In this loop we iterate every block in the loop chain and calculate the</td>
    <td class="lineNumber">2481</td>
    <td class="codeline">  // In this loop we iterate every block in the loop chain and calculate the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2482</td>
    <td class="codeline">  // cost assuming the block is the head of the loop chain. When the loop ends,</td>
    <td class="lineNumber">2482</td>
    <td class="codeline">  // cost assuming the block is the head of the loop chain. When the loop ends,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2483</td>
    <td class="codeline">  // we should have found the best candidate as the loop chain's head.</td>
    <td class="lineNumber">2483</td>
    <td class="codeline">  // we should have found the best candidate as the loop chain's head.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2484</td>
    <td class="codeline">  for (auto Iter = LoopChain.begin(), TailIter = std::prev(LoopChain.end()),</td>
    <td class="lineNumber">2484</td>
    <td class="codeline">  for (auto Iter = LoopChain.begin(), TailIter = std::prev(LoopChain.end()),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2485</td>
    <td class="codeline">            EndIter = LoopChain.end();</td>
    <td class="lineNumber">2485</td>
    <td class="codeline">            EndIter = LoopChain.end();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2486</td>
    <td class="codeline">       Iter != EndIter; Iter++, TailIter++) {</td>
    <td class="lineNumber">2486</td>
    <td class="codeline">       Iter != EndIter; Iter++, TailIter++) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2487</td>
    <td class="codeline">    // TailIter is used to track the tail of the loop chain if the block we are</td>
    <td class="lineNumber">2487</td>
    <td class="codeline">    // TailIter is used to track the tail of the loop chain if the block we are</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2488</td>
    <td class="codeline">    // checking (pointed by Iter) is the head of the chain.</td>
    <td class="lineNumber">2488</td>
    <td class="codeline">    // checking (pointed by Iter) is the head of the chain.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2489</td>
    <td class="codeline">    if (TailIter == LoopChain.end())</td>
    <td class="lineNumber">2489</td>
    <td class="codeline">    if (TailIter == LoopChain.end())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2490</td>
    <td class="codeline">      TailIter = LoopChain.begin();</td>
    <td class="lineNumber">2490</td>
    <td class="codeline">      TailIter = LoopChain.begin();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2491</td>
    <td class="codeline"></td>
    <td class="lineNumber">2491</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2492</td>
    <td class="codeline">    auto TailBB = *TailIter;</td>
    <td class="lineNumber">2492</td>
    <td class="codeline">    auto TailBB = *TailIter;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2493</td>
    <td class="codeline"></td>
    <td class="lineNumber">2493</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2494</td>
    <td class="codeline">    // Calculate the cost by putting this BB to the top.</td>
    <td class="lineNumber">2494</td>
    <td class="codeline">    // Calculate the cost by putting this BB to the top.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2495</td>
    <td class="codeline">    BlockFrequency Cost = 0;</td>
    <td class="lineNumber">2495</td>
    <td class="codeline">    BlockFrequency Cost = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2496</td>
    <td class="codeline"></td>
    <td class="lineNumber">2496</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2497</td>
    <td class="codeline">    // If the current BB is the loop header, we need to take into account the</td>
    <td class="lineNumber">2497</td>
    <td class="codeline">    // If the current BB is the loop header, we need to take into account the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2498</td>
    <td class="codeline">    // cost of the missed fall through edge from outside of the loop to the</td>
    <td class="lineNumber">2498</td>
    <td class="codeline">    // cost of the missed fall through edge from outside of the loop to the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2499</td>
    <td class="codeline">    // header.</td>
    <td class="lineNumber">2499</td>
    <td class="codeline">    // header.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2500</td>
    <td class="codeline">    if (Iter != LoopChain.begin())</td>
    <td class="lineNumber">2500</td>
    <td class="codeline">    if (Iter != LoopChain.begin())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2501</td>
    <td class="codeline">      Cost += HeaderFallThroughCost;</td>
    <td class="lineNumber">2501</td>
    <td class="codeline">      Cost += HeaderFallThroughCost;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2502</td>
    <td class="codeline"></td>
    <td class="lineNumber">2502</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2503</td>
    <td class="codeline">    // Collect the loop exit cost by summing up frequencies of all exit edges</td>
    <td class="lineNumber">2503</td>
    <td class="codeline">    // Collect the loop exit cost by summing up frequencies of all exit edges</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2504</td>
    <td class="codeline">    // except the one from the chain tail.</td>
    <td class="lineNumber">2504</td>
    <td class="codeline">    // except the one from the chain tail.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2505</td>
    <td class="codeline">    for (auto &ExitWithFreq : ExitsWithFreq)</td>
    <td class="lineNumber">2505</td>
    <td class="codeline">    for (auto &ExitWithFreq : ExitsWithFreq)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2506</td>
    <td class="codeline">      if (TailBB != ExitWithFreq.first)</td>
    <td class="lineNumber">2506</td>
    <td class="codeline">      if (TailBB != ExitWithFreq.first)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2507</td>
    <td class="codeline">        Cost += ExitWithFreq.second;</td>
    <td class="lineNumber">2507</td>
    <td class="codeline">        Cost += ExitWithFreq.second;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2508</td>
    <td class="codeline"></td>
    <td class="lineNumber">2508</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2509</td>
    <td class="codeline">    // The cost of breaking the once fall-through edge from the tail to the top</td>
    <td class="lineNumber">2509</td>
    <td class="codeline">    // The cost of breaking the once fall-through edge from the tail to the top</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2510</td>
    <td class="codeline">    // of the loop chain. Here we need to consider three cases:</td>
    <td class="lineNumber">2510</td>
    <td class="codeline">    // of the loop chain. Here we need to consider three cases:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2511</td>
    <td class="codeline">    // 1. If the tail node has only one successor, then we will get an</td>
    <td class="lineNumber">2511</td>
    <td class="codeline">    // 1. If the tail node has only one successor, then we will get an</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2512</td>
    <td class="codeline">    //    additional jmp instruction. So the cost here is (MisfetchCost +</td>
    <td class="lineNumber">2512</td>
    <td class="codeline">    //    additional jmp instruction. So the cost here is (MisfetchCost +</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2513</td>
    <td class="codeline">    //    JumpInstCost) * tail node frequency.</td>
    <td class="lineNumber">2513</td>
    <td class="codeline">    //    JumpInstCost) * tail node frequency.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2514</td>
    <td class="codeline">    // 2. If the tail node has two successors, then we may still get an</td>
    <td class="lineNumber">2514</td>
    <td class="codeline">    // 2. If the tail node has two successors, then we may still get an</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2515</td>
    <td class="codeline">    //    additional jmp instruction if the layout successor after the loop</td>
    <td class="lineNumber">2515</td>
    <td class="codeline">    //    additional jmp instruction if the layout successor after the loop</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2516</td>
    <td class="codeline">    //    chain is not its CFG successor. Note that the more frequently executed</td>
    <td class="lineNumber">2516</td>
    <td class="codeline">    //    chain is not its CFG successor. Note that the more frequently executed</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2517</td>
    <td class="codeline">    //    jmp instruction will be put ahead of the other one. Assume the</td>
    <td class="lineNumber">2517</td>
    <td class="codeline">    //    jmp instruction will be put ahead of the other one. Assume the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2518</td>
    <td class="codeline">    //    frequency of those two branches are x and y, where x is the frequency</td>
    <td class="lineNumber">2518</td>
    <td class="codeline">    //    frequency of those two branches are x and y, where x is the frequency</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2519</td>
    <td class="codeline">    //    of the edge to the chain head, then the cost will be</td>
    <td class="lineNumber">2519</td>
    <td class="codeline">    //    of the edge to the chain head, then the cost will be</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2520</td>
    <td class="codeline">    //    (x * MisfetechCost + min(x, y) * JumpInstCost) * tail node frequency.</td>
    <td class="lineNumber">2520</td>
    <td class="codeline">    //    (x * MisfetechCost + min(x, y) * JumpInstCost) * tail node frequency.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2521</td>
    <td class="codeline">    // 3. If the tail node has more than two successors (this rarely happens),</td>
    <td class="lineNumber">2521</td>
    <td class="codeline">    // 3. If the tail node has more than two successors (this rarely happens),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2522</td>
    <td class="codeline">    //    we won't consider any additional cost.</td>
    <td class="lineNumber">2522</td>
    <td class="codeline">    //    we won't consider any additional cost.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2523</td>
    <td class="codeline">    if (TailBB->isSuccessor(*Iter)) {</td>
    <td class="lineNumber">2523</td>
    <td class="codeline">    if (TailBB->isSuccessor(*Iter)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2524</td>
    <td class="codeline">      auto TailBBFreq = MBFI->getBlockFreq(TailBB);</td>
    <td class="lineNumber">2524</td>
    <td class="codeline">      auto TailBBFreq = MBFI->getBlockFreq(TailBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2525</td>
    <td class="codeline">      if (TailBB->succ_size() == 1)</td>
    <td class="lineNumber">2525</td>
    <td class="codeline">      if (TailBB->succ_size() == 1)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2526</td>
    <td class="codeline">        Cost += ScaleBlockFrequency(TailBBFreq.getFrequency(),</td>
    <td class="lineNumber">2526</td>
    <td class="codeline">        Cost += ScaleBlockFrequency(TailBBFreq.getFrequency(),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2527</td>
    <td class="codeline">                                    MisfetchCost + JumpInstCost);</td>
    <td class="lineNumber">2527</td>
    <td class="codeline">                                    MisfetchCost + JumpInstCost);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2528</td>
    <td class="codeline">      else if (TailBB->succ_size() == 2) {</td>
    <td class="lineNumber">2528</td>
    <td class="codeline">      else if (TailBB->succ_size() == 2) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2529</td>
    <td class="codeline">        auto TailToHeadProb = MBPI->getEdgeProbability(TailBB, *Iter);</td>
    <td class="lineNumber">2529</td>
    <td class="codeline">        auto TailToHeadProb = MBPI->getEdgeProbability(TailBB, *Iter);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2530</td>
    <td class="codeline">        auto TailToHeadFreq = TailBBFreq * TailToHeadProb;</td>
    <td class="lineNumber">2530</td>
    <td class="codeline">        auto TailToHeadFreq = TailBBFreq * TailToHeadProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2531</td>
    <td class="codeline">        auto ColderEdgeFreq = TailToHeadProb > BranchProbability(1, 2)</td>
    <td class="lineNumber">2531</td>
    <td class="codeline">        auto ColderEdgeFreq = TailToHeadProb > BranchProbability(1, 2)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2532</td>
    <td class="codeline">                                  ? TailBBFreq * TailToHeadProb.getCompl()</td>
    <td class="lineNumber">2532</td>
    <td class="codeline">                                  ? TailBBFreq * TailToHeadProb.getCompl()</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2533</td>
    <td class="codeline">                                  : TailToHeadFreq;</td>
    <td class="lineNumber">2533</td>
    <td class="codeline">                                  : TailToHeadFreq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2534</td>
    <td class="codeline">        Cost += ScaleBlockFrequency(TailToHeadFreq, MisfetchCost) +</td>
    <td class="lineNumber">2534</td>
    <td class="codeline">        Cost += ScaleBlockFrequency(TailToHeadFreq, MisfetchCost) +</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2535</td>
    <td class="codeline">                ScaleBlockFrequency(ColderEdgeFreq, JumpInstCost);</td>
    <td class="lineNumber">2535</td>
    <td class="codeline">                ScaleBlockFrequency(ColderEdgeFreq, JumpInstCost);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2536</td>
    <td class="codeline">      }</td>
    <td class="lineNumber">2536</td>
    <td class="codeline">      }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2537</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2537</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2538</td>
    <td class="codeline"></td>
    <td class="lineNumber">2538</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2539</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "The cost of loop rotation by making "</td>
    <td class="lineNumber">2539</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "The cost of loop rotation by making "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2540</td>
    <td class="codeline">                      << getBlockName(*Iter)</td>
    <td class="lineNumber">2540</td>
    <td class="codeline">                      << getBlockName(*Iter)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2541</td>
    <td class="codeline">                      << " to the top: " << Cost.getFrequency() << "\n");</td>
    <td class="lineNumber">2541</td>
    <td class="codeline">                      << " to the top: " << Cost.getFrequency() << "\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2542</td>
    <td class="codeline"></td>
    <td class="lineNumber">2542</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2543</td>
    <td class="codeline">    if (Cost < SmallestRotationCost) {</td>
    <td class="lineNumber">2543</td>
    <td class="codeline">    if (Cost < SmallestRotationCost) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2544</td>
    <td class="codeline">      SmallestRotationCost = Cost;</td>
    <td class="lineNumber">2544</td>
    <td class="codeline">      SmallestRotationCost = Cost;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2545</td>
    <td class="codeline">      RotationPos = Iter;</td>
    <td class="lineNumber">2545</td>
    <td class="codeline">      RotationPos = Iter;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2546</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2546</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2547</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">2547</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2548</td>
    <td class="codeline"></td>
    <td class="lineNumber">2548</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2549</td>
    <td class="codeline">  if (RotationPos != LoopChain.end()) {</td>
    <td class="lineNumber">2549</td>
    <td class="codeline">  if (RotationPos != LoopChain.end()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2550</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "Rotate loop by making " << getBlockName(*RotationPos)</td>
    <td class="lineNumber">2550</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << "Rotate loop by making " << getBlockName(*RotationPos)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2551</td>
    <td class="codeline">                      << " to the top\n");</td>
    <td class="lineNumber">2551</td>
    <td class="codeline">                      << " to the top\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2552</td>
    <td class="codeline">    std::rotate(LoopChain.begin(), RotationPos, LoopChain.end());</td>
    <td class="lineNumber">2552</td>
    <td class="codeline">    std::rotate(LoopChain.begin(), RotationPos, LoopChain.end());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2553</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">2553</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2554</td>
    <td class="codeline">}</td>
    <td class="lineNumber">2554</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2555</td>
    <td class="codeline"></td>
    <td class="lineNumber">2555</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2556</td>
    <td class="codeline">/// Collect blocks in the given loop that are to be placed.</td>
    <td class="lineNumber">2556</td>
    <td class="codeline">/// Collect blocks in the given loop that are to be placed.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2557</td>
    <td class="codeline">///</td>
    <td class="lineNumber">2557</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2558</td>
    <td class="codeline">/// When profile data is available, exclude cold blocks from the returned set;</td>
    <td class="lineNumber">2558</td>
    <td class="codeline">/// When profile data is available, exclude cold blocks from the returned set;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2559</td>
    <td class="codeline">/// otherwise, collect all blocks in the loop.</td>
    <td class="lineNumber">2559</td>
    <td class="codeline">/// otherwise, collect all blocks in the loop.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2560</td>
    <td class="codeline">MachineBlockPlacement::BlockFilterSet</td>
    <td class="lineNumber">2560</td>
    <td class="codeline">MachineBlockPlacement::BlockFilterSet</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2561</td>
    <td class="codeline">MachineBlockPlacement::collectLoopBlockSet(const MachineLoop &L) {</td>
    <td class="lineNumber">2561</td>
    <td class="codeline">MachineBlockPlacement::collectLoopBlockSet(const MachineLoop &L) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2562</td>
    <td class="codeline">  BlockFilterSet LoopBlockSet;</td>
    <td class="lineNumber">2562</td>
    <td class="codeline">  BlockFilterSet LoopBlockSet;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2563</td>
    <td class="codeline"></td>
    <td class="lineNumber">2563</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2564</td>
    <td class="codeline">  // Filter cold blocks off from LoopBlockSet when profile data is available.</td>
    <td class="lineNumber">2564</td>
    <td class="codeline">  // Filter cold blocks off from LoopBlockSet when profile data is available.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2565</td>
    <td class="codeline">  // Collect the sum of frequencies of incoming edges to the loop header from</td>
    <td class="lineNumber">2565</td>
    <td class="codeline">  // Collect the sum of frequencies of incoming edges to the loop header from</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2566</td>
    <td class="codeline">  // outside. If we treat the loop as a super block, this is the frequency of</td>
    <td class="lineNumber">2566</td>
    <td class="codeline">  // outside. If we treat the loop as a super block, this is the frequency of</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2567</td>
    <td class="codeline">  // the loop. Then for each block in the loop, we calculate the ratio between</td>
    <td class="lineNumber">2567</td>
    <td class="codeline">  // the loop. Then for each block in the loop, we calculate the ratio between</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2568</td>
    <td class="codeline">  // its frequency and the frequency of the loop block. When it is too small,</td>
    <td class="lineNumber">2568</td>
    <td class="codeline">  // its frequency and the frequency of the loop block. When it is too small,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2569</td>
    <td class="codeline">  // don't add it to the loop chain. If there are outer loops, then this block</td>
    <td class="lineNumber">2569</td>
    <td class="codeline">  // don't add it to the loop chain. If there are outer loops, then this block</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2570</td>
    <td class="codeline">  // will be merged into the first outer loop chain for which this block is not</td>
    <td class="lineNumber">2570</td>
    <td class="codeline">  // will be merged into the first outer loop chain for which this block is not</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2571</td>
    <td class="codeline">  // cold anymore. This needs precise profile data and we only do this when</td>
    <td class="lineNumber">2571</td>
    <td class="codeline">  // cold anymore. This needs precise profile data and we only do this when</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2572</td>
    <td class="codeline">  // profile data is available.</td>
    <td class="lineNumber">2572</td>
    <td class="codeline">  // profile data is available.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2573</td>
    <td class="codeline">  if (F->getFunction().hasProfileData() || ForceLoopColdBlock) {</td>
    <td class="lineNumber">2573</td>
    <td class="codeline">  if (F->getFunction().hasProfileData() || ForceLoopColdBlock) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2574</td>
    <td class="codeline">    BlockFrequency LoopFreq(0);</td>
    <td class="lineNumber">2574</td>
    <td class="codeline">    BlockFrequency LoopFreq(0);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2575</td>
    <td class="codeline">    for (auto *LoopPred : L.getHeader()->predecessors())</td>
    <td class="lineNumber">2575</td>
    <td class="codeline">    for (auto *LoopPred : L.getHeader()->predecessors())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2576</td>
    <td class="codeline">      if (!L.contains(LoopPred))</td>
    <td class="lineNumber">2576</td>
    <td class="codeline">      if (!L.contains(LoopPred))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2577</td>
    <td class="codeline">        LoopFreq += MBFI->getBlockFreq(LoopPred) *</td>
    <td class="lineNumber">2577</td>
    <td class="codeline">        LoopFreq += MBFI->getBlockFreq(LoopPred) *</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2578</td>
    <td class="codeline">                    MBPI->getEdgeProbability(LoopPred, L.getHeader());</td>
    <td class="lineNumber">2578</td>
    <td class="codeline">                    MBPI->getEdgeProbability(LoopPred, L.getHeader());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2579</td>
    <td class="codeline"></td>
    <td class="lineNumber">2579</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2580</td>
    <td class="codeline">    for (MachineBasicBlock *LoopBB : L.getBlocks()) {</td>
    <td class="lineNumber">2580</td>
    <td class="codeline">    for (MachineBasicBlock *LoopBB : L.getBlocks()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2581</td>
    <td class="codeline">      if (LoopBlockSet.count(LoopBB))</td>
    <td class="lineNumber">2581</td>
    <td class="codeline">      if (LoopBlockSet.count(LoopBB))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2582</td>
    <td class="codeline">        continue;</td>
    <td class="lineNumber">2582</td>
    <td class="codeline">        continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2583</td>
    <td class="codeline">      auto Freq = MBFI->getBlockFreq(LoopBB).getFrequency();</td>
    <td class="lineNumber">2583</td>
    <td class="codeline">      auto Freq = MBFI->getBlockFreq(LoopBB).getFrequency();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2584</td>
    <td class="codeline">      if (Freq == 0 || LoopFreq.getFrequency() / Freq > LoopToColdBlockRatio)</td>
    <td class="lineNumber">2584</td>
    <td class="codeline">      if (Freq == 0 || LoopFreq.getFrequency() / Freq > LoopToColdBlockRatio)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2585</td>
    <td class="codeline">        continue;</td>
    <td class="lineNumber">2585</td>
    <td class="codeline">        continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2586</td>
    <td class="codeline">      BlockChain *Chain = BlockToChain[LoopBB];</td>
    <td class="lineNumber">2586</td>
    <td class="codeline">      BlockChain *Chain = BlockToChain[LoopBB];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2587</td>
    <td class="codeline">      for (MachineBasicBlock *ChainBB : *Chain)</td>
    <td class="lineNumber">2587</td>
    <td class="codeline">      for (MachineBasicBlock *ChainBB : *Chain)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2588</td>
    <td class="codeline">        LoopBlockSet.insert(ChainBB);</td>
    <td class="lineNumber">2588</td>
    <td class="codeline">        LoopBlockSet.insert(ChainBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2589</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2589</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2590</td>
    <td class="codeline">  } else</td>
    <td class="lineNumber">2590</td>
    <td class="codeline">  } else</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2591</td>
    <td class="codeline">    LoopBlockSet.insert(L.block_begin(), L.block_end());</td>
    <td class="lineNumber">2591</td>
    <td class="codeline">    LoopBlockSet.insert(L.block_begin(), L.block_end());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2592</td>
    <td class="codeline"></td>
    <td class="lineNumber">2592</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2593</td>
    <td class="codeline">  return LoopBlockSet;</td>
    <td class="lineNumber">2593</td>
    <td class="codeline">  return LoopBlockSet;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2594</td>
    <td class="codeline">}</td>
    <td class="lineNumber">2594</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2595</td>
    <td class="codeline"></td>
    <td class="lineNumber">2595</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2596</td>
    <td class="codeline">/// Forms basic block chains from the natural loop structures.</td>
    <td class="lineNumber">2596</td>
    <td class="codeline">/// Forms basic block chains from the natural loop structures.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2597</td>
    <td class="codeline">///</td>
    <td class="lineNumber">2597</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2598</td>
    <td class="codeline">/// These chains are designed to preserve the existing *structure* of the code</td>
    <td class="lineNumber">2598</td>
    <td class="codeline">/// These chains are designed to preserve the existing *structure* of the code</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2599</td>
    <td class="codeline">/// as much as possible. We can then stitch the chains together in a way which</td>
    <td class="lineNumber">2599</td>
    <td class="codeline">/// as much as possible. We can then stitch the chains together in a way which</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2600</td>
    <td class="codeline">/// both preserves the topological structure and minimizes taken conditional</td>
    <td class="lineNumber">2600</td>
    <td class="codeline">/// both preserves the topological structure and minimizes taken conditional</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2601</td>
    <td class="codeline">/// branches.</td>
    <td class="lineNumber">2601</td>
    <td class="codeline">/// branches.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2602</td>
    <td class="codeline">void MachineBlockPlacement::buildLoopChains(const MachineLoop &L) {</td>
    <td class="lineNumber">2602</td>
    <td class="codeline">void MachineBlockPlacement::buildLoopChains(const MachineLoop &L) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2603</td>
    <td class="codeline">  // First recurse through any nested loops, building chains for those inner</td>
    <td class="lineNumber">2603</td>
    <td class="codeline">  // First recurse through any nested loops, building chains for those inner</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2604</td>
    <td class="codeline">  // loops.</td>
    <td class="lineNumber">2604</td>
    <td class="codeline">  // loops.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2605</td>
    <td class="codeline">  for (const MachineLoop *InnerLoop : L)</td>
    <td class="lineNumber">2605</td>
    <td class="codeline">  for (const MachineLoop *InnerLoop : L)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2606</td>
    <td class="codeline">    buildLoopChains(*InnerLoop);</td>
    <td class="lineNumber">2606</td>
    <td class="codeline">    buildLoopChains(*InnerLoop);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2607</td>
    <td class="codeline"></td>
    <td class="lineNumber">2607</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2608</td>
    <td class="codeline">  assert(BlockWorkList.empty() &&</td>
    <td class="lineNumber">2608</td>
    <td class="codeline">  assert(BlockWorkList.empty() &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2609</td>
    <td class="codeline">         "BlockWorkList not empty when starting to build loop chains.");</td>
    <td class="lineNumber">2609</td>
    <td class="codeline">         "BlockWorkList not empty when starting to build loop chains.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2610</td>
    <td class="codeline">  assert(EHPadWorkList.empty() &&</td>
    <td class="lineNumber">2610</td>
    <td class="codeline">  assert(EHPadWorkList.empty() &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2611</td>
    <td class="codeline">         "EHPadWorkList not empty when starting to build loop chains.");</td>
    <td class="lineNumber">2611</td>
    <td class="codeline">         "EHPadWorkList not empty when starting to build loop chains.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2612</td>
    <td class="codeline">  BlockFilterSet LoopBlockSet = collectLoopBlockSet(L);</td>
    <td class="lineNumber">2612</td>
    <td class="codeline">  BlockFilterSet LoopBlockSet = collectLoopBlockSet(L);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2613</td>
    <td class="codeline"></td>
    <td class="lineNumber">2613</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2614</td>
    <td class="codeline">  // Check if we have profile data for this function. If yes, we will rotate</td>
    <td class="lineNumber">2614</td>
    <td class="codeline">  // Check if we have profile data for this function. If yes, we will rotate</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2615</td>
    <td class="codeline">  // this loop by modeling costs more precisely which requires the profile data</td>
    <td class="lineNumber">2615</td>
    <td class="codeline">  // this loop by modeling costs more precisely which requires the profile data</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2616</td>
    <td class="codeline">  // for better layout.</td>
    <td class="lineNumber">2616</td>
    <td class="codeline">  // for better layout.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2617</td>
    <td class="codeline">  bool RotateLoopWithProfile =</td>
    <td class="lineNumber">2617</td>
    <td class="codeline">  bool RotateLoopWithProfile =</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2618</td>
    <td class="codeline">      ForcePreciseRotationCost ||</td>
    <td class="lineNumber">2618</td>
    <td class="codeline">      ForcePreciseRotationCost ||</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2619</td>
    <td class="codeline">      (PreciseRotationCost && F->getFunction().hasProfileData());</td>
    <td class="lineNumber">2619</td>
    <td class="codeline">      (PreciseRotationCost && F->getFunction().hasProfileData());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2620</td>
    <td class="codeline"></td>
    <td class="lineNumber">2620</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2621</td>
    <td class="codeline">  // First check to see if there is an obviously preferable top block for the</td>
    <td class="lineNumber">2621</td>
    <td class="codeline">  // First check to see if there is an obviously preferable top block for the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2622</td>
    <td class="codeline">  // loop. This will default to the header, but may end up as one of the</td>
    <td class="lineNumber">2622</td>
    <td class="codeline">  // loop. This will default to the header, but may end up as one of the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2623</td>
    <td class="codeline">  // predecessors to the header if there is one which will result in strictly</td>
    <td class="lineNumber">2623</td>
    <td class="codeline">  // predecessors to the header if there is one which will result in strictly</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2624</td>
    <td class="codeline">  // fewer branches in the loop body.</td>
    <td class="lineNumber">2624</td>
    <td class="codeline">  // fewer branches in the loop body.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2625</td>
    <td class="codeline">  MachineBasicBlock *LoopTop = findBestLoopTop(L, LoopBlockSet);</td>
    <td class="lineNumber">2625</td>
    <td class="codeline">  MachineBasicBlock *LoopTop = findBestLoopTop(L, LoopBlockSet);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2626</td>
    <td class="codeline"></td>
    <td class="lineNumber">2626</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2627</td>
    <td class="codeline">  // If we selected just the header for the loop top, look for a potentially</td>
    <td class="lineNumber">2627</td>
    <td class="codeline">  // If we selected just the header for the loop top, look for a potentially</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2628</td>
    <td class="codeline">  // profitable exit block in the event that rotating the loop can eliminate</td>
    <td class="lineNumber">2628</td>
    <td class="codeline">  // profitable exit block in the event that rotating the loop can eliminate</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2629</td>
    <td class="codeline">  // branches by placing an exit edge at the bottom.</td>
    <td class="lineNumber">2629</td>
    <td class="codeline">  // branches by placing an exit edge at the bottom.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2630</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">2630</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2631</td>
    <td class="codeline">  // Loops are processed innermost to uttermost, make sure we clear</td>
    <td class="lineNumber">2631</td>
    <td class="codeline">  // Loops are processed innermost to uttermost, make sure we clear</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2632</td>
    <td class="codeline">  // PreferredLoopExit before processing a new loop.</td>
    <td class="lineNumber">2632</td>
    <td class="codeline">  // PreferredLoopExit before processing a new loop.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2633</td>
    <td class="codeline">  PreferredLoopExit = nullptr;</td>
    <td class="lineNumber">2633</td>
    <td class="codeline">  PreferredLoopExit = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2634</td>
    <td class="codeline">  BlockFrequency ExitFreq;</td>
    <td class="lineNumber">2634</td>
    <td class="codeline">  BlockFrequency ExitFreq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2635</td>
    <td class="codeline">  if (!RotateLoopWithProfile && LoopTop == L.getHeader())</td>
    <td class="lineNumber">2635</td>
    <td class="codeline">  if (!RotateLoopWithProfile && LoopTop == L.getHeader())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2636</td>
    <td class="codeline">    PreferredLoopExit = findBestLoopExit(L, LoopBlockSet, ExitFreq);</td>
    <td class="lineNumber">2636</td>
    <td class="codeline">    PreferredLoopExit = findBestLoopExit(L, LoopBlockSet, ExitFreq);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2637</td>
    <td class="codeline"></td>
    <td class="lineNumber">2637</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2638</td>
    <td class="codeline">  BlockChain &LoopChain = *BlockToChain[LoopTop];</td>
    <td class="lineNumber">2638</td>
    <td class="codeline">  BlockChain &LoopChain = *BlockToChain[LoopTop];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2639</td>
    <td class="codeline"></td>
    <td class="lineNumber">2639</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2640</td>
    <td class="codeline">  // FIXME: This is a really lame way of walking the chains in the loop: we</td>
    <td class="lineNumber">2640</td>
    <td class="codeline">  // FIXME: This is a really lame way of walking the chains in the loop: we</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2641</td>
    <td class="codeline">  // walk the blocks, and use a set to prevent visiting a particular chain</td>
    <td class="lineNumber">2641</td>
    <td class="codeline">  // walk the blocks, and use a set to prevent visiting a particular chain</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2642</td>
    <td class="codeline">  // twice.</td>
    <td class="lineNumber">2642</td>
    <td class="codeline">  // twice.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2643</td>
    <td class="codeline">  SmallPtrSet<BlockChain *, 4> UpdatedPreds;</td>
    <td class="lineNumber">2643</td>
    <td class="codeline">  SmallPtrSet<BlockChain *, 4> UpdatedPreds;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2644</td>
    <td class="codeline">  assert(LoopChain.UnscheduledPredecessors == 0 &&</td>
    <td class="lineNumber">2644</td>
    <td class="codeline">  assert(LoopChain.UnscheduledPredecessors == 0 &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2645</td>
    <td class="codeline">         "LoopChain should not have unscheduled predecessors.");</td>
    <td class="lineNumber">2645</td>
    <td class="codeline">         "LoopChain should not have unscheduled predecessors.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2646</td>
    <td class="codeline">  UpdatedPreds.insert(&LoopChain);</td>
    <td class="lineNumber">2646</td>
    <td class="codeline">  UpdatedPreds.insert(&LoopChain);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2647</td>
    <td class="codeline"></td>
    <td class="lineNumber">2647</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2648</td>
    <td class="codeline">  for (const MachineBasicBlock *LoopBB : LoopBlockSet)</td>
    <td class="lineNumber">2648</td>
    <td class="codeline">  for (const MachineBasicBlock *LoopBB : LoopBlockSet)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2649</td>
    <td class="codeline">    fillWorkLists(LoopBB, UpdatedPreds, &LoopBlockSet);</td>
    <td class="lineNumber">2649</td>
    <td class="codeline">    fillWorkLists(LoopBB, UpdatedPreds, &LoopBlockSet);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2650</td>
    <td class="codeline"></td>
    <td class="lineNumber">2650</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2651</td>
    <td class="codeline">  buildChain(LoopTop, LoopChain, &LoopBlockSet);</td>
    <td class="lineNumber">2651</td>
    <td class="codeline">  buildChain(LoopTop, LoopChain, &LoopBlockSet);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2652</td>
    <td class="codeline"></td>
    <td class="lineNumber">2652</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2653</td>
    <td class="codeline">  if (RotateLoopWithProfile)</td>
    <td class="lineNumber">2653</td>
    <td class="codeline">  if (RotateLoopWithProfile)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2654</td>
    <td class="codeline">    rotateLoopWithProfile(LoopChain, L, LoopBlockSet);</td>
    <td class="lineNumber">2654</td>
    <td class="codeline">    rotateLoopWithProfile(LoopChain, L, LoopBlockSet);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2655</td>
    <td class="codeline">  else</td>
    <td class="lineNumber">2655</td>
    <td class="codeline">  else</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2656</td>
    <td class="codeline">    rotateLoop(LoopChain, PreferredLoopExit, ExitFreq, LoopBlockSet);</td>
    <td class="lineNumber">2656</td>
    <td class="codeline">    rotateLoop(LoopChain, PreferredLoopExit, ExitFreq, LoopBlockSet);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2657</td>
    <td class="codeline"></td>
    <td class="lineNumber">2657</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2658</td>
    <td class="codeline">  LLVM_DEBUG({</td>
    <td class="lineNumber">2658</td>
    <td class="codeline">  LLVM_DEBUG({</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2659</td>
    <td class="codeline">    // Crash at the end so we get all of the debugging output first.</td>
    <td class="lineNumber">2659</td>
    <td class="codeline">    // Crash at the end so we get all of the debugging output first.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2660</td>
    <td class="codeline">    bool BadLoop = false;</td>
    <td class="lineNumber">2660</td>
    <td class="codeline">    bool BadLoop = false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2661</td>
    <td class="codeline">    if (LoopChain.UnscheduledPredecessors) {</td>
    <td class="lineNumber">2661</td>
    <td class="codeline">    if (LoopChain.UnscheduledPredecessors) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2662</td>
    <td class="codeline">      BadLoop = true;</td>
    <td class="lineNumber">2662</td>
    <td class="codeline">      BadLoop = true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2663</td>
    <td class="codeline">      dbgs() << "Loop chain contains a block without its preds placed!\n"</td>
    <td class="lineNumber">2663</td>
    <td class="codeline">      dbgs() << "Loop chain contains a block without its preds placed!\n"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2664</td>
    <td class="codeline">             << "  Loop header:  " << getBlockName(*L.block_begin()) << "\n"</td>
    <td class="lineNumber">2664</td>
    <td class="codeline">             << "  Loop header:  " << getBlockName(*L.block_begin()) << "\n"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2665</td>
    <td class="codeline">             << "  Chain header: " << getBlockName(*LoopChain.begin()) << "\n";</td>
    <td class="lineNumber">2665</td>
    <td class="codeline">             << "  Chain header: " << getBlockName(*LoopChain.begin()) << "\n";</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2666</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2666</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2667</td>
    <td class="codeline">    for (MachineBasicBlock *ChainBB : LoopChain) {</td>
    <td class="lineNumber">2667</td>
    <td class="codeline">    for (MachineBasicBlock *ChainBB : LoopChain) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2668</td>
    <td class="codeline">      dbgs() << "          ... " << getBlockName(ChainBB) << "\n";</td>
    <td class="lineNumber">2668</td>
    <td class="codeline">      dbgs() << "          ... " << getBlockName(ChainBB) << "\n";</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2669</td>
    <td class="codeline">      if (!LoopBlockSet.remove(ChainBB)) {</td>
    <td class="lineNumber">2669</td>
    <td class="codeline">      if (!LoopBlockSet.remove(ChainBB)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2670</td>
    <td class="codeline">        // We don't mark the loop as bad here because there are real situations</td>
    <td class="lineNumber">2670</td>
    <td class="codeline">        // We don't mark the loop as bad here because there are real situations</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2671</td>
    <td class="codeline">        // where this can occur. For example, with an unanalyzable fallthrough</td>
    <td class="lineNumber">2671</td>
    <td class="codeline">        // where this can occur. For example, with an unanalyzable fallthrough</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2672</td>
    <td class="codeline">        // from a loop block to a non-loop block or vice versa.</td>
    <td class="lineNumber">2672</td>
    <td class="codeline">        // from a loop block to a non-loop block or vice versa.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2673</td>
    <td class="codeline">        dbgs() << "Loop chain contains a block not contained by the loop!\n"</td>
    <td class="lineNumber">2673</td>
    <td class="codeline">        dbgs() << "Loop chain contains a block not contained by the loop!\n"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2674</td>
    <td class="codeline">               << "  Loop header:  " << getBlockName(*L.block_begin()) << "\n"</td>
    <td class="lineNumber">2674</td>
    <td class="codeline">               << "  Loop header:  " << getBlockName(*L.block_begin()) << "\n"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2675</td>
    <td class="codeline">               << "  Chain header: " << getBlockName(*LoopChain.begin()) << "\n"</td>
    <td class="lineNumber">2675</td>
    <td class="codeline">               << "  Chain header: " << getBlockName(*LoopChain.begin()) << "\n"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2676</td>
    <td class="codeline">               << "  Bad block:    " << getBlockName(ChainBB) << "\n";</td>
    <td class="lineNumber">2676</td>
    <td class="codeline">               << "  Bad block:    " << getBlockName(ChainBB) << "\n";</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2677</td>
    <td class="codeline">      }</td>
    <td class="lineNumber">2677</td>
    <td class="codeline">      }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2678</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2678</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2679</td>
    <td class="codeline"></td>
    <td class="lineNumber">2679</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2680</td>
    <td class="codeline">    if (!LoopBlockSet.empty()) {</td>
    <td class="lineNumber">2680</td>
    <td class="codeline">    if (!LoopBlockSet.empty()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2681</td>
    <td class="codeline">      BadLoop = true;</td>
    <td class="lineNumber">2681</td>
    <td class="codeline">      BadLoop = true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2682</td>
    <td class="codeline">      for (const MachineBasicBlock *LoopBB : LoopBlockSet)</td>
    <td class="lineNumber">2682</td>
    <td class="codeline">      for (const MachineBasicBlock *LoopBB : LoopBlockSet)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2683</td>
    <td class="codeline">        dbgs() << "Loop contains blocks never placed into a chain!\n"</td>
    <td class="lineNumber">2683</td>
    <td class="codeline">        dbgs() << "Loop contains blocks never placed into a chain!\n"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2684</td>
    <td class="codeline">               << "  Loop header:  " << getBlockName(*L.block_begin()) << "\n"</td>
    <td class="lineNumber">2684</td>
    <td class="codeline">               << "  Loop header:  " << getBlockName(*L.block_begin()) << "\n"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2685</td>
    <td class="codeline">               << "  Chain header: " << getBlockName(*LoopChain.begin()) << "\n"</td>
    <td class="lineNumber">2685</td>
    <td class="codeline">               << "  Chain header: " << getBlockName(*LoopChain.begin()) << "\n"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2686</td>
    <td class="codeline">               << "  Bad block:    " << getBlockName(LoopBB) << "\n";</td>
    <td class="lineNumber">2686</td>
    <td class="codeline">               << "  Bad block:    " << getBlockName(LoopBB) << "\n";</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2687</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2687</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2688</td>
    <td class="codeline">    assert(!BadLoop && "Detected problems with the placement of this loop.");</td>
    <td class="lineNumber">2688</td>
    <td class="codeline">    assert(!BadLoop && "Detected problems with the placement of this loop.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2689</td>
    <td class="codeline">  });</td>
    <td class="lineNumber">2689</td>
    <td class="codeline">  });</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2690</td>
    <td class="codeline"></td>
    <td class="lineNumber">2690</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2691</td>
    <td class="codeline">  BlockWorkList.clear();</td>
    <td class="lineNumber">2691</td>
    <td class="codeline">  BlockWorkList.clear();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2692</td>
    <td class="codeline">  EHPadWorkList.clear();</td>
    <td class="lineNumber">2692</td>
    <td class="codeline">  EHPadWorkList.clear();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2693</td>
    <td class="codeline">}</td>
    <td class="lineNumber">2693</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2694</td>
    <td class="codeline"></td>
    <td class="lineNumber">2694</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2695</td>
    <td class="codeline">void MachineBlockPlacement::buildCFGChains() {</td>
    <td class="lineNumber">2695</td>
    <td class="codeline">void MachineBlockPlacement::buildCFGChains() {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2696</td>
    <td class="codeline">  // Ensure that every BB in the function has an associated chain to simplify</td>
    <td class="lineNumber">2696</td>
    <td class="codeline">  // Ensure that every BB in the function has an associated chain to simplify</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2697</td>
    <td class="codeline">  // the assumptions of the remaining algorithm.</td>
    <td class="lineNumber">2697</td>
    <td class="codeline">  // the assumptions of the remaining algorithm.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2698</td>
    <td class="codeline">  SmallVector<MachineOperand, 4> Cond; // For analyzeBranch.</td>
    <td class="lineNumber">2698</td>
    <td class="codeline">  SmallVector<MachineOperand, 4> Cond; // For analyzeBranch.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2699</td>
    <td class="codeline">  for (MachineFunction::iterator FI = F->begin(), FE = F->end(); FI != FE;</td>
    <td class="lineNumber">2699</td>
    <td class="codeline">  for (MachineFunction::iterator FI = F->begin(), FE = F->end(); FI != FE;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2700</td>
    <td class="codeline">       ++FI) {</td>
    <td class="lineNumber">2700</td>
    <td class="codeline">       ++FI) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2701</td>
    <td class="codeline">    MachineBasicBlock *BB = &*FI;</td>
    <td class="lineNumber">2701</td>
    <td class="codeline">    MachineBasicBlock *BB = &*FI;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2702</td>
    <td class="codeline">    BlockChain *Chain =</td>
    <td class="lineNumber">2702</td>
    <td class="codeline">    BlockChain *Chain =</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2703</td>
    <td class="codeline">        new (ChainAllocator.Allocate()) BlockChain(BlockToChain, BB);</td>
    <td class="lineNumber">2703</td>
    <td class="codeline">        new (ChainAllocator.Allocate()) BlockChain(BlockToChain, BB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2704</td>
    <td class="codeline">    // Also, merge any blocks which we cannot reason about and must preserve</td>
    <td class="lineNumber">2704</td>
    <td class="codeline">    // Also, merge any blocks which we cannot reason about and must preserve</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2705</td>
    <td class="codeline">    // the exact fallthrough behavior for.</td>
    <td class="lineNumber">2705</td>
    <td class="codeline">    // the exact fallthrough behavior for.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2706</td>
    <td class="codeline">    while (true) {</td>
    <td class="lineNumber">2706</td>
    <td class="codeline">    while (true) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2707</td>
    <td class="codeline">      Cond.clear();</td>
    <td class="lineNumber">2707</td>
    <td class="codeline">      Cond.clear();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2708</td>
    <td class="codeline">      MachineBasicBlock *TBB = nullptr, *FBB = nullptr; // For analyzeBranch.</td>
    <td class="lineNumber">2708</td>
    <td class="codeline">      MachineBasicBlock *TBB = nullptr, *FBB = nullptr; // For analyzeBranch.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2709</td>
    <td class="codeline">      if (!TII->analyzeBranch(*BB, TBB, FBB, Cond) || !FI->canFallThrough())</td>
    <td class="lineNumber">2709</td>
    <td class="codeline">      if (!TII->analyzeBranch(*BB, TBB, FBB, Cond) || !FI->canFallThrough())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2710</td>
    <td class="codeline">        break;</td>
    <td class="lineNumber">2710</td>
    <td class="codeline">        break;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2711</td>
    <td class="codeline"></td>
    <td class="lineNumber">2711</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2712</td>
    <td class="codeline">      MachineFunction::iterator NextFI = std::next(FI);</td>
    <td class="lineNumber">2712</td>
    <td class="codeline">      MachineFunction::iterator NextFI = std::next(FI);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2713</td>
    <td class="codeline">      MachineBasicBlock *NextBB = &*NextFI;</td>
    <td class="lineNumber">2713</td>
    <td class="codeline">      MachineBasicBlock *NextBB = &*NextFI;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2714</td>
    <td class="codeline">      // Ensure that the layout successor is a viable block, as we know that</td>
    <td class="lineNumber">2714</td>
    <td class="codeline">      // Ensure that the layout successor is a viable block, as we know that</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2715</td>
    <td class="codeline">      // fallthrough is a possibility.</td>
    <td class="lineNumber">2715</td>
    <td class="codeline">      // fallthrough is a possibility.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2716</td>
    <td class="codeline">      assert(NextFI != FE && "Can't fallthrough past the last block.");</td>
    <td class="lineNumber">2716</td>
    <td class="codeline">      assert(NextFI != FE && "Can't fallthrough past the last block.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2717</td>
    <td class="codeline">      LLVM_DEBUG(dbgs() << "Pre-merging due to unanalyzable fallthrough: "</td>
    <td class="lineNumber">2717</td>
    <td class="codeline">      LLVM_DEBUG(dbgs() << "Pre-merging due to unanalyzable fallthrough: "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2718</td>
    <td class="codeline">                        << getBlockName(BB) << " -> " << getBlockName(NextBB)</td>
    <td class="lineNumber">2718</td>
    <td class="codeline">                        << getBlockName(BB) << " -> " << getBlockName(NextBB)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2719</td>
    <td class="codeline">                        << "\n");</td>
    <td class="lineNumber">2719</td>
    <td class="codeline">                        << "\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2720</td>
    <td class="codeline">      Chain->merge(NextBB, nullptr);</td>
    <td class="lineNumber">2720</td>
    <td class="codeline">      Chain->merge(NextBB, nullptr);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2721</td>
    <td class="codeline">#ifndef NDEBUG</td>
    <td class="lineNumber">2721</td>
    <td class="codeline">#ifndef NDEBUG</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2722</td>
    <td class="codeline">      BlocksWithUnanalyzableExits.insert(&*BB);</td>
    <td class="lineNumber">2722</td>
    <td class="codeline">      BlocksWithUnanalyzableExits.insert(&*BB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2723</td>
    <td class="codeline">#endif</td>
    <td class="lineNumber">2723</td>
    <td class="codeline">#endif</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2724</td>
    <td class="codeline">      FI = NextFI;</td>
    <td class="lineNumber">2724</td>
    <td class="codeline">      FI = NextFI;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2725</td>
    <td class="codeline">      BB = NextBB;</td>
    <td class="lineNumber">2725</td>
    <td class="codeline">      BB = NextBB;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2726</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2726</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2727</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">2727</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2728</td>
    <td class="codeline"></td>
    <td class="lineNumber">2728</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2729</td>
    <td class="codeline">  // Build any loop-based chains.</td>
    <td class="lineNumber">2729</td>
    <td class="codeline">  // Build any loop-based chains.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2730</td>
    <td class="codeline">  PreferredLoopExit = nullptr;</td>
    <td class="lineNumber">2730</td>
    <td class="codeline">  PreferredLoopExit = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2731</td>
    <td class="codeline">  for (MachineLoop *L : *MLI)</td>
    <td class="lineNumber">2731</td>
    <td class="codeline">  for (MachineLoop *L : *MLI)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2732</td>
    <td class="codeline">    buildLoopChains(*L);</td>
    <td class="lineNumber">2732</td>
    <td class="codeline">    buildLoopChains(*L);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2733</td>
    <td class="codeline"></td>
    <td class="lineNumber">2733</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2734</td>
    <td class="codeline">  assert(BlockWorkList.empty() &&</td>
    <td class="lineNumber">2734</td>
    <td class="codeline">  assert(BlockWorkList.empty() &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2735</td>
    <td class="codeline">         "BlockWorkList should be empty before building final chain.");</td>
    <td class="lineNumber">2735</td>
    <td class="codeline">         "BlockWorkList should be empty before building final chain.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2736</td>
    <td class="codeline">  assert(EHPadWorkList.empty() &&</td>
    <td class="lineNumber">2736</td>
    <td class="codeline">  assert(EHPadWorkList.empty() &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2737</td>
    <td class="codeline">         "EHPadWorkList should be empty before building final chain.");</td>
    <td class="lineNumber">2737</td>
    <td class="codeline">         "EHPadWorkList should be empty before building final chain.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2738</td>
    <td class="codeline"></td>
    <td class="lineNumber">2738</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2739</td>
    <td class="codeline">  SmallPtrSet<BlockChain *, 4> UpdatedPreds;</td>
    <td class="lineNumber">2739</td>
    <td class="codeline">  SmallPtrSet<BlockChain *, 4> UpdatedPreds;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2740</td>
    <td class="codeline">  for (MachineBasicBlock &MBB : *F)</td>
    <td class="lineNumber">2740</td>
    <td class="codeline">  for (MachineBasicBlock &MBB : *F)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2741</td>
    <td class="codeline">    fillWorkLists(&MBB, UpdatedPreds);</td>
    <td class="lineNumber">2741</td>
    <td class="codeline">    fillWorkLists(&MBB, UpdatedPreds);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2742</td>
    <td class="codeline"></td>
    <td class="lineNumber">2742</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2743</td>
    <td class="codeline">  BlockChain &FunctionChain = *BlockToChain[&F->front()];</td>
    <td class="lineNumber">2743</td>
    <td class="codeline">  BlockChain &FunctionChain = *BlockToChain[&F->front()];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2744</td>
    <td class="codeline">  buildChain(&F->front(), FunctionChain);</td>
    <td class="lineNumber">2744</td>
    <td class="codeline">  buildChain(&F->front(), FunctionChain);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2745</td>
    <td class="codeline"></td>
    <td class="lineNumber">2745</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2746</td>
    <td class="codeline">#ifndef NDEBUG</td>
    <td class="lineNumber">2746</td>
    <td class="codeline">#ifndef NDEBUG</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2747</td>
    <td class="codeline">  using FunctionBlockSetType = SmallPtrSet<MachineBasicBlock *, 16>;</td>
    <td class="lineNumber">2747</td>
    <td class="codeline">  using FunctionBlockSetType = SmallPtrSet<MachineBasicBlock *, 16>;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2748</td>
    <td class="codeline">#endif</td>
    <td class="lineNumber">2748</td>
    <td class="codeline">#endif</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2749</td>
    <td class="codeline">  LLVM_DEBUG({</td>
    <td class="lineNumber">2749</td>
    <td class="codeline">  LLVM_DEBUG({</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2750</td>
    <td class="codeline">    // Crash at the end so we get all of the debugging output first.</td>
    <td class="lineNumber">2750</td>
    <td class="codeline">    // Crash at the end so we get all of the debugging output first.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2751</td>
    <td class="codeline">    bool BadFunc = false;</td>
    <td class="lineNumber">2751</td>
    <td class="codeline">    bool BadFunc = false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2752</td>
    <td class="codeline">    FunctionBlockSetType FunctionBlockSet;</td>
    <td class="lineNumber">2752</td>
    <td class="codeline">    FunctionBlockSetType FunctionBlockSet;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2753</td>
    <td class="codeline">    for (MachineBasicBlock &MBB : *F)</td>
    <td class="lineNumber">2753</td>
    <td class="codeline">    for (MachineBasicBlock &MBB : *F)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2754</td>
    <td class="codeline">      FunctionBlockSet.insert(&MBB);</td>
    <td class="lineNumber">2754</td>
    <td class="codeline">      FunctionBlockSet.insert(&MBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2755</td>
    <td class="codeline"></td>
    <td class="lineNumber">2755</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2756</td>
    <td class="codeline">    for (MachineBasicBlock *ChainBB : FunctionChain)</td>
    <td class="lineNumber">2756</td>
    <td class="codeline">    for (MachineBasicBlock *ChainBB : FunctionChain)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2757</td>
    <td class="codeline">      if (!FunctionBlockSet.erase(ChainBB)) {</td>
    <td class="lineNumber">2757</td>
    <td class="codeline">      if (!FunctionBlockSet.erase(ChainBB)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2758</td>
    <td class="codeline">        BadFunc = true;</td>
    <td class="lineNumber">2758</td>
    <td class="codeline">        BadFunc = true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2759</td>
    <td class="codeline">        dbgs() << "Function chain contains a block not in the function!\n"</td>
    <td class="lineNumber">2759</td>
    <td class="codeline">        dbgs() << "Function chain contains a block not in the function!\n"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2760</td>
    <td class="codeline">               << "  Bad block:    " << getBlockName(ChainBB) << "\n";</td>
    <td class="lineNumber">2760</td>
    <td class="codeline">               << "  Bad block:    " << getBlockName(ChainBB) << "\n";</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2761</td>
    <td class="codeline">      }</td>
    <td class="lineNumber">2761</td>
    <td class="codeline">      }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2762</td>
    <td class="codeline"></td>
    <td class="lineNumber">2762</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2763</td>
    <td class="codeline">    if (!FunctionBlockSet.empty()) {</td>
    <td class="lineNumber">2763</td>
    <td class="codeline">    if (!FunctionBlockSet.empty()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2764</td>
    <td class="codeline">      BadFunc = true;</td>
    <td class="lineNumber">2764</td>
    <td class="codeline">      BadFunc = true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2765</td>
    <td class="codeline">      for (MachineBasicBlock *RemainingBB : FunctionBlockSet)</td>
    <td class="lineNumber">2765</td>
    <td class="codeline">      for (MachineBasicBlock *RemainingBB : FunctionBlockSet)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2766</td>
    <td class="codeline">        dbgs() << "Function contains blocks never placed into a chain!\n"</td>
    <td class="lineNumber">2766</td>
    <td class="codeline">        dbgs() << "Function contains blocks never placed into a chain!\n"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2767</td>
    <td class="codeline">               << "  Bad block:    " << getBlockName(RemainingBB) << "\n";</td>
    <td class="lineNumber">2767</td>
    <td class="codeline">               << "  Bad block:    " << getBlockName(RemainingBB) << "\n";</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2768</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2768</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2769</td>
    <td class="codeline">    assert(!BadFunc && "Detected problems with the block placement.");</td>
    <td class="lineNumber">2769</td>
    <td class="codeline">    assert(!BadFunc && "Detected problems with the block placement.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2770</td>
    <td class="codeline">  });</td>
    <td class="lineNumber">2770</td>
    <td class="codeline">  });</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2771</td>
    <td class="codeline"></td>
    <td class="lineNumber">2771</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2772</td>
    <td class="codeline">  // Remember original layout ordering, so we can update terminators after</td>
    <td class="lineNumber">2772</td>
    <td class="codeline">  // Remember original layout ordering, so we can update terminators after</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2773</td>
    <td class="codeline">  // reordering to point to the original layout successor.</td>
    <td class="lineNumber">2773</td>
    <td class="codeline">  // reordering to point to the original layout successor.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2774</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 4> OriginalLayoutSuccessors(</td>
    <td class="lineNumber">2774</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 4> OriginalLayoutSuccessors(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2775</td>
    <td class="codeline">      F->getNumBlockIDs());</td>
    <td class="lineNumber">2775</td>
    <td class="codeline">      F->getNumBlockIDs());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2776</td>
    <td class="codeline">  {</td>
    <td class="lineNumber">2776</td>
    <td class="codeline">  {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2777</td>
    <td class="codeline">    MachineBasicBlock *LastMBB = nullptr;</td>
    <td class="lineNumber">2777</td>
    <td class="codeline">    MachineBasicBlock *LastMBB = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2778</td>
    <td class="codeline">    for (auto &MBB : *F) {</td>
    <td class="lineNumber">2778</td>
    <td class="codeline">    for (auto &MBB : *F) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2779</td>
    <td class="codeline">      if (LastMBB != nullptr)</td>
    <td class="lineNumber">2779</td>
    <td class="codeline">      if (LastMBB != nullptr)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2780</td>
    <td class="codeline">        OriginalLayoutSuccessors[LastMBB->getNumber()] = &MBB;</td>
    <td class="lineNumber">2780</td>
    <td class="codeline">        OriginalLayoutSuccessors[LastMBB->getNumber()] = &MBB;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2781</td>
    <td class="codeline">      LastMBB = &MBB;</td>
    <td class="lineNumber">2781</td>
    <td class="codeline">      LastMBB = &MBB;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2782</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2782</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2783</td>
    <td class="codeline">    OriginalLayoutSuccessors[F->back().getNumber()] = nullptr;</td>
    <td class="lineNumber">2783</td>
    <td class="codeline">    OriginalLayoutSuccessors[F->back().getNumber()] = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2784</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">2784</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2785</td>
    <td class="codeline"></td>
    <td class="lineNumber">2785</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2786</td>
    <td class="codeline">  // Splice the blocks into place.</td>
    <td class="lineNumber">2786</td>
    <td class="codeline">  // Splice the blocks into place.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2787</td>
    <td class="codeline">  MachineFunction::iterator InsertPos = F->begin();</td>
    <td class="lineNumber">2787</td>
    <td class="codeline">  MachineFunction::iterator InsertPos = F->begin();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2788</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "[MBP] Function: " << F->getName() << "\n");</td>
    <td class="lineNumber">2788</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "[MBP] Function: " << F->getName() << "\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2789</td>
    <td class="codeline">  for (MachineBasicBlock *ChainBB : FunctionChain) {</td>
    <td class="lineNumber">2789</td>
    <td class="codeline">  for (MachineBasicBlock *ChainBB : FunctionChain) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2790</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << (ChainBB == *FunctionChain.begin() ? "Placing chain "</td>
    <td class="lineNumber">2790</td>
    <td class="codeline">    LLVM_DEBUG(dbgs() << (ChainBB == *FunctionChain.begin() ? "Placing chain "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2791</td>
    <td class="codeline">                                                            : "          ... ")</td>
    <td class="lineNumber">2791</td>
    <td class="codeline">                                                            : "          ... ")</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2792</td>
    <td class="codeline">                      << getBlockName(ChainBB) << "\n");</td>
    <td class="lineNumber">2792</td>
    <td class="codeline">                      << getBlockName(ChainBB) << "\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2793</td>
    <td class="codeline">    if (InsertPos != MachineFunction::iterator(ChainBB))</td>
    <td class="lineNumber">2793</td>
    <td class="codeline">    if (InsertPos != MachineFunction::iterator(ChainBB))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2794</td>
    <td class="codeline">      F->splice(InsertPos, ChainBB);</td>
    <td class="lineNumber">2794</td>
    <td class="codeline">      F->splice(InsertPos, ChainBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2795</td>
    <td class="codeline">    else</td>
    <td class="lineNumber">2795</td>
    <td class="codeline">    else</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2796</td>
    <td class="codeline">      ++InsertPos;</td>
    <td class="lineNumber">2796</td>
    <td class="codeline">      ++InsertPos;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2797</td>
    <td class="codeline"></td>
    <td class="lineNumber">2797</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2798</td>
    <td class="codeline">    // Update the terminator of the previous block.</td>
    <td class="lineNumber">2798</td>
    <td class="codeline">    // Update the terminator of the previous block.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2799</td>
    <td class="codeline">    if (ChainBB == *FunctionChain.begin())</td>
    <td class="lineNumber">2799</td>
    <td class="codeline">    if (ChainBB == *FunctionChain.begin())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2800</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">2800</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2801</td>
    <td class="codeline">    MachineBasicBlock *PrevBB = &*std::prev(MachineFunction::iterator(ChainBB));</td>
    <td class="lineNumber">2801</td>
    <td class="codeline">    MachineBasicBlock *PrevBB = &*std::prev(MachineFunction::iterator(ChainBB));</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2802</td>
    <td class="codeline"></td>
    <td class="lineNumber">2802</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2803</td>
    <td class="codeline">    // FIXME: It would be awesome of updateTerminator would just return rather</td>
    <td class="lineNumber">2803</td>
    <td class="codeline">    // FIXME: It would be awesome of updateTerminator would just return rather</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2804</td>
    <td class="codeline">    // than assert when the branch cannot be analyzed in order to remove this</td>
    <td class="lineNumber">2804</td>
    <td class="codeline">    // than assert when the branch cannot be analyzed in order to remove this</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2805</td>
    <td class="codeline">    // boiler plate.</td>
    <td class="lineNumber">2805</td>
    <td class="codeline">    // boiler plate.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2806</td>
    <td class="codeline">    Cond.clear();</td>
    <td class="lineNumber">2806</td>
    <td class="codeline">    Cond.clear();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2807</td>
    <td class="codeline">    MachineBasicBlock *TBB = nullptr, *FBB = nullptr; // For analyzeBranch.</td>
    <td class="lineNumber">2807</td>
    <td class="codeline">    MachineBasicBlock *TBB = nullptr, *FBB = nullptr; // For analyzeBranch.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2808</td>
    <td class="codeline"></td>
    <td class="lineNumber">2808</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2809</td>
    <td class="codeline">#ifndef NDEBUG</td>
    <td class="lineNumber">2809</td>
    <td class="codeline">#ifndef NDEBUG</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2810</td>
    <td class="codeline">    if (!BlocksWithUnanalyzableExits.count(PrevBB)) {</td>
    <td class="lineNumber">2810</td>
    <td class="codeline">    if (!BlocksWithUnanalyzableExits.count(PrevBB)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2811</td>
    <td class="codeline">      // Given the exact block placement we chose, we may actually not _need_ to</td>
    <td class="lineNumber">2811</td>
    <td class="codeline">      // Given the exact block placement we chose, we may actually not _need_ to</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2812</td>
    <td class="codeline">      // be able to edit PrevBB's terminator sequence, but not being _able_ to</td>
    <td class="lineNumber">2812</td>
    <td class="codeline">      // be able to edit PrevBB's terminator sequence, but not being _able_ to</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2813</td>
    <td class="codeline">      // do that at this point is a bug.</td>
    <td class="lineNumber">2813</td>
    <td class="codeline">      // do that at this point is a bug.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2814</td>
    <td class="codeline">      assert((!TII->analyzeBranch(*PrevBB, TBB, FBB, Cond) ||</td>
    <td class="lineNumber">2814</td>
    <td class="codeline">      assert((!TII->analyzeBranch(*PrevBB, TBB, FBB, Cond) ||</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2815</td>
    <td class="codeline">              !PrevBB->canFallThrough()) &&</td>
    <td class="lineNumber">2815</td>
    <td class="codeline">              !PrevBB->canFallThrough()) &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2816</td>
    <td class="codeline">             "Unexpected block with un-analyzable fallthrough!");</td>
    <td class="lineNumber">2816</td>
    <td class="codeline">             "Unexpected block with un-analyzable fallthrough!");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2817</td>
    <td class="codeline">      Cond.clear();</td>
    <td class="lineNumber">2817</td>
    <td class="codeline">      Cond.clear();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2818</td>
    <td class="codeline">      TBB = FBB = nullptr;</td>
    <td class="lineNumber">2818</td>
    <td class="codeline">      TBB = FBB = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2819</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2819</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2820</td>
    <td class="codeline">#endif</td>
    <td class="lineNumber">2820</td>
    <td class="codeline">#endif</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2821</td>
    <td class="codeline"></td>
    <td class="lineNumber">2821</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2822</td>
    <td class="codeline">    // The "PrevBB" is not yet updated to reflect current code layout, so,</td>
    <td class="lineNumber">2822</td>
    <td class="codeline">    // The "PrevBB" is not yet updated to reflect current code layout, so,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2823</td>
    <td class="codeline">    //   o. it may fall-through to a block without explicit "goto" instruction</td>
    <td class="lineNumber">2823</td>
    <td class="codeline">    //   o. it may fall-through to a block without explicit "goto" instruction</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2824</td>
    <td class="codeline">    //      before layout, and no longer fall-through it after layout; or</td>
    <td class="lineNumber">2824</td>
    <td class="codeline">    //      before layout, and no longer fall-through it after layout; or</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2825</td>
    <td class="codeline">    //   o. just opposite.</td>
    <td class="lineNumber">2825</td>
    <td class="codeline">    //   o. just opposite.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2826</td>
    <td class="codeline">    //</td>
    <td class="lineNumber">2826</td>
    <td class="codeline">    //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2827</td>
    <td class="codeline">    // analyzeBranch() may return erroneous value for FBB when these two</td>
    <td class="lineNumber">2827</td>
    <td class="codeline">    // analyzeBranch() may return erroneous value for FBB when these two</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2828</td>
    <td class="codeline">    // situations take place. For the first scenario FBB is mistakenly set NULL;</td>
    <td class="lineNumber">2828</td>
    <td class="codeline">    // situations take place. For the first scenario FBB is mistakenly set NULL;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2829</td>
    <td class="codeline">    // for the 2nd scenario, the FBB, which is expected to be NULL, is</td>
    <td class="lineNumber">2829</td>
    <td class="codeline">    // for the 2nd scenario, the FBB, which is expected to be NULL, is</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2830</td>
    <td class="codeline">    // mistakenly pointing to "*BI".</td>
    <td class="lineNumber">2830</td>
    <td class="codeline">    // mistakenly pointing to "*BI".</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2831</td>
    <td class="codeline">    // Thus, if the future change needs to use FBB before the layout is set, it</td>
    <td class="lineNumber">2831</td>
    <td class="codeline">    // Thus, if the future change needs to use FBB before the layout is set, it</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2832</td>
    <td class="codeline">    // has to correct FBB first by using the code similar to the following:</td>
    <td class="lineNumber">2832</td>
    <td class="codeline">    // has to correct FBB first by using the code similar to the following:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2833</td>
    <td class="codeline">    //</td>
    <td class="lineNumber">2833</td>
    <td class="codeline">    //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2834</td>
    <td class="codeline">    // if (!Cond.empty() && (!FBB || FBB == ChainBB)) {</td>
    <td class="lineNumber">2834</td>
    <td class="codeline">    // if (!Cond.empty() && (!FBB || FBB == ChainBB)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2835</td>
    <td class="codeline">    //   PrevBB->updateTerminator();</td>
    <td class="lineNumber">2835</td>
    <td class="codeline">    //   PrevBB->updateTerminator();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2836</td>
    <td class="codeline">    //   Cond.clear();</td>
    <td class="lineNumber">2836</td>
    <td class="codeline">    //   Cond.clear();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2837</td>
    <td class="codeline">    //   TBB = FBB = nullptr;</td>
    <td class="lineNumber">2837</td>
    <td class="codeline">    //   TBB = FBB = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2838</td>
    <td class="codeline">    //   if (TII->analyzeBranch(*PrevBB, TBB, FBB, Cond)) {</td>
    <td class="lineNumber">2838</td>
    <td class="codeline">    //   if (TII->analyzeBranch(*PrevBB, TBB, FBB, Cond)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2839</td>
    <td class="codeline">    //     // FIXME: This should never take place.</td>
    <td class="lineNumber">2839</td>
    <td class="codeline">    //     // FIXME: This should never take place.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2840</td>
    <td class="codeline">    //     TBB = FBB = nullptr;</td>
    <td class="lineNumber">2840</td>
    <td class="codeline">    //     TBB = FBB = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2841</td>
    <td class="codeline">    //   }</td>
    <td class="lineNumber">2841</td>
    <td class="codeline">    //   }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2842</td>
    <td class="codeline">    // }</td>
    <td class="lineNumber">2842</td>
    <td class="codeline">    // }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2843</td>
    <td class="codeline">    if (!TII->analyzeBranch(*PrevBB, TBB, FBB, Cond)) {</td>
    <td class="lineNumber">2843</td>
    <td class="codeline">    if (!TII->analyzeBranch(*PrevBB, TBB, FBB, Cond)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2844</td>
    <td class="codeline">      PrevBB->updateTerminator(OriginalLayoutSuccessors[PrevBB->getNumber()]);</td>
    <td class="lineNumber">2844</td>
    <td class="codeline">      PrevBB->updateTerminator(OriginalLayoutSuccessors[PrevBB->getNumber()]);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2845</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2845</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2846</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">2846</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2847</td>
    <td class="codeline"></td>
    <td class="lineNumber">2847</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2848</td>
    <td class="codeline">  // Fixup the last block.</td>
    <td class="lineNumber">2848</td>
    <td class="codeline">  // Fixup the last block.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2849</td>
    <td class="codeline">  Cond.clear();</td>
    <td class="lineNumber">2849</td>
    <td class="codeline">  Cond.clear();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2850</td>
    <td class="codeline">  MachineBasicBlock *TBB = nullptr, *FBB = nullptr; // For analyzeBranch.</td>
    <td class="lineNumber">2850</td>
    <td class="codeline">  MachineBasicBlock *TBB = nullptr, *FBB = nullptr; // For analyzeBranch.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2851</td>
    <td class="codeline">  if (!TII->analyzeBranch(F->back(), TBB, FBB, Cond)) {</td>
    <td class="lineNumber">2851</td>
    <td class="codeline">  if (!TII->analyzeBranch(F->back(), TBB, FBB, Cond)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2852</td>
    <td class="codeline">    MachineBasicBlock *PrevBB = &F->back();</td>
    <td class="lineNumber">2852</td>
    <td class="codeline">    MachineBasicBlock *PrevBB = &F->back();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2853</td>
    <td class="codeline">    PrevBB->updateTerminator(OriginalLayoutSuccessors[PrevBB->getNumber()]);</td>
    <td class="lineNumber">2853</td>
    <td class="codeline">    PrevBB->updateTerminator(OriginalLayoutSuccessors[PrevBB->getNumber()]);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2854</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">2854</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2855</td>
    <td class="codeline"></td>
    <td class="lineNumber">2855</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2856</td>
    <td class="codeline">  BlockWorkList.clear();</td>
    <td class="lineNumber">2856</td>
    <td class="codeline">  BlockWorkList.clear();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2857</td>
    <td class="codeline">  EHPadWorkList.clear();</td>
    <td class="lineNumber">2857</td>
    <td class="codeline">  EHPadWorkList.clear();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2858</td>
    <td class="codeline">}</td>
    <td class="lineNumber">2858</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2859</td>
    <td class="codeline"></td>
    <td class="lineNumber">2859</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2860</td>
    <td class="codeline">void MachineBlockPlacement::optimizeBranches() {</td>
    <td class="lineNumber">2860</td>
    <td class="codeline">void MachineBlockPlacement::optimizeBranches() {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2861</td>
    <td class="codeline">  BlockChain &FunctionChain = *BlockToChain[&F->front()];</td>
    <td class="lineNumber">2861</td>
    <td class="codeline">  BlockChain &FunctionChain = *BlockToChain[&F->front()];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2862</td>
    <td class="codeline">  SmallVector<MachineOperand, 4> Cond; // For analyzeBranch.</td>
    <td class="lineNumber">2862</td>
    <td class="codeline">  SmallVector<MachineOperand, 4> Cond; // For analyzeBranch.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2863</td>
    <td class="codeline"></td>
    <td class="lineNumber">2863</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2864</td>
    <td class="codeline">  // Now that all the basic blocks in the chain have the proper layout,</td>
    <td class="lineNumber">2864</td>
    <td class="codeline">  // Now that all the basic blocks in the chain have the proper layout,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2865</td>
    <td class="codeline">  // make a final call to analyzeBranch with AllowModify set.</td>
    <td class="lineNumber">2865</td>
    <td class="codeline">  // make a final call to analyzeBranch with AllowModify set.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2866</td>
    <td class="codeline">  // Indeed, the target may be able to optimize the branches in a way we</td>
    <td class="lineNumber">2866</td>
    <td class="codeline">  // Indeed, the target may be able to optimize the branches in a way we</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2867</td>
    <td class="codeline">  // cannot because all branches may not be analyzable.</td>
    <td class="lineNumber">2867</td>
    <td class="codeline">  // cannot because all branches may not be analyzable.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2868</td>
    <td class="codeline">  // E.g., the target may be able to remove an unconditional branch to</td>
    <td class="lineNumber">2868</td>
    <td class="codeline">  // E.g., the target may be able to remove an unconditional branch to</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2869</td>
    <td class="codeline">  // a fallthrough when it occurs after predicated terminators.</td>
    <td class="lineNumber">2869</td>
    <td class="codeline">  // a fallthrough when it occurs after predicated terminators.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2870</td>
    <td class="codeline">  for (MachineBasicBlock *ChainBB : FunctionChain) {</td>
    <td class="lineNumber">2870</td>
    <td class="codeline">  for (MachineBasicBlock *ChainBB : FunctionChain) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2871</td>
    <td class="codeline">    Cond.clear();</td>
    <td class="lineNumber">2871</td>
    <td class="codeline">    Cond.clear();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2872</td>
    <td class="codeline">    MachineBasicBlock *TBB = nullptr, *FBB = nullptr; // For analyzeBranch.</td>
    <td class="lineNumber">2872</td>
    <td class="codeline">    MachineBasicBlock *TBB = nullptr, *FBB = nullptr; // For analyzeBranch.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2873</td>
    <td class="codeline">    if (!TII->analyzeBranch(*ChainBB, TBB, FBB, Cond, /*AllowModify*/ true)) {</td>
    <td class="lineNumber">2873</td>
    <td class="codeline">    if (!TII->analyzeBranch(*ChainBB, TBB, FBB, Cond, /*AllowModify*/ true)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2874</td>
    <td class="codeline">      // If PrevBB has a two-way branch, try to re-order the branches</td>
    <td class="lineNumber">2874</td>
    <td class="codeline">      // If PrevBB has a two-way branch, try to re-order the branches</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2875</td>
    <td class="codeline">      // such that we branch to the successor with higher probability first.</td>
    <td class="lineNumber">2875</td>
    <td class="codeline">      // such that we branch to the successor with higher probability first.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2876</td>
    <td class="codeline">      if (TBB && !Cond.empty() && FBB &&</td>
    <td class="lineNumber">2876</td>
    <td class="codeline">      if (TBB && !Cond.empty() && FBB &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2877</td>
    <td class="codeline">          MBPI->getEdgeProbability(ChainBB, FBB) ></td>
    <td class="lineNumber">2877</td>
    <td class="codeline">          MBPI->getEdgeProbability(ChainBB, FBB) ></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2878</td>
    <td class="codeline">              MBPI->getEdgeProbability(ChainBB, TBB) &&</td>
    <td class="lineNumber">2878</td>
    <td class="codeline">              MBPI->getEdgeProbability(ChainBB, TBB) &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2879</td>
    <td class="codeline">          !TII->reverseBranchCondition(Cond)) {</td>
    <td class="lineNumber">2879</td>
    <td class="codeline">          !TII->reverseBranchCondition(Cond)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2880</td>
    <td class="codeline">        LLVM_DEBUG(dbgs() << "Reverse order of the two branches: "</td>
    <td class="lineNumber">2880</td>
    <td class="codeline">        LLVM_DEBUG(dbgs() << "Reverse order of the two branches: "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2881</td>
    <td class="codeline">                          << getBlockName(ChainBB) << "\n");</td>
    <td class="lineNumber">2881</td>
    <td class="codeline">                          << getBlockName(ChainBB) << "\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2882</td>
    <td class="codeline">        LLVM_DEBUG(dbgs() << "    Edge probability: "</td>
    <td class="lineNumber">2882</td>
    <td class="codeline">        LLVM_DEBUG(dbgs() << "    Edge probability: "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2883</td>
    <td class="codeline">                          << MBPI->getEdgeProbability(ChainBB, FBB) << " vs "</td>
    <td class="lineNumber">2883</td>
    <td class="codeline">                          << MBPI->getEdgeProbability(ChainBB, FBB) << " vs "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2884</td>
    <td class="codeline">                          << MBPI->getEdgeProbability(ChainBB, TBB) << "\n");</td>
    <td class="lineNumber">2884</td>
    <td class="codeline">                          << MBPI->getEdgeProbability(ChainBB, TBB) << "\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2885</td>
    <td class="codeline">        DebugLoc dl; // FIXME: this is nowhere</td>
    <td class="lineNumber">2885</td>
    <td class="codeline">        DebugLoc dl; // FIXME: this is nowhere</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2886</td>
    <td class="codeline">        TII->removeBranch(*ChainBB);</td>
    <td class="lineNumber">2886</td>
    <td class="codeline">        TII->removeBranch(*ChainBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2887</td>
    <td class="codeline">        TII->insertBranch(*ChainBB, FBB, TBB, Cond, dl);</td>
    <td class="lineNumber">2887</td>
    <td class="codeline">        TII->insertBranch(*ChainBB, FBB, TBB, Cond, dl);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2888</td>
    <td class="codeline">      }</td>
    <td class="lineNumber">2888</td>
    <td class="codeline">      }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2889</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2889</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2890</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">2890</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2891</td>
    <td class="codeline">}</td>
    <td class="lineNumber">2891</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2892</td>
    <td class="codeline"></td>
    <td class="lineNumber">2892</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2893</td>
    <td class="codeline">void MachineBlockPlacement::alignBlocks() {</td>
    <td class="lineNumber">2893</td>
    <td class="codeline">void MachineBlockPlacement::alignBlocks() {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2894</td>
    <td class="codeline">  // Walk through the backedges of the function now that we have fully laid out</td>
    <td class="lineNumber">2894</td>
    <td class="codeline">  // Walk through the backedges of the function now that we have fully laid out</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2895</td>
    <td class="codeline">  // the basic blocks and align the destination of each backedge. We don't rely</td>
    <td class="lineNumber">2895</td>
    <td class="codeline">  // the basic blocks and align the destination of each backedge. We don't rely</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2896</td>
    <td class="codeline">  // exclusively on the loop info here so that we can align backedges in</td>
    <td class="lineNumber">2896</td>
    <td class="codeline">  // exclusively on the loop info here so that we can align backedges in</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2897</td>
    <td class="codeline">  // unnatural CFGs and backedges that were introduced purely because of the</td>
    <td class="lineNumber">2897</td>
    <td class="codeline">  // unnatural CFGs and backedges that were introduced purely because of the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2898</td>
    <td class="codeline">  // loop rotations done during this layout pass.</td>
    <td class="lineNumber">2898</td>
    <td class="codeline">  // loop rotations done during this layout pass.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2899</td>
    <td class="codeline">  if (F->getFunction().hasMinSize() ||</td>
    <td class="lineNumber">2899</td>
    <td class="codeline">  if (F->getFunction().hasMinSize() ||</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2900</td>
    <td class="codeline">      (F->getFunction().hasOptSize() && !TLI->alignLoopsWithOptSize()))</td>
    <td class="lineNumber">2900</td>
    <td class="codeline">      (F->getFunction().hasOptSize() && !TLI->alignLoopsWithOptSize()))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2901</td>
    <td class="codeline">    return;</td>
    <td class="lineNumber">2901</td>
    <td class="codeline">    return;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2902</td>
    <td class="codeline">  BlockChain &FunctionChain = *BlockToChain[&F->front()];</td>
    <td class="lineNumber">2902</td>
    <td class="codeline">  BlockChain &FunctionChain = *BlockToChain[&F->front()];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2903</td>
    <td class="codeline">  if (FunctionChain.begin() == FunctionChain.end())</td>
    <td class="lineNumber">2903</td>
    <td class="codeline">  if (FunctionChain.begin() == FunctionChain.end())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2904</td>
    <td class="codeline">    return; // Empty chain.</td>
    <td class="lineNumber">2904</td>
    <td class="codeline">    return; // Empty chain.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2905</td>
    <td class="codeline"></td>
    <td class="lineNumber">2905</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2906</td>
    <td class="codeline">  const BranchProbability ColdProb(1, 5); // 20%</td>
    <td class="lineNumber">2906</td>
    <td class="codeline">  const BranchProbability ColdProb(1, 5); // 20%</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2907</td>
    <td class="codeline">  BlockFrequency EntryFreq = MBFI->getBlockFreq(&F->front());</td>
    <td class="lineNumber">2907</td>
    <td class="codeline">  BlockFrequency EntryFreq = MBFI->getBlockFreq(&F->front());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2908</td>
    <td class="codeline">  BlockFrequency WeightedEntryFreq = EntryFreq * ColdProb;</td>
    <td class="lineNumber">2908</td>
    <td class="codeline">  BlockFrequency WeightedEntryFreq = EntryFreq * ColdProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2909</td>
    <td class="codeline">  for (MachineBasicBlock *ChainBB : FunctionChain) {</td>
    <td class="lineNumber">2909</td>
    <td class="codeline">  for (MachineBasicBlock *ChainBB : FunctionChain) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2910</td>
    <td class="codeline">    if (ChainBB == *FunctionChain.begin())</td>
    <td class="lineNumber">2910</td>
    <td class="codeline">    if (ChainBB == *FunctionChain.begin())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2911</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">2911</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2912</td>
    <td class="codeline"></td>
    <td class="lineNumber">2912</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2913</td>
    <td class="codeline">    // Don't align non-looping basic blocks. These are unlikely to execute</td>
    <td class="lineNumber">2913</td>
    <td class="codeline">    // Don't align non-looping basic blocks. These are unlikely to execute</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2914</td>
    <td class="codeline">    // enough times to matter in practice. Note that we'll still handle</td>
    <td class="lineNumber">2914</td>
    <td class="codeline">    // enough times to matter in practice. Note that we'll still handle</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2915</td>
    <td class="codeline">    // unnatural CFGs inside of a natural outer loop (the common case) and</td>
    <td class="lineNumber">2915</td>
    <td class="codeline">    // unnatural CFGs inside of a natural outer loop (the common case) and</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2916</td>
    <td class="codeline">    // rotated loops.</td>
    <td class="lineNumber">2916</td>
    <td class="codeline">    // rotated loops.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2917</td>
    <td class="codeline">    MachineLoop *L = MLI->getLoopFor(ChainBB);</td>
    <td class="lineNumber">2917</td>
    <td class="codeline">    MachineLoop *L = MLI->getLoopFor(ChainBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2918</td>
    <td class="codeline">    if (!L)</td>
    <td class="lineNumber">2918</td>
    <td class="codeline">    if (!L)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2919</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">2919</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2920</td>
    <td class="codeline"></td>
    <td class="lineNumber">2920</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2921</td>
    <td class="codeline">    const Align Align = TLI->getPrefLoopAlignment(L);</td>
    <td class="lineNumber">2921</td>
    <td class="codeline">    const Align Align = TLI->getPrefLoopAlignment(L);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2922</td>
    <td class="codeline">    if (Align == 1)</td>
    <td class="lineNumber">2922</td>
    <td class="codeline">    if (Align == 1)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2923</td>
    <td class="codeline">      continue; // Don't care about loop alignment.</td>
    <td class="lineNumber">2923</td>
    <td class="codeline">      continue; // Don't care about loop alignment.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2924</td>
    <td class="codeline"></td>
    <td class="lineNumber">2924</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2925</td>
    <td class="codeline">    // If the block is cold relative to the function entry don't waste space</td>
    <td class="lineNumber">2925</td>
    <td class="codeline">    // If the block is cold relative to the function entry don't waste space</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2926</td>
    <td class="codeline">    // aligning it.</td>
    <td class="lineNumber">2926</td>
    <td class="codeline">    // aligning it.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2927</td>
    <td class="codeline">    BlockFrequency Freq = MBFI->getBlockFreq(ChainBB);</td>
    <td class="lineNumber">2927</td>
    <td class="codeline">    BlockFrequency Freq = MBFI->getBlockFreq(ChainBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2928</td>
    <td class="codeline">    if (Freq < WeightedEntryFreq)</td>
    <td class="lineNumber">2928</td>
    <td class="codeline">    if (Freq < WeightedEntryFreq)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2929</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">2929</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2930</td>
    <td class="codeline"></td>
    <td class="lineNumber">2930</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2931</td>
    <td class="codeline">    // If the block is cold relative to its loop header, don't align it</td>
    <td class="lineNumber">2931</td>
    <td class="codeline">    // If the block is cold relative to its loop header, don't align it</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2932</td>
    <td class="codeline">    // regardless of what edges into the block exist.</td>
    <td class="lineNumber">2932</td>
    <td class="codeline">    // regardless of what edges into the block exist.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2933</td>
    <td class="codeline">    MachineBasicBlock *LoopHeader = L->getHeader();</td>
    <td class="lineNumber">2933</td>
    <td class="codeline">    MachineBasicBlock *LoopHeader = L->getHeader();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2934</td>
    <td class="codeline">    BlockFrequency LoopHeaderFreq = MBFI->getBlockFreq(LoopHeader);</td>
    <td class="lineNumber">2934</td>
    <td class="codeline">    BlockFrequency LoopHeaderFreq = MBFI->getBlockFreq(LoopHeader);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2935</td>
    <td class="codeline">    if (Freq < (LoopHeaderFreq * ColdProb))</td>
    <td class="lineNumber">2935</td>
    <td class="codeline">    if (Freq < (LoopHeaderFreq * ColdProb))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2936</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">2936</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2937</td>
    <td class="codeline"></td>
    <td class="lineNumber">2937</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2938</td>
    <td class="codeline">    // If the global profiles indicates so, don't align it.</td>
    <td class="lineNumber">2938</td>
    <td class="codeline">    // If the global profiles indicates so, don't align it.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2939</td>
    <td class="codeline">    if (llvm::shouldOptimizeForSize(ChainBB, PSI, MBFI.get()) &&</td>
    <td class="lineNumber">2939</td>
    <td class="codeline">    if (llvm::shouldOptimizeForSize(ChainBB, PSI, MBFI.get()) &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2940</td>
    <td class="codeline">        !TLI->alignLoopsWithOptSize())</td>
    <td class="lineNumber">2940</td>
    <td class="codeline">        !TLI->alignLoopsWithOptSize())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2941</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">2941</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2942</td>
    <td class="codeline"></td>
    <td class="lineNumber">2942</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2943</td>
    <td class="codeline">    // Check for the existence of a non-layout predecessor which would benefit</td>
    <td class="lineNumber">2943</td>
    <td class="codeline">    // Check for the existence of a non-layout predecessor which would benefit</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2944</td>
    <td class="codeline">    // from aligning this block.</td>
    <td class="lineNumber">2944</td>
    <td class="codeline">    // from aligning this block.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2945</td>
    <td class="codeline">    MachineBasicBlock *LayoutPred =</td>
    <td class="lineNumber">2945</td>
    <td class="codeline">    MachineBasicBlock *LayoutPred =</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2946</td>
    <td class="codeline">        &*std::prev(MachineFunction::iterator(ChainBB));</td>
    <td class="lineNumber">2946</td>
    <td class="codeline">        &*std::prev(MachineFunction::iterator(ChainBB));</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2947</td>
    <td class="codeline"></td>
    <td class="lineNumber">2947</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2948</td>
    <td class="codeline">    auto DetermineMaxAlignmentPadding = [&]() {</td>
    <td class="lineNumber">2948</td>
    <td class="codeline">    auto DetermineMaxAlignmentPadding = [&]() {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2949</td>
    <td class="codeline">      // Set the maximum bytes allowed to be emitted for alignment.</td>
    <td class="lineNumber">2949</td>
    <td class="codeline">      // Set the maximum bytes allowed to be emitted for alignment.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2950</td>
    <td class="codeline">      unsigned MaxBytes;</td>
    <td class="lineNumber">2950</td>
    <td class="codeline">      unsigned MaxBytes;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2951</td>
    <td class="codeline">      if (MaxBytesForAlignmentOverride.getNumOccurrences() > 0)</td>
    <td class="lineNumber">2951</td>
    <td class="codeline">      if (MaxBytesForAlignmentOverride.getNumOccurrences() > 0)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2952</td>
    <td class="codeline">        MaxBytes = MaxBytesForAlignmentOverride;</td>
    <td class="lineNumber">2952</td>
    <td class="codeline">        MaxBytes = MaxBytesForAlignmentOverride;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2953</td>
    <td class="codeline">      else</td>
    <td class="lineNumber">2953</td>
    <td class="codeline">      else</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2954</td>
    <td class="codeline">        MaxBytes = TLI->getMaxPermittedBytesForAlignment(ChainBB);</td>
    <td class="lineNumber">2954</td>
    <td class="codeline">        MaxBytes = TLI->getMaxPermittedBytesForAlignment(ChainBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2955</td>
    <td class="codeline">      ChainBB->setMaxBytesForAlignment(MaxBytes);</td>
    <td class="lineNumber">2955</td>
    <td class="codeline">      ChainBB->setMaxBytesForAlignment(MaxBytes);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2956</td>
    <td class="codeline">    };</td>
    <td class="lineNumber">2956</td>
    <td class="codeline">    };</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2957</td>
    <td class="codeline"></td>
    <td class="lineNumber">2957</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2958</td>
    <td class="codeline">    // Force alignment if all the predecessors are jumps. We already checked</td>
    <td class="lineNumber">2958</td>
    <td class="codeline">    // Force alignment if all the predecessors are jumps. We already checked</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2959</td>
    <td class="codeline">    // that the block isn't cold above.</td>
    <td class="lineNumber">2959</td>
    <td class="codeline">    // that the block isn't cold above.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2960</td>
    <td class="codeline">    if (!LayoutPred->isSuccessor(ChainBB)) {</td>
    <td class="lineNumber">2960</td>
    <td class="codeline">    if (!LayoutPred->isSuccessor(ChainBB)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2961</td>
    <td class="codeline">      ChainBB->setAlignment(Align);</td>
    <td class="lineNumber">2961</td>
    <td class="codeline">      ChainBB->setAlignment(Align);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2962</td>
    <td class="codeline">      DetermineMaxAlignmentPadding();</td>
    <td class="lineNumber">2962</td>
    <td class="codeline">      DetermineMaxAlignmentPadding();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2963</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">2963</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2964</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2964</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2965</td>
    <td class="codeline"></td>
    <td class="lineNumber">2965</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2966</td>
    <td class="codeline">    // Align this block if the layout predecessor's edge into this block is</td>
    <td class="lineNumber">2966</td>
    <td class="codeline">    // Align this block if the layout predecessor's edge into this block is</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2967</td>
    <td class="codeline">    // cold relative to the block. When this is true, other predecessors make up</td>
    <td class="lineNumber">2967</td>
    <td class="codeline">    // cold relative to the block. When this is true, other predecessors make up</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2968</td>
    <td class="codeline">    // all of the hot entries into the block and thus alignment is likely to be</td>
    <td class="lineNumber">2968</td>
    <td class="codeline">    // all of the hot entries into the block and thus alignment is likely to be</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2969</td>
    <td class="codeline">    // important.</td>
    <td class="lineNumber">2969</td>
    <td class="codeline">    // important.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2970</td>
    <td class="codeline">    BranchProbability LayoutProb =</td>
    <td class="lineNumber">2970</td>
    <td class="codeline">    BranchProbability LayoutProb =</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2971</td>
    <td class="codeline">        MBPI->getEdgeProbability(LayoutPred, ChainBB);</td>
    <td class="lineNumber">2971</td>
    <td class="codeline">        MBPI->getEdgeProbability(LayoutPred, ChainBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2972</td>
    <td class="codeline">    BlockFrequency LayoutEdgeFreq = MBFI->getBlockFreq(LayoutPred) * LayoutProb;</td>
    <td class="lineNumber">2972</td>
    <td class="codeline">    BlockFrequency LayoutEdgeFreq = MBFI->getBlockFreq(LayoutPred) * LayoutProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2973</td>
    <td class="codeline">    if (LayoutEdgeFreq <= (Freq * ColdProb)) {</td>
    <td class="lineNumber">2973</td>
    <td class="codeline">    if (LayoutEdgeFreq <= (Freq * ColdProb)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2974</td>
    <td class="codeline">      ChainBB->setAlignment(Align);</td>
    <td class="lineNumber">2974</td>
    <td class="codeline">      ChainBB->setAlignment(Align);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2975</td>
    <td class="codeline">      DetermineMaxAlignmentPadding();</td>
    <td class="lineNumber">2975</td>
    <td class="codeline">      DetermineMaxAlignmentPadding();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2976</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">2976</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2977</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">2977</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2978</td>
    <td class="codeline">}</td>
    <td class="lineNumber">2978</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2979</td>
    <td class="codeline"></td>
    <td class="lineNumber">2979</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2980</td>
    <td class="codeline">/// Tail duplicate \p BB into (some) predecessors if profitable, repeating if</td>
    <td class="lineNumber">2980</td>
    <td class="codeline">/// Tail duplicate \p BB into (some) predecessors if profitable, repeating if</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2981</td>
    <td class="codeline">/// it was duplicated into its chain predecessor and removed.</td>
    <td class="lineNumber">2981</td>
    <td class="codeline">/// it was duplicated into its chain predecessor and removed.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2982</td>
    <td class="codeline">/// \p BB    - Basic block that may be duplicated.</td>
    <td class="lineNumber">2982</td>
    <td class="codeline">/// \p BB    - Basic block that may be duplicated.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2983</td>
    <td class="codeline">///</td>
    <td class="lineNumber">2983</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2984</td>
    <td class="codeline">/// \p LPred - Chosen layout predecessor of \p BB.</td>
    <td class="lineNumber">2984</td>
    <td class="codeline">/// \p LPred - Chosen layout predecessor of \p BB.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2985</td>
    <td class="codeline">///            Updated to be the chain end if LPred is removed.</td>
    <td class="lineNumber">2985</td>
    <td class="codeline">///            Updated to be the chain end if LPred is removed.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2986</td>
    <td class="codeline">/// \p Chain - Chain to which \p LPred belongs, and \p BB will belong.</td>
    <td class="lineNumber">2986</td>
    <td class="codeline">/// \p Chain - Chain to which \p LPred belongs, and \p BB will belong.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2987</td>
    <td class="codeline">/// \p BlockFilter - Set of blocks that belong to the loop being laid out.</td>
    <td class="lineNumber">2987</td>
    <td class="codeline">/// \p BlockFilter - Set of blocks that belong to the loop being laid out.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2988</td>
    <td class="codeline">///                  Used to identify which blocks to update predecessor</td>
    <td class="lineNumber">2988</td>
    <td class="codeline">///                  Used to identify which blocks to update predecessor</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2989</td>
    <td class="codeline">///                  counts.</td>
    <td class="lineNumber">2989</td>
    <td class="codeline">///                  counts.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2990</td>
    <td class="codeline">/// \p PrevUnplacedBlockIt - Iterator pointing to the last block that was</td>
    <td class="lineNumber">2990</td>
    <td class="codeline">/// \p PrevUnplacedBlockIt - Iterator pointing to the last block that was</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2991</td>
    <td class="codeline">///                          chosen in the given order due to unnatural CFG</td>
    <td class="lineNumber">2991</td>
    <td class="codeline">///                          chosen in the given order due to unnatural CFG</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2992</td>
    <td class="codeline">///                          only needed if \p BB is removed and</td>
    <td class="lineNumber">2992</td>
    <td class="codeline">///                          only needed if \p BB is removed and</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2993</td>
    <td class="codeline">///                          \p PrevUnplacedBlockIt pointed to \p BB.</td>
    <td class="lineNumber">2993</td>
    <td class="codeline">///                          \p PrevUnplacedBlockIt pointed to \p BB.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2994</td>
    <td class="codeline">/// @return true if \p BB was removed.</td>
    <td class="lineNumber">2994</td>
    <td class="codeline">/// @return true if \p BB was removed.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2995</td>
    <td class="codeline">bool MachineBlockPlacement::repeatedlyTailDuplicateBlock(</td>
    <td class="lineNumber">2995</td>
    <td class="codeline">bool MachineBlockPlacement::repeatedlyTailDuplicateBlock(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2996</td>
    <td class="codeline">    MachineBasicBlock *BB, MachineBasicBlock *&LPred,</td>
    <td class="lineNumber">2996</td>
    <td class="codeline">    MachineBasicBlock *BB, MachineBasicBlock *&LPred,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2997</td>
    <td class="codeline">    const MachineBasicBlock *LoopHeaderBB,</td>
    <td class="lineNumber">2997</td>
    <td class="codeline">    const MachineBasicBlock *LoopHeaderBB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2998</td>
    <td class="codeline">    BlockChain &Chain, BlockFilterSet *BlockFilter,</td>
    <td class="lineNumber">2998</td>
    <td class="codeline">    BlockChain &Chain, BlockFilterSet *BlockFilter,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2999</td>
    <td class="codeline">    MachineFunction::iterator &PrevUnplacedBlockIt) {</td>
    <td class="lineNumber">2999</td>
    <td class="codeline">    MachineFunction::iterator &PrevUnplacedBlockIt) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3000</td>
    <td class="codeline">  bool Removed, DuplicatedToLPred;</td>
    <td class="lineNumber">3000</td>
    <td class="codeline">  bool Removed, DuplicatedToLPred;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3001</td>
    <td class="codeline">  bool DuplicatedToOriginalLPred;</td>
    <td class="lineNumber">3001</td>
    <td class="codeline">  bool DuplicatedToOriginalLPred;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3002</td>
    <td class="codeline">  Removed = maybeTailDuplicateBlock(BB, LPred, Chain, BlockFilter,</td>
    <td class="lineNumber">3002</td>
    <td class="codeline">  Removed = maybeTailDuplicateBlock(BB, LPred, Chain, BlockFilter,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3003</td>
    <td class="codeline">                                    PrevUnplacedBlockIt,</td>
    <td class="lineNumber">3003</td>
    <td class="codeline">                                    PrevUnplacedBlockIt,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3004</td>
    <td class="codeline">                                    DuplicatedToLPred);</td>
    <td class="lineNumber">3004</td>
    <td class="codeline">                                    DuplicatedToLPred);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3005</td>
    <td class="codeline">  if (!Removed)</td>
    <td class="lineNumber">3005</td>
    <td class="codeline">  if (!Removed)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3006</td>
    <td class="codeline">    return false;</td>
    <td class="lineNumber">3006</td>
    <td class="codeline">    return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3007</td>
    <td class="codeline">  DuplicatedToOriginalLPred = DuplicatedToLPred;</td>
    <td class="lineNumber">3007</td>
    <td class="codeline">  DuplicatedToOriginalLPred = DuplicatedToLPred;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3008</td>
    <td class="codeline">  // Iteratively try to duplicate again. It can happen that a block that is</td>
    <td class="lineNumber">3008</td>
    <td class="codeline">  // Iteratively try to duplicate again. It can happen that a block that is</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3009</td>
    <td class="codeline">  // duplicated into is still small enough to be duplicated again.</td>
    <td class="lineNumber">3009</td>
    <td class="codeline">  // duplicated into is still small enough to be duplicated again.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3010</td>
    <td class="codeline">  // No need to call markBlockSuccessors in this case, as the blocks being</td>
    <td class="lineNumber">3010</td>
    <td class="codeline">  // No need to call markBlockSuccessors in this case, as the blocks being</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3011</td>
    <td class="codeline">  // duplicated from here on are already scheduled.</td>
    <td class="lineNumber">3011</td>
    <td class="codeline">  // duplicated from here on are already scheduled.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3012</td>
    <td class="codeline">  while (DuplicatedToLPred && Removed) {</td>
    <td class="lineNumber">3012</td>
    <td class="codeline">  while (DuplicatedToLPred && Removed) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3013</td>
    <td class="codeline">    MachineBasicBlock *DupBB, *DupPred;</td>
    <td class="lineNumber">3013</td>
    <td class="codeline">    MachineBasicBlock *DupBB, *DupPred;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3014</td>
    <td class="codeline">    // The removal callback causes Chain.end() to be updated when a block is</td>
    <td class="lineNumber">3014</td>
    <td class="codeline">    // The removal callback causes Chain.end() to be updated when a block is</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3015</td>
    <td class="codeline">    // removed. On the first pass through the loop, the chain end should be the</td>
    <td class="lineNumber">3015</td>
    <td class="codeline">    // removed. On the first pass through the loop, the chain end should be the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3016</td>
    <td class="codeline">    // same as it was on function entry. On subsequent passes, because we are</td>
    <td class="lineNumber">3016</td>
    <td class="codeline">    // same as it was on function entry. On subsequent passes, because we are</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3017</td>
    <td class="codeline">    // duplicating the block at the end of the chain, if it is removed the</td>
    <td class="lineNumber">3017</td>
    <td class="codeline">    // duplicating the block at the end of the chain, if it is removed the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3018</td>
    <td class="codeline">    // chain will have shrunk by one block.</td>
    <td class="lineNumber">3018</td>
    <td class="codeline">    // chain will have shrunk by one block.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3019</td>
    <td class="codeline">    BlockChain::iterator ChainEnd = Chain.end();</td>
    <td class="lineNumber">3019</td>
    <td class="codeline">    BlockChain::iterator ChainEnd = Chain.end();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3020</td>
    <td class="codeline">    DupBB = *(--ChainEnd);</td>
    <td class="lineNumber">3020</td>
    <td class="codeline">    DupBB = *(--ChainEnd);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3021</td>
    <td class="codeline">    // Now try to duplicate again.</td>
    <td class="lineNumber">3021</td>
    <td class="codeline">    // Now try to duplicate again.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3022</td>
    <td class="codeline">    if (ChainEnd == Chain.begin())</td>
    <td class="lineNumber">3022</td>
    <td class="codeline">    if (ChainEnd == Chain.begin())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3023</td>
    <td class="codeline">      break;</td>
    <td class="lineNumber">3023</td>
    <td class="codeline">      break;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3024</td>
    <td class="codeline">    DupPred = *std::prev(ChainEnd);</td>
    <td class="lineNumber">3024</td>
    <td class="codeline">    DupPred = *std::prev(ChainEnd);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3025</td>
    <td class="codeline">    Removed = maybeTailDuplicateBlock(DupBB, DupPred, Chain, BlockFilter,</td>
    <td class="lineNumber">3025</td>
    <td class="codeline">    Removed = maybeTailDuplicateBlock(DupBB, DupPred, Chain, BlockFilter,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3026</td>
    <td class="codeline">                                      PrevUnplacedBlockIt,</td>
    <td class="lineNumber">3026</td>
    <td class="codeline">                                      PrevUnplacedBlockIt,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3027</td>
    <td class="codeline">                                      DuplicatedToLPred);</td>
    <td class="lineNumber">3027</td>
    <td class="codeline">                                      DuplicatedToLPred);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3028</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3028</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3029</td>
    <td class="codeline">  // If BB was duplicated into LPred, it is now scheduled. But because it was</td>
    <td class="lineNumber">3029</td>
    <td class="codeline">  // If BB was duplicated into LPred, it is now scheduled. But because it was</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3030</td>
    <td class="codeline">  // removed, markChainSuccessors won't be called for its chain. Instead we</td>
    <td class="lineNumber">3030</td>
    <td class="codeline">  // removed, markChainSuccessors won't be called for its chain. Instead we</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3031</td>
    <td class="codeline">  // call markBlockSuccessors for LPred to achieve the same effect. This must go</td>
    <td class="lineNumber">3031</td>
    <td class="codeline">  // call markBlockSuccessors for LPred to achieve the same effect. This must go</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3032</td>
    <td class="codeline">  // at the end because repeating the tail duplication can increase the number</td>
    <td class="lineNumber">3032</td>
    <td class="codeline">  // at the end because repeating the tail duplication can increase the number</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3033</td>
    <td class="codeline">  // of unscheduled predecessors.</td>
    <td class="lineNumber">3033</td>
    <td class="codeline">  // of unscheduled predecessors.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3034</td>
    <td class="codeline">  LPred = *std::prev(Chain.end());</td>
    <td class="lineNumber">3034</td>
    <td class="codeline">  LPred = *std::prev(Chain.end());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3035</td>
    <td class="codeline">  if (DuplicatedToOriginalLPred)</td>
    <td class="lineNumber">3035</td>
    <td class="codeline">  if (DuplicatedToOriginalLPred)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3036</td>
    <td class="codeline">    markBlockSuccessors(Chain, LPred, LoopHeaderBB, BlockFilter);</td>
    <td class="lineNumber">3036</td>
    <td class="codeline">    markBlockSuccessors(Chain, LPred, LoopHeaderBB, BlockFilter);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3037</td>
    <td class="codeline">  return true;</td>
    <td class="lineNumber">3037</td>
    <td class="codeline">  return true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3038</td>
    <td class="codeline">}</td>
    <td class="lineNumber">3038</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3039</td>
    <td class="codeline"></td>
    <td class="lineNumber">3039</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3040</td>
    <td class="codeline">/// Tail duplicate \p BB into (some) predecessors if profitable.</td>
    <td class="lineNumber">3040</td>
    <td class="codeline">/// Tail duplicate \p BB into (some) predecessors if profitable.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3041</td>
    <td class="codeline">/// \p BB    - Basic block that may be duplicated</td>
    <td class="lineNumber">3041</td>
    <td class="codeline">/// \p BB    - Basic block that may be duplicated</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3042</td>
    <td class="codeline">/// \p LPred - Chosen layout predecessor of \p BB</td>
    <td class="lineNumber">3042</td>
    <td class="codeline">/// \p LPred - Chosen layout predecessor of \p BB</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3043</td>
    <td class="codeline">/// \p Chain - Chain to which \p LPred belongs, and \p BB will belong.</td>
    <td class="lineNumber">3043</td>
    <td class="codeline">/// \p Chain - Chain to which \p LPred belongs, and \p BB will belong.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3044</td>
    <td class="codeline">/// \p BlockFilter - Set of blocks that belong to the loop being laid out.</td>
    <td class="lineNumber">3044</td>
    <td class="codeline">/// \p BlockFilter - Set of blocks that belong to the loop being laid out.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3045</td>
    <td class="codeline">///                  Used to identify which blocks to update predecessor</td>
    <td class="lineNumber">3045</td>
    <td class="codeline">///                  Used to identify which blocks to update predecessor</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3046</td>
    <td class="codeline">///                  counts.</td>
    <td class="lineNumber">3046</td>
    <td class="codeline">///                  counts.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3047</td>
    <td class="codeline">/// \p PrevUnplacedBlockIt - Iterator pointing to the last block that was</td>
    <td class="lineNumber">3047</td>
    <td class="codeline">/// \p PrevUnplacedBlockIt - Iterator pointing to the last block that was</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3048</td>
    <td class="codeline">///                          chosen in the given order due to unnatural CFG</td>
    <td class="lineNumber">3048</td>
    <td class="codeline">///                          chosen in the given order due to unnatural CFG</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3049</td>
    <td class="codeline">///                          only needed if \p BB is removed and</td>
    <td class="lineNumber">3049</td>
    <td class="codeline">///                          only needed if \p BB is removed and</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3050</td>
    <td class="codeline">///                          \p PrevUnplacedBlockIt pointed to \p BB.</td>
    <td class="lineNumber">3050</td>
    <td class="codeline">///                          \p PrevUnplacedBlockIt pointed to \p BB.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3051</td>
    <td class="codeline">/// \p DuplicatedToLPred - True if the block was duplicated into LPred.</td>
    <td class="lineNumber">3051</td>
    <td class="codeline">/// \p DuplicatedToLPred - True if the block was duplicated into LPred.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3052</td>
    <td class="codeline">/// \return  - True if the block was duplicated into all preds and removed.</td>
    <td class="lineNumber">3052</td>
    <td class="codeline">/// \return  - True if the block was duplicated into all preds and removed.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3053</td>
    <td class="codeline">bool MachineBlockPlacement::maybeTailDuplicateBlock(</td>
    <td class="lineNumber">3053</td>
    <td class="codeline">bool MachineBlockPlacement::maybeTailDuplicateBlock(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3054</td>
    <td class="codeline">    MachineBasicBlock *BB, MachineBasicBlock *LPred,</td>
    <td class="lineNumber">3054</td>
    <td class="codeline">    MachineBasicBlock *BB, MachineBasicBlock *LPred,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3055</td>
    <td class="codeline">    BlockChain &Chain, BlockFilterSet *BlockFilter,</td>
    <td class="lineNumber">3055</td>
    <td class="codeline">    BlockChain &Chain, BlockFilterSet *BlockFilter,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3056</td>
    <td class="codeline">    MachineFunction::iterator &PrevUnplacedBlockIt,</td>
    <td class="lineNumber">3056</td>
    <td class="codeline">    MachineFunction::iterator &PrevUnplacedBlockIt,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3057</td>
    <td class="codeline">    bool &DuplicatedToLPred) {</td>
    <td class="lineNumber">3057</td>
    <td class="codeline">    bool &DuplicatedToLPred) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3058</td>
    <td class="codeline">  DuplicatedToLPred = false;</td>
    <td class="lineNumber">3058</td>
    <td class="codeline">  DuplicatedToLPred = false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3059</td>
    <td class="codeline">  if (!shouldTailDuplicate(BB))</td>
    <td class="lineNumber">3059</td>
    <td class="codeline">  if (!shouldTailDuplicate(BB))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3060</td>
    <td class="codeline">    return false;</td>
    <td class="lineNumber">3060</td>
    <td class="codeline">    return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3061</td>
    <td class="codeline"></td>
    <td class="lineNumber">3061</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3062</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "Redoing tail duplication for Succ#" << BB->getNumber()</td>
    <td class="lineNumber">3062</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "Redoing tail duplication for Succ#" << BB->getNumber()</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3063</td>
    <td class="codeline">                    << "\n");</td>
    <td class="lineNumber">3063</td>
    <td class="codeline">                    << "\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3064</td>
    <td class="codeline"></td>
    <td class="lineNumber">3064</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3065</td>
    <td class="codeline">  // This has to be a callback because none of it can be done after</td>
    <td class="lineNumber">3065</td>
    <td class="codeline">  // This has to be a callback because none of it can be done after</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3066</td>
    <td class="codeline">  // BB is deleted.</td>
    <td class="lineNumber">3066</td>
    <td class="codeline">  // BB is deleted.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3067</td>
    <td class="codeline">  bool Removed = false;</td>
    <td class="lineNumber">3067</td>
    <td class="codeline">  bool Removed = false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3068</td>
    <td class="codeline">  auto RemovalCallback =</td>
    <td class="lineNumber">3068</td>
    <td class="codeline">  auto RemovalCallback =</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3069</td>
    <td class="codeline">      [&](MachineBasicBlock *RemBB) {</td>
    <td class="lineNumber">3069</td>
    <td class="codeline">      [&](MachineBasicBlock *RemBB) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3070</td>
    <td class="codeline">        // Signal to outer function</td>
    <td class="lineNumber">3070</td>
    <td class="codeline">        // Signal to outer function</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3071</td>
    <td class="codeline">        Removed = true;</td>
    <td class="lineNumber">3071</td>
    <td class="codeline">        Removed = true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3072</td>
    <td class="codeline"></td>
    <td class="lineNumber">3072</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3073</td>
    <td class="codeline">        // Conservative default.</td>
    <td class="lineNumber">3073</td>
    <td class="codeline">        // Conservative default.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3074</td>
    <td class="codeline">        bool InWorkList = true;</td>
    <td class="lineNumber">3074</td>
    <td class="codeline">        bool InWorkList = true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3075</td>
    <td class="codeline">        // Remove from the Chain and Chain Map</td>
    <td class="lineNumber">3075</td>
    <td class="codeline">        // Remove from the Chain and Chain Map</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3076</td>
    <td class="codeline">        if (BlockToChain.count(RemBB)) {</td>
    <td class="lineNumber">3076</td>
    <td class="codeline">        if (BlockToChain.count(RemBB)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3077</td>
    <td class="codeline">          BlockChain *Chain = BlockToChain[RemBB];</td>
    <td class="lineNumber">3077</td>
    <td class="codeline">          BlockChain *Chain = BlockToChain[RemBB];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3078</td>
    <td class="codeline">          InWorkList = Chain->UnscheduledPredecessors == 0;</td>
    <td class="lineNumber">3078</td>
    <td class="codeline">          InWorkList = Chain->UnscheduledPredecessors == 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3079</td>
    <td class="codeline">          Chain->remove(RemBB);</td>
    <td class="lineNumber">3079</td>
    <td class="codeline">          Chain->remove(RemBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3080</td>
    <td class="codeline">          BlockToChain.erase(RemBB);</td>
    <td class="lineNumber">3080</td>
    <td class="codeline">          BlockToChain.erase(RemBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3081</td>
    <td class="codeline">        }</td>
    <td class="lineNumber">3081</td>
    <td class="codeline">        }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3082</td>
    <td class="codeline"></td>
    <td class="lineNumber">3082</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3083</td>
    <td class="codeline">        // Handle the unplaced block iterator</td>
    <td class="lineNumber">3083</td>
    <td class="codeline">        // Handle the unplaced block iterator</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3084</td>
    <td class="codeline">        if (&(*PrevUnplacedBlockIt) == RemBB) {</td>
    <td class="lineNumber">3084</td>
    <td class="codeline">        if (&(*PrevUnplacedBlockIt) == RemBB) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3085</td>
    <td class="codeline">          PrevUnplacedBlockIt++;</td>
    <td class="lineNumber">3085</td>
    <td class="codeline">          PrevUnplacedBlockIt++;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3086</td>
    <td class="codeline">        }</td>
    <td class="lineNumber">3086</td>
    <td class="codeline">        }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3087</td>
    <td class="codeline"></td>
    <td class="lineNumber">3087</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3088</td>
    <td class="codeline">        // Handle the Work Lists</td>
    <td class="lineNumber">3088</td>
    <td class="codeline">        // Handle the Work Lists</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3089</td>
    <td class="codeline">        if (InWorkList) {</td>
    <td class="lineNumber">3089</td>
    <td class="codeline">        if (InWorkList) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3090</td>
    <td class="codeline">          SmallVectorImpl<MachineBasicBlock *> &RemoveList = BlockWorkList;</td>
    <td class="lineNumber">3090</td>
    <td class="codeline">          SmallVectorImpl<MachineBasicBlock *> &RemoveList = BlockWorkList;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3091</td>
    <td class="codeline">          if (RemBB->isEHPad())</td>
    <td class="lineNumber">3091</td>
    <td class="codeline">          if (RemBB->isEHPad())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3092</td>
    <td class="codeline">            RemoveList = EHPadWorkList;</td>
    <td class="lineNumber">3092</td>
    <td class="codeline">            RemoveList = EHPadWorkList;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3093</td>
    <td class="codeline">          llvm::erase_value(RemoveList, RemBB);</td>
    <td class="lineNumber">3093</td>
    <td class="codeline">          llvm::erase_value(RemoveList, RemBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3094</td>
    <td class="codeline">        }</td>
    <td class="lineNumber">3094</td>
    <td class="codeline">        }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3095</td>
    <td class="codeline"></td>
    <td class="lineNumber">3095</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3096</td>
    <td class="codeline">        // Handle the filter set</td>
    <td class="lineNumber">3096</td>
    <td class="codeline">        // Handle the filter set</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3097</td>
    <td class="codeline">        if (BlockFilter) {</td>
    <td class="lineNumber">3097</td>
    <td class="codeline">        if (BlockFilter) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3098</td>
    <td class="codeline">          BlockFilter->remove(RemBB);</td>
    <td class="lineNumber">3098</td>
    <td class="codeline">          BlockFilter->remove(RemBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3099</td>
    <td class="codeline">        }</td>
    <td class="lineNumber">3099</td>
    <td class="codeline">        }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3100</td>
    <td class="codeline"></td>
    <td class="lineNumber">3100</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3101</td>
    <td class="codeline">        // Remove the block from loop info.</td>
    <td class="lineNumber">3101</td>
    <td class="codeline">        // Remove the block from loop info.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3102</td>
    <td class="codeline">        MLI->removeBlock(RemBB);</td>
    <td class="lineNumber">3102</td>
    <td class="codeline">        MLI->removeBlock(RemBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3103</td>
    <td class="codeline">        if (RemBB == PreferredLoopExit)</td>
    <td class="lineNumber">3103</td>
    <td class="codeline">        if (RemBB == PreferredLoopExit)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3104</td>
    <td class="codeline">          PreferredLoopExit = nullptr;</td>
    <td class="lineNumber">3104</td>
    <td class="codeline">          PreferredLoopExit = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3105</td>
    <td class="codeline"></td>
    <td class="lineNumber">3105</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3106</td>
    <td class="codeline">        LLVM_DEBUG(dbgs() << "TailDuplicator deleted block: "</td>
    <td class="lineNumber">3106</td>
    <td class="codeline">        LLVM_DEBUG(dbgs() << "TailDuplicator deleted block: "</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3107</td>
    <td class="codeline">                          << getBlockName(RemBB) << "\n");</td>
    <td class="lineNumber">3107</td>
    <td class="codeline">                          << getBlockName(RemBB) << "\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3108</td>
    <td class="codeline">      };</td>
    <td class="lineNumber">3108</td>
    <td class="codeline">      };</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3109</td>
    <td class="codeline">  auto RemovalCallbackRef =</td>
    <td class="lineNumber">3109</td>
    <td class="codeline">  auto RemovalCallbackRef =</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3110</td>
    <td class="codeline">      function_ref<void(MachineBasicBlock*)>(RemovalCallback);</td>
    <td class="lineNumber">3110</td>
    <td class="codeline">      function_ref<void(MachineBasicBlock*)>(RemovalCallback);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3111</td>
    <td class="codeline"></td>
    <td class="lineNumber">3111</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3112</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 8> DuplicatedPreds;</td>
    <td class="lineNumber">3112</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 8> DuplicatedPreds;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3113</td>
    <td class="codeline">  bool IsSimple = TailDup.isSimpleBB(BB);</td>
    <td class="lineNumber">3113</td>
    <td class="codeline">  bool IsSimple = TailDup.isSimpleBB(BB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3114</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 8> CandidatePreds;</td>
    <td class="lineNumber">3114</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 8> CandidatePreds;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3115</td>
    <td class="codeline">  SmallVectorImpl<MachineBasicBlock *> *CandidatePtr = nullptr;</td>
    <td class="lineNumber">3115</td>
    <td class="codeline">  SmallVectorImpl<MachineBasicBlock *> *CandidatePtr = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3116</td>
    <td class="codeline">  if (F->getFunction().hasProfileData()) {</td>
    <td class="lineNumber">3116</td>
    <td class="codeline">  if (F->getFunction().hasProfileData()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3117</td>
    <td class="codeline">    // We can do partial duplication with precise profile information.</td>
    <td class="lineNumber">3117</td>
    <td class="codeline">    // We can do partial duplication with precise profile information.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3118</td>
    <td class="codeline">    findDuplicateCandidates(CandidatePreds, BB, BlockFilter);</td>
    <td class="lineNumber">3118</td>
    <td class="codeline">    findDuplicateCandidates(CandidatePreds, BB, BlockFilter);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3119</td>
    <td class="codeline">    if (CandidatePreds.size() == 0)</td>
    <td class="lineNumber">3119</td>
    <td class="codeline">    if (CandidatePreds.size() == 0)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3120</td>
    <td class="codeline">      return false;</td>
    <td class="lineNumber">3120</td>
    <td class="codeline">      return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3121</td>
    <td class="codeline">    if (CandidatePreds.size() < BB->pred_size())</td>
    <td class="lineNumber">3121</td>
    <td class="codeline">    if (CandidatePreds.size() < BB->pred_size())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3122</td>
    <td class="codeline">      CandidatePtr = &CandidatePreds;</td>
    <td class="lineNumber">3122</td>
    <td class="codeline">      CandidatePtr = &CandidatePreds;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3123</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3123</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3124</td>
    <td class="codeline">  TailDup.tailDuplicateAndUpdate(IsSimple, BB, LPred, &DuplicatedPreds,</td>
    <td class="lineNumber">3124</td>
    <td class="codeline">  TailDup.tailDuplicateAndUpdate(IsSimple, BB, LPred, &DuplicatedPreds,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3125</td>
    <td class="codeline">                                 &RemovalCallbackRef, CandidatePtr);</td>
    <td class="lineNumber">3125</td>
    <td class="codeline">                                 &RemovalCallbackRef, CandidatePtr);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3126</td>
    <td class="codeline"></td>
    <td class="lineNumber">3126</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3127</td>
    <td class="codeline">  // Update UnscheduledPredecessors to reflect tail-duplication.</td>
    <td class="lineNumber">3127</td>
    <td class="codeline">  // Update UnscheduledPredecessors to reflect tail-duplication.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3128</td>
    <td class="codeline">  DuplicatedToLPred = false;</td>
    <td class="lineNumber">3128</td>
    <td class="codeline">  DuplicatedToLPred = false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3129</td>
    <td class="codeline">  for (MachineBasicBlock *Pred : DuplicatedPreds) {</td>
    <td class="lineNumber">3129</td>
    <td class="codeline">  for (MachineBasicBlock *Pred : DuplicatedPreds) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3130</td>
    <td class="codeline">    // We're only looking for unscheduled predecessors that match the filter.</td>
    <td class="lineNumber">3130</td>
    <td class="codeline">    // We're only looking for unscheduled predecessors that match the filter.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3131</td>
    <td class="codeline">    BlockChain* PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">3131</td>
    <td class="codeline">    BlockChain* PredChain = BlockToChain[Pred];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3132</td>
    <td class="codeline">    if (Pred == LPred)</td>
    <td class="lineNumber">3132</td>
    <td class="codeline">    if (Pred == LPred)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3133</td>
    <td class="codeline">      DuplicatedToLPred = true;</td>
    <td class="lineNumber">3133</td>
    <td class="codeline">      DuplicatedToLPred = true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3134</td>
    <td class="codeline">    if (Pred == LPred || (BlockFilter && !BlockFilter->count(Pred))</td>
    <td class="lineNumber">3134</td>
    <td class="codeline">    if (Pred == LPred || (BlockFilter && !BlockFilter->count(Pred))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3135</td>
    <td class="codeline">        || PredChain == &Chain)</td>
    <td class="lineNumber">3135</td>
    <td class="codeline">        || PredChain == &Chain)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3136</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">3136</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3137</td>
    <td class="codeline">    for (MachineBasicBlock *NewSucc : Pred->successors()) {</td>
    <td class="lineNumber">3137</td>
    <td class="codeline">    for (MachineBasicBlock *NewSucc : Pred->successors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3138</td>
    <td class="codeline">      if (BlockFilter && !BlockFilter->count(NewSucc))</td>
    <td class="lineNumber">3138</td>
    <td class="codeline">      if (BlockFilter && !BlockFilter->count(NewSucc))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3139</td>
    <td class="codeline">        continue;</td>
    <td class="lineNumber">3139</td>
    <td class="codeline">        continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3140</td>
    <td class="codeline">      BlockChain *NewChain = BlockToChain[NewSucc];</td>
    <td class="lineNumber">3140</td>
    <td class="codeline">      BlockChain *NewChain = BlockToChain[NewSucc];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3141</td>
    <td class="codeline">      if (NewChain != &Chain && NewChain != PredChain)</td>
    <td class="lineNumber">3141</td>
    <td class="codeline">      if (NewChain != &Chain && NewChain != PredChain)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3142</td>
    <td class="codeline">        NewChain->UnscheduledPredecessors++;</td>
    <td class="lineNumber">3142</td>
    <td class="codeline">        NewChain->UnscheduledPredecessors++;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3143</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">3143</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3144</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3144</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3145</td>
    <td class="codeline">  return Removed;</td>
    <td class="lineNumber">3145</td>
    <td class="codeline">  return Removed;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3146</td>
    <td class="codeline">}</td>
    <td class="lineNumber">3146</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3147</td>
    <td class="codeline"></td>
    <td class="lineNumber">3147</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3148</td>
    <td class="codeline">// Count the number of actual machine instructions.</td>
    <td class="lineNumber">3148</td>
    <td class="codeline">// Count the number of actual machine instructions.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3149</td>
    <td class="codeline">static uint64_t countMBBInstruction(MachineBasicBlock *MBB) {</td>
    <td class="lineNumber">3149</td>
    <td class="codeline">static uint64_t countMBBInstruction(MachineBasicBlock *MBB) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3150</td>
    <td class="codeline">  uint64_t InstrCount = 0;</td>
    <td class="lineNumber">3150</td>
    <td class="codeline">  uint64_t InstrCount = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3151</td>
    <td class="codeline">  for (MachineInstr &MI : *MBB) {</td>
    <td class="lineNumber">3151</td>
    <td class="codeline">  for (MachineInstr &MI : *MBB) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3152</td>
    <td class="codeline">    if (!MI.isPHI() && !MI.isMetaInstruction())</td>
    <td class="lineNumber">3152</td>
    <td class="codeline">    if (!MI.isPHI() && !MI.isMetaInstruction())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3153</td>
    <td class="codeline">      InstrCount += 1;</td>
    <td class="lineNumber">3153</td>
    <td class="codeline">      InstrCount += 1;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3154</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3154</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3155</td>
    <td class="codeline">  return InstrCount;</td>
    <td class="lineNumber">3155</td>
    <td class="codeline">  return InstrCount;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3156</td>
    <td class="codeline">}</td>
    <td class="lineNumber">3156</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3157</td>
    <td class="codeline"></td>
    <td class="lineNumber">3157</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3158</td>
    <td class="codeline">// The size cost of duplication is the instruction size of the duplicated block.</td>
    <td class="lineNumber">3158</td>
    <td class="codeline">// The size cost of duplication is the instruction size of the duplicated block.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3159</td>
    <td class="codeline">// So we should scale the threshold accordingly. But the instruction size is not</td>
    <td class="lineNumber">3159</td>
    <td class="codeline">// So we should scale the threshold accordingly. But the instruction size is not</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3160</td>
    <td class="codeline">// available on all targets, so we use the number of instructions instead.</td>
    <td class="lineNumber">3160</td>
    <td class="codeline">// available on all targets, so we use the number of instructions instead.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3161</td>
    <td class="codeline">BlockFrequency MachineBlockPlacement::scaleThreshold(MachineBasicBlock *BB) {</td>
    <td class="lineNumber">3161</td>
    <td class="codeline">BlockFrequency MachineBlockPlacement::scaleThreshold(MachineBasicBlock *BB) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3162</td>
    <td class="codeline">  return DupThreshold.getFrequency() * countMBBInstruction(BB);</td>
    <td class="lineNumber">3162</td>
    <td class="codeline">  return DupThreshold.getFrequency() * countMBBInstruction(BB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3163</td>
    <td class="codeline">}</td>
    <td class="lineNumber">3163</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3164</td>
    <td class="codeline"></td>
    <td class="lineNumber">3164</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3165</td>
    <td class="codeline">// Returns true if BB is Pred's best successor.</td>
    <td class="lineNumber">3165</td>
    <td class="codeline">// Returns true if BB is Pred's best successor.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3166</td>
    <td class="codeline">bool MachineBlockPlacement::isBestSuccessor(MachineBasicBlock *BB,</td>
    <td class="lineNumber">3166</td>
    <td class="codeline">bool MachineBlockPlacement::isBestSuccessor(MachineBasicBlock *BB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3167</td>
    <td class="codeline">                                            MachineBasicBlock *Pred,</td>
    <td class="lineNumber">3167</td>
    <td class="codeline">                                            MachineBasicBlock *Pred,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3168</td>
    <td class="codeline">                                            BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">3168</td>
    <td class="codeline">                                            BlockFilterSet *BlockFilter) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3169</td>
    <td class="codeline">  if (BB == Pred)</td>
    <td class="lineNumber">3169</td>
    <td class="codeline">  if (BB == Pred)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3170</td>
    <td class="codeline">    return false;</td>
    <td class="lineNumber">3170</td>
    <td class="codeline">    return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3171</td>
    <td class="codeline">  if (BlockFilter && !BlockFilter->count(Pred))</td>
    <td class="lineNumber">3171</td>
    <td class="codeline">  if (BlockFilter && !BlockFilter->count(Pred))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3172</td>
    <td class="codeline">    return false;</td>
    <td class="lineNumber">3172</td>
    <td class="codeline">    return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3173</td>
    <td class="codeline">  BlockChain *PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">3173</td>
    <td class="codeline">  BlockChain *PredChain = BlockToChain[Pred];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3174</td>
    <td class="codeline">  if (PredChain && (Pred != *std::prev(PredChain->end())))</td>
    <td class="lineNumber">3174</td>
    <td class="codeline">  if (PredChain && (Pred != *std::prev(PredChain->end())))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3175</td>
    <td class="codeline">    return false;</td>
    <td class="lineNumber">3175</td>
    <td class="codeline">    return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3176</td>
    <td class="codeline"></td>
    <td class="lineNumber">3176</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3177</td>
    <td class="codeline">  // Find the successor with largest probability excluding BB.</td>
    <td class="lineNumber">3177</td>
    <td class="codeline">  // Find the successor with largest probability excluding BB.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3178</td>
    <td class="codeline">  BranchProbability BestProb = BranchProbability::getZero();</td>
    <td class="lineNumber">3178</td>
    <td class="codeline">  BranchProbability BestProb = BranchProbability::getZero();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3179</td>
    <td class="codeline">  for (MachineBasicBlock *Succ : Pred->successors())</td>
    <td class="lineNumber">3179</td>
    <td class="codeline">  for (MachineBasicBlock *Succ : Pred->successors())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3180</td>
    <td class="codeline">    if (Succ != BB) {</td>
    <td class="lineNumber">3180</td>
    <td class="codeline">    if (Succ != BB) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3181</td>
    <td class="codeline">      if (BlockFilter && !BlockFilter->count(Succ))</td>
    <td class="lineNumber">3181</td>
    <td class="codeline">      if (BlockFilter && !BlockFilter->count(Succ))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3182</td>
    <td class="codeline">        continue;</td>
    <td class="lineNumber">3182</td>
    <td class="codeline">        continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3183</td>
    <td class="codeline">      BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">3183</td>
    <td class="codeline">      BlockChain *SuccChain = BlockToChain[Succ];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3184</td>
    <td class="codeline">      if (SuccChain && (Succ != *SuccChain->begin()))</td>
    <td class="lineNumber">3184</td>
    <td class="codeline">      if (SuccChain && (Succ != *SuccChain->begin()))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3185</td>
    <td class="codeline">        continue;</td>
    <td class="lineNumber">3185</td>
    <td class="codeline">        continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3186</td>
    <td class="codeline">      BranchProbability SuccProb = MBPI->getEdgeProbability(Pred, Succ);</td>
    <td class="lineNumber">3186</td>
    <td class="codeline">      BranchProbability SuccProb = MBPI->getEdgeProbability(Pred, Succ);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3187</td>
    <td class="codeline">      if (SuccProb > BestProb)</td>
    <td class="lineNumber">3187</td>
    <td class="codeline">      if (SuccProb > BestProb)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3188</td>
    <td class="codeline">        BestProb = SuccProb;</td>
    <td class="lineNumber">3188</td>
    <td class="codeline">        BestProb = SuccProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3189</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">3189</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3190</td>
    <td class="codeline"></td>
    <td class="lineNumber">3190</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3191</td>
    <td class="codeline">  BranchProbability BBProb = MBPI->getEdgeProbability(Pred, BB);</td>
    <td class="lineNumber">3191</td>
    <td class="codeline">  BranchProbability BBProb = MBPI->getEdgeProbability(Pred, BB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3192</td>
    <td class="codeline">  if (BBProb <= BestProb)</td>
    <td class="lineNumber">3192</td>
    <td class="codeline">  if (BBProb <= BestProb)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3193</td>
    <td class="codeline">    return false;</td>
    <td class="lineNumber">3193</td>
    <td class="codeline">    return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3194</td>
    <td class="codeline"></td>
    <td class="lineNumber">3194</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3195</td>
    <td class="codeline">  // Compute the number of reduced taken branches if Pred falls through to BB</td>
    <td class="lineNumber">3195</td>
    <td class="codeline">  // Compute the number of reduced taken branches if Pred falls through to BB</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3196</td>
    <td class="codeline">  // instead of another successor. Then compare it with threshold.</td>
    <td class="lineNumber">3196</td>
    <td class="codeline">  // instead of another successor. Then compare it with threshold.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3197</td>
    <td class="codeline">  BlockFrequency PredFreq = getBlockCountOrFrequency(Pred);</td>
    <td class="lineNumber">3197</td>
    <td class="codeline">  BlockFrequency PredFreq = getBlockCountOrFrequency(Pred);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3198</td>
    <td class="codeline">  BlockFrequency Gain = PredFreq * (BBProb - BestProb);</td>
    <td class="lineNumber">3198</td>
    <td class="codeline">  BlockFrequency Gain = PredFreq * (BBProb - BestProb);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3199</td>
    <td class="codeline">  return Gain > scaleThreshold(BB);</td>
    <td class="lineNumber">3199</td>
    <td class="codeline">  return Gain > scaleThreshold(BB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3200</td>
    <td class="codeline">}</td>
    <td class="lineNumber">3200</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3201</td>
    <td class="codeline"></td>
    <td class="lineNumber">3201</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3202</td>
    <td class="codeline">// Find out the predecessors of BB and BB can be beneficially duplicated into</td>
    <td class="lineNumber">3202</td>
    <td class="codeline">// Find out the predecessors of BB and BB can be beneficially duplicated into</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3203</td>
    <td class="codeline">// them.</td>
    <td class="lineNumber">3203</td>
    <td class="codeline">// them.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3204</td>
    <td class="codeline">void MachineBlockPlacement::findDuplicateCandidates(</td>
    <td class="lineNumber">3204</td>
    <td class="codeline">void MachineBlockPlacement::findDuplicateCandidates(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3205</td>
    <td class="codeline">    SmallVectorImpl<MachineBasicBlock *> &Candidates,</td>
    <td class="lineNumber">3205</td>
    <td class="codeline">    SmallVectorImpl<MachineBasicBlock *> &Candidates,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3206</td>
    <td class="codeline">    MachineBasicBlock *BB,</td>
    <td class="lineNumber">3206</td>
    <td class="codeline">    MachineBasicBlock *BB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3207</td>
    <td class="codeline">    BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">3207</td>
    <td class="codeline">    BlockFilterSet *BlockFilter) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3208</td>
    <td class="codeline">  MachineBasicBlock *Fallthrough = nullptr;</td>
    <td class="lineNumber">3208</td>
    <td class="codeline">  MachineBasicBlock *Fallthrough = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3209</td>
    <td class="codeline">  BranchProbability DefaultBranchProb = BranchProbability::getZero();</td>
    <td class="lineNumber">3209</td>
    <td class="codeline">  BranchProbability DefaultBranchProb = BranchProbability::getZero();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3210</td>
    <td class="codeline">  BlockFrequency BBDupThreshold(scaleThreshold(BB));</td>
    <td class="lineNumber">3210</td>
    <td class="codeline">  BlockFrequency BBDupThreshold(scaleThreshold(BB));</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3211</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 8> Preds(BB->predecessors());</td>
    <td class="lineNumber">3211</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 8> Preds(BB->predecessors());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3212</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 8> Succs(BB->successors());</td>
    <td class="lineNumber">3212</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 8> Succs(BB->successors());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3213</td>
    <td class="codeline"></td>
    <td class="lineNumber">3213</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3214</td>
    <td class="codeline">  // Sort for highest frequency.</td>
    <td class="lineNumber">3214</td>
    <td class="codeline">  // Sort for highest frequency.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3215</td>
    <td class="codeline">  auto CmpSucc = [&](MachineBasicBlock *A, MachineBasicBlock *B) {</td>
    <td class="lineNumber">3215</td>
    <td class="codeline">  auto CmpSucc = [&](MachineBasicBlock *A, MachineBasicBlock *B) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3216</td>
    <td class="codeline">    return MBPI->getEdgeProbability(BB, A) > MBPI->getEdgeProbability(BB, B);</td>
    <td class="lineNumber">3216</td>
    <td class="codeline">    return MBPI->getEdgeProbability(BB, A) > MBPI->getEdgeProbability(BB, B);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3217</td>
    <td class="codeline">  };</td>
    <td class="lineNumber">3217</td>
    <td class="codeline">  };</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3218</td>
    <td class="codeline">  auto CmpPred = [&](MachineBasicBlock *A, MachineBasicBlock *B) {</td>
    <td class="lineNumber">3218</td>
    <td class="codeline">  auto CmpPred = [&](MachineBasicBlock *A, MachineBasicBlock *B) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3219</td>
    <td class="codeline">    return MBFI->getBlockFreq(A) > MBFI->getBlockFreq(B);</td>
    <td class="lineNumber">3219</td>
    <td class="codeline">    return MBFI->getBlockFreq(A) > MBFI->getBlockFreq(B);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3220</td>
    <td class="codeline">  };</td>
    <td class="lineNumber">3220</td>
    <td class="codeline">  };</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3221</td>
    <td class="codeline">  llvm::stable_sort(Succs, CmpSucc);</td>
    <td class="lineNumber">3221</td>
    <td class="codeline">  llvm::stable_sort(Succs, CmpSucc);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3222</td>
    <td class="codeline">  llvm::stable_sort(Preds, CmpPred);</td>
    <td class="lineNumber">3222</td>
    <td class="codeline">  llvm::stable_sort(Preds, CmpPred);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3223</td>
    <td class="codeline"></td>
    <td class="lineNumber">3223</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3224</td>
    <td class="codeline">  auto SuccIt = Succs.begin();</td>
    <td class="lineNumber">3224</td>
    <td class="codeline">  auto SuccIt = Succs.begin();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3225</td>
    <td class="codeline">  if (SuccIt != Succs.end()) {</td>
    <td class="lineNumber">3225</td>
    <td class="codeline">  if (SuccIt != Succs.end()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3226</td>
    <td class="codeline">    DefaultBranchProb = MBPI->getEdgeProbability(BB, *SuccIt).getCompl();</td>
    <td class="lineNumber">3226</td>
    <td class="codeline">    DefaultBranchProb = MBPI->getEdgeProbability(BB, *SuccIt).getCompl();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3227</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3227</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3228</td>
    <td class="codeline"></td>
    <td class="lineNumber">3228</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3229</td>
    <td class="codeline">  // For each predecessors of BB, compute the benefit of duplicating BB,</td>
    <td class="lineNumber">3229</td>
    <td class="codeline">  // For each predecessors of BB, compute the benefit of duplicating BB,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3230</td>
    <td class="codeline">  // if it is larger than the threshold, add it into Candidates.</td>
    <td class="lineNumber">3230</td>
    <td class="codeline">  // if it is larger than the threshold, add it into Candidates.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3231</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">3231</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3232</td>
    <td class="codeline">  // If we have following control flow.</td>
    <td class="lineNumber">3232</td>
    <td class="codeline">  // If we have following control flow.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3233</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">3233</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3234</td>
    <td class="codeline">  //     PB1 PB2 PB3 PB4</td>
    <td class="lineNumber">3234</td>
    <td class="codeline">  //     PB1 PB2 PB3 PB4</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3235</td>
    <td class="codeline">  //      \   |  /    /\</td>
    <td class="lineNumber">3235</td>
    <td class="codeline">  //      \   |  /    /\</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3236</td>
    <td class="codeline">  //       \  | /    /  \</td>
    <td class="lineNumber">3236</td>
    <td class="codeline">  //       \  | /    /  \</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3237</td>
    <td class="codeline">  //        \ |/    /    \</td>
    <td class="lineNumber">3237</td>
    <td class="codeline">  //        \ |/    /    \</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3238</td>
    <td class="codeline">  //         BB----/     OB</td>
    <td class="lineNumber">3238</td>
    <td class="codeline">  //         BB----/     OB</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3239</td>
    <td class="codeline">  //         /\</td>
    <td class="lineNumber">3239</td>
    <td class="codeline">  //         /\</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3240</td>
    <td class="codeline">  //        /  \</td>
    <td class="lineNumber">3240</td>
    <td class="codeline">  //        /  \</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3241</td>
    <td class="codeline">  //      SB1 SB2</td>
    <td class="lineNumber">3241</td>
    <td class="codeline">  //      SB1 SB2</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3242</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">3242</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3243</td>
    <td class="codeline">  // And it can be partially duplicated as</td>
    <td class="lineNumber">3243</td>
    <td class="codeline">  // And it can be partially duplicated as</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3244</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">3244</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3245</td>
    <td class="codeline">  //   PB2+BB</td>
    <td class="lineNumber">3245</td>
    <td class="codeline">  //   PB2+BB</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3246</td>
    <td class="codeline">  //      |  PB1 PB3 PB4</td>
    <td class="lineNumber">3246</td>
    <td class="codeline">  //      |  PB1 PB3 PB4</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3247</td>
    <td class="codeline">  //      |   |  /    /\</td>
    <td class="lineNumber">3247</td>
    <td class="codeline">  //      |   |  /    /\</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3248</td>
    <td class="codeline">  //      |   | /    /  \</td>
    <td class="lineNumber">3248</td>
    <td class="codeline">  //      |   | /    /  \</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3249</td>
    <td class="codeline">  //      |   |/    /    \</td>
    <td class="lineNumber">3249</td>
    <td class="codeline">  //      |   |/    /    \</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3250</td>
    <td class="codeline">  //      |  BB----/     OB</td>
    <td class="lineNumber">3250</td>
    <td class="codeline">  //      |  BB----/     OB</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3251</td>
    <td class="codeline">  //      |\ /|</td>
    <td class="lineNumber">3251</td>
    <td class="codeline">  //      |\ /|</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3252</td>
    <td class="codeline">  //      | X |</td>
    <td class="lineNumber">3252</td>
    <td class="codeline">  //      | X |</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3253</td>
    <td class="codeline">  //      |/ \|</td>
    <td class="lineNumber">3253</td>
    <td class="codeline">  //      |/ \|</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3254</td>
    <td class="codeline">  //     SB2 SB1</td>
    <td class="lineNumber">3254</td>
    <td class="codeline">  //     SB2 SB1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3255</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">3255</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3256</td>
    <td class="codeline">  // The benefit of duplicating into a predecessor is defined as</td>
    <td class="lineNumber">3256</td>
    <td class="codeline">  // The benefit of duplicating into a predecessor is defined as</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3257</td>
    <td class="codeline">  //         Orig_taken_branch - Duplicated_taken_branch</td>
    <td class="lineNumber">3257</td>
    <td class="codeline">  //         Orig_taken_branch - Duplicated_taken_branch</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3258</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">3258</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3259</td>
    <td class="codeline">  // The Orig_taken_branch is computed with the assumption that predecessor</td>
    <td class="lineNumber">3259</td>
    <td class="codeline">  // The Orig_taken_branch is computed with the assumption that predecessor</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3260</td>
    <td class="codeline">  // jumps to BB and the most possible successor is laid out after BB.</td>
    <td class="lineNumber">3260</td>
    <td class="codeline">  // jumps to BB and the most possible successor is laid out after BB.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3261</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">3261</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3262</td>
    <td class="codeline">  // The Duplicated_taken_branch is computed with the assumption that BB is</td>
    <td class="lineNumber">3262</td>
    <td class="codeline">  // The Duplicated_taken_branch is computed with the assumption that BB is</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3263</td>
    <td class="codeline">  // duplicated into PB, and one successor is layout after it (SB1 for PB1 and</td>
    <td class="lineNumber">3263</td>
    <td class="codeline">  // duplicated into PB, and one successor is layout after it (SB1 for PB1 and</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3264</td>
    <td class="codeline">  // SB2 for PB2 in our case). If there is no available successor, the combined</td>
    <td class="lineNumber">3264</td>
    <td class="codeline">  // SB2 for PB2 in our case). If there is no available successor, the combined</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3265</td>
    <td class="codeline">  // block jumps to all BB's successor, like PB3 in this example.</td>
    <td class="lineNumber">3265</td>
    <td class="codeline">  // block jumps to all BB's successor, like PB3 in this example.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3266</td>
    <td class="codeline">  //</td>
    <td class="lineNumber">3266</td>
    <td class="codeline">  //</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3267</td>
    <td class="codeline">  // If a predecessor has multiple successors, so BB can't be duplicated into</td>
    <td class="lineNumber">3267</td>
    <td class="codeline">  // If a predecessor has multiple successors, so BB can't be duplicated into</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3268</td>
    <td class="codeline">  // it. But it can beneficially fall through to BB, and duplicate BB into other</td>
    <td class="lineNumber">3268</td>
    <td class="codeline">  // it. But it can beneficially fall through to BB, and duplicate BB into other</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3269</td>
    <td class="codeline">  // predecessors.</td>
    <td class="lineNumber">3269</td>
    <td class="codeline">  // predecessors.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3270</td>
    <td class="codeline">  for (MachineBasicBlock *Pred : Preds) {</td>
    <td class="lineNumber">3270</td>
    <td class="codeline">  for (MachineBasicBlock *Pred : Preds) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3271</td>
    <td class="codeline">    BlockFrequency PredFreq = getBlockCountOrFrequency(Pred);</td>
    <td class="lineNumber">3271</td>
    <td class="codeline">    BlockFrequency PredFreq = getBlockCountOrFrequency(Pred);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3272</td>
    <td class="codeline"></td>
    <td class="lineNumber">3272</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3273</td>
    <td class="codeline">    if (!TailDup.canTailDuplicate(BB, Pred)) {</td>
    <td class="lineNumber">3273</td>
    <td class="codeline">    if (!TailDup.canTailDuplicate(BB, Pred)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3274</td>
    <td class="codeline">      // BB can't be duplicated into Pred, but it is possible to be layout</td>
    <td class="lineNumber">3274</td>
    <td class="codeline">      // BB can't be duplicated into Pred, but it is possible to be layout</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3275</td>
    <td class="codeline">      // below Pred.</td>
    <td class="lineNumber">3275</td>
    <td class="codeline">      // below Pred.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3276</td>
    <td class="codeline">      if (!Fallthrough && isBestSuccessor(BB, Pred, BlockFilter)) {</td>
    <td class="lineNumber">3276</td>
    <td class="codeline">      if (!Fallthrough && isBestSuccessor(BB, Pred, BlockFilter)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3277</td>
    <td class="codeline">        Fallthrough = Pred;</td>
    <td class="lineNumber">3277</td>
    <td class="codeline">        Fallthrough = Pred;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3278</td>
    <td class="codeline">        if (SuccIt != Succs.end())</td>
    <td class="lineNumber">3278</td>
    <td class="codeline">        if (SuccIt != Succs.end())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3279</td>
    <td class="codeline">          SuccIt++;</td>
    <td class="lineNumber">3279</td>
    <td class="codeline">          SuccIt++;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3280</td>
    <td class="codeline">      }</td>
    <td class="lineNumber">3280</td>
    <td class="codeline">      }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3281</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">3281</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3282</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">3282</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3283</td>
    <td class="codeline"></td>
    <td class="lineNumber">3283</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3284</td>
    <td class="codeline">    BlockFrequency OrigCost = PredFreq + PredFreq * DefaultBranchProb;</td>
    <td class="lineNumber">3284</td>
    <td class="codeline">    BlockFrequency OrigCost = PredFreq + PredFreq * DefaultBranchProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3285</td>
    <td class="codeline">    BlockFrequency DupCost;</td>
    <td class="lineNumber">3285</td>
    <td class="codeline">    BlockFrequency DupCost;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3286</td>
    <td class="codeline">    if (SuccIt == Succs.end()) {</td>
    <td class="lineNumber">3286</td>
    <td class="codeline">    if (SuccIt == Succs.end()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3287</td>
    <td class="codeline">      // Jump to all successors;</td>
    <td class="lineNumber">3287</td>
    <td class="codeline">      // Jump to all successors;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3288</td>
    <td class="codeline">      if (Succs.size() > 0)</td>
    <td class="lineNumber">3288</td>
    <td class="codeline">      if (Succs.size() > 0)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3289</td>
    <td class="codeline">        DupCost += PredFreq;</td>
    <td class="lineNumber">3289</td>
    <td class="codeline">        DupCost += PredFreq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3290</td>
    <td class="codeline">    } else {</td>
    <td class="lineNumber">3290</td>
    <td class="codeline">    } else {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3291</td>
    <td class="codeline">      // Fallthrough to *SuccIt, jump to all other successors;</td>
    <td class="lineNumber">3291</td>
    <td class="codeline">      // Fallthrough to *SuccIt, jump to all other successors;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3292</td>
    <td class="codeline">      DupCost += PredFreq;</td>
    <td class="lineNumber">3292</td>
    <td class="codeline">      DupCost += PredFreq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3293</td>
    <td class="codeline">      DupCost -= PredFreq * MBPI->getEdgeProbability(BB, *SuccIt);</td>
    <td class="lineNumber">3293</td>
    <td class="codeline">      DupCost -= PredFreq * MBPI->getEdgeProbability(BB, *SuccIt);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3294</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">3294</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3295</td>
    <td class="codeline"></td>
    <td class="lineNumber">3295</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3296</td>
    <td class="codeline">    assert(OrigCost >= DupCost);</td>
    <td class="lineNumber">3296</td>
    <td class="codeline">    assert(OrigCost >= DupCost);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3297</td>
    <td class="codeline">    OrigCost -= DupCost;</td>
    <td class="lineNumber">3297</td>
    <td class="codeline">    OrigCost -= DupCost;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3298</td>
    <td class="codeline">    if (OrigCost > BBDupThreshold) {</td>
    <td class="lineNumber">3298</td>
    <td class="codeline">    if (OrigCost > BBDupThreshold) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3299</td>
    <td class="codeline">      Candidates.push_back(Pred);</td>
    <td class="lineNumber">3299</td>
    <td class="codeline">      Candidates.push_back(Pred);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3300</td>
    <td class="codeline">      if (SuccIt != Succs.end())</td>
    <td class="lineNumber">3300</td>
    <td class="codeline">      if (SuccIt != Succs.end())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3301</td>
    <td class="codeline">        SuccIt++;</td>
    <td class="lineNumber">3301</td>
    <td class="codeline">        SuccIt++;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3302</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">3302</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3303</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3303</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3304</td>
    <td class="codeline"></td>
    <td class="lineNumber">3304</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3305</td>
    <td class="codeline">  // No predecessors can optimally fallthrough to BB.</td>
    <td class="lineNumber">3305</td>
    <td class="codeline">  // No predecessors can optimally fallthrough to BB.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3306</td>
    <td class="codeline">  // So we can change one duplication into fallthrough.</td>
    <td class="lineNumber">3306</td>
    <td class="codeline">  // So we can change one duplication into fallthrough.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3307</td>
    <td class="codeline">  if (!Fallthrough) {</td>
    <td class="lineNumber">3307</td>
    <td class="codeline">  if (!Fallthrough) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3308</td>
    <td class="codeline">    if ((Candidates.size() < Preds.size()) && (Candidates.size() > 0)) {</td>
    <td class="lineNumber">3308</td>
    <td class="codeline">    if ((Candidates.size() < Preds.size()) && (Candidates.size() > 0)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3309</td>
    <td class="codeline">      Candidates[0] = Candidates.back();</td>
    <td class="lineNumber">3309</td>
    <td class="codeline">      Candidates[0] = Candidates.back();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3310</td>
    <td class="codeline">      Candidates.pop_back();</td>
    <td class="lineNumber">3310</td>
    <td class="codeline">      Candidates.pop_back();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3311</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">3311</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3312</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3312</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3313</td>
    <td class="codeline">}</td>
    <td class="lineNumber">3313</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3314</td>
    <td class="codeline"></td>
    <td class="lineNumber">3314</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3315</td>
    <td class="codeline">void MachineBlockPlacement::initDupThreshold() {</td>
    <td class="lineNumber">3315</td>
    <td class="codeline">void MachineBlockPlacement::initDupThreshold() {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3316</td>
    <td class="codeline">  DupThreshold = 0;</td>
    <td class="lineNumber">3316</td>
    <td class="codeline">  DupThreshold = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3317</td>
    <td class="codeline">  if (!F->getFunction().hasProfileData())</td>
    <td class="lineNumber">3317</td>
    <td class="codeline">  if (!F->getFunction().hasProfileData())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3318</td>
    <td class="codeline">    return;</td>
    <td class="lineNumber">3318</td>
    <td class="codeline">    return;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3319</td>
    <td class="codeline"></td>
    <td class="lineNumber">3319</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3320</td>
    <td class="codeline">  // We prefer to use prifile count.</td>
    <td class="lineNumber">3320</td>
    <td class="codeline">  // We prefer to use prifile count.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3321</td>
    <td class="codeline">  uint64_t HotThreshold = PSI->getOrCompHotCountThreshold();</td>
    <td class="lineNumber">3321</td>
    <td class="codeline">  uint64_t HotThreshold = PSI->getOrCompHotCountThreshold();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3322</td>
    <td class="codeline">  if (HotThreshold != UINT64_MAX) {</td>
    <td class="lineNumber">3322</td>
    <td class="codeline">  if (HotThreshold != UINT64_MAX) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3323</td>
    <td class="codeline">    UseProfileCount = true;</td>
    <td class="lineNumber">3323</td>
    <td class="codeline">    UseProfileCount = true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3324</td>
    <td class="codeline">    DupThreshold = HotThreshold * TailDupProfilePercentThreshold / 100;</td>
    <td class="lineNumber">3324</td>
    <td class="codeline">    DupThreshold = HotThreshold * TailDupProfilePercentThreshold / 100;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3325</td>
    <td class="codeline">    return;</td>
    <td class="lineNumber">3325</td>
    <td class="codeline">    return;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3326</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3326</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3327</td>
    <td class="codeline"></td>
    <td class="lineNumber">3327</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3328</td>
    <td class="codeline">  // Profile count is not available, we can use block frequency instead.</td>
    <td class="lineNumber">3328</td>
    <td class="codeline">  // Profile count is not available, we can use block frequency instead.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3329</td>
    <td class="codeline">  BlockFrequency MaxFreq = 0;</td>
    <td class="lineNumber">3329</td>
    <td class="codeline">  BlockFrequency MaxFreq = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3330</td>
    <td class="codeline">  for (MachineBasicBlock &MBB : *F) {</td>
    <td class="lineNumber">3330</td>
    <td class="codeline">  for (MachineBasicBlock &MBB : *F) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3331</td>
    <td class="codeline">    BlockFrequency Freq = MBFI->getBlockFreq(&MBB);</td>
    <td class="lineNumber">3331</td>
    <td class="codeline">    BlockFrequency Freq = MBFI->getBlockFreq(&MBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3332</td>
    <td class="codeline">    if (Freq > MaxFreq)</td>
    <td class="lineNumber">3332</td>
    <td class="codeline">    if (Freq > MaxFreq)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3333</td>
    <td class="codeline">      MaxFreq = Freq;</td>
    <td class="lineNumber">3333</td>
    <td class="codeline">      MaxFreq = Freq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3334</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3334</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3335</td>
    <td class="codeline"></td>
    <td class="lineNumber">3335</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3336</td>
    <td class="codeline">  BranchProbability ThresholdProb(TailDupPlacementPenalty, 100);</td>
    <td class="lineNumber">3336</td>
    <td class="codeline">  BranchProbability ThresholdProb(TailDupPlacementPenalty, 100);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3337</td>
    <td class="codeline">  DupThreshold = MaxFreq * ThresholdProb;</td>
    <td class="lineNumber">3337</td>
    <td class="codeline">  DupThreshold = MaxFreq * ThresholdProb;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3338</td>
    <td class="codeline">  UseProfileCount = false;</td>
    <td class="lineNumber">3338</td>
    <td class="codeline">  UseProfileCount = false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3339</td>
    <td class="codeline">}</td>
    <td class="lineNumber">3339</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3340</td>
    <td class="codeline"></td>
    <td class="lineNumber">3340</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3341</td>
    <td class="codeline">bool MachineBlockPlacement::runOnMachineFunction(MachineFunction &MF) {</td>
    <td class="lineNumber">3341</td>
    <td class="codeline">bool MachineBlockPlacement::runOnMachineFunction(MachineFunction &MF) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3342</td>
    <td class="codeline">  if (skipFunction(MF.getFunction()))</td>
    <td class="lineNumber">3342</td>
    <td class="codeline">  if (skipFunction(MF.getFunction()))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3343</td>
    <td class="codeline">    return false;</td>
    <td class="lineNumber">3343</td>
    <td class="codeline">    return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3344</td>
    <td class="codeline"></td>
    <td class="lineNumber">3344</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3345</td>
    <td class="codeline">  // Check for single-block functions and skip them.</td>
    <td class="lineNumber">3345</td>
    <td class="codeline">  // Check for single-block functions and skip them.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3346</td>
    <td class="codeline">  if (std::next(MF.begin()) == MF.end())</td>
    <td class="lineNumber">3346</td>
    <td class="codeline">  if (std::next(MF.begin()) == MF.end())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3347</td>
    <td class="codeline">    return false;</td>
    <td class="lineNumber">3347</td>
    <td class="codeline">    return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3348</td>
    <td class="codeline"></td>
    <td class="lineNumber">3348</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3349</td>
    <td class="codeline">  F = &MF;</td>
    <td class="lineNumber">3349</td>
    <td class="codeline">  F = &MF;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3350</td>
    <td class="codeline">  MBPI = &getAnalysis<MachineBranchProbabilityInfo>();</td>
    <td class="lineNumber">3350</td>
    <td class="codeline">  MBPI = &getAnalysis<MachineBranchProbabilityInfo>();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3351</td>
    <td class="codeline">  MBFI = std::make_unique<MBFIWrapper>(</td>
    <td class="lineNumber">3351</td>
    <td class="codeline">  MBFI = std::make_unique<MBFIWrapper>(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3352</td>
    <td class="codeline">      getAnalysis<MachineBlockFrequencyInfo>());</td>
    <td class="lineNumber">3352</td>
    <td class="codeline">      getAnalysis<MachineBlockFrequencyInfo>());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3353</td>
    <td class="codeline">  MLI = &getAnalysis<MachineLoopInfo>();</td>
    <td class="lineNumber">3353</td>
    <td class="codeline">  MLI = &getAnalysis<MachineLoopInfo>();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3354</td>
    <td class="codeline">  TII = MF.getSubtarget().getInstrInfo();</td>
    <td class="lineNumber">3354</td>
    <td class="codeline">  TII = MF.getSubtarget().getInstrInfo();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3355</td>
    <td class="codeline">  TLI = MF.getSubtarget().getTargetLowering();</td>
    <td class="lineNumber">3355</td>
    <td class="codeline">  TLI = MF.getSubtarget().getTargetLowering();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3356</td>
    <td class="codeline">  MPDT = nullptr;</td>
    <td class="lineNumber">3356</td>
    <td class="codeline">  MPDT = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3357</td>
    <td class="codeline">  PSI = &getAnalysis<ProfileSummaryInfoWrapperPass>().getPSI();</td>
    <td class="lineNumber">3357</td>
    <td class="codeline">  PSI = &getAnalysis<ProfileSummaryInfoWrapperPass>().getPSI();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3358</td>
    <td class="codeline"></td>
    <td class="lineNumber">3358</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3359</td>
    <td class="codeline">  initDupThreshold();</td>
    <td class="lineNumber">3359</td>
    <td class="codeline">  initDupThreshold();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3360</td>
    <td class="codeline"></td>
    <td class="lineNumber">3360</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3361</td>
    <td class="codeline">  // Initialize PreferredLoopExit to nullptr here since it may never be set if</td>
    <td class="lineNumber">3361</td>
    <td class="codeline">  // Initialize PreferredLoopExit to nullptr here since it may never be set if</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3362</td>
    <td class="codeline">  // there are no MachineLoops.</td>
    <td class="lineNumber">3362</td>
    <td class="codeline">  // there are no MachineLoops.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3363</td>
    <td class="codeline">  PreferredLoopExit = nullptr;</td>
    <td class="lineNumber">3363</td>
    <td class="codeline">  PreferredLoopExit = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3364</td>
    <td class="codeline"></td>
    <td class="lineNumber">3364</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3365</td>
    <td class="codeline">  assert(BlockToChain.empty() &&</td>
    <td class="lineNumber">3365</td>
    <td class="codeline">  assert(BlockToChain.empty() &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3366</td>
    <td class="codeline">         "BlockToChain map should be empty before starting placement.");</td>
    <td class="lineNumber">3366</td>
    <td class="codeline">         "BlockToChain map should be empty before starting placement.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3367</td>
    <td class="codeline">  assert(ComputedEdges.empty() &&</td>
    <td class="lineNumber">3367</td>
    <td class="codeline">  assert(ComputedEdges.empty() &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3368</td>
    <td class="codeline">         "Computed Edge map should be empty before starting placement.");</td>
    <td class="lineNumber">3368</td>
    <td class="codeline">         "Computed Edge map should be empty before starting placement.");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3369</td>
    <td class="codeline"></td>
    <td class="lineNumber">3369</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3370</td>
    <td class="codeline">  unsigned TailDupSize = TailDupPlacementThreshold;</td>
    <td class="lineNumber">3370</td>
    <td class="codeline">  unsigned TailDupSize = TailDupPlacementThreshold;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3371</td>
    <td class="codeline">  // If only the aggressive threshold is explicitly set, use it.</td>
    <td class="lineNumber">3371</td>
    <td class="codeline">  // If only the aggressive threshold is explicitly set, use it.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3372</td>
    <td class="codeline">  if (TailDupPlacementAggressiveThreshold.getNumOccurrences() != 0 &&</td>
    <td class="lineNumber">3372</td>
    <td class="codeline">  if (TailDupPlacementAggressiveThreshold.getNumOccurrences() != 0 &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3373</td>
    <td class="codeline">      TailDupPlacementThreshold.getNumOccurrences() == 0)</td>
    <td class="lineNumber">3373</td>
    <td class="codeline">      TailDupPlacementThreshold.getNumOccurrences() == 0)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3374</td>
    <td class="codeline">    TailDupSize = TailDupPlacementAggressiveThreshold;</td>
    <td class="lineNumber">3374</td>
    <td class="codeline">    TailDupSize = TailDupPlacementAggressiveThreshold;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3375</td>
    <td class="codeline"></td>
    <td class="lineNumber">3375</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3376</td>
    <td class="codeline">  TargetPassConfig *PassConfig = &getAnalysis<TargetPassConfig>();</td>
    <td class="lineNumber">3376</td>
    <td class="codeline">  TargetPassConfig *PassConfig = &getAnalysis<TargetPassConfig>();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3377</td>
    <td class="codeline">  // For aggressive optimization, we can adjust some thresholds to be less</td>
    <td class="lineNumber">3377</td>
    <td class="codeline">  // For aggressive optimization, we can adjust some thresholds to be less</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3378</td>
    <td class="codeline">  // conservative.</td>
    <td class="lineNumber">3378</td>
    <td class="codeline">  // conservative.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3379</td>
    <td class="codeline">  if (PassConfig->getOptLevel() >= CodeGenOpt::Aggressive) {</td>
    <td class="lineNumber">3379</td>
    <td class="codeline">  if (PassConfig->getOptLevel() >= CodeGenOpt::Aggressive) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3380</td>
    <td class="codeline">    // At O3 we should be more willing to copy blocks for tail duplication. This</td>
    <td class="lineNumber">3380</td>
    <td class="codeline">    // At O3 we should be more willing to copy blocks for tail duplication. This</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3381</td>
    <td class="codeline">    // increases size pressure, so we only do it at O3</td>
    <td class="lineNumber">3381</td>
    <td class="codeline">    // increases size pressure, so we only do it at O3</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3382</td>
    <td class="codeline">    // Do this unless only the regular threshold is explicitly set.</td>
    <td class="lineNumber">3382</td>
    <td class="codeline">    // Do this unless only the regular threshold is explicitly set.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3383</td>
    <td class="codeline">    if (TailDupPlacementThreshold.getNumOccurrences() == 0 ||</td>
    <td class="lineNumber">3383</td>
    <td class="codeline">    if (TailDupPlacementThreshold.getNumOccurrences() == 0 ||</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3384</td>
    <td class="codeline">        TailDupPlacementAggressiveThreshold.getNumOccurrences() != 0)</td>
    <td class="lineNumber">3384</td>
    <td class="codeline">        TailDupPlacementAggressiveThreshold.getNumOccurrences() != 0)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3385</td>
    <td class="codeline">      TailDupSize = TailDupPlacementAggressiveThreshold;</td>
    <td class="lineNumber">3385</td>
    <td class="codeline">      TailDupSize = TailDupPlacementAggressiveThreshold;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3386</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3386</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3387</td>
    <td class="codeline"></td>
    <td class="lineNumber">3387</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3388</td>
    <td class="codeline">  // If there's no threshold provided through options, query the target</td>
    <td class="lineNumber">3388</td>
    <td class="codeline">  // If there's no threshold provided through options, query the target</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3389</td>
    <td class="codeline">  // information for a threshold instead.</td>
    <td class="lineNumber">3389</td>
    <td class="codeline">  // information for a threshold instead.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3390</td>
    <td class="codeline">  if (TailDupPlacementThreshold.getNumOccurrences() == 0 &&</td>
    <td class="lineNumber">3390</td>
    <td class="codeline">  if (TailDupPlacementThreshold.getNumOccurrences() == 0 &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3391</td>
    <td class="codeline">      (PassConfig->getOptLevel() < CodeGenOpt::Aggressive ||</td>
    <td class="lineNumber">3391</td>
    <td class="codeline">      (PassConfig->getOptLevel() < CodeGenOpt::Aggressive ||</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3392</td>
    <td class="codeline">       TailDupPlacementAggressiveThreshold.getNumOccurrences() == 0))</td>
    <td class="lineNumber">3392</td>
    <td class="codeline">       TailDupPlacementAggressiveThreshold.getNumOccurrences() == 0))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3393</td>
    <td class="codeline">    TailDupSize = TII->getTailDuplicateSize(PassConfig->getOptLevel());</td>
    <td class="lineNumber">3393</td>
    <td class="codeline">    TailDupSize = TII->getTailDuplicateSize(PassConfig->getOptLevel());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3394</td>
    <td class="codeline"></td>
    <td class="lineNumber">3394</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3395</td>
    <td class="codeline">  if (allowTailDupPlacement()) {</td>
    <td class="lineNumber">3395</td>
    <td class="codeline">  if (allowTailDupPlacement()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3396</td>
    <td class="codeline">    MPDT = &getAnalysis<MachinePostDominatorTree>();</td>
    <td class="lineNumber">3396</td>
    <td class="codeline">    MPDT = &getAnalysis<MachinePostDominatorTree>();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3397</td>
    <td class="codeline">    bool OptForSize = MF.getFunction().hasOptSize() ||</td>
    <td class="lineNumber">3397</td>
    <td class="codeline">    bool OptForSize = MF.getFunction().hasOptSize() ||</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3398</td>
    <td class="codeline">                      llvm::shouldOptimizeForSize(&MF, PSI, &MBFI->getMBFI());</td>
    <td class="lineNumber">3398</td>
    <td class="codeline">                      llvm::shouldOptimizeForSize(&MF, PSI, &MBFI->getMBFI());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3399</td>
    <td class="codeline">    if (OptForSize)</td>
    <td class="lineNumber">3399</td>
    <td class="codeline">    if (OptForSize)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3400</td>
    <td class="codeline">      TailDupSize = 1;</td>
    <td class="lineNumber">3400</td>
    <td class="codeline">      TailDupSize = 1;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3401</td>
    <td class="codeline">    bool PreRegAlloc = false;</td>
    <td class="lineNumber">3401</td>
    <td class="codeline">    bool PreRegAlloc = false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3402</td>
    <td class="codeline">    TailDup.initMF(MF, PreRegAlloc, MBPI, MBFI.get(), PSI,</td>
    <td class="lineNumber">3402</td>
    <td class="codeline">    TailDup.initMF(MF, PreRegAlloc, MBPI, MBFI.get(), PSI,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3403</td>
    <td class="codeline">                   /* LayoutMode */ true, TailDupSize);</td>
    <td class="lineNumber">3403</td>
    <td class="codeline">                   /* LayoutMode */ true, TailDupSize);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3404</td>
    <td class="codeline">    precomputeTriangleChains();</td>
    <td class="lineNumber">3404</td>
    <td class="codeline">    precomputeTriangleChains();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3405</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3405</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3406</td>
    <td class="codeline"></td>
    <td class="lineNumber">3406</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3407</td>
    <td class="codeline">  buildCFGChains();</td>
    <td class="lineNumber">3407</td>
    <td class="codeline">  buildCFGChains();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3408</td>
    <td class="codeline"></td>
    <td class="lineNumber">3408</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3409</td>
    <td class="codeline">  // Changing the layout can create new tail merging opportunities.</td>
    <td class="lineNumber">3409</td>
    <td class="codeline">  // Changing the layout can create new tail merging opportunities.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3410</td>
    <td class="codeline">  // TailMerge can create jump into if branches that make CFG irreducible for</td>
    <td class="lineNumber">3410</td>
    <td class="codeline">  // TailMerge can create jump into if branches that make CFG irreducible for</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3411</td>
    <td class="codeline">  // HW that requires structured CFG.</td>
    <td class="lineNumber">3411</td>
    <td class="codeline">  // HW that requires structured CFG.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3412</td>
    <td class="codeline">  bool EnableTailMerge = !MF.getTarget().requiresStructuredCFG() &&</td>
    <td class="lineNumber">3412</td>
    <td class="codeline">  bool EnableTailMerge = !MF.getTarget().requiresStructuredCFG() &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3413</td>
    <td class="codeline">                         PassConfig->getEnableTailMerge() &&</td>
    <td class="lineNumber">3413</td>
    <td class="codeline">                         PassConfig->getEnableTailMerge() &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3414</td>
    <td class="codeline">                         BranchFoldPlacement;</td>
    <td class="lineNumber">3414</td>
    <td class="codeline">                         BranchFoldPlacement;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3415</td>
    <td class="codeline">  // No tail merging opportunities if the block number is less than four.</td>
    <td class="lineNumber">3415</td>
    <td class="codeline">  // No tail merging opportunities if the block number is less than four.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3416</td>
    <td class="codeline">  if (MF.size() > 3 && EnableTailMerge) {</td>
    <td class="lineNumber">3416</td>
    <td class="codeline">  if (MF.size() > 3 && EnableTailMerge) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3417</td>
    <td class="codeline">    unsigned TailMergeSize = TailDupSize + 1;</td>
    <td class="lineNumber">3417</td>
    <td class="codeline">    unsigned TailMergeSize = TailDupSize + 1;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3418</td>
    <td class="codeline">    BranchFolder BF(/*DefaultEnableTailMerge=*/true, /*CommonHoist=*/false,</td>
    <td class="lineNumber">3418</td>
    <td class="codeline">    BranchFolder BF(/*DefaultEnableTailMerge=*/true, /*CommonHoist=*/false,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3419</td>
    <td class="codeline">                    *MBFI, *MBPI, PSI, TailMergeSize);</td>
    <td class="lineNumber">3419</td>
    <td class="codeline">                    *MBFI, *MBPI, PSI, TailMergeSize);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3420</td>
    <td class="codeline"></td>
    <td class="lineNumber">3420</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3421</td>
    <td class="codeline">    if (BF.OptimizeFunction(MF, TII, MF.getSubtarget().getRegisterInfo(), MLI,</td>
    <td class="lineNumber">3421</td>
    <td class="codeline">    if (BF.OptimizeFunction(MF, TII, MF.getSubtarget().getRegisterInfo(), MLI,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3422</td>
    <td class="codeline">                            /*AfterPlacement=*/true)) {</td>
    <td class="lineNumber">3422</td>
    <td class="codeline">                            /*AfterPlacement=*/true)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3423</td>
    <td class="codeline">      // Redo the layout if tail merging creates/removes/moves blocks.</td>
    <td class="lineNumber">3423</td>
    <td class="codeline">      // Redo the layout if tail merging creates/removes/moves blocks.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3424</td>
    <td class="codeline">      BlockToChain.clear();</td>
    <td class="lineNumber">3424</td>
    <td class="codeline">      BlockToChain.clear();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3425</td>
    <td class="codeline">      ComputedEdges.clear();</td>
    <td class="lineNumber">3425</td>
    <td class="codeline">      ComputedEdges.clear();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3426</td>
    <td class="codeline">      // Must redo the post-dominator tree if blocks were changed.</td>
    <td class="lineNumber">3426</td>
    <td class="codeline">      // Must redo the post-dominator tree if blocks were changed.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3427</td>
    <td class="codeline">      if (MPDT)</td>
    <td class="lineNumber">3427</td>
    <td class="codeline">      if (MPDT)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3428</td>
    <td class="codeline">        MPDT->runOnMachineFunction(MF);</td>
    <td class="lineNumber">3428</td>
    <td class="codeline">        MPDT->runOnMachineFunction(MF);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3429</td>
    <td class="codeline">      ChainAllocator.DestroyAll();</td>
    <td class="lineNumber">3429</td>
    <td class="codeline">      ChainAllocator.DestroyAll();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3430</td>
    <td class="codeline">      buildCFGChains();</td>
    <td class="lineNumber">3430</td>
    <td class="codeline">      buildCFGChains();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3431</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">3431</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3432</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3432</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3433</td>
    <td class="codeline"></td>
    <td class="lineNumber">3433</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3434</td>
    <td class="codeline">  // Apply a post-processing optimizing block placement.</td>
    <td class="lineNumber">3434</td>
    <td class="codeline">  // Apply a post-processing optimizing block placement.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3435</td>
    <td class="codeline">  if (MF.size() >= 3 && EnableExtTspBlockPlacement &&</td>
    <td class="lineNumber">3435</td>
    <td class="codeline">  if (MF.size() >= 3 && EnableExtTspBlockPlacement &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3436</td>
    <td class="codeline">      (ApplyExtTspWithoutProfile || MF.getFunction().hasProfileData())) {</td>
    <td class="lineNumber">3436</td>
    <td class="codeline">      (ApplyExtTspWithoutProfile || MF.getFunction().hasProfileData())) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3437</td>
    <td class="codeline">    // Find a new placement and modify the layout of the blocks in the function.</td>
    <td class="lineNumber">3437</td>
    <td class="codeline">    // Find a new placement and modify the layout of the blocks in the function.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3438</td>
    <td class="codeline">    applyExtTsp();</td>
    <td class="lineNumber">3438</td>
    <td class="codeline">    applyExtTsp();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3439</td>
    <td class="codeline"></td>
    <td class="lineNumber">3439</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3440</td>
    <td class="codeline">    // Re-create CFG chain so that we can optimizeBranches and alignBlocks.</td>
    <td class="lineNumber">3440</td>
    <td class="codeline">    // Re-create CFG chain so that we can optimizeBranches and alignBlocks.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3441</td>
    <td class="codeline">    createCFGChainExtTsp();</td>
    <td class="lineNumber">3441</td>
    <td class="codeline">    createCFGChainExtTsp();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3442</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3442</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3443</td>
    <td class="codeline"></td>
    <td class="lineNumber">3443</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3444</td>
    <td class="codeline">  optimizeBranches();</td>
    <td class="lineNumber">3444</td>
    <td class="codeline">  optimizeBranches();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3445</td>
    <td class="codeline">  alignBlocks();</td>
    <td class="lineNumber">3445</td>
    <td class="codeline">  alignBlocks();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3446</td>
    <td class="codeline"></td>
    <td class="lineNumber">3446</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3447</td>
    <td class="codeline">  BlockToChain.clear();</td>
    <td class="lineNumber">3447</td>
    <td class="codeline">  BlockToChain.clear();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3448</td>
    <td class="codeline">  ComputedEdges.clear();</td>
    <td class="lineNumber">3448</td>
    <td class="codeline">  ComputedEdges.clear();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3449</td>
    <td class="codeline">  ChainAllocator.DestroyAll();</td>
    <td class="lineNumber">3449</td>
    <td class="codeline">  ChainAllocator.DestroyAll();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3450</td>
    <td class="codeline"></td>
    <td class="lineNumber">3450</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3451</td>
    <td class="codeline">  bool HasMaxBytesOverride =</td>
    <td class="lineNumber">3451</td>
    <td class="codeline">  bool HasMaxBytesOverride =</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3452</td>
    <td class="codeline">      MaxBytesForAlignmentOverride.getNumOccurrences() > 0;</td>
    <td class="lineNumber">3452</td>
    <td class="codeline">      MaxBytesForAlignmentOverride.getNumOccurrences() > 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3453</td>
    <td class="codeline"></td>
    <td class="lineNumber">3453</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3454</td>
    <td class="codeline">  if (AlignAllBlock)</td>
    <td class="lineNumber">3454</td>
    <td class="codeline">  if (AlignAllBlock)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3455</td>
    <td class="codeline">    // Align all of the blocks in the function to a specific alignment.</td>
    <td class="lineNumber">3455</td>
    <td class="codeline">    // Align all of the blocks in the function to a specific alignment.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3456</td>
    <td class="codeline">    for (MachineBasicBlock &MBB : MF) {</td>
    <td class="lineNumber">3456</td>
    <td class="codeline">    for (MachineBasicBlock &MBB : MF) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3457</td>
    <td class="codeline">      if (HasMaxBytesOverride)</td>
    <td class="lineNumber">3457</td>
    <td class="codeline">      if (HasMaxBytesOverride)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3458</td>
    <td class="codeline">        MBB.setAlignment(Align(1ULL << AlignAllBlock),</td>
    <td class="lineNumber">3458</td>
    <td class="codeline">        MBB.setAlignment(Align(1ULL << AlignAllBlock),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3459</td>
    <td class="codeline">                         MaxBytesForAlignmentOverride);</td>
    <td class="lineNumber">3459</td>
    <td class="codeline">                         MaxBytesForAlignmentOverride);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3460</td>
    <td class="codeline">      else</td>
    <td class="lineNumber">3460</td>
    <td class="codeline">      else</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3461</td>
    <td class="codeline">        MBB.setAlignment(Align(1ULL << AlignAllBlock));</td>
    <td class="lineNumber">3461</td>
    <td class="codeline">        MBB.setAlignment(Align(1ULL << AlignAllBlock));</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3462</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">3462</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3463</td>
    <td class="codeline">  else if (AlignAllNonFallThruBlocks) {</td>
    <td class="lineNumber">3463</td>
    <td class="codeline">  else if (AlignAllNonFallThruBlocks) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3464</td>
    <td class="codeline">    // Align all of the blocks that have no fall-through predecessors to a</td>
    <td class="lineNumber">3464</td>
    <td class="codeline">    // Align all of the blocks that have no fall-through predecessors to a</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3465</td>
    <td class="codeline">    // specific alignment.</td>
    <td class="lineNumber">3465</td>
    <td class="codeline">    // specific alignment.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3466</td>
    <td class="codeline">    for (auto MBI = std::next(MF.begin()), MBE = MF.end(); MBI != MBE; ++MBI) {</td>
    <td class="lineNumber">3466</td>
    <td class="codeline">    for (auto MBI = std::next(MF.begin()), MBE = MF.end(); MBI != MBE; ++MBI) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3467</td>
    <td class="codeline">      auto LayoutPred = std::prev(MBI);</td>
    <td class="lineNumber">3467</td>
    <td class="codeline">      auto LayoutPred = std::prev(MBI);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3468</td>
    <td class="codeline">      if (!LayoutPred->isSuccessor(&*MBI)) {</td>
    <td class="lineNumber">3468</td>
    <td class="codeline">      if (!LayoutPred->isSuccessor(&*MBI)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3469</td>
    <td class="codeline">        if (HasMaxBytesOverride)</td>
    <td class="lineNumber">3469</td>
    <td class="codeline">        if (HasMaxBytesOverride)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3470</td>
    <td class="codeline">          MBI->setAlignment(Align(1ULL << AlignAllNonFallThruBlocks),</td>
    <td class="lineNumber">3470</td>
    <td class="codeline">          MBI->setAlignment(Align(1ULL << AlignAllNonFallThruBlocks),</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3471</td>
    <td class="codeline">                            MaxBytesForAlignmentOverride);</td>
    <td class="lineNumber">3471</td>
    <td class="codeline">                            MaxBytesForAlignmentOverride);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3472</td>
    <td class="codeline">        else</td>
    <td class="lineNumber">3472</td>
    <td class="codeline">        else</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3473</td>
    <td class="codeline">          MBI->setAlignment(Align(1ULL << AlignAllNonFallThruBlocks));</td>
    <td class="lineNumber">3473</td>
    <td class="codeline">          MBI->setAlignment(Align(1ULL << AlignAllNonFallThruBlocks));</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3474</td>
    <td class="codeline">      }</td>
    <td class="lineNumber">3474</td>
    <td class="codeline">      }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3475</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">3475</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3476</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3476</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3477</td>
    <td class="codeline">  if (ViewBlockLayoutWithBFI != GVDT_None &&</td>
    <td class="lineNumber">3477</td>
    <td class="codeline">  if (ViewBlockLayoutWithBFI != GVDT_None &&</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3478</td>
    <td class="codeline">      (ViewBlockFreqFuncName.empty() ||</td>
    <td class="lineNumber">3478</td>
    <td class="codeline">      (ViewBlockFreqFuncName.empty() ||</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3479</td>
    <td class="codeline">       F->getFunction().getName().equals(ViewBlockFreqFuncName))) {</td>
    <td class="lineNumber">3479</td>
    <td class="codeline">       F->getFunction().getName().equals(ViewBlockFreqFuncName))) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3480</td>
    <td class="codeline">    if (RenumberBlocksBeforeView)</td>
    <td class="lineNumber">3480</td>
    <td class="codeline">    if (RenumberBlocksBeforeView)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3481</td>
    <td class="codeline">      MF.RenumberBlocks();</td>
    <td class="lineNumber">3481</td>
    <td class="codeline">      MF.RenumberBlocks();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3482</td>
    <td class="codeline">    MBFI->view("MBP." + MF.getName(), false);</td>
    <td class="lineNumber">3482</td>
    <td class="codeline">    MBFI->view("MBP." + MF.getName(), false);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3483</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3483</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3484</td>
    <td class="codeline"></td>
    <td class="lineNumber">3484</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3485</td>
    <td class="codeline">  // We always return true as we have no way to track whether the final order</td>
    <td class="lineNumber">3485</td>
    <td class="codeline">  // We always return true as we have no way to track whether the final order</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3486</td>
    <td class="codeline">  // differs from the original order.</td>
    <td class="lineNumber">3486</td>
    <td class="codeline">  // differs from the original order.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3487</td>
    <td class="codeline">  return true;</td>
    <td class="lineNumber">3487</td>
    <td class="codeline">  return true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3488</td>
    <td class="codeline">}</td>
    <td class="lineNumber">3488</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3489</td>
    <td class="codeline"></td>
    <td class="lineNumber">3489</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3490</td>
    <td class="codeline">void MachineBlockPlacement::applyExtTsp() {</td>
    <td class="lineNumber">3490</td>
    <td class="codeline">void MachineBlockPlacement::applyExtTsp() {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3491</td>
    <td class="codeline">  // Prepare data; blocks are indexed by their index in the current ordering.</td>
    <td class="lineNumber">3491</td>
    <td class="codeline">  // Prepare data; blocks are indexed by their index in the current ordering.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3492</td>
    <td class="codeline">  DenseMap<const MachineBasicBlock *, uint64_t> BlockIndex;</td>
    <td class="lineNumber">3492</td>
    <td class="codeline">  DenseMap<const MachineBasicBlock *, uint64_t> BlockIndex;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3493</td>
    <td class="codeline">  BlockIndex.reserve(F->size());</td>
    <td class="lineNumber">3493</td>
    <td class="codeline">  BlockIndex.reserve(F->size());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3494</td>
    <td class="codeline">  std::vector<const MachineBasicBlock *> CurrentBlockOrder;</td>
    <td class="lineNumber">3494</td>
    <td class="codeline">  std::vector<const MachineBasicBlock *> CurrentBlockOrder;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3495</td>
    <td class="codeline">  CurrentBlockOrder.reserve(F->size());</td>
    <td class="lineNumber">3495</td>
    <td class="codeline">  CurrentBlockOrder.reserve(F->size());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3496</td>
    <td class="codeline">  size_t NumBlocks = 0;</td>
    <td class="lineNumber">3496</td>
    <td class="codeline">  size_t NumBlocks = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3497</td>
    <td class="codeline">  for (const MachineBasicBlock &MBB : *F) {</td>
    <td class="lineNumber">3497</td>
    <td class="codeline">  for (const MachineBasicBlock &MBB : *F) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3498</td>
    <td class="codeline">    BlockIndex[&MBB] = NumBlocks++;</td>
    <td class="lineNumber">3498</td>
    <td class="codeline">    BlockIndex[&MBB] = NumBlocks++;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3499</td>
    <td class="codeline">    CurrentBlockOrder.push_back(&MBB);</td>
    <td class="lineNumber">3499</td>
    <td class="codeline">    CurrentBlockOrder.push_back(&MBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3500</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3500</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3501</td>
    <td class="codeline"></td>
    <td class="lineNumber">3501</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3502</td>
    <td class="codeline">  auto BlockSizes = std::vector<uint64_t>(F->size());</td>
    <td class="lineNumber">3502</td>
    <td class="codeline">  auto BlockSizes = std::vector<uint64_t>(F->size());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3503</td>
    <td class="codeline">  auto BlockCounts = std::vector<uint64_t>(F->size());</td>
    <td class="lineNumber">3503</td>
    <td class="codeline">  auto BlockCounts = std::vector<uint64_t>(F->size());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3504</td>
    <td class="codeline">  std::vector<EdgeCountT> JumpCounts;</td>
    <td class="lineNumber">3504</td>
    <td class="codeline">  std::vector<EdgeCountT> JumpCounts;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3505</td>
    <td class="codeline">  for (MachineBasicBlock &MBB : *F) {</td>
    <td class="lineNumber">3505</td>
    <td class="codeline">  for (MachineBasicBlock &MBB : *F) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3506</td>
    <td class="codeline">    // Getting the block frequency.</td>
    <td class="lineNumber">3506</td>
    <td class="codeline">    // Getting the block frequency.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3507</td>
    <td class="codeline">    BlockFrequency BlockFreq = MBFI->getBlockFreq(&MBB);</td>
    <td class="lineNumber">3507</td>
    <td class="codeline">    BlockFrequency BlockFreq = MBFI->getBlockFreq(&MBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3508</td>
    <td class="codeline">    BlockCounts[BlockIndex[&MBB]] = BlockFreq.getFrequency();</td>
    <td class="lineNumber">3508</td>
    <td class="codeline">    BlockCounts[BlockIndex[&MBB]] = BlockFreq.getFrequency();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3509</td>
    <td class="codeline">    // Getting the block size:</td>
    <td class="lineNumber">3509</td>
    <td class="codeline">    // Getting the block size:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3510</td>
    <td class="codeline">    // - approximate the size of an instruction by 4 bytes, and</td>
    <td class="lineNumber">3510</td>
    <td class="codeline">    // - approximate the size of an instruction by 4 bytes, and</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3511</td>
    <td class="codeline">    // - ignore debug instructions.</td>
    <td class="lineNumber">3511</td>
    <td class="codeline">    // - ignore debug instructions.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3512</td>
    <td class="codeline">    // Note: getting the exact size of each block is target-dependent and can be</td>
    <td class="lineNumber">3512</td>
    <td class="codeline">    // Note: getting the exact size of each block is target-dependent and can be</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3513</td>
    <td class="codeline">    // done by extending the interface of MCCodeEmitter. Experimentally we do</td>
    <td class="lineNumber">3513</td>
    <td class="codeline">    // done by extending the interface of MCCodeEmitter. Experimentally we do</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3514</td>
    <td class="codeline">    // not see a perf improvement with the exact block sizes.</td>
    <td class="lineNumber">3514</td>
    <td class="codeline">    // not see a perf improvement with the exact block sizes.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3515</td>
    <td class="codeline">    auto NonDbgInsts =</td>
    <td class="lineNumber">3515</td>
    <td class="codeline">    auto NonDbgInsts =</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3516</td>
    <td class="codeline">        instructionsWithoutDebug(MBB.instr_begin(), MBB.instr_end());</td>
    <td class="lineNumber">3516</td>
    <td class="codeline">        instructionsWithoutDebug(MBB.instr_begin(), MBB.instr_end());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3517</td>
    <td class="codeline">    int NumInsts = std::distance(NonDbgInsts.begin(), NonDbgInsts.end());</td>
    <td class="lineNumber">3517</td>
    <td class="codeline">    int NumInsts = std::distance(NonDbgInsts.begin(), NonDbgInsts.end());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3518</td>
    <td class="codeline">    BlockSizes[BlockIndex[&MBB]] = 4 * NumInsts;</td>
    <td class="lineNumber">3518</td>
    <td class="codeline">    BlockSizes[BlockIndex[&MBB]] = 4 * NumInsts;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3519</td>
    <td class="codeline">    // Getting jump frequencies.</td>
    <td class="lineNumber">3519</td>
    <td class="codeline">    // Getting jump frequencies.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3520</td>
    <td class="codeline">    for (MachineBasicBlock *Succ : MBB.successors()) {</td>
    <td class="lineNumber">3520</td>
    <td class="codeline">    for (MachineBasicBlock *Succ : MBB.successors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3521</td>
    <td class="codeline">      auto EP = MBPI->getEdgeProbability(&MBB, Succ);</td>
    <td class="lineNumber">3521</td>
    <td class="codeline">      auto EP = MBPI->getEdgeProbability(&MBB, Succ);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3522</td>
    <td class="codeline">      BlockFrequency JumpFreq = BlockFreq * EP;</td>
    <td class="lineNumber">3522</td>
    <td class="codeline">      BlockFrequency JumpFreq = BlockFreq * EP;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3523</td>
    <td class="codeline">      auto Jump = std::make_pair(BlockIndex[&MBB], BlockIndex[Succ]);</td>
    <td class="lineNumber">3523</td>
    <td class="codeline">      auto Jump = std::make_pair(BlockIndex[&MBB], BlockIndex[Succ]);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3524</td>
    <td class="codeline">      JumpCounts.push_back(std::make_pair(Jump, JumpFreq.getFrequency()));</td>
    <td class="lineNumber">3524</td>
    <td class="codeline">      JumpCounts.push_back(std::make_pair(Jump, JumpFreq.getFrequency()));</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3525</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">3525</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3526</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3526</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3527</td>
    <td class="codeline"></td>
    <td class="lineNumber">3527</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3528</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "Applying ext-tsp layout for |V| = " << F->size()</td>
    <td class="lineNumber">3528</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << "Applying ext-tsp layout for |V| = " << F->size()</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3529</td>
    <td class="codeline">                    << " with profile = " << F->getFunction().hasProfileData()</td>
    <td class="lineNumber">3529</td>
    <td class="codeline">                    << " with profile = " << F->getFunction().hasProfileData()</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3530</td>
    <td class="codeline">                    << " (" << F->getName().str() << ")"</td>
    <td class="lineNumber">3530</td>
    <td class="codeline">                    << " (" << F->getName().str() << ")"</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3531</td>
    <td class="codeline">                    << "\n");</td>
    <td class="lineNumber">3531</td>
    <td class="codeline">                    << "\n");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3532</td>
    <td class="codeline">  LLVM_DEBUG(</td>
    <td class="lineNumber">3532</td>
    <td class="codeline">  LLVM_DEBUG(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3533</td>
    <td class="codeline">      dbgs() << format("  original  layout score: %0.2f\n",</td>
    <td class="lineNumber">3533</td>
    <td class="codeline">      dbgs() << format("  original  layout score: %0.2f\n",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3534</td>
    <td class="codeline">                       calcExtTspScore(BlockSizes, BlockCounts, JumpCounts)));</td>
    <td class="lineNumber">3534</td>
    <td class="codeline">                       calcExtTspScore(BlockSizes, BlockCounts, JumpCounts)));</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3535</td>
    <td class="codeline"></td>
    <td class="lineNumber">3535</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3536</td>
    <td class="codeline">  // Run the layout algorithm.</td>
    <td class="lineNumber">3536</td>
    <td class="codeline">  // Run the layout algorithm.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3537</td>
    <td class="codeline">  auto NewOrder = applyExtTspLayout(BlockSizes, BlockCounts, JumpCounts);</td>
    <td class="lineNumber">3537</td>
    <td class="codeline">  auto NewOrder = applyExtTspLayout(BlockSizes, BlockCounts, JumpCounts);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3538</td>
    <td class="codeline">  std::vector<const MachineBasicBlock *> NewBlockOrder;</td>
    <td class="lineNumber">3538</td>
    <td class="codeline">  std::vector<const MachineBasicBlock *> NewBlockOrder;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3539</td>
    <td class="codeline">  NewBlockOrder.reserve(F->size());</td>
    <td class="lineNumber">3539</td>
    <td class="codeline">  NewBlockOrder.reserve(F->size());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3540</td>
    <td class="codeline">  for (uint64_t Node : NewOrder) {</td>
    <td class="lineNumber">3540</td>
    <td class="codeline">  for (uint64_t Node : NewOrder) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3541</td>
    <td class="codeline">    NewBlockOrder.push_back(CurrentBlockOrder[Node]);</td>
    <td class="lineNumber">3541</td>
    <td class="codeline">    NewBlockOrder.push_back(CurrentBlockOrder[Node]);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3542</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3542</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3543</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << format("  optimized layout score: %0.2f\n",</td>
    <td class="lineNumber">3543</td>
    <td class="codeline">  LLVM_DEBUG(dbgs() << format("  optimized layout score: %0.2f\n",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3544</td>
    <td class="codeline">                              calcExtTspScore(NewOrder, BlockSizes, BlockCounts,</td>
    <td class="lineNumber">3544</td>
    <td class="codeline">                              calcExtTspScore(NewOrder, BlockSizes, BlockCounts,</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3545</td>
    <td class="codeline">                                              JumpCounts)));</td>
    <td class="lineNumber">3545</td>
    <td class="codeline">                                              JumpCounts)));</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3546</td>
    <td class="codeline"></td>
    <td class="lineNumber">3546</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3547</td>
    <td class="codeline">  // Assign new block order.</td>
    <td class="lineNumber">3547</td>
    <td class="codeline">  // Assign new block order.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3548</td>
    <td class="codeline">  assignBlockOrder(NewBlockOrder);</td>
    <td class="lineNumber">3548</td>
    <td class="codeline">  assignBlockOrder(NewBlockOrder);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3549</td>
    <td class="codeline">}</td>
    <td class="lineNumber">3549</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3550</td>
    <td class="codeline"></td>
    <td class="lineNumber">3550</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3551</td>
    <td class="codeline">void MachineBlockPlacement::assignBlockOrder(</td>
    <td class="lineNumber">3551</td>
    <td class="codeline">void MachineBlockPlacement::assignBlockOrder(</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3552</td>
    <td class="codeline">    const std::vector<const MachineBasicBlock *> &NewBlockOrder) {</td>
    <td class="lineNumber">3552</td>
    <td class="codeline">    const std::vector<const MachineBasicBlock *> &NewBlockOrder) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3553</td>
    <td class="codeline">  assert(F->size() == NewBlockOrder.size() && "Incorrect size of block order");</td>
    <td class="lineNumber">3553</td>
    <td class="codeline">  assert(F->size() == NewBlockOrder.size() && "Incorrect size of block order");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3554</td>
    <td class="codeline">  F->RenumberBlocks();</td>
    <td class="lineNumber">3554</td>
    <td class="codeline">  F->RenumberBlocks();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3555</td>
    <td class="codeline"></td>
    <td class="lineNumber">3555</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3556</td>
    <td class="codeline">  bool HasChanges = false;</td>
    <td class="lineNumber">3556</td>
    <td class="codeline">  bool HasChanges = false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3557</td>
    <td class="codeline">  for (size_t I = 0; I < NewBlockOrder.size(); I++) {</td>
    <td class="lineNumber">3557</td>
    <td class="codeline">  for (size_t I = 0; I < NewBlockOrder.size(); I++) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3558</td>
    <td class="codeline">    if (NewBlockOrder[I] != F->getBlockNumbered(I)) {</td>
    <td class="lineNumber">3558</td>
    <td class="codeline">    if (NewBlockOrder[I] != F->getBlockNumbered(I)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3559</td>
    <td class="codeline">      HasChanges = true;</td>
    <td class="lineNumber">3559</td>
    <td class="codeline">      HasChanges = true;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3560</td>
    <td class="codeline">      break;</td>
    <td class="lineNumber">3560</td>
    <td class="codeline">      break;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3561</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">3561</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3562</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3562</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3563</td>
    <td class="codeline">  // Stop early if the new block order is identical to the existing one.</td>
    <td class="lineNumber">3563</td>
    <td class="codeline">  // Stop early if the new block order is identical to the existing one.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3564</td>
    <td class="codeline">  if (!HasChanges)</td>
    <td class="lineNumber">3564</td>
    <td class="codeline">  if (!HasChanges)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3565</td>
    <td class="codeline">    return;</td>
    <td class="lineNumber">3565</td>
    <td class="codeline">    return;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3566</td>
    <td class="codeline"></td>
    <td class="lineNumber">3566</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3567</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 4> PrevFallThroughs(F->getNumBlockIDs());</td>
    <td class="lineNumber">3567</td>
    <td class="codeline">  SmallVector<MachineBasicBlock *, 4> PrevFallThroughs(F->getNumBlockIDs());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3568</td>
    <td class="codeline">  for (auto &MBB : *F) {</td>
    <td class="lineNumber">3568</td>
    <td class="codeline">  for (auto &MBB : *F) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3569</td>
    <td class="codeline">    PrevFallThroughs[MBB.getNumber()] = MBB.getFallThrough();</td>
    <td class="lineNumber">3569</td>
    <td class="codeline">    PrevFallThroughs[MBB.getNumber()] = MBB.getFallThrough();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3570</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3570</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3571</td>
    <td class="codeline"></td>
    <td class="lineNumber">3571</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3572</td>
    <td class="codeline">  // Sort basic blocks in the function according to the computed order.</td>
    <td class="lineNumber">3572</td>
    <td class="codeline">  // Sort basic blocks in the function according to the computed order.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3573</td>
    <td class="codeline">  DenseMap<const MachineBasicBlock *, size_t> NewIndex;</td>
    <td class="lineNumber">3573</td>
    <td class="codeline">  DenseMap<const MachineBasicBlock *, size_t> NewIndex;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3574</td>
    <td class="codeline">  for (const MachineBasicBlock *MBB : NewBlockOrder) {</td>
    <td class="lineNumber">3574</td>
    <td class="codeline">  for (const MachineBasicBlock *MBB : NewBlockOrder) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3575</td>
    <td class="codeline">    NewIndex[MBB] = NewIndex.size();</td>
    <td class="lineNumber">3575</td>
    <td class="codeline">    NewIndex[MBB] = NewIndex.size();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3576</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3576</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3577</td>
    <td class="codeline">  F->sort([&](MachineBasicBlock &L, MachineBasicBlock &R) {</td>
    <td class="lineNumber">3577</td>
    <td class="codeline">  F->sort([&](MachineBasicBlock &L, MachineBasicBlock &R) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3578</td>
    <td class="codeline">    return NewIndex[&L] < NewIndex[&R];</td>
    <td class="lineNumber">3578</td>
    <td class="codeline">    return NewIndex[&L] < NewIndex[&R];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3579</td>
    <td class="codeline">  });</td>
    <td class="lineNumber">3579</td>
    <td class="codeline">  });</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3580</td>
    <td class="codeline"></td>
    <td class="lineNumber">3580</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3581</td>
    <td class="codeline">  // Update basic block branches by inserting explicit fallthrough branches</td>
    <td class="lineNumber">3581</td>
    <td class="codeline">  // Update basic block branches by inserting explicit fallthrough branches</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3582</td>
    <td class="codeline">  // when required and re-optimize branches when possible.</td>
    <td class="lineNumber">3582</td>
    <td class="codeline">  // when required and re-optimize branches when possible.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3583</td>
    <td class="codeline">  const TargetInstrInfo *TII = F->getSubtarget().getInstrInfo();</td>
    <td class="lineNumber">3583</td>
    <td class="codeline">  const TargetInstrInfo *TII = F->getSubtarget().getInstrInfo();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3584</td>
    <td class="codeline">  SmallVector<MachineOperand, 4> Cond;</td>
    <td class="lineNumber">3584</td>
    <td class="codeline">  SmallVector<MachineOperand, 4> Cond;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3585</td>
    <td class="codeline">  for (auto &MBB : *F) {</td>
    <td class="lineNumber">3585</td>
    <td class="codeline">  for (auto &MBB : *F) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3586</td>
    <td class="codeline">    MachineFunction::iterator NextMBB = std::next(MBB.getIterator());</td>
    <td class="lineNumber">3586</td>
    <td class="codeline">    MachineFunction::iterator NextMBB = std::next(MBB.getIterator());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3587</td>
    <td class="codeline">    MachineFunction::iterator EndIt = MBB.getParent()->end();</td>
    <td class="lineNumber">3587</td>
    <td class="codeline">    MachineFunction::iterator EndIt = MBB.getParent()->end();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3588</td>
    <td class="codeline">    auto *FTMBB = PrevFallThroughs[MBB.getNumber()];</td>
    <td class="lineNumber">3588</td>
    <td class="codeline">    auto *FTMBB = PrevFallThroughs[MBB.getNumber()];</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3589</td>
    <td class="codeline">    // If this block had a fallthrough before we need an explicit unconditional</td>
    <td class="lineNumber">3589</td>
    <td class="codeline">    // If this block had a fallthrough before we need an explicit unconditional</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3590</td>
    <td class="codeline">    // branch to that block if the fallthrough block is not adjacent to the</td>
    <td class="lineNumber">3590</td>
    <td class="codeline">    // branch to that block if the fallthrough block is not adjacent to the</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3591</td>
    <td class="codeline">    // block in the new order.</td>
    <td class="lineNumber">3591</td>
    <td class="codeline">    // block in the new order.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3592</td>
    <td class="codeline">    if (FTMBB && (NextMBB == EndIt || &*NextMBB != FTMBB)) {</td>
    <td class="lineNumber">3592</td>
    <td class="codeline">    if (FTMBB && (NextMBB == EndIt || &*NextMBB != FTMBB)) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3593</td>
    <td class="codeline">      TII->insertUnconditionalBranch(MBB, FTMBB, MBB.findBranchDebugLoc());</td>
    <td class="lineNumber">3593</td>
    <td class="codeline">      TII->insertUnconditionalBranch(MBB, FTMBB, MBB.findBranchDebugLoc());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3594</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">3594</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3595</td>
    <td class="codeline"></td>
    <td class="lineNumber">3595</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3596</td>
    <td class="codeline">    // It might be possible to optimize branches by flipping the condition.</td>
    <td class="lineNumber">3596</td>
    <td class="codeline">    // It might be possible to optimize branches by flipping the condition.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3597</td>
    <td class="codeline">    Cond.clear();</td>
    <td class="lineNumber">3597</td>
    <td class="codeline">    Cond.clear();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3598</td>
    <td class="codeline">    MachineBasicBlock *TBB = nullptr, *FBB = nullptr;</td>
    <td class="lineNumber">3598</td>
    <td class="codeline">    MachineBasicBlock *TBB = nullptr, *FBB = nullptr;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3599</td>
    <td class="codeline">    if (TII->analyzeBranch(MBB, TBB, FBB, Cond))</td>
    <td class="lineNumber">3599</td>
    <td class="codeline">    if (TII->analyzeBranch(MBB, TBB, FBB, Cond))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3600</td>
    <td class="codeline">      continue;</td>
    <td class="lineNumber">3600</td>
    <td class="codeline">      continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3601</td>
    <td class="codeline">    MBB.updateTerminator(FTMBB);</td>
    <td class="lineNumber">3601</td>
    <td class="codeline">    MBB.updateTerminator(FTMBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3602</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3602</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3603</td>
    <td class="codeline"></td>
    <td class="lineNumber">3603</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3604</td>
    <td class="codeline">#ifndef NDEBUG</td>
    <td class="lineNumber">3604</td>
    <td class="codeline">#ifndef NDEBUG</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3605</td>
    <td class="codeline">  // Make sure we correctly constructed all branches.</td>
    <td class="lineNumber">3605</td>
    <td class="codeline">  // Make sure we correctly constructed all branches.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3606</td>
    <td class="codeline">  F->verify(this, "After optimized block reordering");</td>
    <td class="lineNumber">3606</td>
    <td class="codeline">  F->verify(this, "After optimized block reordering");</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3607</td>
    <td class="codeline">#endif</td>
    <td class="lineNumber">3607</td>
    <td class="codeline">#endif</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3608</td>
    <td class="codeline">}</td>
    <td class="lineNumber">3608</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3609</td>
    <td class="codeline"></td>
    <td class="lineNumber">3609</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3610</td>
    <td class="codeline">void MachineBlockPlacement::createCFGChainExtTsp() {</td>
    <td class="lineNumber">3610</td>
    <td class="codeline">void MachineBlockPlacement::createCFGChainExtTsp() {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3611</td>
    <td class="codeline">  BlockToChain.clear();</td>
    <td class="lineNumber">3611</td>
    <td class="codeline">  BlockToChain.clear();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3612</td>
    <td class="codeline">  ComputedEdges.clear();</td>
    <td class="lineNumber">3612</td>
    <td class="codeline">  ComputedEdges.clear();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3613</td>
    <td class="codeline">  ChainAllocator.DestroyAll();</td>
    <td class="lineNumber">3613</td>
    <td class="codeline">  ChainAllocator.DestroyAll();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3614</td>
    <td class="codeline"></td>
    <td class="lineNumber">3614</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3615</td>
    <td class="codeline">  MachineBasicBlock *HeadBB = &F->front();</td>
    <td class="lineNumber">3615</td>
    <td class="codeline">  MachineBasicBlock *HeadBB = &F->front();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3616</td>
    <td class="codeline">  BlockChain *FunctionChain =</td>
    <td class="lineNumber">3616</td>
    <td class="codeline">  BlockChain *FunctionChain =</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3617</td>
    <td class="codeline">      new (ChainAllocator.Allocate()) BlockChain(BlockToChain, HeadBB);</td>
    <td class="lineNumber">3617</td>
    <td class="codeline">      new (ChainAllocator.Allocate()) BlockChain(BlockToChain, HeadBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3618</td>
    <td class="codeline"></td>
    <td class="lineNumber">3618</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3619</td>
    <td class="codeline">  for (MachineBasicBlock &MBB : *F) {</td>
    <td class="lineNumber">3619</td>
    <td class="codeline">  for (MachineBasicBlock &MBB : *F) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3620</td>
    <td class="codeline">    if (HeadBB == &MBB)</td>
    <td class="lineNumber">3620</td>
    <td class="codeline">    if (HeadBB == &MBB)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3621</td>
    <td class="codeline">      continue; // Ignore head of the chain</td>
    <td class="lineNumber">3621</td>
    <td class="codeline">      continue; // Ignore head of the chain</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3622</td>
    <td class="codeline">    FunctionChain->merge(&MBB, nullptr);</td>
    <td class="lineNumber">3622</td>
    <td class="codeline">    FunctionChain->merge(&MBB, nullptr);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3623</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3623</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3624</td>
    <td class="codeline">}</td>
    <td class="lineNumber">3624</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3625</td>
    <td class="codeline"></td>
    <td class="lineNumber">3625</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3626</td>
    <td class="codeline">namespace {</td>
    <td class="lineNumber">3626</td>
    <td class="codeline">namespace {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3627</td>
    <td class="codeline"></td>
    <td class="lineNumber">3627</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3628</td>
    <td class="codeline">/// A pass to compute block placement statistics.</td>
    <td class="lineNumber">3628</td>
    <td class="codeline">/// A pass to compute block placement statistics.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3629</td>
    <td class="codeline">///</td>
    <td class="lineNumber">3629</td>
    <td class="codeline">///</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3630</td>
    <td class="codeline">/// A separate pass to compute interesting statistics for evaluating block</td>
    <td class="lineNumber">3630</td>
    <td class="codeline">/// A separate pass to compute interesting statistics for evaluating block</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3631</td>
    <td class="codeline">/// placement. This is separate from the actual placement pass so that they can</td>
    <td class="lineNumber">3631</td>
    <td class="codeline">/// placement. This is separate from the actual placement pass so that they can</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3632</td>
    <td class="codeline">/// be computed in the absence of any placement transformations or when using</td>
    <td class="lineNumber">3632</td>
    <td class="codeline">/// be computed in the absence of any placement transformations or when using</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3633</td>
    <td class="codeline">/// alternative placement strategies.</td>
    <td class="lineNumber">3633</td>
    <td class="codeline">/// alternative placement strategies.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3634</td>
    <td class="codeline">class MachineBlockPlacementStats : public MachineFunctionPass {</td>
    <td class="lineNumber">3634</td>
    <td class="codeline">class MachineBlockPlacementStats : public MachineFunctionPass {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3635</td>
    <td class="codeline">  /// A handle to the branch probability pass.</td>
    <td class="lineNumber">3635</td>
    <td class="codeline">  /// A handle to the branch probability pass.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3636</td>
    <td class="codeline">  const MachineBranchProbabilityInfo *MBPI;</td>
    <td class="lineNumber">3636</td>
    <td class="codeline">  const MachineBranchProbabilityInfo *MBPI;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3637</td>
    <td class="codeline"></td>
    <td class="lineNumber">3637</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3638</td>
    <td class="codeline">  /// A handle to the function-wide block frequency pass.</td>
    <td class="lineNumber">3638</td>
    <td class="codeline">  /// A handle to the function-wide block frequency pass.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3639</td>
    <td class="codeline">  const MachineBlockFrequencyInfo *MBFI;</td>
    <td class="lineNumber">3639</td>
    <td class="codeline">  const MachineBlockFrequencyInfo *MBFI;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3640</td>
    <td class="codeline"></td>
    <td class="lineNumber">3640</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3641</td>
    <td class="codeline">public:</td>
    <td class="lineNumber">3641</td>
    <td class="codeline">public:</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3642</td>
    <td class="codeline">  static char ID; // Pass identification, replacement for typeid</td>
    <td class="lineNumber">3642</td>
    <td class="codeline">  static char ID; // Pass identification, replacement for typeid</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3643</td>
    <td class="codeline"></td>
    <td class="lineNumber">3643</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3644</td>
    <td class="codeline">  MachineBlockPlacementStats() : MachineFunctionPass(ID) {</td>
    <td class="lineNumber">3644</td>
    <td class="codeline">  MachineBlockPlacementStats() : MachineFunctionPass(ID) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3645</td>
    <td class="codeline">    initializeMachineBlockPlacementStatsPass(*PassRegistry::getPassRegistry());</td>
    <td class="lineNumber">3645</td>
    <td class="codeline">    initializeMachineBlockPlacementStatsPass(*PassRegistry::getPassRegistry());</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3646</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3646</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3647</td>
    <td class="codeline"></td>
    <td class="lineNumber">3647</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3648</td>
    <td class="codeline">  bool runOnMachineFunction(MachineFunction &F) override;</td>
    <td class="lineNumber">3648</td>
    <td class="codeline">  bool runOnMachineFunction(MachineFunction &F) override;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3649</td>
    <td class="codeline"></td>
    <td class="lineNumber">3649</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3650</td>
    <td class="codeline">  void getAnalysisUsage(AnalysisUsage &AU) const override {</td>
    <td class="lineNumber">3650</td>
    <td class="codeline">  void getAnalysisUsage(AnalysisUsage &AU) const override {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3651</td>
    <td class="codeline">    AU.addRequired<MachineBranchProbabilityInfo>();</td>
    <td class="lineNumber">3651</td>
    <td class="codeline">    AU.addRequired<MachineBranchProbabilityInfo>();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3652</td>
    <td class="codeline">    AU.addRequired<MachineBlockFrequencyInfo>();</td>
    <td class="lineNumber">3652</td>
    <td class="codeline">    AU.addRequired<MachineBlockFrequencyInfo>();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3653</td>
    <td class="codeline">    AU.setPreservesAll();</td>
    <td class="lineNumber">3653</td>
    <td class="codeline">    AU.setPreservesAll();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3654</td>
    <td class="codeline">    MachineFunctionPass::getAnalysisUsage(AU);</td>
    <td class="lineNumber">3654</td>
    <td class="codeline">    MachineFunctionPass::getAnalysisUsage(AU);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3655</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3655</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3656</td>
    <td class="codeline">};</td>
    <td class="lineNumber">3656</td>
    <td class="codeline">};</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3657</td>
    <td class="codeline"></td>
    <td class="lineNumber">3657</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3658</td>
    <td class="codeline">} // end anonymous namespace</td>
    <td class="lineNumber">3658</td>
    <td class="codeline">} // end anonymous namespace</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3659</td>
    <td class="codeline"></td>
    <td class="lineNumber">3659</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3660</td>
    <td class="codeline">char MachineBlockPlacementStats::ID = 0;</td>
    <td class="lineNumber">3660</td>
    <td class="codeline">char MachineBlockPlacementStats::ID = 0;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3661</td>
    <td class="codeline"></td>
    <td class="lineNumber">3661</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3662</td>
    <td class="codeline">char &llvm::MachineBlockPlacementStatsID = MachineBlockPlacementStats::ID;</td>
    <td class="lineNumber">3662</td>
    <td class="codeline">char &llvm::MachineBlockPlacementStatsID = MachineBlockPlacementStats::ID;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3663</td>
    <td class="codeline"></td>
    <td class="lineNumber">3663</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3664</td>
    <td class="codeline">INITIALIZE_PASS_BEGIN(MachineBlockPlacementStats, "block-placement-stats",</td>
    <td class="lineNumber">3664</td>
    <td class="codeline">INITIALIZE_PASS_BEGIN(MachineBlockPlacementStats, "block-placement-stats",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3665</td>
    <td class="codeline">                      "Basic Block Placement Stats", false, false)</td>
    <td class="lineNumber">3665</td>
    <td class="codeline">                      "Basic Block Placement Stats", false, false)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3666</td>
    <td class="codeline">INITIALIZE_PASS_DEPENDENCY(MachineBranchProbabilityInfo)</td>
    <td class="lineNumber">3666</td>
    <td class="codeline">INITIALIZE_PASS_DEPENDENCY(MachineBranchProbabilityInfo)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3667</td>
    <td class="codeline">INITIALIZE_PASS_DEPENDENCY(MachineBlockFrequencyInfo)</td>
    <td class="lineNumber">3667</td>
    <td class="codeline">INITIALIZE_PASS_DEPENDENCY(MachineBlockFrequencyInfo)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3668</td>
    <td class="codeline">INITIALIZE_PASS_END(MachineBlockPlacementStats, "block-placement-stats",</td>
    <td class="lineNumber">3668</td>
    <td class="codeline">INITIALIZE_PASS_END(MachineBlockPlacementStats, "block-placement-stats",</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3669</td>
    <td class="codeline">                    "Basic Block Placement Stats", false, false)</td>
    <td class="lineNumber">3669</td>
    <td class="codeline">                    "Basic Block Placement Stats", false, false)</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3670</td>
    <td class="codeline"></td>
    <td class="lineNumber">3670</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3671</td>
    <td class="codeline">bool MachineBlockPlacementStats::runOnMachineFunction(MachineFunction &F) {</td>
    <td class="lineNumber">3671</td>
    <td class="codeline">bool MachineBlockPlacementStats::runOnMachineFunction(MachineFunction &F) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3672</td>
    <td class="codeline">  // Check for single-block functions and skip them.</td>
    <td class="lineNumber">3672</td>
    <td class="codeline">  // Check for single-block functions and skip them.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3673</td>
    <td class="codeline">  if (std::next(F.begin()) == F.end())</td>
    <td class="lineNumber">3673</td>
    <td class="codeline">  if (std::next(F.begin()) == F.end())</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3674</td>
    <td class="codeline">    return false;</td>
    <td class="lineNumber">3674</td>
    <td class="codeline">    return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3675</td>
    <td class="codeline"></td>
    <td class="lineNumber">3675</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3676</td>
    <td class="codeline">  if (!isFunctionInPrintList(F.getName()))</td>
    <td class="lineNumber">3676</td>
    <td class="codeline">  if (!isFunctionInPrintList(F.getName()))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3677</td>
    <td class="codeline">    return false;</td>
    <td class="lineNumber">3677</td>
    <td class="codeline">    return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3678</td>
    <td class="codeline"></td>
    <td class="lineNumber">3678</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3679</td>
    <td class="codeline">  MBPI = &getAnalysis<MachineBranchProbabilityInfo>();</td>
    <td class="lineNumber">3679</td>
    <td class="codeline">  MBPI = &getAnalysis<MachineBranchProbabilityInfo>();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3680</td>
    <td class="codeline">  MBFI = &getAnalysis<MachineBlockFrequencyInfo>();</td>
    <td class="lineNumber">3680</td>
    <td class="codeline">  MBFI = &getAnalysis<MachineBlockFrequencyInfo>();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3681</td>
    <td class="codeline"></td>
    <td class="lineNumber">3681</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3682</td>
    <td class="codeline">  for (MachineBasicBlock &MBB : F) {</td>
    <td class="lineNumber">3682</td>
    <td class="codeline">  for (MachineBasicBlock &MBB : F) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3683</td>
    <td class="codeline">    BlockFrequency BlockFreq = MBFI->getBlockFreq(&MBB);</td>
    <td class="lineNumber">3683</td>
    <td class="codeline">    BlockFrequency BlockFreq = MBFI->getBlockFreq(&MBB);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3684</td>
    <td class="codeline">    Statistic &NumBranches =</td>
    <td class="lineNumber">3684</td>
    <td class="codeline">    Statistic &NumBranches =</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3685</td>
    <td class="codeline">        (MBB.succ_size() > 1) ? NumCondBranches : NumUncondBranches;</td>
    <td class="lineNumber">3685</td>
    <td class="codeline">        (MBB.succ_size() > 1) ? NumCondBranches : NumUncondBranches;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3686</td>
    <td class="codeline">    Statistic &BranchTakenFreq =</td>
    <td class="lineNumber">3686</td>
    <td class="codeline">    Statistic &BranchTakenFreq =</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3687</td>
    <td class="codeline">        (MBB.succ_size() > 1) ? CondBranchTakenFreq : UncondBranchTakenFreq;</td>
    <td class="lineNumber">3687</td>
    <td class="codeline">        (MBB.succ_size() > 1) ? CondBranchTakenFreq : UncondBranchTakenFreq;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3688</td>
    <td class="codeline">    for (MachineBasicBlock *Succ : MBB.successors()) {</td>
    <td class="lineNumber">3688</td>
    <td class="codeline">    for (MachineBasicBlock *Succ : MBB.successors()) {</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3689</td>
    <td class="codeline">      // Skip if this successor is a fallthrough.</td>
    <td class="lineNumber">3689</td>
    <td class="codeline">      // Skip if this successor is a fallthrough.</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3690</td>
    <td class="codeline">      if (MBB.isLayoutSuccessor(Succ))</td>
    <td class="lineNumber">3690</td>
    <td class="codeline">      if (MBB.isLayoutSuccessor(Succ))</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3691</td>
    <td class="codeline">        continue;</td>
    <td class="lineNumber">3691</td>
    <td class="codeline">        continue;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3692</td>
    <td class="codeline"></td>
    <td class="lineNumber">3692</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3693</td>
    <td class="codeline">      BlockFrequency EdgeFreq =</td>
    <td class="lineNumber">3693</td>
    <td class="codeline">      BlockFrequency EdgeFreq =</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3694</td>
    <td class="codeline">          BlockFreq * MBPI->getEdgeProbability(&MBB, Succ);</td>
    <td class="lineNumber">3694</td>
    <td class="codeline">          BlockFreq * MBPI->getEdgeProbability(&MBB, Succ);</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3695</td>
    <td class="codeline">      ++NumBranches;</td>
    <td class="lineNumber">3695</td>
    <td class="codeline">      ++NumBranches;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3696</td>
    <td class="codeline">      BranchTakenFreq += EdgeFreq.getFrequency();</td>
    <td class="lineNumber">3696</td>
    <td class="codeline">      BranchTakenFreq += EdgeFreq.getFrequency();</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3697</td>
    <td class="codeline">    }</td>
    <td class="lineNumber">3697</td>
    <td class="codeline">    }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3698</td>
    <td class="codeline">  }</td>
    <td class="lineNumber">3698</td>
    <td class="codeline">  }</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3699</td>
    <td class="codeline"></td>
    <td class="lineNumber">3699</td>
    <td class="codeline"></td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3700</td>
    <td class="codeline">  return false;</td>
    <td class="lineNumber">3700</td>
    <td class="codeline">  return false;</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3701</td>
    <td class="codeline">}</td>
    <td class="lineNumber">3701</td>
    <td class="codeline">}</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3702</td>
    <td class="codeline"></td>
    <td class="lineNumber">3702</td>
    <td class="codeline"></td>
  </tr>
</table>
    </div>
    <button class="collapsible" type="button">Open Side By Side Comparison</button>
    <div class="content" style="display: none;">
      <hr />
      <h3 class="subheader">Side By Side Comparison</h3>
      <table class="mainTable">
  <tr class="mainTr">
    <th class="mainTh">Line Number</th>
    <th class="mainTh">
      <span class="badge">../DebugInfoTest/example_mips_dbg.ll</span>
    </th>
    <th class="mainTh">Hit count</th>
    <th class="mainTh">Line Number</th>
    <th class="mainTh">
      <span class="badge">../DebugInfoTest/example_mips.ll</span>
    </th>
    <th class="mainTh">Hit count</th>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1</td>
    <td class="codeLine">//===- MachineBlockPlacement.cpp - Basic Block Code Layout optimization ---===//</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1</td>
    <td class="codeLine">//===- MachineBlockPlacement.cpp - Basic Block Code Layout optimization ---===//</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3</td>
    <td class="codeLine">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3</td>
    <td class="codeLine">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">4</td>
    <td class="codeLine">// See https://llvm.org/LICENSE.txt for license information.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">4</td>
    <td class="codeLine">// See https://llvm.org/LICENSE.txt for license information.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">5</td>
    <td class="codeLine">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">5</td>
    <td class="codeLine">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">6</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">6</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">7</td>
    <td class="codeLine">//===----------------------------------------------------------------------===//</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">7</td>
    <td class="codeLine">//===----------------------------------------------------------------------===//</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">8</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">8</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">9</td>
    <td class="codeLine">// This file implements basic block placement transformations using the CFG</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">9</td>
    <td class="codeLine">// This file implements basic block placement transformations using the CFG</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">10</td>
    <td class="codeLine">// structure and branch probability estimates.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">10</td>
    <td class="codeLine">// structure and branch probability estimates.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">11</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">11</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">12</td>
    <td class="codeLine">// The pass strives to preserve the structure of the CFG (that is, retain</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">12</td>
    <td class="codeLine">// The pass strives to preserve the structure of the CFG (that is, retain</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">13</td>
    <td class="codeLine">// a topological ordering of basic blocks) in the absence of a *strong* signal</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">13</td>
    <td class="codeLine">// a topological ordering of basic blocks) in the absence of a *strong* signal</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">14</td>
    <td class="codeLine">// to the contrary from probabilities. However, within the CFG structure, it</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">14</td>
    <td class="codeLine">// to the contrary from probabilities. However, within the CFG structure, it</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">15</td>
    <td class="codeLine">// attempts to choose an ordering which favors placing more likely sequences of</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">15</td>
    <td class="codeLine">// attempts to choose an ordering which favors placing more likely sequences of</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">16</td>
    <td class="codeLine">// blocks adjacent to each other.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">16</td>
    <td class="codeLine">// blocks adjacent to each other.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">17</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">17</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">18</td>
    <td class="codeLine">// The algorithm works from the inner-most loop within a function outward, and</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">18</td>
    <td class="codeLine">// The algorithm works from the inner-most loop within a function outward, and</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">19</td>
    <td class="codeLine">// at each stage walks through the basic blocks, trying to coalesce them into</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">19</td>
    <td class="codeLine">// at each stage walks through the basic blocks, trying to coalesce them into</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">20</td>
    <td class="codeLine">// sequential chains where allowed by the CFG (or demanded by heavy</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">20</td>
    <td class="codeLine">// sequential chains where allowed by the CFG (or demanded by heavy</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">21</td>
    <td class="codeLine">// probabilities). Finally, it walks the blocks in topological order, and the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">21</td>
    <td class="codeLine">// probabilities). Finally, it walks the blocks in topological order, and the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">22</td>
    <td class="codeLine">// first time it reaches a chain of basic blocks, it schedules them in the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">22</td>
    <td class="codeLine">// first time it reaches a chain of basic blocks, it schedules them in the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">23</td>
    <td class="codeLine">// function in-order.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">23</td>
    <td class="codeLine">// function in-order.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">24</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">24</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">25</td>
    <td class="codeLine">//===----------------------------------------------------------------------===//</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">25</td>
    <td class="codeLine">//===----------------------------------------------------------------------===//</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">26</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">26</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">27</td>
    <td class="codeLine">#include "BranchFolding.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">27</td>
    <td class="codeLine">#include "BranchFolding.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">28</td>
    <td class="codeLine">#include "llvm/ADT/ArrayRef.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">28</td>
    <td class="codeLine">#include "llvm/ADT/ArrayRef.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">29</td>
    <td class="codeLine">#include "llvm/ADT/DenseMap.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">29</td>
    <td class="codeLine">#include "llvm/ADT/DenseMap.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">30</td>
    <td class="codeLine">#include "llvm/ADT/STLExtras.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">30</td>
    <td class="codeLine">#include "llvm/ADT/STLExtras.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">31</td>
    <td class="codeLine">#include "llvm/ADT/SetVector.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">31</td>
    <td class="codeLine">#include "llvm/ADT/SetVector.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">32</td>
    <td class="codeLine">#include "llvm/ADT/SmallPtrSet.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">32</td>
    <td class="codeLine">#include "llvm/ADT/SmallPtrSet.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">33</td>
    <td class="codeLine">#include "llvm/ADT/SmallVector.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">33</td>
    <td class="codeLine">#include "llvm/ADT/SmallVector.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">34</td>
    <td class="codeLine">#include "llvm/ADT/Statistic.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">34</td>
    <td class="codeLine">#include "llvm/ADT/Statistic.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">35</td>
    <td class="codeLine">#include "llvm/Analysis/BlockFrequencyInfoImpl.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">35</td>
    <td class="codeLine">#include "llvm/Analysis/BlockFrequencyInfoImpl.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">36</td>
    <td class="codeLine">#include "llvm/Analysis/ProfileSummaryInfo.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">36</td>
    <td class="codeLine">#include "llvm/Analysis/ProfileSummaryInfo.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">37</td>
    <td class="codeLine">#include "llvm/CodeGen/MBFIWrapper.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">37</td>
    <td class="codeLine">#include "llvm/CodeGen/MBFIWrapper.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">38</td>
    <td class="codeLine">#include "llvm/CodeGen/MachineBasicBlock.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">38</td>
    <td class="codeLine">#include "llvm/CodeGen/MachineBasicBlock.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">39</td>
    <td class="codeLine">#include "llvm/CodeGen/MachineBlockFrequencyInfo.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">39</td>
    <td class="codeLine">#include "llvm/CodeGen/MachineBlockFrequencyInfo.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">40</td>
    <td class="codeLine">#include "llvm/CodeGen/MachineBranchProbabilityInfo.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">40</td>
    <td class="codeLine">#include "llvm/CodeGen/MachineBranchProbabilityInfo.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">41</td>
    <td class="codeLine">#include "llvm/CodeGen/MachineFunction.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">41</td>
    <td class="codeLine">#include "llvm/CodeGen/MachineFunction.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">42</td>
    <td class="codeLine">#include "llvm/CodeGen/MachineFunctionPass.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">42</td>
    <td class="codeLine">#include "llvm/CodeGen/MachineFunctionPass.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">43</td>
    <td class="codeLine">#include "llvm/CodeGen/MachineLoopInfo.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">43</td>
    <td class="codeLine">#include "llvm/CodeGen/MachineLoopInfo.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">44</td>
    <td class="codeLine">#include "llvm/CodeGen/MachinePostDominators.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">44</td>
    <td class="codeLine">#include "llvm/CodeGen/MachinePostDominators.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">45</td>
    <td class="codeLine">#include "llvm/CodeGen/MachineSizeOpts.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">45</td>
    <td class="codeLine">#include "llvm/CodeGen/MachineSizeOpts.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">46</td>
    <td class="codeLine">#include "llvm/CodeGen/TailDuplicator.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">46</td>
    <td class="codeLine">#include "llvm/CodeGen/TailDuplicator.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">47</td>
    <td class="codeLine">#include "llvm/CodeGen/TargetInstrInfo.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">47</td>
    <td class="codeLine">#include "llvm/CodeGen/TargetInstrInfo.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">48</td>
    <td class="codeLine">#include "llvm/CodeGen/TargetLowering.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">48</td>
    <td class="codeLine">#include "llvm/CodeGen/TargetLowering.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">49</td>
    <td class="codeLine">#include "llvm/CodeGen/TargetPassConfig.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">49</td>
    <td class="codeLine">#include "llvm/CodeGen/TargetPassConfig.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">50</td>
    <td class="codeLine">#include "llvm/CodeGen/TargetSubtargetInfo.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">50</td>
    <td class="codeLine">#include "llvm/CodeGen/TargetSubtargetInfo.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">51</td>
    <td class="codeLine">#include "llvm/IR/DebugLoc.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">51</td>
    <td class="codeLine">#include "llvm/IR/DebugLoc.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">52</td>
    <td class="codeLine">#include "llvm/IR/Function.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">52</td>
    <td class="codeLine">#include "llvm/IR/Function.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">53</td>
    <td class="codeLine">#include "llvm/IR/PrintPasses.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">53</td>
    <td class="codeLine">#include "llvm/IR/PrintPasses.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">54</td>
    <td class="codeLine">#include "llvm/InitializePasses.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">54</td>
    <td class="codeLine">#include "llvm/InitializePasses.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">55</td>
    <td class="codeLine">#include "llvm/Pass.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">55</td>
    <td class="codeLine">#include "llvm/Pass.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">56</td>
    <td class="codeLine">#include "llvm/Support/Allocator.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">56</td>
    <td class="codeLine">#include "llvm/Support/Allocator.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">57</td>
    <td class="codeLine">#include "llvm/Support/BlockFrequency.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">57</td>
    <td class="codeLine">#include "llvm/Support/BlockFrequency.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">58</td>
    <td class="codeLine">#include "llvm/Support/BranchProbability.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">58</td>
    <td class="codeLine">#include "llvm/Support/BranchProbability.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">59</td>
    <td class="codeLine">#include "llvm/Support/CodeGen.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">59</td>
    <td class="codeLine">#include "llvm/Support/CodeGen.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">60</td>
    <td class="codeLine">#include "llvm/Support/CommandLine.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">60</td>
    <td class="codeLine">#include "llvm/Support/CommandLine.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">61</td>
    <td class="codeLine">#include "llvm/Support/Compiler.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">61</td>
    <td class="codeLine">#include "llvm/Support/Compiler.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">62</td>
    <td class="codeLine">#include "llvm/Support/Debug.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">62</td>
    <td class="codeLine">#include "llvm/Support/Debug.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">63</td>
    <td class="codeLine">#include "llvm/Support/raw_ostream.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">63</td>
    <td class="codeLine">#include "llvm/Support/raw_ostream.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">64</td>
    <td class="codeLine">#include "llvm/Target/TargetMachine.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">64</td>
    <td class="codeLine">#include "llvm/Target/TargetMachine.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">65</td>
    <td class="codeLine">#include "llvm/Transforms/Utils/CodeLayout.h"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">65</td>
    <td class="codeLine">#include "llvm/Transforms/Utils/CodeLayout.h"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">66</td>
    <td class="codeLine">#include <algorithm></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">66</td>
    <td class="codeLine">#include <algorithm></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">67</td>
    <td class="codeLine">#include <cassert></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">67</td>
    <td class="codeLine">#include <cassert></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">68</td>
    <td class="codeLine">#include <cstdint></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">68</td>
    <td class="codeLine">#include <cstdint></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">69</td>
    <td class="codeLine">#include <iterator></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">69</td>
    <td class="codeLine">#include <iterator></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">70</td>
    <td class="codeLine">#include <memory></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">70</td>
    <td class="codeLine">#include <memory></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">71</td>
    <td class="codeLine">#include <string></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">71</td>
    <td class="codeLine">#include <string></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">72</td>
    <td class="codeLine">#include <tuple></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">72</td>
    <td class="codeLine">#include <tuple></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">73</td>
    <td class="codeLine">#include <utility></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">73</td>
    <td class="codeLine">#include <utility></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">74</td>
    <td class="codeLine">#include <vector></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">74</td>
    <td class="codeLine">#include <vector></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">75</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">75</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">76</td>
    <td class="codeLine">using namespace llvm;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">76</td>
    <td class="codeLine">using namespace llvm;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">77</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">77</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">78</td>
    <td class="codeLine">#define DEBUG_TYPE "block-placement"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">78</td>
    <td class="codeLine">#define DEBUG_TYPE "block-placement"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">79</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">79</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">80</td>
    <td class="codeLine">STATISTIC(NumCondBranches, "Number of conditional branches");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">80</td>
    <td class="codeLine">STATISTIC(NumCondBranches, "Number of conditional branches");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">81</td>
    <td class="codeLine">STATISTIC(NumUncondBranches, "Number of unconditional branches");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">81</td>
    <td class="codeLine">STATISTIC(NumUncondBranches, "Number of unconditional branches");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">82</td>
    <td class="codeLine">STATISTIC(CondBranchTakenFreq,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">82</td>
    <td class="codeLine">STATISTIC(CondBranchTakenFreq,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">83</td>
    <td class="codeLine">          "Potential frequency of taking conditional branches");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">83</td>
    <td class="codeLine">          "Potential frequency of taking conditional branches");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">84</td>
    <td class="codeLine">STATISTIC(UncondBranchTakenFreq,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">84</td>
    <td class="codeLine">STATISTIC(UncondBranchTakenFreq,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">85</td>
    <td class="codeLine">          "Potential frequency of taking unconditional branches");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">85</td>
    <td class="codeLine">          "Potential frequency of taking unconditional branches");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">86</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">86</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">87</td>
    <td class="codeLine">static cl::opt<unsigned> AlignAllBlock(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">87</td>
    <td class="codeLine">static cl::opt<unsigned> AlignAllBlock(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">88</td>
    <td class="codeLine">    "align-all-blocks",</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">88</td>
    <td class="codeLine">    "align-all-blocks",</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">89</td>
    <td class="codeLine">    cl::desc("Force the alignment of all blocks in the function in log2 format "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">89</td>
    <td class="codeLine">    cl::desc("Force the alignment of all blocks in the function in log2 format "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">90</td>
    <td class="codeLine">             "(e.g 4 means align on 16B boundaries)."),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">90</td>
    <td class="codeLine">             "(e.g 4 means align on 16B boundaries)."),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">91</td>
    <td class="codeLine">    cl::init(0), cl::Hidden);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">91</td>
    <td class="codeLine">    cl::init(0), cl::Hidden);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">92</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">92</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">93</td>
    <td class="codeLine">static cl::opt<unsigned> AlignAllNonFallThruBlocks(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">93</td>
    <td class="codeLine">static cl::opt<unsigned> AlignAllNonFallThruBlocks(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">94</td>
    <td class="codeLine">    "align-all-nofallthru-blocks",</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">94</td>
    <td class="codeLine">    "align-all-nofallthru-blocks",</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">95</td>
    <td class="codeLine">    cl::desc("Force the alignment of all blocks that have no fall-through "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">95</td>
    <td class="codeLine">    cl::desc("Force the alignment of all blocks that have no fall-through "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">96</td>
    <td class="codeLine">             "predecessors (i.e. don't add nops that are executed). In log2 "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">96</td>
    <td class="codeLine">             "predecessors (i.e. don't add nops that are executed). In log2 "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">97</td>
    <td class="codeLine">             "format (e.g 4 means align on 16B boundaries)."),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">97</td>
    <td class="codeLine">             "format (e.g 4 means align on 16B boundaries)."),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">98</td>
    <td class="codeLine">    cl::init(0), cl::Hidden);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">98</td>
    <td class="codeLine">    cl::init(0), cl::Hidden);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">99</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">99</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">100</td>
    <td class="codeLine">static cl::opt<unsigned> MaxBytesForAlignmentOverride(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">100</td>
    <td class="codeLine">static cl::opt<unsigned> MaxBytesForAlignmentOverride(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">101</td>
    <td class="codeLine">    "max-bytes-for-alignment",</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">101</td>
    <td class="codeLine">    "max-bytes-for-alignment",</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">102</td>
    <td class="codeLine">    cl::desc("Forces the maximum bytes allowed to be emitted when padding for "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">102</td>
    <td class="codeLine">    cl::desc("Forces the maximum bytes allowed to be emitted when padding for "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">103</td>
    <td class="codeLine">             "alignment"),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">103</td>
    <td class="codeLine">             "alignment"),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">104</td>
    <td class="codeLine">    cl::init(0), cl::Hidden);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">104</td>
    <td class="codeLine">    cl::init(0), cl::Hidden);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">105</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">105</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">106</td>
    <td class="codeLine">// FIXME: Find a good default for this flag and remove the flag.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">106</td>
    <td class="codeLine">// FIXME: Find a good default for this flag and remove the flag.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">107</td>
    <td class="codeLine">static cl::opt<unsigned> ExitBlockBias(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">107</td>
    <td class="codeLine">static cl::opt<unsigned> ExitBlockBias(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">108</td>
    <td class="codeLine">    "block-placement-exit-block-bias",</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">108</td>
    <td class="codeLine">    "block-placement-exit-block-bias",</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">109</td>
    <td class="codeLine">    cl::desc("Block frequency percentage a loop exit block needs "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">109</td>
    <td class="codeLine">    cl::desc("Block frequency percentage a loop exit block needs "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">110</td>
    <td class="codeLine">             "over the original exit to be considered the new exit."),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">110</td>
    <td class="codeLine">             "over the original exit to be considered the new exit."),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">111</td>
    <td class="codeLine">    cl::init(0), cl::Hidden);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">111</td>
    <td class="codeLine">    cl::init(0), cl::Hidden);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">112</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">112</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">113</td>
    <td class="codeLine">// Definition:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">113</td>
    <td class="codeLine">// Definition:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">114</td>
    <td class="codeLine">// - Outlining: placement of a basic block outside the chain or hot path.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">114</td>
    <td class="codeLine">// - Outlining: placement of a basic block outside the chain or hot path.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">115</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">115</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">116</td>
    <td class="codeLine">static cl::opt<unsigned> LoopToColdBlockRatio(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">116</td>
    <td class="codeLine">static cl::opt<unsigned> LoopToColdBlockRatio(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">117</td>
    <td class="codeLine">    "loop-to-cold-block-ratio",</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">117</td>
    <td class="codeLine">    "loop-to-cold-block-ratio",</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">118</td>
    <td class="codeLine">    cl::desc("Outline loop blocks from loop chain if (frequency of loop) / "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">118</td>
    <td class="codeLine">    cl::desc("Outline loop blocks from loop chain if (frequency of loop) / "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">119</td>
    <td class="codeLine">             "(frequency of block) is greater than this ratio"),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">119</td>
    <td class="codeLine">             "(frequency of block) is greater than this ratio"),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">120</td>
    <td class="codeLine">    cl::init(5), cl::Hidden);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">120</td>
    <td class="codeLine">    cl::init(5), cl::Hidden);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">121</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">121</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">122</td>
    <td class="codeLine">static cl::opt<bool> ForceLoopColdBlock(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">122</td>
    <td class="codeLine">static cl::opt<bool> ForceLoopColdBlock(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">123</td>
    <td class="codeLine">    "force-loop-cold-block",</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">123</td>
    <td class="codeLine">    "force-loop-cold-block",</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">124</td>
    <td class="codeLine">    cl::desc("Force outlining cold blocks from loops."),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">124</td>
    <td class="codeLine">    cl::desc("Force outlining cold blocks from loops."),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">125</td>
    <td class="codeLine">    cl::init(false), cl::Hidden);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">125</td>
    <td class="codeLine">    cl::init(false), cl::Hidden);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">126</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">126</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">127</td>
    <td class="codeLine">static cl::opt<bool></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">127</td>
    <td class="codeLine">static cl::opt<bool></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">128</td>
    <td class="codeLine">    PreciseRotationCost("precise-rotation-cost",</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">128</td>
    <td class="codeLine">    PreciseRotationCost("precise-rotation-cost",</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">129</td>
    <td class="codeLine">                        cl::desc("Model the cost of loop rotation more "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">129</td>
    <td class="codeLine">                        cl::desc("Model the cost of loop rotation more "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">130</td>
    <td class="codeLine">                                 "precisely by using profile data."),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">130</td>
    <td class="codeLine">                                 "precisely by using profile data."),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">131</td>
    <td class="codeLine">                        cl::init(false), cl::Hidden);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">131</td>
    <td class="codeLine">                        cl::init(false), cl::Hidden);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">132</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">132</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">133</td>
    <td class="codeLine">static cl::opt<bool></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">133</td>
    <td class="codeLine">static cl::opt<bool></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">134</td>
    <td class="codeLine">    ForcePreciseRotationCost("force-precise-rotation-cost",</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">134</td>
    <td class="codeLine">    ForcePreciseRotationCost("force-precise-rotation-cost",</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">135</td>
    <td class="codeLine">                             cl::desc("Force the use of precise cost "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">135</td>
    <td class="codeLine">                             cl::desc("Force the use of precise cost "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">136</td>
    <td class="codeLine">                                      "loop rotation strategy."),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">136</td>
    <td class="codeLine">                                      "loop rotation strategy."),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">137</td>
    <td class="codeLine">                             cl::init(false), cl::Hidden);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">137</td>
    <td class="codeLine">                             cl::init(false), cl::Hidden);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">138</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">138</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">139</td>
    <td class="codeLine">static cl::opt<unsigned> MisfetchCost(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">139</td>
    <td class="codeLine">static cl::opt<unsigned> MisfetchCost(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">140</td>
    <td class="codeLine">    "misfetch-cost",</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">140</td>
    <td class="codeLine">    "misfetch-cost",</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">141</td>
    <td class="codeLine">    cl::desc("Cost that models the probabilistic risk of an instruction "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">141</td>
    <td class="codeLine">    cl::desc("Cost that models the probabilistic risk of an instruction "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">142</td>
    <td class="codeLine">             "misfetch due to a jump comparing to falling through, whose cost "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">142</td>
    <td class="codeLine">             "misfetch due to a jump comparing to falling through, whose cost "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">143</td>
    <td class="codeLine">             "is zero."),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">143</td>
    <td class="codeLine">             "is zero."),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">144</td>
    <td class="codeLine">    cl::init(1), cl::Hidden);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">144</td>
    <td class="codeLine">    cl::init(1), cl::Hidden);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">145</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">145</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">146</td>
    <td class="codeLine">static cl::opt<unsigned> JumpInstCost("jump-inst-cost",</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">146</td>
    <td class="codeLine">static cl::opt<unsigned> JumpInstCost("jump-inst-cost",</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">147</td>
    <td class="codeLine">                                      cl::desc("Cost of jump instructions."),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">147</td>
    <td class="codeLine">                                      cl::desc("Cost of jump instructions."),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">148</td>
    <td class="codeLine">                                      cl::init(1), cl::Hidden);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">148</td>
    <td class="codeLine">                                      cl::init(1), cl::Hidden);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">149</td>
    <td class="codeLine">static cl::opt<bool></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">149</td>
    <td class="codeLine">static cl::opt<bool></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">150</td>
    <td class="codeLine">TailDupPlacement("tail-dup-placement",</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">150</td>
    <td class="codeLine">TailDupPlacement("tail-dup-placement",</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">151</td>
    <td class="codeLine">              cl::desc("Perform tail duplication during placement. "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">151</td>
    <td class="codeLine">              cl::desc("Perform tail duplication during placement. "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">152</td>
    <td class="codeLine">                       "Creates more fallthrough opportunites in "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">152</td>
    <td class="codeLine">                       "Creates more fallthrough opportunites in "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">153</td>
    <td class="codeLine">                       "outline branches."),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">153</td>
    <td class="codeLine">                       "outline branches."),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">154</td>
    <td class="codeLine">              cl::init(true), cl::Hidden);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">154</td>
    <td class="codeLine">              cl::init(true), cl::Hidden);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">155</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">155</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">156</td>
    <td class="codeLine">static cl::opt<bool></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">156</td>
    <td class="codeLine">static cl::opt<bool></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">157</td>
    <td class="codeLine">BranchFoldPlacement("branch-fold-placement",</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">157</td>
    <td class="codeLine">BranchFoldPlacement("branch-fold-placement",</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">158</td>
    <td class="codeLine">              cl::desc("Perform branch folding during placement. "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">158</td>
    <td class="codeLine">              cl::desc("Perform branch folding during placement. "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">159</td>
    <td class="codeLine">                       "Reduces code size."),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">159</td>
    <td class="codeLine">                       "Reduces code size."),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">160</td>
    <td class="codeLine">              cl::init(true), cl::Hidden);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">160</td>
    <td class="codeLine">              cl::init(true), cl::Hidden);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">161</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">161</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">162</td>
    <td class="codeLine">// Heuristic for tail duplication.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">162</td>
    <td class="codeLine">// Heuristic for tail duplication.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">163</td>
    <td class="codeLine">static cl::opt<unsigned> TailDupPlacementThreshold(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">163</td>
    <td class="codeLine">static cl::opt<unsigned> TailDupPlacementThreshold(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">164</td>
    <td class="codeLine">    "tail-dup-placement-threshold",</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">164</td>
    <td class="codeLine">    "tail-dup-placement-threshold",</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">165</td>
    <td class="codeLine">    cl::desc("Instruction cutoff for tail duplication during layout. "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">165</td>
    <td class="codeLine">    cl::desc("Instruction cutoff for tail duplication during layout. "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">166</td>
    <td class="codeLine">             "Tail merging during layout is forced to have a threshold "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">166</td>
    <td class="codeLine">             "Tail merging during layout is forced to have a threshold "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">167</td>
    <td class="codeLine">             "that won't conflict."), cl::init(2),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">167</td>
    <td class="codeLine">             "that won't conflict."), cl::init(2),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">168</td>
    <td class="codeLine">    cl::Hidden);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">168</td>
    <td class="codeLine">    cl::Hidden);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">169</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">169</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">170</td>
    <td class="codeLine">// Heuristic for aggressive tail duplication.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">170</td>
    <td class="codeLine">// Heuristic for aggressive tail duplication.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">171</td>
    <td class="codeLine">static cl::opt<unsigned> TailDupPlacementAggressiveThreshold(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">171</td>
    <td class="codeLine">static cl::opt<unsigned> TailDupPlacementAggressiveThreshold(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">172</td>
    <td class="codeLine">    "tail-dup-placement-aggressive-threshold",</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">172</td>
    <td class="codeLine">    "tail-dup-placement-aggressive-threshold",</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">173</td>
    <td class="codeLine">    cl::desc("Instruction cutoff for aggressive tail duplication during "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">173</td>
    <td class="codeLine">    cl::desc("Instruction cutoff for aggressive tail duplication during "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">174</td>
    <td class="codeLine">             "layout. Used at -O3. Tail merging during layout is forced to "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">174</td>
    <td class="codeLine">             "layout. Used at -O3. Tail merging during layout is forced to "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">175</td>
    <td class="codeLine">             "have a threshold that won't conflict."), cl::init(4),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">175</td>
    <td class="codeLine">             "have a threshold that won't conflict."), cl::init(4),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">176</td>
    <td class="codeLine">    cl::Hidden);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">176</td>
    <td class="codeLine">    cl::Hidden);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">177</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">177</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">178</td>
    <td class="codeLine">// Heuristic for tail duplication.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">178</td>
    <td class="codeLine">// Heuristic for tail duplication.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">179</td>
    <td class="codeLine">static cl::opt<unsigned> TailDupPlacementPenalty(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">179</td>
    <td class="codeLine">static cl::opt<unsigned> TailDupPlacementPenalty(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">180</td>
    <td class="codeLine">    "tail-dup-placement-penalty",</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">180</td>
    <td class="codeLine">    "tail-dup-placement-penalty",</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">181</td>
    <td class="codeLine">    cl::desc("Cost penalty for blocks that can avoid breaking CFG by copying. "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">181</td>
    <td class="codeLine">    cl::desc("Cost penalty for blocks that can avoid breaking CFG by copying. "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">182</td>
    <td class="codeLine">             "Copying can increase fallthrough, but it also increases icache "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">182</td>
    <td class="codeLine">             "Copying can increase fallthrough, but it also increases icache "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">183</td>
    <td class="codeLine">             "pressure. This parameter controls the penalty to account for that. "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">183</td>
    <td class="codeLine">             "pressure. This parameter controls the penalty to account for that. "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">184</td>
    <td class="codeLine">             "Percent as integer."),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">184</td>
    <td class="codeLine">             "Percent as integer."),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">185</td>
    <td class="codeLine">    cl::init(2),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">185</td>
    <td class="codeLine">    cl::init(2),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">186</td>
    <td class="codeLine">    cl::Hidden);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">186</td>
    <td class="codeLine">    cl::Hidden);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">187</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">187</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">188</td>
    <td class="codeLine">// Heuristic for tail duplication if profile count is used in cost model.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">188</td>
    <td class="codeLine">// Heuristic for tail duplication if profile count is used in cost model.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">189</td>
    <td class="codeLine">static cl::opt<unsigned> TailDupProfilePercentThreshold(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">189</td>
    <td class="codeLine">static cl::opt<unsigned> TailDupProfilePercentThreshold(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">190</td>
    <td class="codeLine">    "tail-dup-profile-percent-threshold",</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">190</td>
    <td class="codeLine">    "tail-dup-profile-percent-threshold",</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">191</td>
    <td class="codeLine">    cl::desc("If profile count information is used in tail duplication cost "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">191</td>
    <td class="codeLine">    cl::desc("If profile count information is used in tail duplication cost "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">192</td>
    <td class="codeLine">             "model, the gained fall through number from tail duplication "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">192</td>
    <td class="codeLine">             "model, the gained fall through number from tail duplication "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">193</td>
    <td class="codeLine">             "should be at least this percent of hot count."),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">193</td>
    <td class="codeLine">             "should be at least this percent of hot count."),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">194</td>
    <td class="codeLine">    cl::init(50), cl::Hidden);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">194</td>
    <td class="codeLine">    cl::init(50), cl::Hidden);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">195</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">195</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">196</td>
    <td class="codeLine">// Heuristic for triangle chains.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">196</td>
    <td class="codeLine">// Heuristic for triangle chains.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">197</td>
    <td class="codeLine">static cl::opt<unsigned> TriangleChainCount(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">197</td>
    <td class="codeLine">static cl::opt<unsigned> TriangleChainCount(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">198</td>
    <td class="codeLine">    "triangle-chain-count",</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">198</td>
    <td class="codeLine">    "triangle-chain-count",</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">199</td>
    <td class="codeLine">    cl::desc("Number of triangle-shaped-CFG's that need to be in a row for the "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">199</td>
    <td class="codeLine">    cl::desc("Number of triangle-shaped-CFG's that need to be in a row for the "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">200</td>
    <td class="codeLine">             "triangle tail duplication heuristic to kick in. 0 to disable."),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">200</td>
    <td class="codeLine">             "triangle tail duplication heuristic to kick in. 0 to disable."),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">201</td>
    <td class="codeLine">    cl::init(2),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">201</td>
    <td class="codeLine">    cl::init(2),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">202</td>
    <td class="codeLine">    cl::Hidden);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">202</td>
    <td class="codeLine">    cl::Hidden);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">203</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">203</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">204</td>
    <td class="codeLine">// Use case: When block layout is visualized after MBP pass, the basic blocks</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">204</td>
    <td class="codeLine">// Use case: When block layout is visualized after MBP pass, the basic blocks</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">205</td>
    <td class="codeLine">// are labeled in layout order; meanwhile blocks could be numbered in a</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">205</td>
    <td class="codeLine">// are labeled in layout order; meanwhile blocks could be numbered in a</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">206</td>
    <td class="codeLine">// different order. It's hard to map between the graph and pass output.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">206</td>
    <td class="codeLine">// different order. It's hard to map between the graph and pass output.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">207</td>
    <td class="codeLine">// With this option on, the basic blocks are renumbered in function layout</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">207</td>
    <td class="codeLine">// With this option on, the basic blocks are renumbered in function layout</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">208</td>
    <td class="codeLine">// order. For debugging only.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">208</td>
    <td class="codeLine">// order. For debugging only.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">209</td>
    <td class="codeLine">static cl::opt<bool> RenumberBlocksBeforeView(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">209</td>
    <td class="codeLine">static cl::opt<bool> RenumberBlocksBeforeView(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">210</td>
    <td class="codeLine">    "renumber-blocks-before-view",</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">210</td>
    <td class="codeLine">    "renumber-blocks-before-view",</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">211</td>
    <td class="codeLine">    cl::desc(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">211</td>
    <td class="codeLine">    cl::desc(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">212</td>
    <td class="codeLine">        "If true, basic blocks are re-numbered before MBP layout is printed "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">212</td>
    <td class="codeLine">        "If true, basic blocks are re-numbered before MBP layout is printed "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">213</td>
    <td class="codeLine">        "into a dot graph. Only used when a function is being printed."),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">213</td>
    <td class="codeLine">        "into a dot graph. Only used when a function is being printed."),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">214</td>
    <td class="codeLine">    cl::init(false), cl::Hidden);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">214</td>
    <td class="codeLine">    cl::init(false), cl::Hidden);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">215</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">215</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">216</td>
    <td class="codeLine">namespace llvm {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">216</td>
    <td class="codeLine">namespace llvm {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">217</td>
    <td class="codeLine">extern cl::opt<bool> EnableExtTspBlockPlacement;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">217</td>
    <td class="codeLine">extern cl::opt<bool> EnableExtTspBlockPlacement;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">218</td>
    <td class="codeLine">extern cl::opt<bool> ApplyExtTspWithoutProfile;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">218</td>
    <td class="codeLine">extern cl::opt<bool> ApplyExtTspWithoutProfile;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">219</td>
    <td class="codeLine">extern cl::opt<unsigned> StaticLikelyProb;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">219</td>
    <td class="codeLine">extern cl::opt<unsigned> StaticLikelyProb;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">220</td>
    <td class="codeLine">extern cl::opt<unsigned> ProfileLikelyProb;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">220</td>
    <td class="codeLine">extern cl::opt<unsigned> ProfileLikelyProb;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">221</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">221</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">222</td>
    <td class="codeLine">// Internal option used to control BFI display only after MBP pass.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">222</td>
    <td class="codeLine">// Internal option used to control BFI display only after MBP pass.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">223</td>
    <td class="codeLine">// Defined in CodeGen/MachineBlockFrequencyInfo.cpp:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">223</td>
    <td class="codeLine">// Defined in CodeGen/MachineBlockFrequencyInfo.cpp:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">224</td>
    <td class="codeLine">// -view-block-layout-with-bfi=</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">224</td>
    <td class="codeLine">// -view-block-layout-with-bfi=</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">225</td>
    <td class="codeLine">extern cl::opt<GVDAGType> ViewBlockLayoutWithBFI;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">225</td>
    <td class="codeLine">extern cl::opt<GVDAGType> ViewBlockLayoutWithBFI;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">226</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">226</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">227</td>
    <td class="codeLine">// Command line option to specify the name of the function for CFG dump</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">227</td>
    <td class="codeLine">// Command line option to specify the name of the function for CFG dump</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">228</td>
    <td class="codeLine">// Defined in Analysis/BlockFrequencyInfo.cpp:  -view-bfi-func-name=</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">228</td>
    <td class="codeLine">// Defined in Analysis/BlockFrequencyInfo.cpp:  -view-bfi-func-name=</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">229</td>
    <td class="codeLine">extern cl::opt<std::string> ViewBlockFreqFuncName;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">229</td>
    <td class="codeLine">extern cl::opt<std::string> ViewBlockFreqFuncName;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">230</td>
    <td class="codeLine">} // namespace llvm</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">230</td>
    <td class="codeLine">} // namespace llvm</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">231</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">231</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">232</td>
    <td class="codeLine">namespace {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">232</td>
    <td class="codeLine">namespace {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">233</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">233</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">234</td>
    <td class="codeLine">class BlockChain;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">234</td>
    <td class="codeLine">class BlockChain;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">235</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">235</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">236</td>
    <td class="codeLine">/// Type for our function-wide basic block -> block chain mapping.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">236</td>
    <td class="codeLine">/// Type for our function-wide basic block -> block chain mapping.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">237</td>
    <td class="codeLine">using BlockToChainMapType = DenseMap<const MachineBasicBlock *, BlockChain *>;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">237</td>
    <td class="codeLine">using BlockToChainMapType = DenseMap<const MachineBasicBlock *, BlockChain *>;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">238</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">238</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">239</td>
    <td class="codeLine">/// A chain of blocks which will be laid out contiguously.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">239</td>
    <td class="codeLine">/// A chain of blocks which will be laid out contiguously.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">240</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">240</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">241</td>
    <td class="codeLine">/// This is the datastructure representing a chain of consecutive blocks that</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">241</td>
    <td class="codeLine">/// This is the datastructure representing a chain of consecutive blocks that</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">242</td>
    <td class="codeLine">/// are profitable to layout together in order to maximize fallthrough</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">242</td>
    <td class="codeLine">/// are profitable to layout together in order to maximize fallthrough</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">243</td>
    <td class="codeLine">/// probabilities and code locality. We also can use a block chain to represent</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">243</td>
    <td class="codeLine">/// probabilities and code locality. We also can use a block chain to represent</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">244</td>
    <td class="codeLine">/// a sequence of basic blocks which have some external (correctness)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">244</td>
    <td class="codeLine">/// a sequence of basic blocks which have some external (correctness)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">245</td>
    <td class="codeLine">/// requirement for sequential layout.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">245</td>
    <td class="codeLine">/// requirement for sequential layout.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">246</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">246</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">247</td>
    <td class="codeLine">/// Chains can be built around a single basic block and can be merged to grow</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">247</td>
    <td class="codeLine">/// Chains can be built around a single basic block and can be merged to grow</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">248</td>
    <td class="codeLine">/// them. They participate in a block-to-chain mapping, which is updated</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">248</td>
    <td class="codeLine">/// them. They participate in a block-to-chain mapping, which is updated</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">249</td>
    <td class="codeLine">/// automatically as chains are merged together.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">249</td>
    <td class="codeLine">/// automatically as chains are merged together.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">250</td>
    <td class="codeLine">class BlockChain {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">250</td>
    <td class="codeLine">class BlockChain {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">251</td>
    <td class="codeLine">  /// The sequence of blocks belonging to this chain.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">251</td>
    <td class="codeLine">  /// The sequence of blocks belonging to this chain.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">252</td>
    <td class="codeLine">  ///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">252</td>
    <td class="codeLine">  ///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">253</td>
    <td class="codeLine">  /// This is the sequence of blocks for a particular chain. These will be laid</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">253</td>
    <td class="codeLine">  /// This is the sequence of blocks for a particular chain. These will be laid</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">254</td>
    <td class="codeLine">  /// out in-order within the function.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">254</td>
    <td class="codeLine">  /// out in-order within the function.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">255</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 4> Blocks;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">255</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 4> Blocks;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">256</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">256</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">257</td>
    <td class="codeLine">  /// A handle to the function-wide basic block to block chain mapping.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">257</td>
    <td class="codeLine">  /// A handle to the function-wide basic block to block chain mapping.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">258</td>
    <td class="codeLine">  ///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">258</td>
    <td class="codeLine">  ///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">259</td>
    <td class="codeLine">  /// This is retained in each block chain to simplify the computation of child</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">259</td>
    <td class="codeLine">  /// This is retained in each block chain to simplify the computation of child</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">260</td>
    <td class="codeLine">  /// block chains for SCC-formation and iteration. We store the edges to child</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">260</td>
    <td class="codeLine">  /// block chains for SCC-formation and iteration. We store the edges to child</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">261</td>
    <td class="codeLine">  /// basic blocks, and map them back to their associated chains using this</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">261</td>
    <td class="codeLine">  /// basic blocks, and map them back to their associated chains using this</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">262</td>
    <td class="codeLine">  /// structure.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">262</td>
    <td class="codeLine">  /// structure.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">263</td>
    <td class="codeLine">  BlockToChainMapType &BlockToChain;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">263</td>
    <td class="codeLine">  BlockToChainMapType &BlockToChain;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">264</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">264</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">265</td>
    <td class="codeLine">public:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">265</td>
    <td class="codeLine">public:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">266</td>
    <td class="codeLine">  /// Construct a new BlockChain.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">266</td>
    <td class="codeLine">  /// Construct a new BlockChain.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">267</td>
    <td class="codeLine">  ///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">267</td>
    <td class="codeLine">  ///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">268</td>
    <td class="codeLine">  /// This builds a new block chain representing a single basic block in the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">268</td>
    <td class="codeLine">  /// This builds a new block chain representing a single basic block in the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">269</td>
    <td class="codeLine">  /// function. It also registers itself as the chain that block participates</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">269</td>
    <td class="codeLine">  /// function. It also registers itself as the chain that block participates</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">270</td>
    <td class="codeLine">  /// in with the BlockToChain mapping.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">270</td>
    <td class="codeLine">  /// in with the BlockToChain mapping.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">271</td>
    <td class="codeLine">  BlockChain(BlockToChainMapType &BlockToChain, MachineBasicBlock *BB)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">271</td>
    <td class="codeLine">  BlockChain(BlockToChainMapType &BlockToChain, MachineBasicBlock *BB)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">272</td>
    <td class="codeLine">      : Blocks(1, BB), BlockToChain(BlockToChain) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">272</td>
    <td class="codeLine">      : Blocks(1, BB), BlockToChain(BlockToChain) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">273</td>
    <td class="codeLine">    assert(BB && "Cannot create a chain with a null basic block");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">273</td>
    <td class="codeLine">    assert(BB && "Cannot create a chain with a null basic block");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">274</td>
    <td class="codeLine">    BlockToChain[BB] = this;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">274</td>
    <td class="codeLine">    BlockToChain[BB] = this;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">275</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">275</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">276</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">276</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">277</td>
    <td class="codeLine">  /// Iterator over blocks within the chain.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">277</td>
    <td class="codeLine">  /// Iterator over blocks within the chain.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">278</td>
    <td class="codeLine">  using iterator = SmallVectorImpl<MachineBasicBlock *>::iterator;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">278</td>
    <td class="codeLine">  using iterator = SmallVectorImpl<MachineBasicBlock *>::iterator;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">279</td>
    <td class="codeLine">  using const_iterator = SmallVectorImpl<MachineBasicBlock *>::const_iterator;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">279</td>
    <td class="codeLine">  using const_iterator = SmallVectorImpl<MachineBasicBlock *>::const_iterator;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">280</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">280</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">281</td>
    <td class="codeLine">  /// Beginning of blocks within the chain.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">281</td>
    <td class="codeLine">  /// Beginning of blocks within the chain.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">282</td>
    <td class="codeLine">  iterator begin() { return Blocks.begin(); }</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">282</td>
    <td class="codeLine">  iterator begin() { return Blocks.begin(); }</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">283</td>
    <td class="codeLine">  const_iterator begin() const { return Blocks.begin(); }</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">283</td>
    <td class="codeLine">  const_iterator begin() const { return Blocks.begin(); }</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">284</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">284</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">285</td>
    <td class="codeLine">  /// End of blocks within the chain.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">285</td>
    <td class="codeLine">  /// End of blocks within the chain.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">286</td>
    <td class="codeLine">  iterator end() { return Blocks.end(); }</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">286</td>
    <td class="codeLine">  iterator end() { return Blocks.end(); }</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">287</td>
    <td class="codeLine">  const_iterator end() const { return Blocks.end(); }</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">287</td>
    <td class="codeLine">  const_iterator end() const { return Blocks.end(); }</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">288</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">288</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">289</td>
    <td class="codeLine">  bool remove(MachineBasicBlock* BB) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">289</td>
    <td class="codeLine">  bool remove(MachineBasicBlock* BB) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">290</td>
    <td class="codeLine">    for(iterator i = begin(); i != end(); ++i) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">290</td>
    <td class="codeLine">    for(iterator i = begin(); i != end(); ++i) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">291</td>
    <td class="codeLine">      if (*i == BB) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">291</td>
    <td class="codeLine">      if (*i == BB) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">292</td>
    <td class="codeLine">        Blocks.erase(i);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">292</td>
    <td class="codeLine">        Blocks.erase(i);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">293</td>
    <td class="codeLine">        return true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">293</td>
    <td class="codeLine">        return true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">294</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">294</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">295</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">295</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">296</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">296</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">297</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">297</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">298</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">298</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">299</td>
    <td class="codeLine">  /// Merge a block chain into this one.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">299</td>
    <td class="codeLine">  /// Merge a block chain into this one.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">300</td>
    <td class="codeLine">  ///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">300</td>
    <td class="codeLine">  ///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">301</td>
    <td class="codeLine">  /// This routine merges a block chain into this one. It takes care of forming</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">301</td>
    <td class="codeLine">  /// This routine merges a block chain into this one. It takes care of forming</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">302</td>
    <td class="codeLine">  /// a contiguous sequence of basic blocks, updating the edge list, and</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">302</td>
    <td class="codeLine">  /// a contiguous sequence of basic blocks, updating the edge list, and</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">303</td>
    <td class="codeLine">  /// updating the block -> chain mapping. It does not free or tear down the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">303</td>
    <td class="codeLine">  /// updating the block -> chain mapping. It does not free or tear down the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">304</td>
    <td class="codeLine">  /// old chain, but the old chain's block list is no longer valid.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">304</td>
    <td class="codeLine">  /// old chain, but the old chain's block list is no longer valid.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">305</td>
    <td class="codeLine">  void merge(MachineBasicBlock *BB, BlockChain *Chain) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">305</td>
    <td class="codeLine">  void merge(MachineBasicBlock *BB, BlockChain *Chain) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">306</td>
    <td class="codeLine">    assert(BB && "Can't merge a null block.");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">306</td>
    <td class="codeLine">    assert(BB && "Can't merge a null block.");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">307</td>
    <td class="codeLine">    assert(!Blocks.empty() && "Can't merge into an empty chain.");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">307</td>
    <td class="codeLine">    assert(!Blocks.empty() && "Can't merge into an empty chain.");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">308</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">308</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">309</td>
    <td class="codeLine">    // Fast path in case we don't have a chain already.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">309</td>
    <td class="codeLine">    // Fast path in case we don't have a chain already.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">310</td>
    <td class="codeLine">    if (!Chain) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">310</td>
    <td class="codeLine">    if (!Chain) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">311</td>
    <td class="codeLine">      assert(!BlockToChain[BB] &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">311</td>
    <td class="codeLine">      assert(!BlockToChain[BB] &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">312</td>
    <td class="codeLine">             "Passed chain is null, but BB has entry in BlockToChain.");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">312</td>
    <td class="codeLine">             "Passed chain is null, but BB has entry in BlockToChain.");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">313</td>
    <td class="codeLine">      Blocks.push_back(BB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">313</td>
    <td class="codeLine">      Blocks.push_back(BB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">314</td>
    <td class="codeLine">      BlockToChain[BB] = this;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">314</td>
    <td class="codeLine">      BlockToChain[BB] = this;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">315</td>
    <td class="codeLine">      return;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">315</td>
    <td class="codeLine">      return;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">316</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">316</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">317</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">317</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">318</td>
    <td class="codeLine">    assert(BB == *Chain->begin() && "Passed BB is not head of Chain.");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">318</td>
    <td class="codeLine">    assert(BB == *Chain->begin() && "Passed BB is not head of Chain.");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">319</td>
    <td class="codeLine">    assert(Chain->begin() != Chain->end());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">319</td>
    <td class="codeLine">    assert(Chain->begin() != Chain->end());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">320</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">320</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">321</td>
    <td class="codeLine">    // Update the incoming blocks to point to this chain, and add them to the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">321</td>
    <td class="codeLine">    // Update the incoming blocks to point to this chain, and add them to the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">322</td>
    <td class="codeLine">    // chain structure.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">322</td>
    <td class="codeLine">    // chain structure.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">323</td>
    <td class="codeLine">    for (MachineBasicBlock *ChainBB : *Chain) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">323</td>
    <td class="codeLine">    for (MachineBasicBlock *ChainBB : *Chain) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">324</td>
    <td class="codeLine">      Blocks.push_back(ChainBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">324</td>
    <td class="codeLine">      Blocks.push_back(ChainBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">325</td>
    <td class="codeLine">      assert(BlockToChain[ChainBB] == Chain && "Incoming blocks not in chain.");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">325</td>
    <td class="codeLine">      assert(BlockToChain[ChainBB] == Chain && "Incoming blocks not in chain.");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">326</td>
    <td class="codeLine">      BlockToChain[ChainBB] = this;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">326</td>
    <td class="codeLine">      BlockToChain[ChainBB] = this;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">327</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">327</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">328</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">328</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">329</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">329</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">330</td>
    <td class="codeLine">#ifndef NDEBUG</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">330</td>
    <td class="codeLine">#ifndef NDEBUG</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">331</td>
    <td class="codeLine">  /// Dump the blocks in this chain.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">331</td>
    <td class="codeLine">  /// Dump the blocks in this chain.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">332</td>
    <td class="codeLine">  LLVM_DUMP_METHOD void dump() {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">332</td>
    <td class="codeLine">  LLVM_DUMP_METHOD void dump() {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">333</td>
    <td class="codeLine">    for (MachineBasicBlock *MBB : *this)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">333</td>
    <td class="codeLine">    for (MachineBasicBlock *MBB : *this)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">334</td>
    <td class="codeLine">      MBB->dump();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">334</td>
    <td class="codeLine">      MBB->dump();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">335</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">335</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">336</td>
    <td class="codeLine">#endif // NDEBUG</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">336</td>
    <td class="codeLine">#endif // NDEBUG</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">337</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">337</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">338</td>
    <td class="codeLine">  /// Count of predecessors of any block within the chain which have not</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">338</td>
    <td class="codeLine">  /// Count of predecessors of any block within the chain which have not</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">339</td>
    <td class="codeLine">  /// yet been scheduled.  In general, we will delay scheduling this chain</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">339</td>
    <td class="codeLine">  /// yet been scheduled.  In general, we will delay scheduling this chain</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">340</td>
    <td class="codeLine">  /// until those predecessors are scheduled (or we find a sufficiently good</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">340</td>
    <td class="codeLine">  /// until those predecessors are scheduled (or we find a sufficiently good</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">341</td>
    <td class="codeLine">  /// reason to override this heuristic.)  Note that when forming loop chains,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">341</td>
    <td class="codeLine">  /// reason to override this heuristic.)  Note that when forming loop chains,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">342</td>
    <td class="codeLine">  /// blocks outside the loop are ignored and treated as if they were already</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">342</td>
    <td class="codeLine">  /// blocks outside the loop are ignored and treated as if they were already</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">343</td>
    <td class="codeLine">  /// scheduled.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">343</td>
    <td class="codeLine">  /// scheduled.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">344</td>
    <td class="codeLine">  ///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">344</td>
    <td class="codeLine">  ///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">345</td>
    <td class="codeLine">  /// Note: This field is reinitialized multiple times - once for each loop,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">345</td>
    <td class="codeLine">  /// Note: This field is reinitialized multiple times - once for each loop,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">346</td>
    <td class="codeLine">  /// and then once for the function as a whole.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">346</td>
    <td class="codeLine">  /// and then once for the function as a whole.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">347</td>
    <td class="codeLine">  unsigned UnscheduledPredecessors = 0;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">347</td>
    <td class="codeLine">  unsigned UnscheduledPredecessors = 0;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">348</td>
    <td class="codeLine">};</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">348</td>
    <td class="codeLine">};</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">349</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">349</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">350</td>
    <td class="codeLine">class MachineBlockPlacement : public MachineFunctionPass {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">350</td>
    <td class="codeLine">class MachineBlockPlacement : public MachineFunctionPass {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">351</td>
    <td class="codeLine">  /// A type for a block filter set.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">351</td>
    <td class="codeLine">  /// A type for a block filter set.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">352</td>
    <td class="codeLine">  using BlockFilterSet = SmallSetVector<const MachineBasicBlock *, 16>;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">352</td>
    <td class="codeLine">  using BlockFilterSet = SmallSetVector<const MachineBasicBlock *, 16>;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">353</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">353</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">354</td>
    <td class="codeLine">  /// Pair struct containing basic block and taildup profitability</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">354</td>
    <td class="codeLine">  /// Pair struct containing basic block and taildup profitability</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">355</td>
    <td class="codeLine">  struct BlockAndTailDupResult {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">355</td>
    <td class="codeLine">  struct BlockAndTailDupResult {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">356</td>
    <td class="codeLine">    MachineBasicBlock *BB = nullptr;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">356</td>
    <td class="codeLine">    MachineBasicBlock *BB = nullptr;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">357</td>
    <td class="codeLine">    bool ShouldTailDup;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">357</td>
    <td class="codeLine">    bool ShouldTailDup;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">358</td>
    <td class="codeLine">  };</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">358</td>
    <td class="codeLine">  };</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">359</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">359</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">360</td>
    <td class="codeLine">  /// Triple struct containing edge weight and the edge.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">360</td>
    <td class="codeLine">  /// Triple struct containing edge weight and the edge.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">361</td>
    <td class="codeLine">  struct WeightedEdge {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">361</td>
    <td class="codeLine">  struct WeightedEdge {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">362</td>
    <td class="codeLine">    BlockFrequency Weight;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">362</td>
    <td class="codeLine">    BlockFrequency Weight;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">363</td>
    <td class="codeLine">    MachineBasicBlock *Src = nullptr;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">363</td>
    <td class="codeLine">    MachineBasicBlock *Src = nullptr;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">364</td>
    <td class="codeLine">    MachineBasicBlock *Dest = nullptr;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">364</td>
    <td class="codeLine">    MachineBasicBlock *Dest = nullptr;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">365</td>
    <td class="codeLine">  };</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">365</td>
    <td class="codeLine">  };</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">366</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">366</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">367</td>
    <td class="codeLine">  /// work lists of blocks that are ready to be laid out</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">367</td>
    <td class="codeLine">  /// work lists of blocks that are ready to be laid out</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">368</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 16> BlockWorkList;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">368</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 16> BlockWorkList;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">369</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 16> EHPadWorkList;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">369</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 16> EHPadWorkList;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">370</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">370</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">371</td>
    <td class="codeLine">  /// Edges that have already been computed as optimal.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">371</td>
    <td class="codeLine">  /// Edges that have already been computed as optimal.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">372</td>
    <td class="codeLine">  DenseMap<const MachineBasicBlock *, BlockAndTailDupResult> ComputedEdges;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">372</td>
    <td class="codeLine">  DenseMap<const MachineBasicBlock *, BlockAndTailDupResult> ComputedEdges;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">373</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">373</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">374</td>
    <td class="codeLine">  /// Machine Function</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">374</td>
    <td class="codeLine">  /// Machine Function</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">375</td>
    <td class="codeLine">  MachineFunction *F = nullptr;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">375</td>
    <td class="codeLine">  MachineFunction *F = nullptr;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">376</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">376</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">377</td>
    <td class="codeLine">  /// A handle to the branch probability pass.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">377</td>
    <td class="codeLine">  /// A handle to the branch probability pass.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">378</td>
    <td class="codeLine">  const MachineBranchProbabilityInfo *MBPI = nullptr;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">378</td>
    <td class="codeLine">  const MachineBranchProbabilityInfo *MBPI = nullptr;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">379</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">379</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">380</td>
    <td class="codeLine">  /// A handle to the function-wide block frequency pass.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">380</td>
    <td class="codeLine">  /// A handle to the function-wide block frequency pass.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">381</td>
    <td class="codeLine">  std::unique_ptr<MBFIWrapper> MBFI;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">381</td>
    <td class="codeLine">  std::unique_ptr<MBFIWrapper> MBFI;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">382</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">382</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">383</td>
    <td class="codeLine">  /// A handle to the loop info.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">383</td>
    <td class="codeLine">  /// A handle to the loop info.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">384</td>
    <td class="codeLine">  MachineLoopInfo *MLI = nullptr;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">384</td>
    <td class="codeLine">  MachineLoopInfo *MLI = nullptr;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">385</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">385</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">386</td>
    <td class="codeLine">  /// Preferred loop exit.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">386</td>
    <td class="codeLine">  /// Preferred loop exit.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">387</td>
    <td class="codeLine">  /// Member variable for convenience. It may be removed by duplication deep</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">387</td>
    <td class="codeLine">  /// Member variable for convenience. It may be removed by duplication deep</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">388</td>
    <td class="codeLine">  /// in the call stack.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">388</td>
    <td class="codeLine">  /// in the call stack.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">389</td>
    <td class="codeLine">  MachineBasicBlock *PreferredLoopExit = nullptr;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">389</td>
    <td class="codeLine">  MachineBasicBlock *PreferredLoopExit = nullptr;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">390</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">390</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">391</td>
    <td class="codeLine">  /// A handle to the target's instruction info.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">391</td>
    <td class="codeLine">  /// A handle to the target's instruction info.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">392</td>
    <td class="codeLine">  const TargetInstrInfo *TII = nullptr;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">392</td>
    <td class="codeLine">  const TargetInstrInfo *TII = nullptr;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">393</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">393</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">394</td>
    <td class="codeLine">  /// A handle to the target's lowering info.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">394</td>
    <td class="codeLine">  /// A handle to the target's lowering info.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">395</td>
    <td class="codeLine">  const TargetLoweringBase *TLI = nullptr;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">395</td>
    <td class="codeLine">  const TargetLoweringBase *TLI = nullptr;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">396</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">396</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">397</td>
    <td class="codeLine">  /// A handle to the post dominator tree.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">397</td>
    <td class="codeLine">  /// A handle to the post dominator tree.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">398</td>
    <td class="codeLine">  MachinePostDominatorTree *MPDT = nullptr;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">398</td>
    <td class="codeLine">  MachinePostDominatorTree *MPDT = nullptr;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">399</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">399</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">400</td>
    <td class="codeLine">  ProfileSummaryInfo *PSI = nullptr;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">400</td>
    <td class="codeLine">  ProfileSummaryInfo *PSI = nullptr;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">401</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">401</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">402</td>
    <td class="codeLine">  /// Duplicator used to duplicate tails during placement.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">402</td>
    <td class="codeLine">  /// Duplicator used to duplicate tails during placement.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">403</td>
    <td class="codeLine">  ///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">403</td>
    <td class="codeLine">  ///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">404</td>
    <td class="codeLine">  /// Placement decisions can open up new tail duplication opportunities, but</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">404</td>
    <td class="codeLine">  /// Placement decisions can open up new tail duplication opportunities, but</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">405</td>
    <td class="codeLine">  /// since tail duplication affects placement decisions of later blocks, it</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">405</td>
    <td class="codeLine">  /// since tail duplication affects placement decisions of later blocks, it</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">406</td>
    <td class="codeLine">  /// must be done inline.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">406</td>
    <td class="codeLine">  /// must be done inline.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">407</td>
    <td class="codeLine">  TailDuplicator TailDup;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">407</td>
    <td class="codeLine">  TailDuplicator TailDup;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">408</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">408</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">409</td>
    <td class="codeLine">  /// Partial tail duplication threshold.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">409</td>
    <td class="codeLine">  /// Partial tail duplication threshold.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">410</td>
    <td class="codeLine">  BlockFrequency DupThreshold;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">410</td>
    <td class="codeLine">  BlockFrequency DupThreshold;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">411</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">411</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">412</td>
    <td class="codeLine">  /// True:  use block profile count to compute tail duplication cost.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">412</td>
    <td class="codeLine">  /// True:  use block profile count to compute tail duplication cost.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">413</td>
    <td class="codeLine">  /// False: use block frequency to compute tail duplication cost.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">413</td>
    <td class="codeLine">  /// False: use block frequency to compute tail duplication cost.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">414</td>
    <td class="codeLine">  bool UseProfileCount = false;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">414</td>
    <td class="codeLine">  bool UseProfileCount = false;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">415</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">415</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">416</td>
    <td class="codeLine">  /// Allocator and owner of BlockChain structures.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">416</td>
    <td class="codeLine">  /// Allocator and owner of BlockChain structures.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">417</td>
    <td class="codeLine">  ///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">417</td>
    <td class="codeLine">  ///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">418</td>
    <td class="codeLine">  /// We build BlockChains lazily while processing the loop structure of</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">418</td>
    <td class="codeLine">  /// We build BlockChains lazily while processing the loop structure of</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">419</td>
    <td class="codeLine">  /// a function. To reduce malloc traffic, we allocate them using this</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">419</td>
    <td class="codeLine">  /// a function. To reduce malloc traffic, we allocate them using this</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">420</td>
    <td class="codeLine">  /// slab-like allocator, and destroy them after the pass completes. An</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">420</td>
    <td class="codeLine">  /// slab-like allocator, and destroy them after the pass completes. An</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">421</td>
    <td class="codeLine">  /// important guarantee is that this allocator produces stable pointers to</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">421</td>
    <td class="codeLine">  /// important guarantee is that this allocator produces stable pointers to</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">422</td>
    <td class="codeLine">  /// the chains.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">422</td>
    <td class="codeLine">  /// the chains.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">423</td>
    <td class="codeLine">  SpecificBumpPtrAllocator<BlockChain> ChainAllocator;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">423</td>
    <td class="codeLine">  SpecificBumpPtrAllocator<BlockChain> ChainAllocator;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">424</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">424</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">425</td>
    <td class="codeLine">  /// Function wide BasicBlock to BlockChain mapping.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">425</td>
    <td class="codeLine">  /// Function wide BasicBlock to BlockChain mapping.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">426</td>
    <td class="codeLine">  ///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">426</td>
    <td class="codeLine">  ///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">427</td>
    <td class="codeLine">  /// This mapping allows efficiently moving from any given basic block to the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">427</td>
    <td class="codeLine">  /// This mapping allows efficiently moving from any given basic block to the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">428</td>
    <td class="codeLine">  /// BlockChain it participates in, if any. We use it to, among other things,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">428</td>
    <td class="codeLine">  /// BlockChain it participates in, if any. We use it to, among other things,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">429</td>
    <td class="codeLine">  /// allow implicitly defining edges between chains as the existing edges</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">429</td>
    <td class="codeLine">  /// allow implicitly defining edges between chains as the existing edges</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">430</td>
    <td class="codeLine">  /// between basic blocks.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">430</td>
    <td class="codeLine">  /// between basic blocks.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">431</td>
    <td class="codeLine">  DenseMap<const MachineBasicBlock *, BlockChain *> BlockToChain;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">431</td>
    <td class="codeLine">  DenseMap<const MachineBasicBlock *, BlockChain *> BlockToChain;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">432</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">432</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">433</td>
    <td class="codeLine">#ifndef NDEBUG</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">433</td>
    <td class="codeLine">#ifndef NDEBUG</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">434</td>
    <td class="codeLine">  /// The set of basic blocks that have terminators that cannot be fully</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">434</td>
    <td class="codeLine">  /// The set of basic blocks that have terminators that cannot be fully</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">435</td>
    <td class="codeLine">  /// analyzed.  These basic blocks cannot be re-ordered safely by</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">435</td>
    <td class="codeLine">  /// analyzed.  These basic blocks cannot be re-ordered safely by</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">436</td>
    <td class="codeLine">  /// MachineBlockPlacement, and we must preserve physical layout of these</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">436</td>
    <td class="codeLine">  /// MachineBlockPlacement, and we must preserve physical layout of these</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">437</td>
    <td class="codeLine">  /// blocks and their successors through the pass.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">437</td>
    <td class="codeLine">  /// blocks and their successors through the pass.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">438</td>
    <td class="codeLine">  SmallPtrSet<MachineBasicBlock *, 4> BlocksWithUnanalyzableExits;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">438</td>
    <td class="codeLine">  SmallPtrSet<MachineBasicBlock *, 4> BlocksWithUnanalyzableExits;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">439</td>
    <td class="codeLine">#endif</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">439</td>
    <td class="codeLine">#endif</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">440</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">440</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">441</td>
    <td class="codeLine">  /// Get block profile count or frequency according to UseProfileCount.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">441</td>
    <td class="codeLine">  /// Get block profile count or frequency according to UseProfileCount.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">442</td>
    <td class="codeLine">  /// The return value is used to model tail duplication cost.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">442</td>
    <td class="codeLine">  /// The return value is used to model tail duplication cost.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">443</td>
    <td class="codeLine">  BlockFrequency getBlockCountOrFrequency(const MachineBasicBlock *BB) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">443</td>
    <td class="codeLine">  BlockFrequency getBlockCountOrFrequency(const MachineBasicBlock *BB) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">444</td>
    <td class="codeLine">    if (UseProfileCount) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">444</td>
    <td class="codeLine">    if (UseProfileCount) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">445</td>
    <td class="codeLine">      auto Count = MBFI->getBlockProfileCount(BB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">445</td>
    <td class="codeLine">      auto Count = MBFI->getBlockProfileCount(BB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">446</td>
    <td class="codeLine">      if (Count)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">446</td>
    <td class="codeLine">      if (Count)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">447</td>
    <td class="codeLine">        return *Count;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">447</td>
    <td class="codeLine">        return *Count;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">448</td>
    <td class="codeLine">      else</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">448</td>
    <td class="codeLine">      else</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">449</td>
    <td class="codeLine">        return 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">449</td>
    <td class="codeLine">        return 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">450</td>
    <td class="codeLine">    } else</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">450</td>
    <td class="codeLine">    } else</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">451</td>
    <td class="codeLine">      return MBFI->getBlockFreq(BB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">451</td>
    <td class="codeLine">      return MBFI->getBlockFreq(BB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">452</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">452</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">453</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">453</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">454</td>
    <td class="codeLine">  /// Scale the DupThreshold according to basic block size.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">454</td>
    <td class="codeLine">  /// Scale the DupThreshold according to basic block size.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">455</td>
    <td class="codeLine">  BlockFrequency scaleThreshold(MachineBasicBlock *BB);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">455</td>
    <td class="codeLine">  BlockFrequency scaleThreshold(MachineBasicBlock *BB);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">456</td>
    <td class="codeLine">  void initDupThreshold();</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">456</td>
    <td class="codeLine">  void initDupThreshold();</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">457</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">457</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">458</td>
    <td class="codeLine">  /// Decrease the UnscheduledPredecessors count for all blocks in chain, and</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">458</td>
    <td class="codeLine">  /// Decrease the UnscheduledPredecessors count for all blocks in chain, and</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">459</td>
    <td class="codeLine">  /// if the count goes to 0, add them to the appropriate work list.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">459</td>
    <td class="codeLine">  /// if the count goes to 0, add them to the appropriate work list.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">460</td>
    <td class="codeLine">  void markChainSuccessors(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">460</td>
    <td class="codeLine">  void markChainSuccessors(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">461</td>
    <td class="codeLine">      const BlockChain &Chain, const MachineBasicBlock *LoopHeaderBB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">461</td>
    <td class="codeLine">      const BlockChain &Chain, const MachineBasicBlock *LoopHeaderBB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">462</td>
    <td class="codeLine">      const BlockFilterSet *BlockFilter = nullptr);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">462</td>
    <td class="codeLine">      const BlockFilterSet *BlockFilter = nullptr);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">463</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">463</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">464</td>
    <td class="codeLine">  /// Decrease the UnscheduledPredecessors count for a single block, and</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">464</td>
    <td class="codeLine">  /// Decrease the UnscheduledPredecessors count for a single block, and</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">465</td>
    <td class="codeLine">  /// if the count goes to 0, add them to the appropriate work list.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">465</td>
    <td class="codeLine">  /// if the count goes to 0, add them to the appropriate work list.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">466</td>
    <td class="codeLine">  void markBlockSuccessors(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">466</td>
    <td class="codeLine">  void markBlockSuccessors(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">467</td>
    <td class="codeLine">      const BlockChain &Chain, const MachineBasicBlock *BB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">467</td>
    <td class="codeLine">      const BlockChain &Chain, const MachineBasicBlock *BB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">468</td>
    <td class="codeLine">      const MachineBasicBlock *LoopHeaderBB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">468</td>
    <td class="codeLine">      const MachineBasicBlock *LoopHeaderBB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">469</td>
    <td class="codeLine">      const BlockFilterSet *BlockFilter = nullptr);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">469</td>
    <td class="codeLine">      const BlockFilterSet *BlockFilter = nullptr);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">470</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">470</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">471</td>
    <td class="codeLine">  BranchProbability</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">471</td>
    <td class="codeLine">  BranchProbability</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">472</td>
    <td class="codeLine">  collectViableSuccessors(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">472</td>
    <td class="codeLine">  collectViableSuccessors(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">473</td>
    <td class="codeLine">      const MachineBasicBlock *BB, const BlockChain &Chain,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">473</td>
    <td class="codeLine">      const MachineBasicBlock *BB, const BlockChain &Chain,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">474</td>
    <td class="codeLine">      const BlockFilterSet *BlockFilter,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">474</td>
    <td class="codeLine">      const BlockFilterSet *BlockFilter,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">475</td>
    <td class="codeLine">      SmallVector<MachineBasicBlock *, 4> &Successors);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">475</td>
    <td class="codeLine">      SmallVector<MachineBasicBlock *, 4> &Successors);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">476</td>
    <td class="codeLine">  bool isBestSuccessor(MachineBasicBlock *BB, MachineBasicBlock *Pred,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">476</td>
    <td class="codeLine">  bool isBestSuccessor(MachineBasicBlock *BB, MachineBasicBlock *Pred,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">477</td>
    <td class="codeLine">                       BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">477</td>
    <td class="codeLine">                       BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">478</td>
    <td class="codeLine">  void findDuplicateCandidates(SmallVectorImpl<MachineBasicBlock *> &Candidates,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">478</td>
    <td class="codeLine">  void findDuplicateCandidates(SmallVectorImpl<MachineBasicBlock *> &Candidates,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">479</td>
    <td class="codeLine">                               MachineBasicBlock *BB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">479</td>
    <td class="codeLine">                               MachineBasicBlock *BB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">480</td>
    <td class="codeLine">                               BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">480</td>
    <td class="codeLine">                               BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">481</td>
    <td class="codeLine">  bool repeatedlyTailDuplicateBlock(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">481</td>
    <td class="codeLine">  bool repeatedlyTailDuplicateBlock(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">482</td>
    <td class="codeLine">      MachineBasicBlock *BB, MachineBasicBlock *&LPred,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">482</td>
    <td class="codeLine">      MachineBasicBlock *BB, MachineBasicBlock *&LPred,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">483</td>
    <td class="codeLine">      const MachineBasicBlock *LoopHeaderBB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">483</td>
    <td class="codeLine">      const MachineBasicBlock *LoopHeaderBB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">484</td>
    <td class="codeLine">      BlockChain &Chain, BlockFilterSet *BlockFilter,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">484</td>
    <td class="codeLine">      BlockChain &Chain, BlockFilterSet *BlockFilter,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">485</td>
    <td class="codeLine">      MachineFunction::iterator &PrevUnplacedBlockIt);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">485</td>
    <td class="codeLine">      MachineFunction::iterator &PrevUnplacedBlockIt);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">486</td>
    <td class="codeLine">  bool maybeTailDuplicateBlock(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">486</td>
    <td class="codeLine">  bool maybeTailDuplicateBlock(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">487</td>
    <td class="codeLine">      MachineBasicBlock *BB, MachineBasicBlock *LPred,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">487</td>
    <td class="codeLine">      MachineBasicBlock *BB, MachineBasicBlock *LPred,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">488</td>
    <td class="codeLine">      BlockChain &Chain, BlockFilterSet *BlockFilter,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">488</td>
    <td class="codeLine">      BlockChain &Chain, BlockFilterSet *BlockFilter,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">489</td>
    <td class="codeLine">      MachineFunction::iterator &PrevUnplacedBlockIt,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">489</td>
    <td class="codeLine">      MachineFunction::iterator &PrevUnplacedBlockIt,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">490</td>
    <td class="codeLine">      bool &DuplicatedToLPred);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">490</td>
    <td class="codeLine">      bool &DuplicatedToLPred);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">491</td>
    <td class="codeLine">  bool hasBetterLayoutPredecessor(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">491</td>
    <td class="codeLine">  bool hasBetterLayoutPredecessor(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">492</td>
    <td class="codeLine">      const MachineBasicBlock *BB, const MachineBasicBlock *Succ,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">492</td>
    <td class="codeLine">      const MachineBasicBlock *BB, const MachineBasicBlock *Succ,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">493</td>
    <td class="codeLine">      const BlockChain &SuccChain, BranchProbability SuccProb,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">493</td>
    <td class="codeLine">      const BlockChain &SuccChain, BranchProbability SuccProb,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">494</td>
    <td class="codeLine">      BranchProbability RealSuccProb, const BlockChain &Chain,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">494</td>
    <td class="codeLine">      BranchProbability RealSuccProb, const BlockChain &Chain,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">495</td>
    <td class="codeLine">      const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">495</td>
    <td class="codeLine">      const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">496</td>
    <td class="codeLine">  BlockAndTailDupResult selectBestSuccessor(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">496</td>
    <td class="codeLine">  BlockAndTailDupResult selectBestSuccessor(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">497</td>
    <td class="codeLine">      const MachineBasicBlock *BB, const BlockChain &Chain,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">497</td>
    <td class="codeLine">      const MachineBasicBlock *BB, const BlockChain &Chain,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">498</td>
    <td class="codeLine">      const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">498</td>
    <td class="codeLine">      const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">499</td>
    <td class="codeLine">  MachineBasicBlock *selectBestCandidateBlock(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">499</td>
    <td class="codeLine">  MachineBasicBlock *selectBestCandidateBlock(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">500</td>
    <td class="codeLine">      const BlockChain &Chain, SmallVectorImpl<MachineBasicBlock *> &WorkList);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">500</td>
    <td class="codeLine">      const BlockChain &Chain, SmallVectorImpl<MachineBasicBlock *> &WorkList);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">501</td>
    <td class="codeLine">  MachineBasicBlock *getFirstUnplacedBlock(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">501</td>
    <td class="codeLine">  MachineBasicBlock *getFirstUnplacedBlock(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">502</td>
    <td class="codeLine">      const BlockChain &PlacedChain,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">502</td>
    <td class="codeLine">      const BlockChain &PlacedChain,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">503</td>
    <td class="codeLine">      MachineFunction::iterator &PrevUnplacedBlockIt,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">503</td>
    <td class="codeLine">      MachineFunction::iterator &PrevUnplacedBlockIt,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">504</td>
    <td class="codeLine">      const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">504</td>
    <td class="codeLine">      const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">505</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">505</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">506</td>
    <td class="codeLine">  /// Add a basic block to the work list if it is appropriate.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">506</td>
    <td class="codeLine">  /// Add a basic block to the work list if it is appropriate.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">507</td>
    <td class="codeLine">  ///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">507</td>
    <td class="codeLine">  ///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">508</td>
    <td class="codeLine">  /// If the optional parameter BlockFilter is provided, only MBB</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">508</td>
    <td class="codeLine">  /// If the optional parameter BlockFilter is provided, only MBB</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">509</td>
    <td class="codeLine">  /// present in the set will be added to the worklist. If nullptr</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">509</td>
    <td class="codeLine">  /// present in the set will be added to the worklist. If nullptr</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">510</td>
    <td class="codeLine">  /// is provided, no filtering occurs.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">510</td>
    <td class="codeLine">  /// is provided, no filtering occurs.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">511</td>
    <td class="codeLine">  void fillWorkLists(const MachineBasicBlock *MBB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">511</td>
    <td class="codeLine">  void fillWorkLists(const MachineBasicBlock *MBB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">512</td>
    <td class="codeLine">                     SmallPtrSetImpl<BlockChain *> &UpdatedPreds,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">512</td>
    <td class="codeLine">                     SmallPtrSetImpl<BlockChain *> &UpdatedPreds,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">513</td>
    <td class="codeLine">                     const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">513</td>
    <td class="codeLine">                     const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">514</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">514</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">515</td>
    <td class="codeLine">  void buildChain(const MachineBasicBlock *BB, BlockChain &Chain,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">515</td>
    <td class="codeLine">  void buildChain(const MachineBasicBlock *BB, BlockChain &Chain,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">516</td>
    <td class="codeLine">                  BlockFilterSet *BlockFilter = nullptr);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">516</td>
    <td class="codeLine">                  BlockFilterSet *BlockFilter = nullptr);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">517</td>
    <td class="codeLine">  bool canMoveBottomBlockToTop(const MachineBasicBlock *BottomBlock,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">517</td>
    <td class="codeLine">  bool canMoveBottomBlockToTop(const MachineBasicBlock *BottomBlock,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">518</td>
    <td class="codeLine">                               const MachineBasicBlock *OldTop);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">518</td>
    <td class="codeLine">                               const MachineBasicBlock *OldTop);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">519</td>
    <td class="codeLine">  bool hasViableTopFallthrough(const MachineBasicBlock *Top,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">519</td>
    <td class="codeLine">  bool hasViableTopFallthrough(const MachineBasicBlock *Top,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">520</td>
    <td class="codeLine">                               const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">520</td>
    <td class="codeLine">                               const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">521</td>
    <td class="codeLine">  BlockFrequency TopFallThroughFreq(const MachineBasicBlock *Top,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">521</td>
    <td class="codeLine">  BlockFrequency TopFallThroughFreq(const MachineBasicBlock *Top,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">522</td>
    <td class="codeLine">                                    const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">522</td>
    <td class="codeLine">                                    const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">523</td>
    <td class="codeLine">  BlockFrequency FallThroughGains(const MachineBasicBlock *NewTop,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">523</td>
    <td class="codeLine">  BlockFrequency FallThroughGains(const MachineBasicBlock *NewTop,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">524</td>
    <td class="codeLine">                                  const MachineBasicBlock *OldTop,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">524</td>
    <td class="codeLine">                                  const MachineBasicBlock *OldTop,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">525</td>
    <td class="codeLine">                                  const MachineBasicBlock *ExitBB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">525</td>
    <td class="codeLine">                                  const MachineBasicBlock *ExitBB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">526</td>
    <td class="codeLine">                                  const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">526</td>
    <td class="codeLine">                                  const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">527</td>
    <td class="codeLine">  MachineBasicBlock *findBestLoopTopHelper(MachineBasicBlock *OldTop,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">527</td>
    <td class="codeLine">  MachineBasicBlock *findBestLoopTopHelper(MachineBasicBlock *OldTop,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">528</td>
    <td class="codeLine">      const MachineLoop &L, const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">528</td>
    <td class="codeLine">      const MachineLoop &L, const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">529</td>
    <td class="codeLine">  MachineBasicBlock *findBestLoopTop(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">529</td>
    <td class="codeLine">  MachineBasicBlock *findBestLoopTop(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">530</td>
    <td class="codeLine">      const MachineLoop &L, const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">530</td>
    <td class="codeLine">      const MachineLoop &L, const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">531</td>
    <td class="codeLine">  MachineBasicBlock *findBestLoopExit(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">531</td>
    <td class="codeLine">  MachineBasicBlock *findBestLoopExit(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">532</td>
    <td class="codeLine">      const MachineLoop &L, const BlockFilterSet &LoopBlockSet,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">532</td>
    <td class="codeLine">      const MachineLoop &L, const BlockFilterSet &LoopBlockSet,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">533</td>
    <td class="codeLine">      BlockFrequency &ExitFreq);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">533</td>
    <td class="codeLine">      BlockFrequency &ExitFreq);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">534</td>
    <td class="codeLine">  BlockFilterSet collectLoopBlockSet(const MachineLoop &L);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">534</td>
    <td class="codeLine">  BlockFilterSet collectLoopBlockSet(const MachineLoop &L);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">535</td>
    <td class="codeLine">  void buildLoopChains(const MachineLoop &L);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">535</td>
    <td class="codeLine">  void buildLoopChains(const MachineLoop &L);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">536</td>
    <td class="codeLine">  void rotateLoop(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">536</td>
    <td class="codeLine">  void rotateLoop(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">537</td>
    <td class="codeLine">      BlockChain &LoopChain, const MachineBasicBlock *ExitingBB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">537</td>
    <td class="codeLine">      BlockChain &LoopChain, const MachineBasicBlock *ExitingBB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">538</td>
    <td class="codeLine">      BlockFrequency ExitFreq, const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">538</td>
    <td class="codeLine">      BlockFrequency ExitFreq, const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">539</td>
    <td class="codeLine">  void rotateLoopWithProfile(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">539</td>
    <td class="codeLine">  void rotateLoopWithProfile(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">540</td>
    <td class="codeLine">      BlockChain &LoopChain, const MachineLoop &L,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">540</td>
    <td class="codeLine">      BlockChain &LoopChain, const MachineLoop &L,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">541</td>
    <td class="codeLine">      const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">541</td>
    <td class="codeLine">      const BlockFilterSet &LoopBlockSet);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">542</td>
    <td class="codeLine">  void buildCFGChains();</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">542</td>
    <td class="codeLine">  void buildCFGChains();</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">543</td>
    <td class="codeLine">  void optimizeBranches();</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">543</td>
    <td class="codeLine">  void optimizeBranches();</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">544</td>
    <td class="codeLine">  void alignBlocks();</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">544</td>
    <td class="codeLine">  void alignBlocks();</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">545</td>
    <td class="codeLine">  /// Returns true if a block should be tail-duplicated to increase fallthrough</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">545</td>
    <td class="codeLine">  /// Returns true if a block should be tail-duplicated to increase fallthrough</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">546</td>
    <td class="codeLine">  /// opportunities.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">546</td>
    <td class="codeLine">  /// opportunities.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">547</td>
    <td class="codeLine">  bool shouldTailDuplicate(MachineBasicBlock *BB);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">547</td>
    <td class="codeLine">  bool shouldTailDuplicate(MachineBasicBlock *BB);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">548</td>
    <td class="codeLine">  /// Check the edge frequencies to see if tail duplication will increase</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">548</td>
    <td class="codeLine">  /// Check the edge frequencies to see if tail duplication will increase</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">549</td>
    <td class="codeLine">  /// fallthroughs.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">549</td>
    <td class="codeLine">  /// fallthroughs.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">550</td>
    <td class="codeLine">  bool isProfitableToTailDup(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">550</td>
    <td class="codeLine">  bool isProfitableToTailDup(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">551</td>
    <td class="codeLine">    const MachineBasicBlock *BB, const MachineBasicBlock *Succ,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">551</td>
    <td class="codeLine">    const MachineBasicBlock *BB, const MachineBasicBlock *Succ,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">552</td>
    <td class="codeLine">    BranchProbability QProb,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">552</td>
    <td class="codeLine">    BranchProbability QProb,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">553</td>
    <td class="codeLine">    const BlockChain &Chain, const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">553</td>
    <td class="codeLine">    const BlockChain &Chain, const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">554</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">554</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">555</td>
    <td class="codeLine">  /// Check for a trellis layout.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">555</td>
    <td class="codeLine">  /// Check for a trellis layout.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">556</td>
    <td class="codeLine">  bool isTrellis(const MachineBasicBlock *BB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">556</td>
    <td class="codeLine">  bool isTrellis(const MachineBasicBlock *BB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">557</td>
    <td class="codeLine">                 const SmallVectorImpl<MachineBasicBlock *> &ViableSuccs,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">557</td>
    <td class="codeLine">                 const SmallVectorImpl<MachineBasicBlock *> &ViableSuccs,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">558</td>
    <td class="codeLine">                 const BlockChain &Chain, const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">558</td>
    <td class="codeLine">                 const BlockChain &Chain, const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">559</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">559</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">560</td>
    <td class="codeLine">  /// Get the best successor given a trellis layout.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">560</td>
    <td class="codeLine">  /// Get the best successor given a trellis layout.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">561</td>
    <td class="codeLine">  BlockAndTailDupResult getBestTrellisSuccessor(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">561</td>
    <td class="codeLine">  BlockAndTailDupResult getBestTrellisSuccessor(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">562</td>
    <td class="codeLine">      const MachineBasicBlock *BB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">562</td>
    <td class="codeLine">      const MachineBasicBlock *BB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">563</td>
    <td class="codeLine">      const SmallVectorImpl<MachineBasicBlock *> &ViableSuccs,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">563</td>
    <td class="codeLine">      const SmallVectorImpl<MachineBasicBlock *> &ViableSuccs,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">564</td>
    <td class="codeLine">      BranchProbability AdjustedSumProb, const BlockChain &Chain,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">564</td>
    <td class="codeLine">      BranchProbability AdjustedSumProb, const BlockChain &Chain,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">565</td>
    <td class="codeLine">      const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">565</td>
    <td class="codeLine">      const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">566</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">566</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">567</td>
    <td class="codeLine">  /// Get the best pair of non-conflicting edges.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">567</td>
    <td class="codeLine">  /// Get the best pair of non-conflicting edges.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">568</td>
    <td class="codeLine">  static std::pair<WeightedEdge, WeightedEdge> getBestNonConflictingEdges(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">568</td>
    <td class="codeLine">  static std::pair<WeightedEdge, WeightedEdge> getBestNonConflictingEdges(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">569</td>
    <td class="codeLine">      const MachineBasicBlock *BB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">569</td>
    <td class="codeLine">      const MachineBasicBlock *BB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">570</td>
    <td class="codeLine">      MutableArrayRef<SmallVector<WeightedEdge, 8>> Edges);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">570</td>
    <td class="codeLine">      MutableArrayRef<SmallVector<WeightedEdge, 8>> Edges);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">571</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">571</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">572</td>
    <td class="codeLine">  /// Returns true if a block can tail duplicate into all unplaced</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">572</td>
    <td class="codeLine">  /// Returns true if a block can tail duplicate into all unplaced</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">573</td>
    <td class="codeLine">  /// predecessors. Filters based on loop.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">573</td>
    <td class="codeLine">  /// predecessors. Filters based on loop.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">574</td>
    <td class="codeLine">  bool canTailDuplicateUnplacedPreds(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">574</td>
    <td class="codeLine">  bool canTailDuplicateUnplacedPreds(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">575</td>
    <td class="codeLine">      const MachineBasicBlock *BB, MachineBasicBlock *Succ,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">575</td>
    <td class="codeLine">      const MachineBasicBlock *BB, MachineBasicBlock *Succ,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">576</td>
    <td class="codeLine">      const BlockChain &Chain, const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">576</td>
    <td class="codeLine">      const BlockChain &Chain, const BlockFilterSet *BlockFilter);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">577</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">577</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">578</td>
    <td class="codeLine">  /// Find chains of triangles to tail-duplicate where a global analysis works,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">578</td>
    <td class="codeLine">  /// Find chains of triangles to tail-duplicate where a global analysis works,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">579</td>
    <td class="codeLine">  /// but a local analysis would not find them.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">579</td>
    <td class="codeLine">  /// but a local analysis would not find them.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">580</td>
    <td class="codeLine">  void precomputeTriangleChains();</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">580</td>
    <td class="codeLine">  void precomputeTriangleChains();</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">581</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">581</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">582</td>
    <td class="codeLine">  /// Apply a post-processing step optimizing block placement.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">582</td>
    <td class="codeLine">  /// Apply a post-processing step optimizing block placement.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">583</td>
    <td class="codeLine">  void applyExtTsp();</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">583</td>
    <td class="codeLine">  void applyExtTsp();</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">584</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">584</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">585</td>
    <td class="codeLine">  /// Modify the existing block placement in the function and adjust all jumps.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">585</td>
    <td class="codeLine">  /// Modify the existing block placement in the function and adjust all jumps.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">586</td>
    <td class="codeLine">  void assignBlockOrder(const std::vector<const MachineBasicBlock *> &NewOrder);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">586</td>
    <td class="codeLine">  void assignBlockOrder(const std::vector<const MachineBasicBlock *> &NewOrder);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">587</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">587</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">588</td>
    <td class="codeLine">  /// Create a single CFG chain from the current block order.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">588</td>
    <td class="codeLine">  /// Create a single CFG chain from the current block order.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">589</td>
    <td class="codeLine">  void createCFGChainExtTsp();</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">589</td>
    <td class="codeLine">  void createCFGChainExtTsp();</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">590</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">590</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">591</td>
    <td class="codeLine">public:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">591</td>
    <td class="codeLine">public:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">592</td>
    <td class="codeLine">  static char ID; // Pass identification, replacement for typeid</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">592</td>
    <td class="codeLine">  static char ID; // Pass identification, replacement for typeid</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">593</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">593</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">594</td>
    <td class="codeLine coveredLine">  MachineBlockPlacement() : MachineFunctionPass(ID) {</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">594</td>
    <td class="codeLine coveredLine">  MachineBlockPlacement() : MachineFunctionPass(ID) {</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">595</td>
    <td class="codeLine coveredLine">    initializeMachineBlockPlacementPass(*PassRegistry::getPassRegistry());</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">595</td>
    <td class="codeLine coveredLine">    initializeMachineBlockPlacementPass(*PassRegistry::getPassRegistry());</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">596</td>
    <td class="codeLine coveredLine">  }</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">596</td>
    <td class="codeLine coveredLine">  }</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">597</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">597</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">598</td>
    <td class="codeLine">  bool runOnMachineFunction(MachineFunction &F) override;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">598</td>
    <td class="codeLine">  bool runOnMachineFunction(MachineFunction &F) override;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">599</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">599</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">600</td>
    <td class="codeLine">  bool allowTailDupPlacement() const {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">600</td>
    <td class="codeLine">  bool allowTailDupPlacement() const {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">601</td>
    <td class="codeLine">    assert(F);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">601</td>
    <td class="codeLine">    assert(F);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">602</td>
    <td class="codeLine">    return TailDupPlacement && !F->getTarget().requiresStructuredCFG();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">602</td>
    <td class="codeLine">    return TailDupPlacement && !F->getTarget().requiresStructuredCFG();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">603</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">603</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">604</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">604</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">605</td>
    <td class="codeLine coveredLine">  void getAnalysisUsage(AnalysisUsage &AU) const override {</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">605</td>
    <td class="codeLine coveredLine">  void getAnalysisUsage(AnalysisUsage &AU) const override {</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">606</td>
    <td class="codeLine coveredLine">    AU.addRequired<MachineBranchProbabilityInfo>();</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">606</td>
    <td class="codeLine coveredLine">    AU.addRequired<MachineBranchProbabilityInfo>();</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">607</td>
    <td class="codeLine coveredLine">    AU.addRequired<MachineBlockFrequencyInfo>();</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">607</td>
    <td class="codeLine coveredLine">    AU.addRequired<MachineBlockFrequencyInfo>();</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">608</td>
    <td class="codeLine coveredLine">    if (TailDupPlacement)</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">608</td>
    <td class="codeLine coveredLine">    if (TailDupPlacement)</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">609</td>
    <td class="codeLine coveredLine">      AU.addRequired<MachinePostDominatorTree>();</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">609</td>
    <td class="codeLine coveredLine">      AU.addRequired<MachinePostDominatorTree>();</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">610</td>
    <td class="codeLine coveredLine">    AU.addRequired<MachineLoopInfo>();</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">610</td>
    <td class="codeLine coveredLine">    AU.addRequired<MachineLoopInfo>();</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">611</td>
    <td class="codeLine coveredLine">    AU.addRequired<ProfileSummaryInfoWrapperPass>();</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">611</td>
    <td class="codeLine coveredLine">    AU.addRequired<ProfileSummaryInfoWrapperPass>();</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">612</td>
    <td class="codeLine coveredLine">    AU.addRequired<TargetPassConfig>();</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">612</td>
    <td class="codeLine coveredLine">    AU.addRequired<TargetPassConfig>();</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">613</td>
    <td class="codeLine coveredLine">    MachineFunctionPass::getAnalysisUsage(AU);</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">613</td>
    <td class="codeLine coveredLine">    MachineFunctionPass::getAnalysisUsage(AU);</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">614</td>
    <td class="codeLine coveredLine">  }</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">614</td>
    <td class="codeLine coveredLine">  }</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">615</td>
    <td class="codeLine">};</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">615</td>
    <td class="codeLine">};</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">616</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">616</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">617</td>
    <td class="codeLine">} // end anonymous namespace</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">617</td>
    <td class="codeLine">} // end anonymous namespace</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">618</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">618</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">619</td>
    <td class="codeLine">char MachineBlockPlacement::ID = 0;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">619</td>
    <td class="codeLine">char MachineBlockPlacement::ID = 0;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">620</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">620</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">621</td>
    <td class="codeLine">char &llvm::MachineBlockPlacementID = MachineBlockPlacement::ID;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">621</td>
    <td class="codeLine">char &llvm::MachineBlockPlacementID = MachineBlockPlacement::ID;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">622</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">622</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">623</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_BEGIN(MachineBlockPlacement, DEBUG_TYPE,</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">623</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_BEGIN(MachineBlockPlacement, DEBUG_TYPE,</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">624</td>
    <td class="codeLine">                      "Branch Probability Basic Block Placement", false, false)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">624</td>
    <td class="codeLine">                      "Branch Probability Basic Block Placement", false, false)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">625</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_DEPENDENCY(MachineBranchProbabilityInfo)</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">625</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_DEPENDENCY(MachineBranchProbabilityInfo)</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">626</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_DEPENDENCY(MachineBlockFrequencyInfo)</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">626</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_DEPENDENCY(MachineBlockFrequencyInfo)</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">627</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_DEPENDENCY(MachinePostDominatorTree)</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">627</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_DEPENDENCY(MachinePostDominatorTree)</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">628</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_DEPENDENCY(MachineLoopInfo)</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">628</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_DEPENDENCY(MachineLoopInfo)</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">629</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_DEPENDENCY(ProfileSummaryInfoWrapperPass)</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">629</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_DEPENDENCY(ProfileSummaryInfoWrapperPass)</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">630</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_END(MachineBlockPlacement, DEBUG_TYPE,</td>
    <td class="lineNumber">4</td>
    <td class="lineNumber">630</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_END(MachineBlockPlacement, DEBUG_TYPE,</td>
    <td class="lineNumber">4</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">631</td>
    <td class="codeLine">                    "Branch Probability Basic Block Placement", false, false)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">631</td>
    <td class="codeLine">                    "Branch Probability Basic Block Placement", false, false)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">632</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">632</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">633</td>
    <td class="codeLine">#ifndef NDEBUG</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">633</td>
    <td class="codeLine">#ifndef NDEBUG</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">634</td>
    <td class="codeLine">/// Helper to print the name of a MBB.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">634</td>
    <td class="codeLine">/// Helper to print the name of a MBB.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">635</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">635</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">636</td>
    <td class="codeLine">/// Only used by debug logging.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">636</td>
    <td class="codeLine">/// Only used by debug logging.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">637</td>
    <td class="codeLine">static std::string getBlockName(const MachineBasicBlock *BB) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">637</td>
    <td class="codeLine">static std::string getBlockName(const MachineBasicBlock *BB) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">638</td>
    <td class="codeLine">  std::string Result;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">638</td>
    <td class="codeLine">  std::string Result;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">639</td>
    <td class="codeLine">  raw_string_ostream OS(Result);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">639</td>
    <td class="codeLine">  raw_string_ostream OS(Result);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">640</td>
    <td class="codeLine">  OS << printMBBReference(*BB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">640</td>
    <td class="codeLine">  OS << printMBBReference(*BB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">641</td>
    <td class="codeLine">  OS << " ('" << BB->getName() << "')";</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">641</td>
    <td class="codeLine">  OS << " ('" << BB->getName() << "')";</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">642</td>
    <td class="codeLine">  OS.flush();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">642</td>
    <td class="codeLine">  OS.flush();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">643</td>
    <td class="codeLine">  return Result;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">643</td>
    <td class="codeLine">  return Result;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">644</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">644</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">645</td>
    <td class="codeLine">#endif</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">645</td>
    <td class="codeLine">#endif</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">646</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">646</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">647</td>
    <td class="codeLine">/// Mark a chain's successors as having one fewer preds.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">647</td>
    <td class="codeLine">/// Mark a chain's successors as having one fewer preds.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">648</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">648</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">649</td>
    <td class="codeLine">/// When a chain is being merged into the "placed" chain, this routine will</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">649</td>
    <td class="codeLine">/// When a chain is being merged into the "placed" chain, this routine will</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">650</td>
    <td class="codeLine">/// quickly walk the successors of each block in the chain and mark them as</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">650</td>
    <td class="codeLine">/// quickly walk the successors of each block in the chain and mark them as</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">651</td>
    <td class="codeLine">/// having one fewer active predecessor. It also adds any successors of this</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">651</td>
    <td class="codeLine">/// having one fewer active predecessor. It also adds any successors of this</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">652</td>
    <td class="codeLine">/// chain which reach the zero-predecessor state to the appropriate worklist.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">652</td>
    <td class="codeLine">/// chain which reach the zero-predecessor state to the appropriate worklist.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">653</td>
    <td class="codeLine">void MachineBlockPlacement::markChainSuccessors(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">653</td>
    <td class="codeLine">void MachineBlockPlacement::markChainSuccessors(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">654</td>
    <td class="codeLine">    const BlockChain &Chain, const MachineBasicBlock *LoopHeaderBB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">654</td>
    <td class="codeLine">    const BlockChain &Chain, const MachineBasicBlock *LoopHeaderBB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">655</td>
    <td class="codeLine">    const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">655</td>
    <td class="codeLine">    const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">656</td>
    <td class="codeLine">  // Walk all the blocks in this chain, marking their successors as having</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">656</td>
    <td class="codeLine">  // Walk all the blocks in this chain, marking their successors as having</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">657</td>
    <td class="codeLine">  // a predecessor placed.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">657</td>
    <td class="codeLine">  // a predecessor placed.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">658</td>
    <td class="codeLine">  for (MachineBasicBlock *MBB : Chain) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">658</td>
    <td class="codeLine">  for (MachineBasicBlock *MBB : Chain) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">659</td>
    <td class="codeLine">    markBlockSuccessors(Chain, MBB, LoopHeaderBB, BlockFilter);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">659</td>
    <td class="codeLine">    markBlockSuccessors(Chain, MBB, LoopHeaderBB, BlockFilter);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">660</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">660</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">661</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">661</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">662</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">662</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">663</td>
    <td class="codeLine">/// Mark a single block's successors as having one fewer preds.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">663</td>
    <td class="codeLine">/// Mark a single block's successors as having one fewer preds.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">664</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">664</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">665</td>
    <td class="codeLine">/// Under normal circumstances, this is only called by markChainSuccessors,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">665</td>
    <td class="codeLine">/// Under normal circumstances, this is only called by markChainSuccessors,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">666</td>
    <td class="codeLine">/// but if a block that was to be placed is completely tail-duplicated away,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">666</td>
    <td class="codeLine">/// but if a block that was to be placed is completely tail-duplicated away,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">667</td>
    <td class="codeLine">/// and was duplicated into the chain end, we need to redo markBlockSuccessors</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">667</td>
    <td class="codeLine">/// and was duplicated into the chain end, we need to redo markBlockSuccessors</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">668</td>
    <td class="codeLine">/// for just that block.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">668</td>
    <td class="codeLine">/// for just that block.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">669</td>
    <td class="codeLine">void MachineBlockPlacement::markBlockSuccessors(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">669</td>
    <td class="codeLine">void MachineBlockPlacement::markBlockSuccessors(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">670</td>
    <td class="codeLine">    const BlockChain &Chain, const MachineBasicBlock *MBB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">670</td>
    <td class="codeLine">    const BlockChain &Chain, const MachineBasicBlock *MBB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">671</td>
    <td class="codeLine">    const MachineBasicBlock *LoopHeaderBB, const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">671</td>
    <td class="codeLine">    const MachineBasicBlock *LoopHeaderBB, const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">672</td>
    <td class="codeLine">  // Add any successors for which this is the only un-placed in-loop</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">672</td>
    <td class="codeLine">  // Add any successors for which this is the only un-placed in-loop</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">673</td>
    <td class="codeLine">  // predecessor to the worklist as a viable candidate for CFG-neutral</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">673</td>
    <td class="codeLine">  // predecessor to the worklist as a viable candidate for CFG-neutral</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">674</td>
    <td class="codeLine">  // placement. No subsequent placement of this block will violate the CFG</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">674</td>
    <td class="codeLine">  // placement. No subsequent placement of this block will violate the CFG</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">675</td>
    <td class="codeLine">  // shape, so we get to use heuristics to choose a favorable placement.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">675</td>
    <td class="codeLine">  // shape, so we get to use heuristics to choose a favorable placement.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">676</td>
    <td class="codeLine">  for (MachineBasicBlock *Succ : MBB->successors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">676</td>
    <td class="codeLine">  for (MachineBasicBlock *Succ : MBB->successors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">677</td>
    <td class="codeLine">    if (BlockFilter && !BlockFilter->count(Succ))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">677</td>
    <td class="codeLine">    if (BlockFilter && !BlockFilter->count(Succ))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">678</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">678</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">679</td>
    <td class="codeLine">    BlockChain &SuccChain = *BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">679</td>
    <td class="codeLine">    BlockChain &SuccChain = *BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">680</td>
    <td class="codeLine">    // Disregard edges within a fixed chain, or edges to the loop header.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">680</td>
    <td class="codeLine">    // Disregard edges within a fixed chain, or edges to the loop header.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">681</td>
    <td class="codeLine">    if (&Chain == &SuccChain || Succ == LoopHeaderBB)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">681</td>
    <td class="codeLine">    if (&Chain == &SuccChain || Succ == LoopHeaderBB)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">682</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">682</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">683</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">683</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">684</td>
    <td class="codeLine">    // This is a cross-chain edge that is within the loop, so decrement the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">684</td>
    <td class="codeLine">    // This is a cross-chain edge that is within the loop, so decrement the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">685</td>
    <td class="codeLine">    // loop predecessor count of the destination chain.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">685</td>
    <td class="codeLine">    // loop predecessor count of the destination chain.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">686</td>
    <td class="codeLine">    if (SuccChain.UnscheduledPredecessors == 0 ||</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">686</td>
    <td class="codeLine">    if (SuccChain.UnscheduledPredecessors == 0 ||</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">687</td>
    <td class="codeLine">        --SuccChain.UnscheduledPredecessors > 0)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">687</td>
    <td class="codeLine">        --SuccChain.UnscheduledPredecessors > 0)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">688</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">688</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">689</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">689</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">690</td>
    <td class="codeLine">    auto *NewBB = *SuccChain.begin();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">690</td>
    <td class="codeLine">    auto *NewBB = *SuccChain.begin();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">691</td>
    <td class="codeLine">    if (NewBB->isEHPad())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">691</td>
    <td class="codeLine">    if (NewBB->isEHPad())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">692</td>
    <td class="codeLine">      EHPadWorkList.push_back(NewBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">692</td>
    <td class="codeLine">      EHPadWorkList.push_back(NewBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">693</td>
    <td class="codeLine">    else</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">693</td>
    <td class="codeLine">    else</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">694</td>
    <td class="codeLine">      BlockWorkList.push_back(NewBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">694</td>
    <td class="codeLine">      BlockWorkList.push_back(NewBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">695</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">695</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">696</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">696</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">697</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">697</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">698</td>
    <td class="codeLine">/// This helper function collects the set of successors of block</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">698</td>
    <td class="codeLine">/// This helper function collects the set of successors of block</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">699</td>
    <td class="codeLine">/// \p BB that are allowed to be its layout successors, and return</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">699</td>
    <td class="codeLine">/// \p BB that are allowed to be its layout successors, and return</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">700</td>
    <td class="codeLine">/// the total branch probability of edges from \p BB to those</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">700</td>
    <td class="codeLine">/// the total branch probability of edges from \p BB to those</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">701</td>
    <td class="codeLine">/// blocks.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">701</td>
    <td class="codeLine">/// blocks.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">702</td>
    <td class="codeLine">BranchProbability MachineBlockPlacement::collectViableSuccessors(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">702</td>
    <td class="codeLine">BranchProbability MachineBlockPlacement::collectViableSuccessors(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">703</td>
    <td class="codeLine">    const MachineBasicBlock *BB, const BlockChain &Chain,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">703</td>
    <td class="codeLine">    const MachineBasicBlock *BB, const BlockChain &Chain,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">704</td>
    <td class="codeLine">    const BlockFilterSet *BlockFilter,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">704</td>
    <td class="codeLine">    const BlockFilterSet *BlockFilter,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">705</td>
    <td class="codeLine">    SmallVector<MachineBasicBlock *, 4> &Successors) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">705</td>
    <td class="codeLine">    SmallVector<MachineBasicBlock *, 4> &Successors) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">706</td>
    <td class="codeLine">  // Adjust edge probabilities by excluding edges pointing to blocks that is</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">706</td>
    <td class="codeLine">  // Adjust edge probabilities by excluding edges pointing to blocks that is</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">707</td>
    <td class="codeLine">  // either not in BlockFilter or is already in the current chain. Consider the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">707</td>
    <td class="codeLine">  // either not in BlockFilter or is already in the current chain. Consider the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">708</td>
    <td class="codeLine">  // following CFG:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">708</td>
    <td class="codeLine">  // following CFG:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">709</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">709</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">710</td>
    <td class="codeLine">  //     --->A</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">710</td>
    <td class="codeLine">  //     --->A</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">711</td>
    <td class="codeLine">  //     |  / \</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">711</td>
    <td class="codeLine">  //     |  / \</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">712</td>
    <td class="codeLine">  //     | B   C</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">712</td>
    <td class="codeLine">  //     | B   C</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">713</td>
    <td class="codeLine">  //     |  \ / \</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">713</td>
    <td class="codeLine">  //     |  \ / \</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">714</td>
    <td class="codeLine">  //     ----D   E</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">714</td>
    <td class="codeLine">  //     ----D   E</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">715</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">715</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">716</td>
    <td class="codeLine">  // Assume A->C is very hot (>90%), and C->D has a 50% probability, then after</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">716</td>
    <td class="codeLine">  // Assume A->C is very hot (>90%), and C->D has a 50% probability, then after</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">717</td>
    <td class="codeLine">  // A->C is chosen as a fall-through, D won't be selected as a successor of C</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">717</td>
    <td class="codeLine">  // A->C is chosen as a fall-through, D won't be selected as a successor of C</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">718</td>
    <td class="codeLine">  // due to CFG constraint (the probability of C->D is not greater than</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">718</td>
    <td class="codeLine">  // due to CFG constraint (the probability of C->D is not greater than</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">719</td>
    <td class="codeLine">  // HotProb to break topo-order). If we exclude E that is not in BlockFilter</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">719</td>
    <td class="codeLine">  // HotProb to break topo-order). If we exclude E that is not in BlockFilter</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">720</td>
    <td class="codeLine">  // when calculating the probability of C->D, D will be selected and we</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">720</td>
    <td class="codeLine">  // when calculating the probability of C->D, D will be selected and we</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">721</td>
    <td class="codeLine">  // will get A C D B as the layout of this loop.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">721</td>
    <td class="codeLine">  // will get A C D B as the layout of this loop.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">722</td>
    <td class="codeLine">  auto AdjustedSumProb = BranchProbability::getOne();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">722</td>
    <td class="codeLine">  auto AdjustedSumProb = BranchProbability::getOne();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">723</td>
    <td class="codeLine">  for (MachineBasicBlock *Succ : BB->successors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">723</td>
    <td class="codeLine">  for (MachineBasicBlock *Succ : BB->successors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">724</td>
    <td class="codeLine">    bool SkipSucc = false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">724</td>
    <td class="codeLine">    bool SkipSucc = false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">725</td>
    <td class="codeLine">    if (Succ->isEHPad() || (BlockFilter && !BlockFilter->count(Succ))) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">725</td>
    <td class="codeLine">    if (Succ->isEHPad() || (BlockFilter && !BlockFilter->count(Succ))) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">726</td>
    <td class="codeLine">      SkipSucc = true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">726</td>
    <td class="codeLine">      SkipSucc = true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">727</td>
    <td class="codeLine">    } else {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">727</td>
    <td class="codeLine">    } else {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">728</td>
    <td class="codeLine">      BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">728</td>
    <td class="codeLine">      BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">729</td>
    <td class="codeLine">      if (SuccChain == &Chain) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">729</td>
    <td class="codeLine">      if (SuccChain == &Chain) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">730</td>
    <td class="codeLine">        SkipSucc = true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">730</td>
    <td class="codeLine">        SkipSucc = true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">731</td>
    <td class="codeLine">      } else if (Succ != *SuccChain->begin()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">731</td>
    <td class="codeLine">      } else if (Succ != *SuccChain->begin()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">732</td>
    <td class="codeLine">        LLVM_DEBUG(dbgs() << "    " << getBlockName(Succ)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">732</td>
    <td class="codeLine">        LLVM_DEBUG(dbgs() << "    " << getBlockName(Succ)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">733</td>
    <td class="codeLine">                          << " -> Mid chain!\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">733</td>
    <td class="codeLine">                          << " -> Mid chain!\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">734</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">734</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">735</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">735</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">736</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">736</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">737</td>
    <td class="codeLine">    if (SkipSucc)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">737</td>
    <td class="codeLine">    if (SkipSucc)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">738</td>
    <td class="codeLine">      AdjustedSumProb -= MBPI->getEdgeProbability(BB, Succ);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">738</td>
    <td class="codeLine">      AdjustedSumProb -= MBPI->getEdgeProbability(BB, Succ);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">739</td>
    <td class="codeLine">    else</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">739</td>
    <td class="codeLine">    else</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">740</td>
    <td class="codeLine">      Successors.push_back(Succ);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">740</td>
    <td class="codeLine">      Successors.push_back(Succ);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">741</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">741</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">742</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">742</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">743</td>
    <td class="codeLine">  return AdjustedSumProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">743</td>
    <td class="codeLine">  return AdjustedSumProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">744</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">744</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">745</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">745</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">746</td>
    <td class="codeLine">/// The helper function returns the branch probability that is adjusted</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">746</td>
    <td class="codeLine">/// The helper function returns the branch probability that is adjusted</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">747</td>
    <td class="codeLine">/// or normalized over the new total \p AdjustedSumProb.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">747</td>
    <td class="codeLine">/// or normalized over the new total \p AdjustedSumProb.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">748</td>
    <td class="codeLine">static BranchProbability</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">748</td>
    <td class="codeLine">static BranchProbability</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">749</td>
    <td class="codeLine">getAdjustedProbability(BranchProbability OrigProb,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">749</td>
    <td class="codeLine">getAdjustedProbability(BranchProbability OrigProb,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">750</td>
    <td class="codeLine">                       BranchProbability AdjustedSumProb) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">750</td>
    <td class="codeLine">                       BranchProbability AdjustedSumProb) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">751</td>
    <td class="codeLine">  BranchProbability SuccProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">751</td>
    <td class="codeLine">  BranchProbability SuccProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">752</td>
    <td class="codeLine">  uint32_t SuccProbN = OrigProb.getNumerator();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">752</td>
    <td class="codeLine">  uint32_t SuccProbN = OrigProb.getNumerator();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">753</td>
    <td class="codeLine">  uint32_t SuccProbD = AdjustedSumProb.getNumerator();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">753</td>
    <td class="codeLine">  uint32_t SuccProbD = AdjustedSumProb.getNumerator();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">754</td>
    <td class="codeLine">  if (SuccProbN >= SuccProbD)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">754</td>
    <td class="codeLine">  if (SuccProbN >= SuccProbD)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">755</td>
    <td class="codeLine">    SuccProb = BranchProbability::getOne();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">755</td>
    <td class="codeLine">    SuccProb = BranchProbability::getOne();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">756</td>
    <td class="codeLine">  else</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">756</td>
    <td class="codeLine">  else</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">757</td>
    <td class="codeLine">    SuccProb = BranchProbability(SuccProbN, SuccProbD);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">757</td>
    <td class="codeLine">    SuccProb = BranchProbability(SuccProbN, SuccProbD);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">758</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">758</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">759</td>
    <td class="codeLine">  return SuccProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">759</td>
    <td class="codeLine">  return SuccProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">760</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">760</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">761</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">761</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">762</td>
    <td class="codeLine">/// Check if \p BB has exactly the successors in \p Successors.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">762</td>
    <td class="codeLine">/// Check if \p BB has exactly the successors in \p Successors.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">763</td>
    <td class="codeLine">static bool</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">763</td>
    <td class="codeLine">static bool</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">764</td>
    <td class="codeLine">hasSameSuccessors(MachineBasicBlock &BB,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">764</td>
    <td class="codeLine">hasSameSuccessors(MachineBasicBlock &BB,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">765</td>
    <td class="codeLine">                  SmallPtrSetImpl<const MachineBasicBlock *> &Successors) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">765</td>
    <td class="codeLine">                  SmallPtrSetImpl<const MachineBasicBlock *> &Successors) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">766</td>
    <td class="codeLine">  if (BB.succ_size() != Successors.size())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">766</td>
    <td class="codeLine">  if (BB.succ_size() != Successors.size())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">767</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">767</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">768</td>
    <td class="codeLine">  // We don't want to count self-loops</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">768</td>
    <td class="codeLine">  // We don't want to count self-loops</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">769</td>
    <td class="codeLine">  if (Successors.count(&BB))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">769</td>
    <td class="codeLine">  if (Successors.count(&BB))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">770</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">770</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">771</td>
    <td class="codeLine">  for (MachineBasicBlock *Succ : BB.successors())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">771</td>
    <td class="codeLine">  for (MachineBasicBlock *Succ : BB.successors())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">772</td>
    <td class="codeLine">    if (!Successors.count(Succ))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">772</td>
    <td class="codeLine">    if (!Successors.count(Succ))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">773</td>
    <td class="codeLine">      return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">773</td>
    <td class="codeLine">      return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">774</td>
    <td class="codeLine">  return true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">774</td>
    <td class="codeLine">  return true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">775</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">775</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">776</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">776</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">777</td>
    <td class="codeLine">/// Check if a block should be tail duplicated to increase fallthrough</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">777</td>
    <td class="codeLine">/// Check if a block should be tail duplicated to increase fallthrough</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">778</td>
    <td class="codeLine">/// opportunities.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">778</td>
    <td class="codeLine">/// opportunities.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">779</td>
    <td class="codeLine">/// \p BB Block to check.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">779</td>
    <td class="codeLine">/// \p BB Block to check.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">780</td>
    <td class="codeLine">bool MachineBlockPlacement::shouldTailDuplicate(MachineBasicBlock *BB) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">780</td>
    <td class="codeLine">bool MachineBlockPlacement::shouldTailDuplicate(MachineBasicBlock *BB) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">781</td>
    <td class="codeLine">  // Blocks with single successors don't create additional fallthrough</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">781</td>
    <td class="codeLine">  // Blocks with single successors don't create additional fallthrough</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">782</td>
    <td class="codeLine">  // opportunities. Don't duplicate them. TODO: When conditional exits are</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">782</td>
    <td class="codeLine">  // opportunities. Don't duplicate them. TODO: When conditional exits are</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">783</td>
    <td class="codeLine">  // analyzable, allow them to be duplicated.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">783</td>
    <td class="codeLine">  // analyzable, allow them to be duplicated.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">784</td>
    <td class="codeLine">  bool IsSimple = TailDup.isSimpleBB(BB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">784</td>
    <td class="codeLine">  bool IsSimple = TailDup.isSimpleBB(BB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">785</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">785</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">786</td>
    <td class="codeLine">  if (BB->succ_size() == 1)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">786</td>
    <td class="codeLine">  if (BB->succ_size() == 1)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">787</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">787</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">788</td>
    <td class="codeLine">  return TailDup.shouldTailDuplicate(IsSimple, *BB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">788</td>
    <td class="codeLine">  return TailDup.shouldTailDuplicate(IsSimple, *BB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">789</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">789</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">790</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">790</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">791</td>
    <td class="codeLine">/// Compare 2 BlockFrequency's with a small penalty for \p A.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">791</td>
    <td class="codeLine">/// Compare 2 BlockFrequency's with a small penalty for \p A.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">792</td>
    <td class="codeLine">/// In order to be conservative, we apply a X% penalty to account for</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">792</td>
    <td class="codeLine">/// In order to be conservative, we apply a X% penalty to account for</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">793</td>
    <td class="codeLine">/// increased icache pressure and static heuristics. For small frequencies</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">793</td>
    <td class="codeLine">/// increased icache pressure and static heuristics. For small frequencies</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">794</td>
    <td class="codeLine">/// we use only the numerators to improve accuracy. For simplicity, we assume the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">794</td>
    <td class="codeLine">/// we use only the numerators to improve accuracy. For simplicity, we assume the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">795</td>
    <td class="codeLine">/// penalty is less than 100%</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">795</td>
    <td class="codeLine">/// penalty is less than 100%</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">796</td>
    <td class="codeLine">/// TODO(iteratee): Use 64-bit fixed point edge frequencies everywhere.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">796</td>
    <td class="codeLine">/// TODO(iteratee): Use 64-bit fixed point edge frequencies everywhere.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">797</td>
    <td class="codeLine">static bool greaterWithBias(BlockFrequency A, BlockFrequency B,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">797</td>
    <td class="codeLine">static bool greaterWithBias(BlockFrequency A, BlockFrequency B,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">798</td>
    <td class="codeLine">                            uint64_t EntryFreq) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">798</td>
    <td class="codeLine">                            uint64_t EntryFreq) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">799</td>
    <td class="codeLine">  BranchProbability ThresholdProb(TailDupPlacementPenalty, 100);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">799</td>
    <td class="codeLine">  BranchProbability ThresholdProb(TailDupPlacementPenalty, 100);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">800</td>
    <td class="codeLine">  BlockFrequency Gain = A - B;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">800</td>
    <td class="codeLine">  BlockFrequency Gain = A - B;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">801</td>
    <td class="codeLine">  return (Gain / ThresholdProb).getFrequency() >= EntryFreq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">801</td>
    <td class="codeLine">  return (Gain / ThresholdProb).getFrequency() >= EntryFreq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">802</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">802</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">803</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">803</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">804</td>
    <td class="codeLine">/// Check the edge frequencies to see if tail duplication will increase</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">804</td>
    <td class="codeLine">/// Check the edge frequencies to see if tail duplication will increase</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">805</td>
    <td class="codeLine">/// fallthroughs. It only makes sense to call this function when</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">805</td>
    <td class="codeLine">/// fallthroughs. It only makes sense to call this function when</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">806</td>
    <td class="codeLine">/// \p Succ would not be chosen otherwise. Tail duplication of \p Succ is</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">806</td>
    <td class="codeLine">/// \p Succ would not be chosen otherwise. Tail duplication of \p Succ is</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">807</td>
    <td class="codeLine">/// always locally profitable if we would have picked \p Succ without</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">807</td>
    <td class="codeLine">/// always locally profitable if we would have picked \p Succ without</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">808</td>
    <td class="codeLine">/// considering duplication.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">808</td>
    <td class="codeLine">/// considering duplication.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">809</td>
    <td class="codeLine">bool MachineBlockPlacement::isProfitableToTailDup(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">809</td>
    <td class="codeLine">bool MachineBlockPlacement::isProfitableToTailDup(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">810</td>
    <td class="codeLine">    const MachineBasicBlock *BB, const MachineBasicBlock *Succ,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">810</td>
    <td class="codeLine">    const MachineBasicBlock *BB, const MachineBasicBlock *Succ,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">811</td>
    <td class="codeLine">    BranchProbability QProb,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">811</td>
    <td class="codeLine">    BranchProbability QProb,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">812</td>
    <td class="codeLine">    const BlockChain &Chain, const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">812</td>
    <td class="codeLine">    const BlockChain &Chain, const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">813</td>
    <td class="codeLine">  // We need to do a probability calculation to make sure this is profitable.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">813</td>
    <td class="codeLine">  // We need to do a probability calculation to make sure this is profitable.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">814</td>
    <td class="codeLine">  // First: does succ have a successor that post-dominates? This affects the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">814</td>
    <td class="codeLine">  // First: does succ have a successor that post-dominates? This affects the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">815</td>
    <td class="codeLine">  // calculation. The 2 relevant cases are:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">815</td>
    <td class="codeLine">  // calculation. The 2 relevant cases are:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">816</td>
    <td class="codeLine">  //    BB         BB</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">816</td>
    <td class="codeLine">  //    BB         BB</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">817</td>
    <td class="codeLine">  //    | \Qout    | \Qout</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">817</td>
    <td class="codeLine">  //    | \Qout    | \Qout</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">818</td>
    <td class="codeLine">  //   P|  C       |P C</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">818</td>
    <td class="codeLine">  //   P|  C       |P C</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">819</td>
    <td class="codeLine">  //    =   C'     =   C'</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">819</td>
    <td class="codeLine">  //    =   C'     =   C'</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">820</td>
    <td class="codeLine">  //    |  /Qin    |  /Qin</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">820</td>
    <td class="codeLine">  //    |  /Qin    |  /Qin</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">821</td>
    <td class="codeLine">  //    | /        | /</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">821</td>
    <td class="codeLine">  //    | /        | /</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">822</td>
    <td class="codeLine">  //    Succ       Succ</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">822</td>
    <td class="codeLine">  //    Succ       Succ</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">823</td>
    <td class="codeLine">  //    / \        | \  V</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">823</td>
    <td class="codeLine">  //    / \        | \  V</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">824</td>
    <td class="codeLine">  //  U/   =V      |U \</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">824</td>
    <td class="codeLine">  //  U/   =V      |U \</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">825</td>
    <td class="codeLine">  //  /     \      =   D</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">825</td>
    <td class="codeLine">  //  /     \      =   D</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">826</td>
    <td class="codeLine">  //  D      E     |  /</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">826</td>
    <td class="codeLine">  //  D      E     |  /</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">827</td>
    <td class="codeLine">  //               | /</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">827</td>
    <td class="codeLine">  //               | /</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">828</td>
    <td class="codeLine">  //               |/</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">828</td>
    <td class="codeLine">  //               |/</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">829</td>
    <td class="codeLine">  //               PDom</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">829</td>
    <td class="codeLine">  //               PDom</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">830</td>
    <td class="codeLine">  //  '=' : Branch taken for that CFG edge</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">830</td>
    <td class="codeLine">  //  '=' : Branch taken for that CFG edge</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">831</td>
    <td class="codeLine">  // In the second case, Placing Succ while duplicating it into C prevents the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">831</td>
    <td class="codeLine">  // In the second case, Placing Succ while duplicating it into C prevents the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">832</td>
    <td class="codeLine">  // fallthrough of Succ into either D or PDom, because they now have C as an</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">832</td>
    <td class="codeLine">  // fallthrough of Succ into either D or PDom, because they now have C as an</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">833</td>
    <td class="codeLine">  // unplaced predecessor</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">833</td>
    <td class="codeLine">  // unplaced predecessor</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">834</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">834</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">835</td>
    <td class="codeLine">  // Start by figuring out which case we fall into</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">835</td>
    <td class="codeLine">  // Start by figuring out which case we fall into</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">836</td>
    <td class="codeLine">  MachineBasicBlock *PDom = nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">836</td>
    <td class="codeLine">  MachineBasicBlock *PDom = nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">837</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 4> SuccSuccs;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">837</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 4> SuccSuccs;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">838</td>
    <td class="codeLine">  // Only scan the relevant successors</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">838</td>
    <td class="codeLine">  // Only scan the relevant successors</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">839</td>
    <td class="codeLine">  auto AdjustedSuccSumProb =</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">839</td>
    <td class="codeLine">  auto AdjustedSuccSumProb =</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">840</td>
    <td class="codeLine">      collectViableSuccessors(Succ, Chain, BlockFilter, SuccSuccs);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">840</td>
    <td class="codeLine">      collectViableSuccessors(Succ, Chain, BlockFilter, SuccSuccs);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">841</td>
    <td class="codeLine">  BranchProbability PProb = MBPI->getEdgeProbability(BB, Succ);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">841</td>
    <td class="codeLine">  BranchProbability PProb = MBPI->getEdgeProbability(BB, Succ);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">842</td>
    <td class="codeLine">  auto BBFreq = MBFI->getBlockFreq(BB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">842</td>
    <td class="codeLine">  auto BBFreq = MBFI->getBlockFreq(BB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">843</td>
    <td class="codeLine">  auto SuccFreq = MBFI->getBlockFreq(Succ);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">843</td>
    <td class="codeLine">  auto SuccFreq = MBFI->getBlockFreq(Succ);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">844</td>
    <td class="codeLine">  BlockFrequency P = BBFreq * PProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">844</td>
    <td class="codeLine">  BlockFrequency P = BBFreq * PProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">845</td>
    <td class="codeLine">  BlockFrequency Qout = BBFreq * QProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">845</td>
    <td class="codeLine">  BlockFrequency Qout = BBFreq * QProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">846</td>
    <td class="codeLine">  uint64_t EntryFreq = MBFI->getEntryFreq();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">846</td>
    <td class="codeLine">  uint64_t EntryFreq = MBFI->getEntryFreq();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">847</td>
    <td class="codeLine">  // If there are no more successors, it is profitable to copy, as it strictly</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">847</td>
    <td class="codeLine">  // If there are no more successors, it is profitable to copy, as it strictly</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">848</td>
    <td class="codeLine">  // increases fallthrough.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">848</td>
    <td class="codeLine">  // increases fallthrough.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">849</td>
    <td class="codeLine">  if (SuccSuccs.size() == 0)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">849</td>
    <td class="codeLine">  if (SuccSuccs.size() == 0)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">850</td>
    <td class="codeLine">    return greaterWithBias(P, Qout, EntryFreq);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">850</td>
    <td class="codeLine">    return greaterWithBias(P, Qout, EntryFreq);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">851</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">851</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">852</td>
    <td class="codeLine">  auto BestSuccSucc = BranchProbability::getZero();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">852</td>
    <td class="codeLine">  auto BestSuccSucc = BranchProbability::getZero();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">853</td>
    <td class="codeLine">  // Find the PDom or the best Succ if no PDom exists.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">853</td>
    <td class="codeLine">  // Find the PDom or the best Succ if no PDom exists.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">854</td>
    <td class="codeLine">  for (MachineBasicBlock *SuccSucc : SuccSuccs) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">854</td>
    <td class="codeLine">  for (MachineBasicBlock *SuccSucc : SuccSuccs) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">855</td>
    <td class="codeLine">    auto Prob = MBPI->getEdgeProbability(Succ, SuccSucc);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">855</td>
    <td class="codeLine">    auto Prob = MBPI->getEdgeProbability(Succ, SuccSucc);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">856</td>
    <td class="codeLine">    if (Prob > BestSuccSucc)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">856</td>
    <td class="codeLine">    if (Prob > BestSuccSucc)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">857</td>
    <td class="codeLine">      BestSuccSucc = Prob;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">857</td>
    <td class="codeLine">      BestSuccSucc = Prob;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">858</td>
    <td class="codeLine">    if (PDom == nullptr)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">858</td>
    <td class="codeLine">    if (PDom == nullptr)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">859</td>
    <td class="codeLine">      if (MPDT->dominates(SuccSucc, Succ)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">859</td>
    <td class="codeLine">      if (MPDT->dominates(SuccSucc, Succ)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">860</td>
    <td class="codeLine">        PDom = SuccSucc;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">860</td>
    <td class="codeLine">        PDom = SuccSucc;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">861</td>
    <td class="codeLine">        break;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">861</td>
    <td class="codeLine">        break;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">862</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">862</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">863</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">863</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">864</td>
    <td class="codeLine">  // For the comparisons, we need to know Succ's best incoming edge that isn't</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">864</td>
    <td class="codeLine">  // For the comparisons, we need to know Succ's best incoming edge that isn't</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">865</td>
    <td class="codeLine">  // from BB.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">865</td>
    <td class="codeLine">  // from BB.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">866</td>
    <td class="codeLine">  auto SuccBestPred = BlockFrequency(0);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">866</td>
    <td class="codeLine">  auto SuccBestPred = BlockFrequency(0);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">867</td>
    <td class="codeLine">  for (MachineBasicBlock *SuccPred : Succ->predecessors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">867</td>
    <td class="codeLine">  for (MachineBasicBlock *SuccPred : Succ->predecessors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">868</td>
    <td class="codeLine">    if (SuccPred == Succ || SuccPred == BB</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">868</td>
    <td class="codeLine">    if (SuccPred == Succ || SuccPred == BB</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">869</td>
    <td class="codeLine">        || BlockToChain[SuccPred] == &Chain</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">869</td>
    <td class="codeLine">        || BlockToChain[SuccPred] == &Chain</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">870</td>
    <td class="codeLine">        || (BlockFilter && !BlockFilter->count(SuccPred)))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">870</td>
    <td class="codeLine">        || (BlockFilter && !BlockFilter->count(SuccPred)))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">871</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">871</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">872</td>
    <td class="codeLine">    auto Freq = MBFI->getBlockFreq(SuccPred)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">872</td>
    <td class="codeLine">    auto Freq = MBFI->getBlockFreq(SuccPred)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">873</td>
    <td class="codeLine">        * MBPI->getEdgeProbability(SuccPred, Succ);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">873</td>
    <td class="codeLine">        * MBPI->getEdgeProbability(SuccPred, Succ);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">874</td>
    <td class="codeLine">    if (Freq > SuccBestPred)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">874</td>
    <td class="codeLine">    if (Freq > SuccBestPred)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">875</td>
    <td class="codeLine">      SuccBestPred = Freq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">875</td>
    <td class="codeLine">      SuccBestPred = Freq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">876</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">876</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">877</td>
    <td class="codeLine">  // Qin is Succ's best unplaced incoming edge that isn't BB</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">877</td>
    <td class="codeLine">  // Qin is Succ's best unplaced incoming edge that isn't BB</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">878</td>
    <td class="codeLine">  BlockFrequency Qin = SuccBestPred;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">878</td>
    <td class="codeLine">  BlockFrequency Qin = SuccBestPred;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">879</td>
    <td class="codeLine">  // If it doesn't have a post-dominating successor, here is the calculation:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">879</td>
    <td class="codeLine">  // If it doesn't have a post-dominating successor, here is the calculation:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">880</td>
    <td class="codeLine">  //    BB        BB</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">880</td>
    <td class="codeLine">  //    BB        BB</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">881</td>
    <td class="codeLine">  //    | \Qout   |  \</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">881</td>
    <td class="codeLine">  //    | \Qout   |  \</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">882</td>
    <td class="codeLine">  //   P|  C      |   =</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">882</td>
    <td class="codeLine">  //   P|  C      |   =</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">883</td>
    <td class="codeLine">  //    =   C'    |    C</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">883</td>
    <td class="codeLine">  //    =   C'    |    C</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">884</td>
    <td class="codeLine">  //    |  /Qin   |     |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">884</td>
    <td class="codeLine">  //    |  /Qin   |     |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">885</td>
    <td class="codeLine">  //    | /       |     C' (+Succ)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">885</td>
    <td class="codeLine">  //    | /       |     C' (+Succ)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">886</td>
    <td class="codeLine">  //    Succ      Succ /|</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">886</td>
    <td class="codeLine">  //    Succ      Succ /|</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">887</td>
    <td class="codeLine">  //    / \       |  \/ |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">887</td>
    <td class="codeLine">  //    / \       |  \/ |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">888</td>
    <td class="codeLine">  //  U/   =V     |  == |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">888</td>
    <td class="codeLine">  //  U/   =V     |  == |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">889</td>
    <td class="codeLine">  //  /     \     | /  \|</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">889</td>
    <td class="codeLine">  //  /     \     | /  \|</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">890</td>
    <td class="codeLine">  //  D      E    D     E</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">890</td>
    <td class="codeLine">  //  D      E    D     E</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">891</td>
    <td class="codeLine">  //  '=' : Branch taken for that CFG edge</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">891</td>
    <td class="codeLine">  //  '=' : Branch taken for that CFG edge</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">892</td>
    <td class="codeLine">  //  Cost in the first case is: P + V</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">892</td>
    <td class="codeLine">  //  Cost in the first case is: P + V</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">893</td>
    <td class="codeLine">  //  For this calculation, we always assume P > Qout. If Qout > P</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">893</td>
    <td class="codeLine">  //  For this calculation, we always assume P > Qout. If Qout > P</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">894</td>
    <td class="codeLine">  //  The result of this function will be ignored at the caller.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">894</td>
    <td class="codeLine">  //  The result of this function will be ignored at the caller.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">895</td>
    <td class="codeLine">  //  Let F = SuccFreq - Qin</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">895</td>
    <td class="codeLine">  //  Let F = SuccFreq - Qin</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">896</td>
    <td class="codeLine">  //  Cost in the second case is: Qout + min(Qin, F) * U + max(Qin, F) * V</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">896</td>
    <td class="codeLine">  //  Cost in the second case is: Qout + min(Qin, F) * U + max(Qin, F) * V</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">897</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">897</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">898</td>
    <td class="codeLine">  if (PDom == nullptr || !Succ->isSuccessor(PDom)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">898</td>
    <td class="codeLine">  if (PDom == nullptr || !Succ->isSuccessor(PDom)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">899</td>
    <td class="codeLine">    BranchProbability UProb = BestSuccSucc;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">899</td>
    <td class="codeLine">    BranchProbability UProb = BestSuccSucc;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">900</td>
    <td class="codeLine">    BranchProbability VProb = AdjustedSuccSumProb - UProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">900</td>
    <td class="codeLine">    BranchProbability VProb = AdjustedSuccSumProb - UProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">901</td>
    <td class="codeLine">    BlockFrequency F = SuccFreq - Qin;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">901</td>
    <td class="codeLine">    BlockFrequency F = SuccFreq - Qin;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">902</td>
    <td class="codeLine">    BlockFrequency V = SuccFreq * VProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">902</td>
    <td class="codeLine">    BlockFrequency V = SuccFreq * VProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">903</td>
    <td class="codeLine">    BlockFrequency QinU = std::min(Qin, F) * UProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">903</td>
    <td class="codeLine">    BlockFrequency QinU = std::min(Qin, F) * UProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">904</td>
    <td class="codeLine">    BlockFrequency BaseCost = P + V;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">904</td>
    <td class="codeLine">    BlockFrequency BaseCost = P + V;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">905</td>
    <td class="codeLine">    BlockFrequency DupCost = Qout + QinU + std::max(Qin, F) * VProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">905</td>
    <td class="codeLine">    BlockFrequency DupCost = Qout + QinU + std::max(Qin, F) * VProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">906</td>
    <td class="codeLine">    return greaterWithBias(BaseCost, DupCost, EntryFreq);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">906</td>
    <td class="codeLine">    return greaterWithBias(BaseCost, DupCost, EntryFreq);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">907</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">907</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">908</td>
    <td class="codeLine">  BranchProbability UProb = MBPI->getEdgeProbability(Succ, PDom);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">908</td>
    <td class="codeLine">  BranchProbability UProb = MBPI->getEdgeProbability(Succ, PDom);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">909</td>
    <td class="codeLine">  BranchProbability VProb = AdjustedSuccSumProb - UProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">909</td>
    <td class="codeLine">  BranchProbability VProb = AdjustedSuccSumProb - UProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">910</td>
    <td class="codeLine">  BlockFrequency U = SuccFreq * UProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">910</td>
    <td class="codeLine">  BlockFrequency U = SuccFreq * UProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">911</td>
    <td class="codeLine">  BlockFrequency V = SuccFreq * VProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">911</td>
    <td class="codeLine">  BlockFrequency V = SuccFreq * VProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">912</td>
    <td class="codeLine">  BlockFrequency F = SuccFreq - Qin;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">912</td>
    <td class="codeLine">  BlockFrequency F = SuccFreq - Qin;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">913</td>
    <td class="codeLine">  // If there is a post-dominating successor, here is the calculation:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">913</td>
    <td class="codeLine">  // If there is a post-dominating successor, here is the calculation:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">914</td>
    <td class="codeLine">  // BB         BB                 BB          BB</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">914</td>
    <td class="codeLine">  // BB         BB                 BB          BB</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">915</td>
    <td class="codeLine">  // | \Qout    |   \               | \Qout     |  \</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">915</td>
    <td class="codeLine">  // | \Qout    |   \               | \Qout     |  \</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">916</td>
    <td class="codeLine">  // |P C       |    =              |P C        |   =</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">916</td>
    <td class="codeLine">  // |P C       |    =              |P C        |   =</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">917</td>
    <td class="codeLine">  // =   C'     |P    C             =   C'      |P   C</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">917</td>
    <td class="codeLine">  // =   C'     |P    C             =   C'      |P   C</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">918</td>
    <td class="codeLine">  // |  /Qin    |      |            |  /Qin     |     |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">918</td>
    <td class="codeLine">  // |  /Qin    |      |            |  /Qin     |     |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">919</td>
    <td class="codeLine">  // | /        |      C' (+Succ)   | /         |     C' (+Succ)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">919</td>
    <td class="codeLine">  // | /        |      C' (+Succ)   | /         |     C' (+Succ)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">920</td>
    <td class="codeLine">  // Succ       Succ  /|            Succ        Succ /|</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">920</td>
    <td class="codeLine">  // Succ       Succ  /|            Succ        Succ /|</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">921</td>
    <td class="codeLine">  // | \  V     |   \/ |            | \  V      |  \/ |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">921</td>
    <td class="codeLine">  // | \  V     |   \/ |            | \  V      |  \/ |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">922</td>
    <td class="codeLine">  // |U \       |U  /\ =?           |U =        |U /\ |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">922</td>
    <td class="codeLine">  // |U \       |U  /\ =?           |U =        |U /\ |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">923</td>
    <td class="codeLine">  // =   D      = =  =?|            |   D       | =  =|</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">923</td>
    <td class="codeLine">  // =   D      = =  =?|            |   D       | =  =|</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">924</td>
    <td class="codeLine">  // |  /       |/     D            |  /        |/    D</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">924</td>
    <td class="codeLine">  // |  /       |/     D            |  /        |/    D</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">925</td>
    <td class="codeLine">  // | /        |     /             | =         |    /</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">925</td>
    <td class="codeLine">  // | /        |     /             | =         |    /</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">926</td>
    <td class="codeLine">  // |/         |    /              |/          |   =</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">926</td>
    <td class="codeLine">  // |/         |    /              |/          |   =</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">927</td>
    <td class="codeLine">  // Dom         Dom                Dom         Dom</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">927</td>
    <td class="codeLine">  // Dom         Dom                Dom         Dom</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">928</td>
    <td class="codeLine">  //  '=' : Branch taken for that CFG edge</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">928</td>
    <td class="codeLine">  //  '=' : Branch taken for that CFG edge</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">929</td>
    <td class="codeLine">  // The cost for taken branches in the first case is P + U</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">929</td>
    <td class="codeLine">  // The cost for taken branches in the first case is P + U</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">930</td>
    <td class="codeLine">  // Let F = SuccFreq - Qin</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">930</td>
    <td class="codeLine">  // Let F = SuccFreq - Qin</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">931</td>
    <td class="codeLine">  // The cost in the second case (assuming independence), given the layout:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">931</td>
    <td class="codeLine">  // The cost in the second case (assuming independence), given the layout:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">932</td>
    <td class="codeLine">  // BB, Succ, (C+Succ), D, Dom or the layout:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">932</td>
    <td class="codeLine">  // BB, Succ, (C+Succ), D, Dom or the layout:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">933</td>
    <td class="codeLine">  // BB, Succ, D, Dom, (C+Succ)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">933</td>
    <td class="codeLine">  // BB, Succ, D, Dom, (C+Succ)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">934</td>
    <td class="codeLine">  // is Qout + max(F, Qin) * U + min(F, Qin)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">934</td>
    <td class="codeLine">  // is Qout + max(F, Qin) * U + min(F, Qin)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">935</td>
    <td class="codeLine">  // compare P + U vs Qout + P * U + Qin.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">935</td>
    <td class="codeLine">  // compare P + U vs Qout + P * U + Qin.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">936</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">936</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">937</td>
    <td class="codeLine">  // The 3rd and 4th cases cover when Dom would be chosen to follow Succ.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">937</td>
    <td class="codeLine">  // The 3rd and 4th cases cover when Dom would be chosen to follow Succ.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">938</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">938</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">939</td>
    <td class="codeLine">  // For the 3rd case, the cost is P + 2 * V</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">939</td>
    <td class="codeLine">  // For the 3rd case, the cost is P + 2 * V</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">940</td>
    <td class="codeLine">  // For the 4th case, the cost is Qout + min(Qin, F) * U + max(Qin, F) * V + V</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">940</td>
    <td class="codeLine">  // For the 4th case, the cost is Qout + min(Qin, F) * U + max(Qin, F) * V + V</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">941</td>
    <td class="codeLine">  // We choose 4 over 3 when (P + V) > Qout + min(Qin, F) * U + max(Qin, F) * V</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">941</td>
    <td class="codeLine">  // We choose 4 over 3 when (P + V) > Qout + min(Qin, F) * U + max(Qin, F) * V</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">942</td>
    <td class="codeLine">  if (UProb > AdjustedSuccSumProb / 2 &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">942</td>
    <td class="codeLine">  if (UProb > AdjustedSuccSumProb / 2 &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">943</td>
    <td class="codeLine">      !hasBetterLayoutPredecessor(Succ, PDom, *BlockToChain[PDom], UProb, UProb,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">943</td>
    <td class="codeLine">      !hasBetterLayoutPredecessor(Succ, PDom, *BlockToChain[PDom], UProb, UProb,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">944</td>
    <td class="codeLine">                                  Chain, BlockFilter))</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">944</td>
    <td class="codeLine">                                  Chain, BlockFilter))</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">945</td>
    <td class="codeLine">    // Cases 3 & 4</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">945</td>
    <td class="codeLine">    // Cases 3 & 4</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">946</td>
    <td class="codeLine">    return greaterWithBias(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">946</td>
    <td class="codeLine">    return greaterWithBias(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">947</td>
    <td class="codeLine">        (P + V), (Qout + std::max(Qin, F) * VProb + std::min(Qin, F) * UProb),</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">947</td>
    <td class="codeLine">        (P + V), (Qout + std::max(Qin, F) * VProb + std::min(Qin, F) * UProb),</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">948</td>
    <td class="codeLine">        EntryFreq);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">948</td>
    <td class="codeLine">        EntryFreq);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">949</td>
    <td class="codeLine">  // Cases 1 & 2</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">949</td>
    <td class="codeLine">  // Cases 1 & 2</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">950</td>
    <td class="codeLine">  return greaterWithBias((P + U),</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">950</td>
    <td class="codeLine">  return greaterWithBias((P + U),</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">951</td>
    <td class="codeLine">                         (Qout + std::min(Qin, F) * AdjustedSuccSumProb +</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">951</td>
    <td class="codeLine">                         (Qout + std::min(Qin, F) * AdjustedSuccSumProb +</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">952</td>
    <td class="codeLine">                          std::max(Qin, F) * UProb),</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">952</td>
    <td class="codeLine">                          std::max(Qin, F) * UProb),</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">953</td>
    <td class="codeLine">                         EntryFreq);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">953</td>
    <td class="codeLine">                         EntryFreq);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">954</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">954</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">955</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">955</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">956</td>
    <td class="codeLine">/// Check for a trellis layout. \p BB is the upper part of a trellis if its</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">956</td>
    <td class="codeLine">/// Check for a trellis layout. \p BB is the upper part of a trellis if its</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">957</td>
    <td class="codeLine">/// successors form the lower part of a trellis. A successor set S forms the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">957</td>
    <td class="codeLine">/// successors form the lower part of a trellis. A successor set S forms the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">958</td>
    <td class="codeLine">/// lower part of a trellis if all of the predecessors of S are either in S or</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">958</td>
    <td class="codeLine">/// lower part of a trellis if all of the predecessors of S are either in S or</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">959</td>
    <td class="codeLine">/// have all of S as successors. We ignore trellises where BB doesn't have 2</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">959</td>
    <td class="codeLine">/// have all of S as successors. We ignore trellises where BB doesn't have 2</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">960</td>
    <td class="codeLine">/// successors because for fewer than 2, it's trivial, and for 3 or greater they</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">960</td>
    <td class="codeLine">/// successors because for fewer than 2, it's trivial, and for 3 or greater they</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">961</td>
    <td class="codeLine">/// are very uncommon and complex to compute optimally. Allowing edges within S</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">961</td>
    <td class="codeLine">/// are very uncommon and complex to compute optimally. Allowing edges within S</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">962</td>
    <td class="codeLine">/// is not strictly a trellis, but the same algorithm works, so we allow it.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">962</td>
    <td class="codeLine">/// is not strictly a trellis, but the same algorithm works, so we allow it.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">963</td>
    <td class="codeLine">bool MachineBlockPlacement::isTrellis(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">963</td>
    <td class="codeLine">bool MachineBlockPlacement::isTrellis(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">964</td>
    <td class="codeLine">    const MachineBasicBlock *BB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">964</td>
    <td class="codeLine">    const MachineBasicBlock *BB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">965</td>
    <td class="codeLine">    const SmallVectorImpl<MachineBasicBlock *> &ViableSuccs,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">965</td>
    <td class="codeLine">    const SmallVectorImpl<MachineBasicBlock *> &ViableSuccs,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">966</td>
    <td class="codeLine">    const BlockChain &Chain, const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">966</td>
    <td class="codeLine">    const BlockChain &Chain, const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">967</td>
    <td class="codeLine">  // Technically BB could form a trellis with branching factor higher than 2.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">967</td>
    <td class="codeLine">  // Technically BB could form a trellis with branching factor higher than 2.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">968</td>
    <td class="codeLine">  // But that's extremely uncommon.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">968</td>
    <td class="codeLine">  // But that's extremely uncommon.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">969</td>
    <td class="codeLine">  if (BB->succ_size() != 2 || ViableSuccs.size() != 2)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">969</td>
    <td class="codeLine">  if (BB->succ_size() != 2 || ViableSuccs.size() != 2)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">970</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">970</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">971</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">971</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">972</td>
    <td class="codeLine">  SmallPtrSet<const MachineBasicBlock *, 2> Successors(BB->succ_begin(),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">972</td>
    <td class="codeLine">  SmallPtrSet<const MachineBasicBlock *, 2> Successors(BB->succ_begin(),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">973</td>
    <td class="codeLine">                                                       BB->succ_end());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">973</td>
    <td class="codeLine">                                                       BB->succ_end());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">974</td>
    <td class="codeLine">  // To avoid reviewing the same predecessors twice.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">974</td>
    <td class="codeLine">  // To avoid reviewing the same predecessors twice.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">975</td>
    <td class="codeLine">  SmallPtrSet<const MachineBasicBlock *, 8> SeenPreds;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">975</td>
    <td class="codeLine">  SmallPtrSet<const MachineBasicBlock *, 8> SeenPreds;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">976</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">976</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">977</td>
    <td class="codeLine">  for (MachineBasicBlock *Succ : ViableSuccs) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">977</td>
    <td class="codeLine">  for (MachineBasicBlock *Succ : ViableSuccs) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">978</td>
    <td class="codeLine">    int PredCount = 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">978</td>
    <td class="codeLine">    int PredCount = 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">979</td>
    <td class="codeLine">    for (auto *SuccPred : Succ->predecessors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">979</td>
    <td class="codeLine">    for (auto *SuccPred : Succ->predecessors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">980</td>
    <td class="codeLine">      // Allow triangle successors, but don't count them.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">980</td>
    <td class="codeLine">      // Allow triangle successors, but don't count them.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">981</td>
    <td class="codeLine">      if (Successors.count(SuccPred)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">981</td>
    <td class="codeLine">      if (Successors.count(SuccPred)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">982</td>
    <td class="codeLine">        // Make sure that it is actually a triangle.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">982</td>
    <td class="codeLine">        // Make sure that it is actually a triangle.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">983</td>
    <td class="codeLine">        for (MachineBasicBlock *CheckSucc : SuccPred->successors())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">983</td>
    <td class="codeLine">        for (MachineBasicBlock *CheckSucc : SuccPred->successors())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">984</td>
    <td class="codeLine">          if (!Successors.count(CheckSucc))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">984</td>
    <td class="codeLine">          if (!Successors.count(CheckSucc))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">985</td>
    <td class="codeLine">            return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">985</td>
    <td class="codeLine">            return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">986</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">986</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">987</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">987</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">988</td>
    <td class="codeLine">      const BlockChain *PredChain = BlockToChain[SuccPred];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">988</td>
    <td class="codeLine">      const BlockChain *PredChain = BlockToChain[SuccPred];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">989</td>
    <td class="codeLine">      if (SuccPred == BB || (BlockFilter && !BlockFilter->count(SuccPred)) ||</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">989</td>
    <td class="codeLine">      if (SuccPred == BB || (BlockFilter && !BlockFilter->count(SuccPred)) ||</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">990</td>
    <td class="codeLine">          PredChain == &Chain || PredChain == BlockToChain[Succ])</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">990</td>
    <td class="codeLine">          PredChain == &Chain || PredChain == BlockToChain[Succ])</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">991</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">991</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">992</td>
    <td class="codeLine">      ++PredCount;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">992</td>
    <td class="codeLine">      ++PredCount;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">993</td>
    <td class="codeLine">      // Perform the successor check only once.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">993</td>
    <td class="codeLine">      // Perform the successor check only once.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">994</td>
    <td class="codeLine">      if (!SeenPreds.insert(SuccPred).second)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">994</td>
    <td class="codeLine">      if (!SeenPreds.insert(SuccPred).second)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">995</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">995</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">996</td>
    <td class="codeLine">      if (!hasSameSuccessors(*SuccPred, Successors))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">996</td>
    <td class="codeLine">      if (!hasSameSuccessors(*SuccPred, Successors))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">997</td>
    <td class="codeLine">        return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">997</td>
    <td class="codeLine">        return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">998</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">998</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">999</td>
    <td class="codeLine">    // If one of the successors has only BB as a predecessor, it is not a</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">999</td>
    <td class="codeLine">    // If one of the successors has only BB as a predecessor, it is not a</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1000</td>
    <td class="codeLine">    // trellis.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1000</td>
    <td class="codeLine">    // trellis.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1001</td>
    <td class="codeLine">    if (PredCount < 1)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1001</td>
    <td class="codeLine">    if (PredCount < 1)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1002</td>
    <td class="codeLine">      return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1002</td>
    <td class="codeLine">      return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1003</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1003</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1004</td>
    <td class="codeLine">  return true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1004</td>
    <td class="codeLine">  return true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1005</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1005</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1006</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1006</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1007</td>
    <td class="codeLine">/// Pick the highest total weight pair of edges that can both be laid out.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1007</td>
    <td class="codeLine">/// Pick the highest total weight pair of edges that can both be laid out.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1008</td>
    <td class="codeLine">/// The edges in \p Edges[0] are assumed to have a different destination than</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1008</td>
    <td class="codeLine">/// The edges in \p Edges[0] are assumed to have a different destination than</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1009</td>
    <td class="codeLine">/// the edges in \p Edges[1]. Simple counting shows that the best pair is either</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1009</td>
    <td class="codeLine">/// the edges in \p Edges[1]. Simple counting shows that the best pair is either</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1010</td>
    <td class="codeLine">/// the individual highest weight edges to the 2 different destinations, or in</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1010</td>
    <td class="codeLine">/// the individual highest weight edges to the 2 different destinations, or in</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1011</td>
    <td class="codeLine">/// case of a conflict, one of them should be replaced with a 2nd best edge.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1011</td>
    <td class="codeLine">/// case of a conflict, one of them should be replaced with a 2nd best edge.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1012</td>
    <td class="codeLine">std::pair<MachineBlockPlacement::WeightedEdge,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1012</td>
    <td class="codeLine">std::pair<MachineBlockPlacement::WeightedEdge,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1013</td>
    <td class="codeLine">          MachineBlockPlacement::WeightedEdge></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1013</td>
    <td class="codeLine">          MachineBlockPlacement::WeightedEdge></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1014</td>
    <td class="codeLine">MachineBlockPlacement::getBestNonConflictingEdges(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1014</td>
    <td class="codeLine">MachineBlockPlacement::getBestNonConflictingEdges(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1015</td>
    <td class="codeLine">    const MachineBasicBlock *BB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1015</td>
    <td class="codeLine">    const MachineBasicBlock *BB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1016</td>
    <td class="codeLine">    MutableArrayRef<SmallVector<MachineBlockPlacement::WeightedEdge, 8>></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1016</td>
    <td class="codeLine">    MutableArrayRef<SmallVector<MachineBlockPlacement::WeightedEdge, 8>></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1017</td>
    <td class="codeLine">        Edges) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1017</td>
    <td class="codeLine">        Edges) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1018</td>
    <td class="codeLine">  // Sort the edges, and then for each successor, find the best incoming</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1018</td>
    <td class="codeLine">  // Sort the edges, and then for each successor, find the best incoming</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1019</td>
    <td class="codeLine">  // predecessor. If the best incoming predecessors aren't the same,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1019</td>
    <td class="codeLine">  // predecessor. If the best incoming predecessors aren't the same,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1020</td>
    <td class="codeLine">  // then that is clearly the best layout. If there is a conflict, one of the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1020</td>
    <td class="codeLine">  // then that is clearly the best layout. If there is a conflict, one of the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1021</td>
    <td class="codeLine">  // successors will have to fallthrough from the second best predecessor. We</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1021</td>
    <td class="codeLine">  // successors will have to fallthrough from the second best predecessor. We</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1022</td>
    <td class="codeLine">  // compare which combination is better overall.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1022</td>
    <td class="codeLine">  // compare which combination is better overall.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1023</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1023</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1024</td>
    <td class="codeLine">  // Sort for highest frequency.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1024</td>
    <td class="codeLine">  // Sort for highest frequency.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1025</td>
    <td class="codeLine">  auto Cmp = [](WeightedEdge A, WeightedEdge B) { return A.Weight > B.Weight; };</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1025</td>
    <td class="codeLine">  auto Cmp = [](WeightedEdge A, WeightedEdge B) { return A.Weight > B.Weight; };</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1026</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1026</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1027</td>
    <td class="codeLine">  llvm::stable_sort(Edges[0], Cmp);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1027</td>
    <td class="codeLine">  llvm::stable_sort(Edges[0], Cmp);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1028</td>
    <td class="codeLine">  llvm::stable_sort(Edges[1], Cmp);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1028</td>
    <td class="codeLine">  llvm::stable_sort(Edges[1], Cmp);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1029</td>
    <td class="codeLine">  auto BestA = Edges[0].begin();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1029</td>
    <td class="codeLine">  auto BestA = Edges[0].begin();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1030</td>
    <td class="codeLine">  auto BestB = Edges[1].begin();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1030</td>
    <td class="codeLine">  auto BestB = Edges[1].begin();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1031</td>
    <td class="codeLine">  // Arrange for the correct answer to be in BestA and BestB</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1031</td>
    <td class="codeLine">  // Arrange for the correct answer to be in BestA and BestB</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1032</td>
    <td class="codeLine">  // If the 2 best edges don't conflict, the answer is already there.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1032</td>
    <td class="codeLine">  // If the 2 best edges don't conflict, the answer is already there.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1033</td>
    <td class="codeLine">  if (BestA->Src == BestB->Src) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1033</td>
    <td class="codeLine">  if (BestA->Src == BestB->Src) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1034</td>
    <td class="codeLine">    // Compare the total fallthrough of (Best + Second Best) for both pairs</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1034</td>
    <td class="codeLine">    // Compare the total fallthrough of (Best + Second Best) for both pairs</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1035</td>
    <td class="codeLine">    auto SecondBestA = std::next(BestA);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1035</td>
    <td class="codeLine">    auto SecondBestA = std::next(BestA);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1036</td>
    <td class="codeLine">    auto SecondBestB = std::next(BestB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1036</td>
    <td class="codeLine">    auto SecondBestB = std::next(BestB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1037</td>
    <td class="codeLine">    BlockFrequency BestAScore = BestA->Weight + SecondBestB->Weight;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1037</td>
    <td class="codeLine">    BlockFrequency BestAScore = BestA->Weight + SecondBestB->Weight;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1038</td>
    <td class="codeLine">    BlockFrequency BestBScore = BestB->Weight + SecondBestA->Weight;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1038</td>
    <td class="codeLine">    BlockFrequency BestBScore = BestB->Weight + SecondBestA->Weight;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1039</td>
    <td class="codeLine">    if (BestAScore < BestBScore)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1039</td>
    <td class="codeLine">    if (BestAScore < BestBScore)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1040</td>
    <td class="codeLine">      BestA = SecondBestA;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1040</td>
    <td class="codeLine">      BestA = SecondBestA;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1041</td>
    <td class="codeLine">    else</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1041</td>
    <td class="codeLine">    else</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1042</td>
    <td class="codeLine">      BestB = SecondBestB;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1042</td>
    <td class="codeLine">      BestB = SecondBestB;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1043</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1043</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1044</td>
    <td class="codeLine">  // Arrange for the BB edge to be in BestA if it exists.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1044</td>
    <td class="codeLine">  // Arrange for the BB edge to be in BestA if it exists.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1045</td>
    <td class="codeLine">  if (BestB->Src == BB)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1045</td>
    <td class="codeLine">  if (BestB->Src == BB)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1046</td>
    <td class="codeLine">    std::swap(BestA, BestB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1046</td>
    <td class="codeLine">    std::swap(BestA, BestB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1047</td>
    <td class="codeLine">  return std::make_pair(*BestA, *BestB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1047</td>
    <td class="codeLine">  return std::make_pair(*BestA, *BestB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1048</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1048</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1049</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1049</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1050</td>
    <td class="codeLine">/// Get the best successor from \p BB based on \p BB being part of a trellis.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1050</td>
    <td class="codeLine">/// Get the best successor from \p BB based on \p BB being part of a trellis.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1051</td>
    <td class="codeLine">/// We only handle trellises with 2 successors, so the algorithm is</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1051</td>
    <td class="codeLine">/// We only handle trellises with 2 successors, so the algorithm is</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1052</td>
    <td class="codeLine">/// straightforward: Find the best pair of edges that don't conflict. We find</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1052</td>
    <td class="codeLine">/// straightforward: Find the best pair of edges that don't conflict. We find</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1053</td>
    <td class="codeLine">/// the best incoming edge for each successor in the trellis. If those conflict,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1053</td>
    <td class="codeLine">/// the best incoming edge for each successor in the trellis. If those conflict,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1054</td>
    <td class="codeLine">/// we consider which of them should be replaced with the second best.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1054</td>
    <td class="codeLine">/// we consider which of them should be replaced with the second best.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1055</td>
    <td class="codeLine">/// Upon return the two best edges will be in \p BestEdges. If one of the edges</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1055</td>
    <td class="codeLine">/// Upon return the two best edges will be in \p BestEdges. If one of the edges</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1056</td>
    <td class="codeLine">/// comes from \p BB, it will be in \p BestEdges[0]</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1056</td>
    <td class="codeLine">/// comes from \p BB, it will be in \p BestEdges[0]</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1057</td>
    <td class="codeLine">MachineBlockPlacement::BlockAndTailDupResult</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1057</td>
    <td class="codeLine">MachineBlockPlacement::BlockAndTailDupResult</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1058</td>
    <td class="codeLine">MachineBlockPlacement::getBestTrellisSuccessor(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1058</td>
    <td class="codeLine">MachineBlockPlacement::getBestTrellisSuccessor(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1059</td>
    <td class="codeLine">    const MachineBasicBlock *BB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1059</td>
    <td class="codeLine">    const MachineBasicBlock *BB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1060</td>
    <td class="codeLine">    const SmallVectorImpl<MachineBasicBlock *> &ViableSuccs,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1060</td>
    <td class="codeLine">    const SmallVectorImpl<MachineBasicBlock *> &ViableSuccs,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1061</td>
    <td class="codeLine">    BranchProbability AdjustedSumProb, const BlockChain &Chain,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1061</td>
    <td class="codeLine">    BranchProbability AdjustedSumProb, const BlockChain &Chain,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1062</td>
    <td class="codeLine">    const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1062</td>
    <td class="codeLine">    const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1063</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1063</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1064</td>
    <td class="codeLine">  BlockAndTailDupResult Result = {nullptr, false};</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1064</td>
    <td class="codeLine">  BlockAndTailDupResult Result = {nullptr, false};</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1065</td>
    <td class="codeLine">  SmallPtrSet<const MachineBasicBlock *, 4> Successors(BB->succ_begin(),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1065</td>
    <td class="codeLine">  SmallPtrSet<const MachineBasicBlock *, 4> Successors(BB->succ_begin(),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1066</td>
    <td class="codeLine">                                                       BB->succ_end());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1066</td>
    <td class="codeLine">                                                       BB->succ_end());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1067</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1067</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1068</td>
    <td class="codeLine">  // We assume size 2 because it's common. For general n, we would have to do</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1068</td>
    <td class="codeLine">  // We assume size 2 because it's common. For general n, we would have to do</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1069</td>
    <td class="codeLine">  // the Hungarian algorithm, but it's not worth the complexity because more</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1069</td>
    <td class="codeLine">  // the Hungarian algorithm, but it's not worth the complexity because more</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1070</td>
    <td class="codeLine">  // than 2 successors is fairly uncommon, and a trellis even more so.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1070</td>
    <td class="codeLine">  // than 2 successors is fairly uncommon, and a trellis even more so.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1071</td>
    <td class="codeLine">  if (Successors.size() != 2 || ViableSuccs.size() != 2)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1071</td>
    <td class="codeLine">  if (Successors.size() != 2 || ViableSuccs.size() != 2)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1072</td>
    <td class="codeLine">    return Result;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1072</td>
    <td class="codeLine">    return Result;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1073</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1073</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1074</td>
    <td class="codeLine">  // Collect the edge frequencies of all edges that form the trellis.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1074</td>
    <td class="codeLine">  // Collect the edge frequencies of all edges that form the trellis.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1075</td>
    <td class="codeLine">  SmallVector<WeightedEdge, 8> Edges[2];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1075</td>
    <td class="codeLine">  SmallVector<WeightedEdge, 8> Edges[2];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1076</td>
    <td class="codeLine">  int SuccIndex = 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1076</td>
    <td class="codeLine">  int SuccIndex = 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1077</td>
    <td class="codeLine">  for (auto *Succ : ViableSuccs) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1077</td>
    <td class="codeLine">  for (auto *Succ : ViableSuccs) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1078</td>
    <td class="codeLine">    for (MachineBasicBlock *SuccPred : Succ->predecessors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1078</td>
    <td class="codeLine">    for (MachineBasicBlock *SuccPred : Succ->predecessors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1079</td>
    <td class="codeLine">      // Skip any placed predecessors that are not BB</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1079</td>
    <td class="codeLine">      // Skip any placed predecessors that are not BB</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1080</td>
    <td class="codeLine">      if (SuccPred != BB)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1080</td>
    <td class="codeLine">      if (SuccPred != BB)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1081</td>
    <td class="codeLine">        if ((BlockFilter && !BlockFilter->count(SuccPred)) ||</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1081</td>
    <td class="codeLine">        if ((BlockFilter && !BlockFilter->count(SuccPred)) ||</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1082</td>
    <td class="codeLine">            BlockToChain[SuccPred] == &Chain ||</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1082</td>
    <td class="codeLine">            BlockToChain[SuccPred] == &Chain ||</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1083</td>
    <td class="codeLine">            BlockToChain[SuccPred] == BlockToChain[Succ])</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1083</td>
    <td class="codeLine">            BlockToChain[SuccPred] == BlockToChain[Succ])</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1084</td>
    <td class="codeLine">          continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1084</td>
    <td class="codeLine">          continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1085</td>
    <td class="codeLine">      BlockFrequency EdgeFreq = MBFI->getBlockFreq(SuccPred) *</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1085</td>
    <td class="codeLine">      BlockFrequency EdgeFreq = MBFI->getBlockFreq(SuccPred) *</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1086</td>
    <td class="codeLine">                                MBPI->getEdgeProbability(SuccPred, Succ);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1086</td>
    <td class="codeLine">                                MBPI->getEdgeProbability(SuccPred, Succ);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1087</td>
    <td class="codeLine">      Edges[SuccIndex].push_back({EdgeFreq, SuccPred, Succ});</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1087</td>
    <td class="codeLine">      Edges[SuccIndex].push_back({EdgeFreq, SuccPred, Succ});</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1088</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1088</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1089</td>
    <td class="codeLine">    ++SuccIndex;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1089</td>
    <td class="codeLine">    ++SuccIndex;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1090</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1090</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1091</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1091</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1092</td>
    <td class="codeLine">  // Pick the best combination of 2 edges from all the edges in the trellis.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1092</td>
    <td class="codeLine">  // Pick the best combination of 2 edges from all the edges in the trellis.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1093</td>
    <td class="codeLine">  WeightedEdge BestA, BestB;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1093</td>
    <td class="codeLine">  WeightedEdge BestA, BestB;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1094</td>
    <td class="codeLine">  std::tie(BestA, BestB) = getBestNonConflictingEdges(BB, Edges);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1094</td>
    <td class="codeLine">  std::tie(BestA, BestB) = getBestNonConflictingEdges(BB, Edges);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1095</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1095</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1096</td>
    <td class="codeLine">  if (BestA.Src != BB) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1096</td>
    <td class="codeLine">  if (BestA.Src != BB) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1097</td>
    <td class="codeLine">    // If we have a trellis, and BB doesn't have the best fallthrough edges,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1097</td>
    <td class="codeLine">    // If we have a trellis, and BB doesn't have the best fallthrough edges,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1098</td>
    <td class="codeLine">    // we shouldn't choose any successor. We've already looked and there's a</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1098</td>
    <td class="codeLine">    // we shouldn't choose any successor. We've already looked and there's a</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1099</td>
    <td class="codeLine">    // better fallthrough edge for all the successors.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1099</td>
    <td class="codeLine">    // better fallthrough edge for all the successors.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1100</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "Trellis, but not one of the chosen edges.\n");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1100</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "Trellis, but not one of the chosen edges.\n");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1101</td>
    <td class="codeLine">    return Result;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1101</td>
    <td class="codeLine">    return Result;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1102</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1102</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1103</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1103</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1104</td>
    <td class="codeLine">  // Did we pick the triangle edge? If tail-duplication is profitable, do</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1104</td>
    <td class="codeLine">  // Did we pick the triangle edge? If tail-duplication is profitable, do</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1105</td>
    <td class="codeLine">  // that instead. Otherwise merge the triangle edge now while we know it is</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1105</td>
    <td class="codeLine">  // that instead. Otherwise merge the triangle edge now while we know it is</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1106</td>
    <td class="codeLine">  // optimal.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1106</td>
    <td class="codeLine">  // optimal.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1107</td>
    <td class="codeLine">  if (BestA.Dest == BestB.Src) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1107</td>
    <td class="codeLine">  if (BestA.Dest == BestB.Src) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1108</td>
    <td class="codeLine">    // The edges are BB->Succ1->Succ2, and we're looking to see if BB->Succ2</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1108</td>
    <td class="codeLine">    // The edges are BB->Succ1->Succ2, and we're looking to see if BB->Succ2</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1109</td>
    <td class="codeLine">    // would be better.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1109</td>
    <td class="codeLine">    // would be better.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1110</td>
    <td class="codeLine">    MachineBasicBlock *Succ1 = BestA.Dest;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1110</td>
    <td class="codeLine">    MachineBasicBlock *Succ1 = BestA.Dest;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1111</td>
    <td class="codeLine">    MachineBasicBlock *Succ2 = BestB.Dest;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1111</td>
    <td class="codeLine">    MachineBasicBlock *Succ2 = BestB.Dest;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1112</td>
    <td class="codeLine">    // Check to see if tail-duplication would be profitable.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1112</td>
    <td class="codeLine">    // Check to see if tail-duplication would be profitable.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1113</td>
    <td class="codeLine">    if (allowTailDupPlacement() && shouldTailDuplicate(Succ2) &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1113</td>
    <td class="codeLine">    if (allowTailDupPlacement() && shouldTailDuplicate(Succ2) &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1114</td>
    <td class="codeLine">        canTailDuplicateUnplacedPreds(BB, Succ2, Chain, BlockFilter) &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1114</td>
    <td class="codeLine">        canTailDuplicateUnplacedPreds(BB, Succ2, Chain, BlockFilter) &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1115</td>
    <td class="codeLine">        isProfitableToTailDup(BB, Succ2, MBPI->getEdgeProbability(BB, Succ1),</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1115</td>
    <td class="codeLine">        isProfitableToTailDup(BB, Succ2, MBPI->getEdgeProbability(BB, Succ1),</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1116</td>
    <td class="codeLine">                              Chain, BlockFilter)) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1116</td>
    <td class="codeLine">                              Chain, BlockFilter)) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1117</td>
    <td class="codeLine">      LLVM_DEBUG(BranchProbability Succ2Prob = getAdjustedProbability(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1117</td>
    <td class="codeLine">      LLVM_DEBUG(BranchProbability Succ2Prob = getAdjustedProbability(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1118</td>
    <td class="codeLine">                     MBPI->getEdgeProbability(BB, Succ2), AdjustedSumProb);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1118</td>
    <td class="codeLine">                     MBPI->getEdgeProbability(BB, Succ2), AdjustedSumProb);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1119</td>
    <td class="codeLine">                 dbgs() << "    Selected: " << getBlockName(Succ2)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1119</td>
    <td class="codeLine">                 dbgs() << "    Selected: " << getBlockName(Succ2)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1120</td>
    <td class="codeLine">                        << ", probability: " << Succ2Prob</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1120</td>
    <td class="codeLine">                        << ", probability: " << Succ2Prob</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1121</td>
    <td class="codeLine">                        << " (Tail Duplicate)\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1121</td>
    <td class="codeLine">                        << " (Tail Duplicate)\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1122</td>
    <td class="codeLine">      Result.BB = Succ2;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1122</td>
    <td class="codeLine">      Result.BB = Succ2;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1123</td>
    <td class="codeLine">      Result.ShouldTailDup = true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1123</td>
    <td class="codeLine">      Result.ShouldTailDup = true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1124</td>
    <td class="codeLine">      return Result;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1124</td>
    <td class="codeLine">      return Result;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1125</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1125</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1126</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1126</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1127</td>
    <td class="codeLine">  // We have already computed the optimal edge for the other side of the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1127</td>
    <td class="codeLine">  // We have already computed the optimal edge for the other side of the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1128</td>
    <td class="codeLine">  // trellis.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1128</td>
    <td class="codeLine">  // trellis.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1129</td>
    <td class="codeLine">  ComputedEdges[BestB.Src] = { BestB.Dest, false };</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1129</td>
    <td class="codeLine">  ComputedEdges[BestB.Src] = { BestB.Dest, false };</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1130</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1130</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1131</td>
    <td class="codeLine">  auto TrellisSucc = BestA.Dest;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1131</td>
    <td class="codeLine">  auto TrellisSucc = BestA.Dest;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1132</td>
    <td class="codeLine">  LLVM_DEBUG(BranchProbability SuccProb = getAdjustedProbability(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1132</td>
    <td class="codeLine">  LLVM_DEBUG(BranchProbability SuccProb = getAdjustedProbability(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1133</td>
    <td class="codeLine">                 MBPI->getEdgeProbability(BB, TrellisSucc), AdjustedSumProb);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1133</td>
    <td class="codeLine">                 MBPI->getEdgeProbability(BB, TrellisSucc), AdjustedSumProb);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1134</td>
    <td class="codeLine">             dbgs() << "    Selected: " << getBlockName(TrellisSucc)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1134</td>
    <td class="codeLine">             dbgs() << "    Selected: " << getBlockName(TrellisSucc)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1135</td>
    <td class="codeLine">                    << ", probability: " << SuccProb << " (Trellis)\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1135</td>
    <td class="codeLine">                    << ", probability: " << SuccProb << " (Trellis)\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1136</td>
    <td class="codeLine">  Result.BB = TrellisSucc;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1136</td>
    <td class="codeLine">  Result.BB = TrellisSucc;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1137</td>
    <td class="codeLine">  return Result;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1137</td>
    <td class="codeLine">  return Result;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1138</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1138</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1139</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1139</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1140</td>
    <td class="codeLine">/// When the option allowTailDupPlacement() is on, this method checks if the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1140</td>
    <td class="codeLine">/// When the option allowTailDupPlacement() is on, this method checks if the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1141</td>
    <td class="codeLine">/// fallthrough candidate block \p Succ (of block \p BB) can be tail-duplicated</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1141</td>
    <td class="codeLine">/// fallthrough candidate block \p Succ (of block \p BB) can be tail-duplicated</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1142</td>
    <td class="codeLine">/// into all of its unplaced, unfiltered predecessors, that are not BB.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1142</td>
    <td class="codeLine">/// into all of its unplaced, unfiltered predecessors, that are not BB.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1143</td>
    <td class="codeLine">bool MachineBlockPlacement::canTailDuplicateUnplacedPreds(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1143</td>
    <td class="codeLine">bool MachineBlockPlacement::canTailDuplicateUnplacedPreds(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1144</td>
    <td class="codeLine">    const MachineBasicBlock *BB, MachineBasicBlock *Succ,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1144</td>
    <td class="codeLine">    const MachineBasicBlock *BB, MachineBasicBlock *Succ,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1145</td>
    <td class="codeLine">    const BlockChain &Chain, const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1145</td>
    <td class="codeLine">    const BlockChain &Chain, const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1146</td>
    <td class="codeLine">  if (!shouldTailDuplicate(Succ))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1146</td>
    <td class="codeLine">  if (!shouldTailDuplicate(Succ))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1147</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1147</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1148</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1148</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1149</td>
    <td class="codeLine">  // The result of canTailDuplicate.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1149</td>
    <td class="codeLine">  // The result of canTailDuplicate.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1150</td>
    <td class="codeLine">  bool Duplicate = true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1150</td>
    <td class="codeLine">  bool Duplicate = true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1151</td>
    <td class="codeLine">  // Number of possible duplication.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1151</td>
    <td class="codeLine">  // Number of possible duplication.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1152</td>
    <td class="codeLine">  unsigned int NumDup = 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1152</td>
    <td class="codeLine">  unsigned int NumDup = 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1153</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1153</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1154</td>
    <td class="codeLine">  // For CFG checking.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1154</td>
    <td class="codeLine">  // For CFG checking.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1155</td>
    <td class="codeLine">  SmallPtrSet<const MachineBasicBlock *, 4> Successors(BB->succ_begin(),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1155</td>
    <td class="codeLine">  SmallPtrSet<const MachineBasicBlock *, 4> Successors(BB->succ_begin(),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1156</td>
    <td class="codeLine">                                                       BB->succ_end());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1156</td>
    <td class="codeLine">                                                       BB->succ_end());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1157</td>
    <td class="codeLine">  for (MachineBasicBlock *Pred : Succ->predecessors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1157</td>
    <td class="codeLine">  for (MachineBasicBlock *Pred : Succ->predecessors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1158</td>
    <td class="codeLine">    // Make sure all unplaced and unfiltered predecessors can be</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1158</td>
    <td class="codeLine">    // Make sure all unplaced and unfiltered predecessors can be</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1159</td>
    <td class="codeLine">    // tail-duplicated into.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1159</td>
    <td class="codeLine">    // tail-duplicated into.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1160</td>
    <td class="codeLine">    // Skip any blocks that are already placed or not in this loop.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1160</td>
    <td class="codeLine">    // Skip any blocks that are already placed or not in this loop.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1161</td>
    <td class="codeLine">    if (Pred == BB || (BlockFilter && !BlockFilter->count(Pred))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1161</td>
    <td class="codeLine">    if (Pred == BB || (BlockFilter && !BlockFilter->count(Pred))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1162</td>
    <td class="codeLine">        || (BlockToChain[Pred] == &Chain && !Succ->succ_empty()))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1162</td>
    <td class="codeLine">        || (BlockToChain[Pred] == &Chain && !Succ->succ_empty()))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1163</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1163</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1164</td>
    <td class="codeLine">    if (!TailDup.canTailDuplicate(Succ, Pred)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1164</td>
    <td class="codeLine">    if (!TailDup.canTailDuplicate(Succ, Pred)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1165</td>
    <td class="codeLine">      if (Successors.size() > 1 && hasSameSuccessors(*Pred, Successors))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1165</td>
    <td class="codeLine">      if (Successors.size() > 1 && hasSameSuccessors(*Pred, Successors))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1166</td>
    <td class="codeLine">        // This will result in a trellis after tail duplication, so we don't</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1166</td>
    <td class="codeLine">        // This will result in a trellis after tail duplication, so we don't</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1167</td>
    <td class="codeLine">        // need to copy Succ into this predecessor. In the presence</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1167</td>
    <td class="codeLine">        // need to copy Succ into this predecessor. In the presence</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1168</td>
    <td class="codeLine">        // of a trellis tail duplication can continue to be profitable.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1168</td>
    <td class="codeLine">        // of a trellis tail duplication can continue to be profitable.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1169</td>
    <td class="codeLine">        // For example:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1169</td>
    <td class="codeLine">        // For example:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1170</td>
    <td class="codeLine">        // A            A</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1170</td>
    <td class="codeLine">        // A            A</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1171</td>
    <td class="codeLine">        // |\           |\</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1171</td>
    <td class="codeLine">        // |\           |\</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1172</td>
    <td class="codeLine">        // | \          | \</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1172</td>
    <td class="codeLine">        // | \          | \</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1173</td>
    <td class="codeLine">        // |  C         |  C+BB</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1173</td>
    <td class="codeLine">        // |  C         |  C+BB</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1174</td>
    <td class="codeLine">        // | /          |  |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1174</td>
    <td class="codeLine">        // | /          |  |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1175</td>
    <td class="codeLine">        // |/           |  |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1175</td>
    <td class="codeLine">        // |/           |  |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1176</td>
    <td class="codeLine">        // BB    =>     BB |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1176</td>
    <td class="codeLine">        // BB    =>     BB |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1177</td>
    <td class="codeLine">        // |\           |\/|</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1177</td>
    <td class="codeLine">        // |\           |\/|</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1178</td>
    <td class="codeLine">        // | \          |/\|</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1178</td>
    <td class="codeLine">        // | \          |/\|</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1179</td>
    <td class="codeLine">        // |  D         |  D</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1179</td>
    <td class="codeLine">        // |  D         |  D</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1180</td>
    <td class="codeLine">        // | /          | /</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1180</td>
    <td class="codeLine">        // | /          | /</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1181</td>
    <td class="codeLine">        // |/           |/</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1181</td>
    <td class="codeLine">        // |/           |/</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1182</td>
    <td class="codeLine">        // Succ         Succ</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1182</td>
    <td class="codeLine">        // Succ         Succ</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1183</td>
    <td class="codeLine">        //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1183</td>
    <td class="codeLine">        //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1184</td>
    <td class="codeLine">        // After BB was duplicated into C, the layout looks like the one on the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1184</td>
    <td class="codeLine">        // After BB was duplicated into C, the layout looks like the one on the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1185</td>
    <td class="codeLine">        // right. BB and C now have the same successors. When considering</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1185</td>
    <td class="codeLine">        // right. BB and C now have the same successors. When considering</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1186</td>
    <td class="codeLine">        // whether Succ can be duplicated into all its unplaced predecessors, we</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1186</td>
    <td class="codeLine">        // whether Succ can be duplicated into all its unplaced predecessors, we</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1187</td>
    <td class="codeLine">        // ignore C.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1187</td>
    <td class="codeLine">        // ignore C.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1188</td>
    <td class="codeLine">        // We can do this because C already has a profitable fallthrough, namely</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1188</td>
    <td class="codeLine">        // We can do this because C already has a profitable fallthrough, namely</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1189</td>
    <td class="codeLine">        // D. TODO(iteratee): ignore sufficiently cold predecessors for</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1189</td>
    <td class="codeLine">        // D. TODO(iteratee): ignore sufficiently cold predecessors for</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1190</td>
    <td class="codeLine">        // duplication and for this test.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1190</td>
    <td class="codeLine">        // duplication and for this test.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1191</td>
    <td class="codeLine">        //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1191</td>
    <td class="codeLine">        //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1192</td>
    <td class="codeLine">        // This allows trellises to be laid out in 2 separate chains</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1192</td>
    <td class="codeLine">        // This allows trellises to be laid out in 2 separate chains</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1193</td>
    <td class="codeLine">        // (A,B,Succ,...) and later (C,D,...) This is a reasonable heuristic</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1193</td>
    <td class="codeLine">        // (A,B,Succ,...) and later (C,D,...) This is a reasonable heuristic</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1194</td>
    <td class="codeLine">        // because it allows the creation of 2 fallthrough paths with links</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1194</td>
    <td class="codeLine">        // because it allows the creation of 2 fallthrough paths with links</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1195</td>
    <td class="codeLine">        // between them, and we correctly identify the best layout for these</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1195</td>
    <td class="codeLine">        // between them, and we correctly identify the best layout for these</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1196</td>
    <td class="codeLine">        // CFGs. We want to extend trellises that the user created in addition</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1196</td>
    <td class="codeLine">        // CFGs. We want to extend trellises that the user created in addition</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1197</td>
    <td class="codeLine">        // to trellises created by tail-duplication, so we just look for the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1197</td>
    <td class="codeLine">        // to trellises created by tail-duplication, so we just look for the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1198</td>
    <td class="codeLine">        // CFG.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1198</td>
    <td class="codeLine">        // CFG.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1199</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1199</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1200</td>
    <td class="codeLine">      Duplicate = false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1200</td>
    <td class="codeLine">      Duplicate = false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1201</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1201</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1202</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1202</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1203</td>
    <td class="codeLine">    NumDup++;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1203</td>
    <td class="codeLine">    NumDup++;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1204</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1204</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1205</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1205</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1206</td>
    <td class="codeLine">  // No possible duplication in current filter set.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1206</td>
    <td class="codeLine">  // No possible duplication in current filter set.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1207</td>
    <td class="codeLine">  if (NumDup == 0)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1207</td>
    <td class="codeLine">  if (NumDup == 0)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1208</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1208</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1209</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1209</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1210</td>
    <td class="codeLine">  // If profile information is available, findDuplicateCandidates can do more</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1210</td>
    <td class="codeLine">  // If profile information is available, findDuplicateCandidates can do more</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1211</td>
    <td class="codeLine">  // precise benefit analysis.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1211</td>
    <td class="codeLine">  // precise benefit analysis.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1212</td>
    <td class="codeLine">  if (F->getFunction().hasProfileData())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1212</td>
    <td class="codeLine">  if (F->getFunction().hasProfileData())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1213</td>
    <td class="codeLine">    return true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1213</td>
    <td class="codeLine">    return true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1214</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1214</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1215</td>
    <td class="codeLine">  // This is mainly for function exit BB.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1215</td>
    <td class="codeLine">  // This is mainly for function exit BB.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1216</td>
    <td class="codeLine">  // The integrated tail duplication is really designed for increasing</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1216</td>
    <td class="codeLine">  // The integrated tail duplication is really designed for increasing</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1217</td>
    <td class="codeLine">  // fallthrough from predecessors from Succ to its successors. We may need</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1217</td>
    <td class="codeLine">  // fallthrough from predecessors from Succ to its successors. We may need</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1218</td>
    <td class="codeLine">  // other machanism to handle different cases.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1218</td>
    <td class="codeLine">  // other machanism to handle different cases.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1219</td>
    <td class="codeLine">  if (Succ->succ_empty())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1219</td>
    <td class="codeLine">  if (Succ->succ_empty())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1220</td>
    <td class="codeLine">    return true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1220</td>
    <td class="codeLine">    return true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1221</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1221</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1222</td>
    <td class="codeLine">  // Plus the already placed predecessor.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1222</td>
    <td class="codeLine">  // Plus the already placed predecessor.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1223</td>
    <td class="codeLine">  NumDup++;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1223</td>
    <td class="codeLine">  NumDup++;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1224</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1224</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1225</td>
    <td class="codeLine">  // If the duplication candidate has more unplaced predecessors than</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1225</td>
    <td class="codeLine">  // If the duplication candidate has more unplaced predecessors than</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1226</td>
    <td class="codeLine">  // successors, the extra duplication can't bring more fallthrough.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1226</td>
    <td class="codeLine">  // successors, the extra duplication can't bring more fallthrough.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1227</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1227</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1228</td>
    <td class="codeLine">  //     Pred1 Pred2 Pred3</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1228</td>
    <td class="codeLine">  //     Pred1 Pred2 Pred3</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1229</td>
    <td class="codeLine">  //         \   |   /</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1229</td>
    <td class="codeLine">  //         \   |   /</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1230</td>
    <td class="codeLine">  //          \  |  /</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1230</td>
    <td class="codeLine">  //          \  |  /</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1231</td>
    <td class="codeLine">  //           \ | /</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1231</td>
    <td class="codeLine">  //           \ | /</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1232</td>
    <td class="codeLine">  //            Dup</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1232</td>
    <td class="codeLine">  //            Dup</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1233</td>
    <td class="codeLine">  //            / \</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1233</td>
    <td class="codeLine">  //            / \</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1234</td>
    <td class="codeLine">  //           /   \</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1234</td>
    <td class="codeLine">  //           /   \</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1235</td>
    <td class="codeLine">  //       Succ1  Succ2</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1235</td>
    <td class="codeLine">  //       Succ1  Succ2</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1236</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1236</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1237</td>
    <td class="codeLine">  // In this example Dup has 2 successors and 3 predecessors, duplication of Dup</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1237</td>
    <td class="codeLine">  // In this example Dup has 2 successors and 3 predecessors, duplication of Dup</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1238</td>
    <td class="codeLine">  // can increase the fallthrough from Pred1 to Succ1 and from Pred2 to Succ2,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1238</td>
    <td class="codeLine">  // can increase the fallthrough from Pred1 to Succ1 and from Pred2 to Succ2,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1239</td>
    <td class="codeLine">  // but the duplication into Pred3 can't increase fallthrough.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1239</td>
    <td class="codeLine">  // but the duplication into Pred3 can't increase fallthrough.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1240</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1240</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1241</td>
    <td class="codeLine">  // A small number of extra duplication may not hurt too much. We need a better</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1241</td>
    <td class="codeLine">  // A small number of extra duplication may not hurt too much. We need a better</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1242</td>
    <td class="codeLine">  // heuristic to handle it.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1242</td>
    <td class="codeLine">  // heuristic to handle it.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1243</td>
    <td class="codeLine">  if ((NumDup > Succ->succ_size()) || !Duplicate)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1243</td>
    <td class="codeLine">  if ((NumDup > Succ->succ_size()) || !Duplicate)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1244</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1244</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1245</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1245</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1246</td>
    <td class="codeLine">  return true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1246</td>
    <td class="codeLine">  return true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1247</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1247</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1248</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1248</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1249</td>
    <td class="codeLine">/// Find chains of triangles where we believe it would be profitable to</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1249</td>
    <td class="codeLine">/// Find chains of triangles where we believe it would be profitable to</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1250</td>
    <td class="codeLine">/// tail-duplicate them all, but a local analysis would not find them.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1250</td>
    <td class="codeLine">/// tail-duplicate them all, but a local analysis would not find them.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1251</td>
    <td class="codeLine">/// There are 3 ways this can be profitable:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1251</td>
    <td class="codeLine">/// There are 3 ways this can be profitable:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1252</td>
    <td class="codeLine">/// 1) The post-dominators marked 50% are actually taken 55% (This shrinks with</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1252</td>
    <td class="codeLine">/// 1) The post-dominators marked 50% are actually taken 55% (This shrinks with</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1253</td>
    <td class="codeLine">///    longer chains)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1253</td>
    <td class="codeLine">///    longer chains)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1254</td>
    <td class="codeLine">/// 2) The chains are statically correlated. Branch probabilities have a very</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1254</td>
    <td class="codeLine">/// 2) The chains are statically correlated. Branch probabilities have a very</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1255</td>
    <td class="codeLine">///    U-shaped distribution.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1255</td>
    <td class="codeLine">///    U-shaped distribution.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1256</td>
    <td class="codeLine">///    [http://nrs.harvard.edu/urn-3:HUL.InstRepos:24015805]</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1256</td>
    <td class="codeLine">///    [http://nrs.harvard.edu/urn-3:HUL.InstRepos:24015805]</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1257</td>
    <td class="codeLine">///    If the branches in a chain are likely to be from the same side of the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1257</td>
    <td class="codeLine">///    If the branches in a chain are likely to be from the same side of the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1258</td>
    <td class="codeLine">///    distribution as their predecessor, but are independent at runtime, this</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1258</td>
    <td class="codeLine">///    distribution as their predecessor, but are independent at runtime, this</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1259</td>
    <td class="codeLine">///    transformation is profitable. (Because the cost of being wrong is a small</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1259</td>
    <td class="codeLine">///    transformation is profitable. (Because the cost of being wrong is a small</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1260</td>
    <td class="codeLine">///    fixed cost, unlike the standard triangle layout where the cost of being</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1260</td>
    <td class="codeLine">///    fixed cost, unlike the standard triangle layout where the cost of being</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1261</td>
    <td class="codeLine">///    wrong scales with the # of triangles.)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1261</td>
    <td class="codeLine">///    wrong scales with the # of triangles.)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1262</td>
    <td class="codeLine">/// 3) The chains are dynamically correlated. If the probability that a previous</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1262</td>
    <td class="codeLine">/// 3) The chains are dynamically correlated. If the probability that a previous</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1263</td>
    <td class="codeLine">///    branch was taken positively influences whether the next branch will be</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1263</td>
    <td class="codeLine">///    branch was taken positively influences whether the next branch will be</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1264</td>
    <td class="codeLine">///    taken</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1264</td>
    <td class="codeLine">///    taken</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1265</td>
    <td class="codeLine">/// We believe that 2 and 3 are common enough to justify the small margin in 1.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1265</td>
    <td class="codeLine">/// We believe that 2 and 3 are common enough to justify the small margin in 1.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1266</td>
    <td class="codeLine">void MachineBlockPlacement::precomputeTriangleChains() {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1266</td>
    <td class="codeLine">void MachineBlockPlacement::precomputeTriangleChains() {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1267</td>
    <td class="codeLine">  struct TriangleChain {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1267</td>
    <td class="codeLine">  struct TriangleChain {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1268</td>
    <td class="codeLine">    std::vector<MachineBasicBlock *> Edges;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1268</td>
    <td class="codeLine">    std::vector<MachineBasicBlock *> Edges;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1269</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1269</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1270</td>
    <td class="codeLine">    TriangleChain(MachineBasicBlock *src, MachineBasicBlock *dst)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1270</td>
    <td class="codeLine">    TriangleChain(MachineBasicBlock *src, MachineBasicBlock *dst)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1271</td>
    <td class="codeLine">        : Edges({src, dst}) {}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1271</td>
    <td class="codeLine">        : Edges({src, dst}) {}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1272</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1272</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1273</td>
    <td class="codeLine">    void append(MachineBasicBlock *dst) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1273</td>
    <td class="codeLine">    void append(MachineBasicBlock *dst) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1274</td>
    <td class="codeLine">      assert(getKey()->isSuccessor(dst) &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1274</td>
    <td class="codeLine">      assert(getKey()->isSuccessor(dst) &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1275</td>
    <td class="codeLine">             "Attempting to append a block that is not a successor.");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1275</td>
    <td class="codeLine">             "Attempting to append a block that is not a successor.");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1276</td>
    <td class="codeLine">      Edges.push_back(dst);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1276</td>
    <td class="codeLine">      Edges.push_back(dst);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1277</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1277</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1278</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1278</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1279</td>
    <td class="codeLine">    unsigned count() const { return Edges.size() - 1; }</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1279</td>
    <td class="codeLine">    unsigned count() const { return Edges.size() - 1; }</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1280</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1280</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1281</td>
    <td class="codeLine">    MachineBasicBlock *getKey() const {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1281</td>
    <td class="codeLine">    MachineBasicBlock *getKey() const {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1282</td>
    <td class="codeLine">      return Edges.back();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1282</td>
    <td class="codeLine">      return Edges.back();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1283</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1283</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1284</td>
    <td class="codeLine">  };</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1284</td>
    <td class="codeLine">  };</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1285</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1285</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1286</td>
    <td class="codeLine">  if (TriangleChainCount == 0)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1286</td>
    <td class="codeLine">  if (TriangleChainCount == 0)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1287</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1287</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1288</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1288</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1289</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "Pre-computing triangle chains.\n");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1289</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "Pre-computing triangle chains.\n");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1290</td>
    <td class="codeLine">  // Map from last block to the chain that contains it. This allows us to extend</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1290</td>
    <td class="codeLine">  // Map from last block to the chain that contains it. This allows us to extend</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1291</td>
    <td class="codeLine">  // chains as we find new triangles.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1291</td>
    <td class="codeLine">  // chains as we find new triangles.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1292</td>
    <td class="codeLine">  DenseMap<const MachineBasicBlock *, TriangleChain> TriangleChainMap;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1292</td>
    <td class="codeLine">  DenseMap<const MachineBasicBlock *, TriangleChain> TriangleChainMap;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1293</td>
    <td class="codeLine">  for (MachineBasicBlock &BB : *F) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1293</td>
    <td class="codeLine">  for (MachineBasicBlock &BB : *F) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1294</td>
    <td class="codeLine">    // If BB doesn't have 2 successors, it doesn't start a triangle.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1294</td>
    <td class="codeLine">    // If BB doesn't have 2 successors, it doesn't start a triangle.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1295</td>
    <td class="codeLine">    if (BB.succ_size() != 2)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1295</td>
    <td class="codeLine">    if (BB.succ_size() != 2)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1296</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1296</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1297</td>
    <td class="codeLine">    MachineBasicBlock *PDom = nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1297</td>
    <td class="codeLine">    MachineBasicBlock *PDom = nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1298</td>
    <td class="codeLine">    for (MachineBasicBlock *Succ : BB.successors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1298</td>
    <td class="codeLine">    for (MachineBasicBlock *Succ : BB.successors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1299</td>
    <td class="codeLine">      if (!MPDT->dominates(Succ, &BB))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1299</td>
    <td class="codeLine">      if (!MPDT->dominates(Succ, &BB))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1300</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1300</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1301</td>
    <td class="codeLine">      PDom = Succ;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1301</td>
    <td class="codeLine">      PDom = Succ;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1302</td>
    <td class="codeLine">      break;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1302</td>
    <td class="codeLine">      break;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1303</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1303</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1304</td>
    <td class="codeLine">    // If BB doesn't have a post-dominating successor, it doesn't form a</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1304</td>
    <td class="codeLine">    // If BB doesn't have a post-dominating successor, it doesn't form a</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1305</td>
    <td class="codeLine">    // triangle.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1305</td>
    <td class="codeLine">    // triangle.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1306</td>
    <td class="codeLine">    if (PDom == nullptr)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1306</td>
    <td class="codeLine">    if (PDom == nullptr)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1307</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1307</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1308</td>
    <td class="codeLine">    // If PDom has a hint that it is low probability, skip this triangle.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1308</td>
    <td class="codeLine">    // If PDom has a hint that it is low probability, skip this triangle.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1309</td>
    <td class="codeLine">    if (MBPI->getEdgeProbability(&BB, PDom) < BranchProbability(50, 100))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1309</td>
    <td class="codeLine">    if (MBPI->getEdgeProbability(&BB, PDom) < BranchProbability(50, 100))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1310</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1310</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1311</td>
    <td class="codeLine">    // If PDom isn't eligible for duplication, this isn't the kind of triangle</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1311</td>
    <td class="codeLine">    // If PDom isn't eligible for duplication, this isn't the kind of triangle</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1312</td>
    <td class="codeLine">    // we're looking for.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1312</td>
    <td class="codeLine">    // we're looking for.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1313</td>
    <td class="codeLine">    if (!shouldTailDuplicate(PDom))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1313</td>
    <td class="codeLine">    if (!shouldTailDuplicate(PDom))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1314</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1314</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1315</td>
    <td class="codeLine">    bool CanTailDuplicate = true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1315</td>
    <td class="codeLine">    bool CanTailDuplicate = true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1316</td>
    <td class="codeLine">    // If PDom can't tail-duplicate into it's non-BB predecessors, then this</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1316</td>
    <td class="codeLine">    // If PDom can't tail-duplicate into it's non-BB predecessors, then this</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1317</td>
    <td class="codeLine">    // isn't the kind of triangle we're looking for.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1317</td>
    <td class="codeLine">    // isn't the kind of triangle we're looking for.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1318</td>
    <td class="codeLine">    for (MachineBasicBlock* Pred : PDom->predecessors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1318</td>
    <td class="codeLine">    for (MachineBasicBlock* Pred : PDom->predecessors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1319</td>
    <td class="codeLine">      if (Pred == &BB)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1319</td>
    <td class="codeLine">      if (Pred == &BB)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1320</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1320</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1321</td>
    <td class="codeLine">      if (!TailDup.canTailDuplicate(PDom, Pred)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1321</td>
    <td class="codeLine">      if (!TailDup.canTailDuplicate(PDom, Pred)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1322</td>
    <td class="codeLine">        CanTailDuplicate = false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1322</td>
    <td class="codeLine">        CanTailDuplicate = false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1323</td>
    <td class="codeLine">        break;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1323</td>
    <td class="codeLine">        break;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1324</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1324</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1325</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1325</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1326</td>
    <td class="codeLine">    // If we can't tail-duplicate PDom to its predecessors, then skip this</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1326</td>
    <td class="codeLine">    // If we can't tail-duplicate PDom to its predecessors, then skip this</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1327</td>
    <td class="codeLine">    // triangle.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1327</td>
    <td class="codeLine">    // triangle.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1328</td>
    <td class="codeLine">    if (!CanTailDuplicate)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1328</td>
    <td class="codeLine">    if (!CanTailDuplicate)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1329</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1329</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1330</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1330</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1331</td>
    <td class="codeLine">    // Now we have an interesting triangle. Insert it if it's not part of an</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1331</td>
    <td class="codeLine">    // Now we have an interesting triangle. Insert it if it's not part of an</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1332</td>
    <td class="codeLine">    // existing chain.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1332</td>
    <td class="codeLine">    // existing chain.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1333</td>
    <td class="codeLine">    // Note: This cannot be replaced with a call insert() or emplace() because</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1333</td>
    <td class="codeLine">    // Note: This cannot be replaced with a call insert() or emplace() because</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1334</td>
    <td class="codeLine">    // the find key is BB, but the insert/emplace key is PDom.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1334</td>
    <td class="codeLine">    // the find key is BB, but the insert/emplace key is PDom.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1335</td>
    <td class="codeLine">    auto Found = TriangleChainMap.find(&BB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1335</td>
    <td class="codeLine">    auto Found = TriangleChainMap.find(&BB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1336</td>
    <td class="codeLine">    // If it is, remove the chain from the map, grow it, and put it back in the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1336</td>
    <td class="codeLine">    // If it is, remove the chain from the map, grow it, and put it back in the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1337</td>
    <td class="codeLine">    // map with the end as the new key.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1337</td>
    <td class="codeLine">    // map with the end as the new key.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1338</td>
    <td class="codeLine">    if (Found != TriangleChainMap.end()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1338</td>
    <td class="codeLine">    if (Found != TriangleChainMap.end()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1339</td>
    <td class="codeLine">      TriangleChain Chain = std::move(Found->second);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1339</td>
    <td class="codeLine">      TriangleChain Chain = std::move(Found->second);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1340</td>
    <td class="codeLine">      TriangleChainMap.erase(Found);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1340</td>
    <td class="codeLine">      TriangleChainMap.erase(Found);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1341</td>
    <td class="codeLine">      Chain.append(PDom);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1341</td>
    <td class="codeLine">      Chain.append(PDom);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1342</td>
    <td class="codeLine">      TriangleChainMap.insert(std::make_pair(Chain.getKey(), std::move(Chain)));</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1342</td>
    <td class="codeLine">      TriangleChainMap.insert(std::make_pair(Chain.getKey(), std::move(Chain)));</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1343</td>
    <td class="codeLine">    } else {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1343</td>
    <td class="codeLine">    } else {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1344</td>
    <td class="codeLine">      auto InsertResult = TriangleChainMap.try_emplace(PDom, &BB, PDom);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1344</td>
    <td class="codeLine">      auto InsertResult = TriangleChainMap.try_emplace(PDom, &BB, PDom);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1345</td>
    <td class="codeLine">      assert(InsertResult.second && "Block seen twice.");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1345</td>
    <td class="codeLine">      assert(InsertResult.second && "Block seen twice.");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1346</td>
    <td class="codeLine">      (void)InsertResult;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1346</td>
    <td class="codeLine">      (void)InsertResult;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1347</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1347</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1348</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1348</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1349</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1349</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1350</td>
    <td class="codeLine">  // Iterating over a DenseMap is safe here, because the only thing in the body</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1350</td>
    <td class="codeLine">  // Iterating over a DenseMap is safe here, because the only thing in the body</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1351</td>
    <td class="codeLine">  // of the loop is inserting into another DenseMap (ComputedEdges).</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1351</td>
    <td class="codeLine">  // of the loop is inserting into another DenseMap (ComputedEdges).</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1352</td>
    <td class="codeLine">  // ComputedEdges is never iterated, so this doesn't lead to non-determinism.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1352</td>
    <td class="codeLine">  // ComputedEdges is never iterated, so this doesn't lead to non-determinism.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1353</td>
    <td class="codeLine">  for (auto &ChainPair : TriangleChainMap) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1353</td>
    <td class="codeLine">  for (auto &ChainPair : TriangleChainMap) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1354</td>
    <td class="codeLine">    TriangleChain &Chain = ChainPair.second;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1354</td>
    <td class="codeLine">    TriangleChain &Chain = ChainPair.second;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1355</td>
    <td class="codeLine">    // Benchmarking has shown that due to branch correlation duplicating 2 or</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1355</td>
    <td class="codeLine">    // Benchmarking has shown that due to branch correlation duplicating 2 or</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1356</td>
    <td class="codeLine">    // more triangles is profitable, despite the calculations assuming</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1356</td>
    <td class="codeLine">    // more triangles is profitable, despite the calculations assuming</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1357</td>
    <td class="codeLine">    // independence.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1357</td>
    <td class="codeLine">    // independence.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1358</td>
    <td class="codeLine">    if (Chain.count() < TriangleChainCount)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1358</td>
    <td class="codeLine">    if (Chain.count() < TriangleChainCount)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1359</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1359</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1360</td>
    <td class="codeLine">    MachineBasicBlock *dst = Chain.Edges.back();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1360</td>
    <td class="codeLine">    MachineBasicBlock *dst = Chain.Edges.back();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1361</td>
    <td class="codeLine">    Chain.Edges.pop_back();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1361</td>
    <td class="codeLine">    Chain.Edges.pop_back();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1362</td>
    <td class="codeLine">    for (MachineBasicBlock *src : reverse(Chain.Edges)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1362</td>
    <td class="codeLine">    for (MachineBasicBlock *src : reverse(Chain.Edges)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1363</td>
    <td class="codeLine">      LLVM_DEBUG(dbgs() << "Marking edge: " << getBlockName(src) << "->"</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1363</td>
    <td class="codeLine">      LLVM_DEBUG(dbgs() << "Marking edge: " << getBlockName(src) << "->"</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1364</td>
    <td class="codeLine">                        << getBlockName(dst)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1364</td>
    <td class="codeLine">                        << getBlockName(dst)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1365</td>
    <td class="codeLine">                        << " as pre-computed based on triangles.\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1365</td>
    <td class="codeLine">                        << " as pre-computed based on triangles.\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1366</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1366</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1367</td>
    <td class="codeLine">      auto InsertResult = ComputedEdges.insert({src, {dst, true}});</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1367</td>
    <td class="codeLine">      auto InsertResult = ComputedEdges.insert({src, {dst, true}});</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1368</td>
    <td class="codeLine">      assert(InsertResult.second && "Block seen twice.");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1368</td>
    <td class="codeLine">      assert(InsertResult.second && "Block seen twice.");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1369</td>
    <td class="codeLine">      (void)InsertResult;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1369</td>
    <td class="codeLine">      (void)InsertResult;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1370</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1370</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1371</td>
    <td class="codeLine">      dst = src;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1371</td>
    <td class="codeLine">      dst = src;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1372</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1372</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1373</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1373</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1374</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1374</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1375</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1375</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1376</td>
    <td class="codeLine">// When profile is not present, return the StaticLikelyProb.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1376</td>
    <td class="codeLine">// When profile is not present, return the StaticLikelyProb.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1377</td>
    <td class="codeLine">// When profile is available, we need to handle the triangle-shape CFG.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1377</td>
    <td class="codeLine">// When profile is available, we need to handle the triangle-shape CFG.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1378</td>
    <td class="codeLine">static BranchProbability getLayoutSuccessorProbThreshold(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1378</td>
    <td class="codeLine">static BranchProbability getLayoutSuccessorProbThreshold(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1379</td>
    <td class="codeLine">      const MachineBasicBlock *BB) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1379</td>
    <td class="codeLine">      const MachineBasicBlock *BB) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1380</td>
    <td class="codeLine">  if (!BB->getParent()->getFunction().hasProfileData())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1380</td>
    <td class="codeLine">  if (!BB->getParent()->getFunction().hasProfileData())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1381</td>
    <td class="codeLine">    return BranchProbability(StaticLikelyProb, 100);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1381</td>
    <td class="codeLine">    return BranchProbability(StaticLikelyProb, 100);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1382</td>
    <td class="codeLine">  if (BB->succ_size() == 2) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1382</td>
    <td class="codeLine">  if (BB->succ_size() == 2) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1383</td>
    <td class="codeLine">    const MachineBasicBlock *Succ1 = *BB->succ_begin();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1383</td>
    <td class="codeLine">    const MachineBasicBlock *Succ1 = *BB->succ_begin();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1384</td>
    <td class="codeLine">    const MachineBasicBlock *Succ2 = *(BB->succ_begin() + 1);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1384</td>
    <td class="codeLine">    const MachineBasicBlock *Succ2 = *(BB->succ_begin() + 1);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1385</td>
    <td class="codeLine">    if (Succ1->isSuccessor(Succ2) || Succ2->isSuccessor(Succ1)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1385</td>
    <td class="codeLine">    if (Succ1->isSuccessor(Succ2) || Succ2->isSuccessor(Succ1)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1386</td>
    <td class="codeLine">      /* See case 1 below for the cost analysis. For BB->Succ to</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1386</td>
    <td class="codeLine">      /* See case 1 below for the cost analysis. For BB->Succ to</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1387</td>
    <td class="codeLine">       * be taken with smaller cost, the following needs to hold:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1387</td>
    <td class="codeLine">       * be taken with smaller cost, the following needs to hold:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1388</td>
    <td class="codeLine">       *   Prob(BB->Succ) > 2 * Prob(BB->Pred)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1388</td>
    <td class="codeLine">       *   Prob(BB->Succ) > 2 * Prob(BB->Pred)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1389</td>
    <td class="codeLine">       *   So the threshold T in the calculation below</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1389</td>
    <td class="codeLine">       *   So the threshold T in the calculation below</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1390</td>
    <td class="codeLine">       *   (1-T) * Prob(BB->Succ) > T * Prob(BB->Pred)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1390</td>
    <td class="codeLine">       *   (1-T) * Prob(BB->Succ) > T * Prob(BB->Pred)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1391</td>
    <td class="codeLine">       *   So T / (1 - T) = 2, Yielding T = 2/3</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1391</td>
    <td class="codeLine">       *   So T / (1 - T) = 2, Yielding T = 2/3</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1392</td>
    <td class="codeLine">       * Also adding user specified branch bias, we have</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1392</td>
    <td class="codeLine">       * Also adding user specified branch bias, we have</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1393</td>
    <td class="codeLine">       *   T = (2/3)*(ProfileLikelyProb/50)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1393</td>
    <td class="codeLine">       *   T = (2/3)*(ProfileLikelyProb/50)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1394</td>
    <td class="codeLine">       *     = (2*ProfileLikelyProb)/150)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1394</td>
    <td class="codeLine">       *     = (2*ProfileLikelyProb)/150)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1395</td>
    <td class="codeLine">       */</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1395</td>
    <td class="codeLine">       */</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1396</td>
    <td class="codeLine">      return BranchProbability(2 * ProfileLikelyProb, 150);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1396</td>
    <td class="codeLine">      return BranchProbability(2 * ProfileLikelyProb, 150);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1397</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1397</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1398</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1398</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1399</td>
    <td class="codeLine">  return BranchProbability(ProfileLikelyProb, 100);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1399</td>
    <td class="codeLine">  return BranchProbability(ProfileLikelyProb, 100);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1400</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1400</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1401</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1401</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1402</td>
    <td class="codeLine">/// Checks to see if the layout candidate block \p Succ has a better layout</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1402</td>
    <td class="codeLine">/// Checks to see if the layout candidate block \p Succ has a better layout</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1403</td>
    <td class="codeLine">/// predecessor than \c BB. If yes, returns true.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1403</td>
    <td class="codeLine">/// predecessor than \c BB. If yes, returns true.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1404</td>
    <td class="codeLine">/// \p SuccProb: The probability adjusted for only remaining blocks.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1404</td>
    <td class="codeLine">/// \p SuccProb: The probability adjusted for only remaining blocks.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1405</td>
    <td class="codeLine">///   Only used for logging</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1405</td>
    <td class="codeLine">///   Only used for logging</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1406</td>
    <td class="codeLine">/// \p RealSuccProb: The un-adjusted probability.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1406</td>
    <td class="codeLine">/// \p RealSuccProb: The un-adjusted probability.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1407</td>
    <td class="codeLine">/// \p Chain: The chain that BB belongs to and Succ is being considered for.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1407</td>
    <td class="codeLine">/// \p Chain: The chain that BB belongs to and Succ is being considered for.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1408</td>
    <td class="codeLine">/// \p BlockFilter: if non-null, the set of blocks that make up the loop being</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1408</td>
    <td class="codeLine">/// \p BlockFilter: if non-null, the set of blocks that make up the loop being</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1409</td>
    <td class="codeLine">///    considered</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1409</td>
    <td class="codeLine">///    considered</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1410</td>
    <td class="codeLine">bool MachineBlockPlacement::hasBetterLayoutPredecessor(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1410</td>
    <td class="codeLine">bool MachineBlockPlacement::hasBetterLayoutPredecessor(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1411</td>
    <td class="codeLine">    const MachineBasicBlock *BB, const MachineBasicBlock *Succ,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1411</td>
    <td class="codeLine">    const MachineBasicBlock *BB, const MachineBasicBlock *Succ,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1412</td>
    <td class="codeLine">    const BlockChain &SuccChain, BranchProbability SuccProb,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1412</td>
    <td class="codeLine">    const BlockChain &SuccChain, BranchProbability SuccProb,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1413</td>
    <td class="codeLine">    BranchProbability RealSuccProb, const BlockChain &Chain,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1413</td>
    <td class="codeLine">    BranchProbability RealSuccProb, const BlockChain &Chain,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1414</td>
    <td class="codeLine">    const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1414</td>
    <td class="codeLine">    const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1415</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1415</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1416</td>
    <td class="codeLine">  // There isn't a better layout when there are no unscheduled predecessors.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1416</td>
    <td class="codeLine">  // There isn't a better layout when there are no unscheduled predecessors.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1417</td>
    <td class="codeLine">  if (SuccChain.UnscheduledPredecessors == 0)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1417</td>
    <td class="codeLine">  if (SuccChain.UnscheduledPredecessors == 0)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1418</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1418</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1419</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1419</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1420</td>
    <td class="codeLine">  // There are two basic scenarios here:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1420</td>
    <td class="codeLine">  // There are two basic scenarios here:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1421</td>
    <td class="codeLine">  // -------------------------------------</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1421</td>
    <td class="codeLine">  // -------------------------------------</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1422</td>
    <td class="codeLine">  // Case 1: triangular shape CFG (if-then):</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1422</td>
    <td class="codeLine">  // Case 1: triangular shape CFG (if-then):</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1423</td>
    <td class="codeLine">  //     BB</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1423</td>
    <td class="codeLine">  //     BB</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1424</td>
    <td class="codeLine">  //     | \</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1424</td>
    <td class="codeLine">  //     | \</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1425</td>
    <td class="codeLine">  //     |  \</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1425</td>
    <td class="codeLine">  //     |  \</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1426</td>
    <td class="codeLine">  //     |   Pred</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1426</td>
    <td class="codeLine">  //     |   Pred</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1427</td>
    <td class="codeLine">  //     |   /</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1427</td>
    <td class="codeLine">  //     |   /</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1428</td>
    <td class="codeLine">  //     Succ</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1428</td>
    <td class="codeLine">  //     Succ</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1429</td>
    <td class="codeLine">  // In this case, we are evaluating whether to select edge -> Succ, e.g.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1429</td>
    <td class="codeLine">  // In this case, we are evaluating whether to select edge -> Succ, e.g.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1430</td>
    <td class="codeLine">  // set Succ as the layout successor of BB. Picking Succ as BB's</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1430</td>
    <td class="codeLine">  // set Succ as the layout successor of BB. Picking Succ as BB's</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1431</td>
    <td class="codeLine">  // successor breaks the CFG constraints (FIXME: define these constraints).</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1431</td>
    <td class="codeLine">  // successor breaks the CFG constraints (FIXME: define these constraints).</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1432</td>
    <td class="codeLine">  // With this layout, Pred BB</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1432</td>
    <td class="codeLine">  // With this layout, Pred BB</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1433</td>
    <td class="codeLine">  // is forced to be outlined, so the overall cost will be cost of the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1433</td>
    <td class="codeLine">  // is forced to be outlined, so the overall cost will be cost of the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1434</td>
    <td class="codeLine">  // branch taken from BB to Pred, plus the cost of back taken branch</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1434</td>
    <td class="codeLine">  // branch taken from BB to Pred, plus the cost of back taken branch</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1435</td>
    <td class="codeLine">  // from Pred to Succ, as well as the additional cost associated</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1435</td>
    <td class="codeLine">  // from Pred to Succ, as well as the additional cost associated</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1436</td>
    <td class="codeLine">  // with the needed unconditional jump instruction from Pred To Succ.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1436</td>
    <td class="codeLine">  // with the needed unconditional jump instruction from Pred To Succ.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1437</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1437</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1438</td>
    <td class="codeLine">  // The cost of the topological order layout is the taken branch cost</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1438</td>
    <td class="codeLine">  // The cost of the topological order layout is the taken branch cost</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1439</td>
    <td class="codeLine">  // from BB to Succ, so to make BB->Succ a viable candidate, the following</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1439</td>
    <td class="codeLine">  // from BB to Succ, so to make BB->Succ a viable candidate, the following</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1440</td>
    <td class="codeLine">  // must hold:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1440</td>
    <td class="codeLine">  // must hold:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1441</td>
    <td class="codeLine">  //     2 * freq(BB->Pred) * taken_branch_cost + unconditional_jump_cost</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1441</td>
    <td class="codeLine">  //     2 * freq(BB->Pred) * taken_branch_cost + unconditional_jump_cost</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1442</td>
    <td class="codeLine">  //      < freq(BB->Succ) *  taken_branch_cost.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1442</td>
    <td class="codeLine">  //      < freq(BB->Succ) *  taken_branch_cost.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1443</td>
    <td class="codeLine">  // Ignoring unconditional jump cost, we get</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1443</td>
    <td class="codeLine">  // Ignoring unconditional jump cost, we get</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1444</td>
    <td class="codeLine">  //    freq(BB->Succ) > 2 * freq(BB->Pred), i.e.,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1444</td>
    <td class="codeLine">  //    freq(BB->Succ) > 2 * freq(BB->Pred), i.e.,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1445</td>
    <td class="codeLine">  //    prob(BB->Succ) > 2 * prob(BB->Pred)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1445</td>
    <td class="codeLine">  //    prob(BB->Succ) > 2 * prob(BB->Pred)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1446</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1446</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1447</td>
    <td class="codeLine">  // When real profile data is available, we can precisely compute the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1447</td>
    <td class="codeLine">  // When real profile data is available, we can precisely compute the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1448</td>
    <td class="codeLine">  // probability threshold that is needed for edge BB->Succ to be considered.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1448</td>
    <td class="codeLine">  // probability threshold that is needed for edge BB->Succ to be considered.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1449</td>
    <td class="codeLine">  // Without profile data, the heuristic requires the branch bias to be</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1449</td>
    <td class="codeLine">  // Without profile data, the heuristic requires the branch bias to be</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1450</td>
    <td class="codeLine">  // a lot larger to make sure the signal is very strong (e.g. 80% default).</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1450</td>
    <td class="codeLine">  // a lot larger to make sure the signal is very strong (e.g. 80% default).</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1451</td>
    <td class="codeLine">  // -----------------------------------------------------------------</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1451</td>
    <td class="codeLine">  // -----------------------------------------------------------------</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1452</td>
    <td class="codeLine">  // Case 2: diamond like CFG (if-then-else):</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1452</td>
    <td class="codeLine">  // Case 2: diamond like CFG (if-then-else):</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1453</td>
    <td class="codeLine">  //     S</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1453</td>
    <td class="codeLine">  //     S</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1454</td>
    <td class="codeLine">  //    / \</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1454</td>
    <td class="codeLine">  //    / \</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1455</td>
    <td class="codeLine">  //   |   \</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1455</td>
    <td class="codeLine">  //   |   \</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1456</td>
    <td class="codeLine">  //  BB    Pred</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1456</td>
    <td class="codeLine">  //  BB    Pred</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1457</td>
    <td class="codeLine">  //   \    /</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1457</td>
    <td class="codeLine">  //   \    /</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1458</td>
    <td class="codeLine">  //    Succ</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1458</td>
    <td class="codeLine">  //    Succ</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1459</td>
    <td class="codeLine">  //    ..</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1459</td>
    <td class="codeLine">  //    ..</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1460</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1460</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1461</td>
    <td class="codeLine">  // The current block is BB and edge BB->Succ is now being evaluated.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1461</td>
    <td class="codeLine">  // The current block is BB and edge BB->Succ is now being evaluated.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1462</td>
    <td class="codeLine">  // Note that edge S->BB was previously already selected because</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1462</td>
    <td class="codeLine">  // Note that edge S->BB was previously already selected because</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1463</td>
    <td class="codeLine">  // prob(S->BB) > prob(S->Pred).</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1463</td>
    <td class="codeLine">  // prob(S->BB) > prob(S->Pred).</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1464</td>
    <td class="codeLine">  // At this point, 2 blocks can be placed after BB: Pred or Succ. If we</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1464</td>
    <td class="codeLine">  // At this point, 2 blocks can be placed after BB: Pred or Succ. If we</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1465</td>
    <td class="codeLine">  // choose Pred, we will have a topological ordering as shown on the left</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1465</td>
    <td class="codeLine">  // choose Pred, we will have a topological ordering as shown on the left</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1466</td>
    <td class="codeLine">  // in the picture below. If we choose Succ, we have the solution as shown</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1466</td>
    <td class="codeLine">  // in the picture below. If we choose Succ, we have the solution as shown</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1467</td>
    <td class="codeLine">  // on the right:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1467</td>
    <td class="codeLine">  // on the right:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1468</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1468</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1469</td>
    <td class="codeLine">  //   topo-order:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1469</td>
    <td class="codeLine">  //   topo-order:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1470</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1470</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1471</td>
    <td class="codeLine">  //       S-----                             ---S</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1471</td>
    <td class="codeLine">  //       S-----                             ---S</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1472</td>
    <td class="codeLine">  //       |    |                             |  |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1472</td>
    <td class="codeLine">  //       |    |                             |  |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1473</td>
    <td class="codeLine">  //    ---BB   |                             |  BB</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1473</td>
    <td class="codeLine">  //    ---BB   |                             |  BB</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1474</td>
    <td class="codeLine">  //    |       |                             |  |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1474</td>
    <td class="codeLine">  //    |       |                             |  |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1475</td>
    <td class="codeLine">  //    |  Pred--                             |  Succ--</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1475</td>
    <td class="codeLine">  //    |  Pred--                             |  Succ--</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1476</td>
    <td class="codeLine">  //    |  |                                  |       |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1476</td>
    <td class="codeLine">  //    |  |                                  |       |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1477</td>
    <td class="codeLine">  //    ---Succ                               ---Pred--</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1477</td>
    <td class="codeLine">  //    ---Succ                               ---Pred--</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1478</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1478</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1479</td>
    <td class="codeLine">  // cost = freq(S->Pred) + freq(BB->Succ)    cost = 2 * freq (S->Pred)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1479</td>
    <td class="codeLine">  // cost = freq(S->Pred) + freq(BB->Succ)    cost = 2 * freq (S->Pred)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1480</td>
    <td class="codeLine">  //      = freq(S->Pred) + freq(S->BB)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1480</td>
    <td class="codeLine">  //      = freq(S->Pred) + freq(S->BB)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1481</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1481</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1482</td>
    <td class="codeLine">  // If we have profile data (i.e, branch probabilities can be trusted), the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1482</td>
    <td class="codeLine">  // If we have profile data (i.e, branch probabilities can be trusted), the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1483</td>
    <td class="codeLine">  // cost (number of taken branches) with layout S->BB->Succ->Pred is 2 *</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1483</td>
    <td class="codeLine">  // cost (number of taken branches) with layout S->BB->Succ->Pred is 2 *</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1484</td>
    <td class="codeLine">  // freq(S->Pred) while the cost of topo order is freq(S->Pred) + freq(S->BB).</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1484</td>
    <td class="codeLine">  // freq(S->Pred) while the cost of topo order is freq(S->Pred) + freq(S->BB).</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1485</td>
    <td class="codeLine">  // We know Prob(S->BB) > Prob(S->Pred), so freq(S->BB) > freq(S->Pred), which</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1485</td>
    <td class="codeLine">  // We know Prob(S->BB) > Prob(S->Pred), so freq(S->BB) > freq(S->Pred), which</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1486</td>
    <td class="codeLine">  // means the cost of topological order is greater.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1486</td>
    <td class="codeLine">  // means the cost of topological order is greater.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1487</td>
    <td class="codeLine">  // When profile data is not available, however, we need to be more</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1487</td>
    <td class="codeLine">  // When profile data is not available, however, we need to be more</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1488</td>
    <td class="codeLine">  // conservative. If the branch prediction is wrong, breaking the topo-order</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1488</td>
    <td class="codeLine">  // conservative. If the branch prediction is wrong, breaking the topo-order</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1489</td>
    <td class="codeLine">  // will actually yield a layout with large cost. For this reason, we need</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1489</td>
    <td class="codeLine">  // will actually yield a layout with large cost. For this reason, we need</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1490</td>
    <td class="codeLine">  // strong biased branch at block S with Prob(S->BB) in order to select</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1490</td>
    <td class="codeLine">  // strong biased branch at block S with Prob(S->BB) in order to select</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1491</td>
    <td class="codeLine">  // BB->Succ. This is equivalent to looking the CFG backward with backward</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1491</td>
    <td class="codeLine">  // BB->Succ. This is equivalent to looking the CFG backward with backward</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1492</td>
    <td class="codeLine">  // edge: Prob(Succ->BB) needs to >= HotProb in order to be selected (without</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1492</td>
    <td class="codeLine">  // edge: Prob(Succ->BB) needs to >= HotProb in order to be selected (without</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1493</td>
    <td class="codeLine">  // profile data).</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1493</td>
    <td class="codeLine">  // profile data).</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1494</td>
    <td class="codeLine">  // --------------------------------------------------------------------------</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1494</td>
    <td class="codeLine">  // --------------------------------------------------------------------------</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1495</td>
    <td class="codeLine">  // Case 3: forked diamond</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1495</td>
    <td class="codeLine">  // Case 3: forked diamond</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1496</td>
    <td class="codeLine">  //       S</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1496</td>
    <td class="codeLine">  //       S</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1497</td>
    <td class="codeLine">  //      / \</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1497</td>
    <td class="codeLine">  //      / \</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1498</td>
    <td class="codeLine">  //     /   \</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1498</td>
    <td class="codeLine">  //     /   \</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1499</td>
    <td class="codeLine">  //   BB    Pred</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1499</td>
    <td class="codeLine">  //   BB    Pred</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1500</td>
    <td class="codeLine">  //   | \   / |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1500</td>
    <td class="codeLine">  //   | \   / |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1501</td>
    <td class="codeLine">  //   |  \ /  |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1501</td>
    <td class="codeLine">  //   |  \ /  |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1502</td>
    <td class="codeLine">  //   |   X   |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1502</td>
    <td class="codeLine">  //   |   X   |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1503</td>
    <td class="codeLine">  //   |  / \  |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1503</td>
    <td class="codeLine">  //   |  / \  |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1504</td>
    <td class="codeLine">  //   | /   \ |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1504</td>
    <td class="codeLine">  //   | /   \ |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1505</td>
    <td class="codeLine">  //   S1     S2</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1505</td>
    <td class="codeLine">  //   S1     S2</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1506</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1506</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1507</td>
    <td class="codeLine">  // The current block is BB and edge BB->S1 is now being evaluated.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1507</td>
    <td class="codeLine">  // The current block is BB and edge BB->S1 is now being evaluated.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1508</td>
    <td class="codeLine">  // As above S->BB was already selected because</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1508</td>
    <td class="codeLine">  // As above S->BB was already selected because</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1509</td>
    <td class="codeLine">  // prob(S->BB) > prob(S->Pred). Assume that prob(BB->S1) >= prob(BB->S2).</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1509</td>
    <td class="codeLine">  // prob(S->BB) > prob(S->Pred). Assume that prob(BB->S1) >= prob(BB->S2).</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1510</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1510</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1511</td>
    <td class="codeLine">  // topo-order:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1511</td>
    <td class="codeLine">  // topo-order:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1512</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1512</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1513</td>
    <td class="codeLine">  //     S-------|                     ---S</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1513</td>
    <td class="codeLine">  //     S-------|                     ---S</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1514</td>
    <td class="codeLine">  //     |       |                     |  |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1514</td>
    <td class="codeLine">  //     |       |                     |  |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1515</td>
    <td class="codeLine">  //  ---BB      |                     |  BB</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1515</td>
    <td class="codeLine">  //  ---BB      |                     |  BB</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1516</td>
    <td class="codeLine">  //  |          |                     |  |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1516</td>
    <td class="codeLine">  //  |          |                     |  |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1517</td>
    <td class="codeLine">  //  |  Pred----|                     |  S1----</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1517</td>
    <td class="codeLine">  //  |  Pred----|                     |  S1----</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1518</td>
    <td class="codeLine">  //  |  |                             |       |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1518</td>
    <td class="codeLine">  //  |  |                             |       |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1519</td>
    <td class="codeLine">  //  --(S1 or S2)                     ---Pred--</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1519</td>
    <td class="codeLine">  //  --(S1 or S2)                     ---Pred--</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1520</td>
    <td class="codeLine">  //                                        |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1520</td>
    <td class="codeLine">  //                                        |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1521</td>
    <td class="codeLine">  //                                       S2</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1521</td>
    <td class="codeLine">  //                                       S2</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1522</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1522</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1523</td>
    <td class="codeLine">  // topo-cost = freq(S->Pred) + freq(BB->S1) + freq(BB->S2)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1523</td>
    <td class="codeLine">  // topo-cost = freq(S->Pred) + freq(BB->S1) + freq(BB->S2)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1524</td>
    <td class="codeLine">  //    + min(freq(Pred->S1), freq(Pred->S2))</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1524</td>
    <td class="codeLine">  //    + min(freq(Pred->S1), freq(Pred->S2))</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1525</td>
    <td class="codeLine">  // Non-topo-order cost:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1525</td>
    <td class="codeLine">  // Non-topo-order cost:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1526</td>
    <td class="codeLine">  // non-topo-cost = 2 * freq(S->Pred) + freq(BB->S2).</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1526</td>
    <td class="codeLine">  // non-topo-cost = 2 * freq(S->Pred) + freq(BB->S2).</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1527</td>
    <td class="codeLine">  // To be conservative, we can assume that min(freq(Pred->S1), freq(Pred->S2))</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1527</td>
    <td class="codeLine">  // To be conservative, we can assume that min(freq(Pred->S1), freq(Pred->S2))</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1528</td>
    <td class="codeLine">  // is 0. Then the non topo layout is better when</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1528</td>
    <td class="codeLine">  // is 0. Then the non topo layout is better when</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1529</td>
    <td class="codeLine">  // freq(S->Pred) < freq(BB->S1).</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1529</td>
    <td class="codeLine">  // freq(S->Pred) < freq(BB->S1).</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1530</td>
    <td class="codeLine">  // This is exactly what is checked below.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1530</td>
    <td class="codeLine">  // This is exactly what is checked below.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1531</td>
    <td class="codeLine">  // Note there are other shapes that apply (Pred may not be a single block,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1531</td>
    <td class="codeLine">  // Note there are other shapes that apply (Pred may not be a single block,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1532</td>
    <td class="codeLine">  // but they all fit this general pattern.)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1532</td>
    <td class="codeLine">  // but they all fit this general pattern.)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1533</td>
    <td class="codeLine">  BranchProbability HotProb = getLayoutSuccessorProbThreshold(BB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1533</td>
    <td class="codeLine">  BranchProbability HotProb = getLayoutSuccessorProbThreshold(BB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1534</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1534</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1535</td>
    <td class="codeLine">  // Make sure that a hot successor doesn't have a globally more</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1535</td>
    <td class="codeLine">  // Make sure that a hot successor doesn't have a globally more</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1536</td>
    <td class="codeLine">  // important predecessor.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1536</td>
    <td class="codeLine">  // important predecessor.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1537</td>
    <td class="codeLine">  BlockFrequency CandidateEdgeFreq = MBFI->getBlockFreq(BB) * RealSuccProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1537</td>
    <td class="codeLine">  BlockFrequency CandidateEdgeFreq = MBFI->getBlockFreq(BB) * RealSuccProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1538</td>
    <td class="codeLine">  bool BadCFGConflict = false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1538</td>
    <td class="codeLine">  bool BadCFGConflict = false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1539</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1539</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1540</td>
    <td class="codeLine">  for (MachineBasicBlock *Pred : Succ->predecessors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1540</td>
    <td class="codeLine">  for (MachineBasicBlock *Pred : Succ->predecessors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1541</td>
    <td class="codeLine">    BlockChain *PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1541</td>
    <td class="codeLine">    BlockChain *PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1542</td>
    <td class="codeLine">    if (Pred == Succ || PredChain == &SuccChain ||</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1542</td>
    <td class="codeLine">    if (Pred == Succ || PredChain == &SuccChain ||</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1543</td>
    <td class="codeLine">        (BlockFilter && !BlockFilter->count(Pred)) ||</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1543</td>
    <td class="codeLine">        (BlockFilter && !BlockFilter->count(Pred)) ||</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1544</td>
    <td class="codeLine">        PredChain == &Chain || Pred != *std::prev(PredChain->end()) ||</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1544</td>
    <td class="codeLine">        PredChain == &Chain || Pred != *std::prev(PredChain->end()) ||</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1545</td>
    <td class="codeLine">        // This check is redundant except for look ahead. This function is</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1545</td>
    <td class="codeLine">        // This check is redundant except for look ahead. This function is</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1546</td>
    <td class="codeLine">        // called for lookahead by isProfitableToTailDup when BB hasn't been</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1546</td>
    <td class="codeLine">        // called for lookahead by isProfitableToTailDup when BB hasn't been</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1547</td>
    <td class="codeLine">        // placed yet.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1547</td>
    <td class="codeLine">        // placed yet.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1548</td>
    <td class="codeLine">        (Pred == BB))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1548</td>
    <td class="codeLine">        (Pred == BB))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1549</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1549</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1550</td>
    <td class="codeLine">    // Do backward checking.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1550</td>
    <td class="codeLine">    // Do backward checking.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1551</td>
    <td class="codeLine">    // For all cases above, we need a backward checking to filter out edges that</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1551</td>
    <td class="codeLine">    // For all cases above, we need a backward checking to filter out edges that</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1552</td>
    <td class="codeLine">    // are not 'strongly' biased.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1552</td>
    <td class="codeLine">    // are not 'strongly' biased.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1553</td>
    <td class="codeLine">    // BB  Pred</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1553</td>
    <td class="codeLine">    // BB  Pred</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1554</td>
    <td class="codeLine">    //  \ /</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1554</td>
    <td class="codeLine">    //  \ /</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1555</td>
    <td class="codeLine">    //  Succ</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1555</td>
    <td class="codeLine">    //  Succ</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1556</td>
    <td class="codeLine">    // We select edge BB->Succ if</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1556</td>
    <td class="codeLine">    // We select edge BB->Succ if</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1557</td>
    <td class="codeLine">    //      freq(BB->Succ) > freq(Succ) * HotProb</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1557</td>
    <td class="codeLine">    //      freq(BB->Succ) > freq(Succ) * HotProb</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1558</td>
    <td class="codeLine">    //      i.e. freq(BB->Succ) > freq(BB->Succ) * HotProb + freq(Pred->Succ) *</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1558</td>
    <td class="codeLine">    //      i.e. freq(BB->Succ) > freq(BB->Succ) * HotProb + freq(Pred->Succ) *</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1559</td>
    <td class="codeLine">    //      HotProb</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1559</td>
    <td class="codeLine">    //      HotProb</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1560</td>
    <td class="codeLine">    //      i.e. freq((BB->Succ) * (1 - HotProb) > freq(Pred->Succ) * HotProb</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1560</td>
    <td class="codeLine">    //      i.e. freq((BB->Succ) * (1 - HotProb) > freq(Pred->Succ) * HotProb</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1561</td>
    <td class="codeLine">    // Case 1 is covered too, because the first equation reduces to:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1561</td>
    <td class="codeLine">    // Case 1 is covered too, because the first equation reduces to:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1562</td>
    <td class="codeLine">    // prob(BB->Succ) > HotProb. (freq(Succ) = freq(BB) for a triangle)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1562</td>
    <td class="codeLine">    // prob(BB->Succ) > HotProb. (freq(Succ) = freq(BB) for a triangle)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1563</td>
    <td class="codeLine">    BlockFrequency PredEdgeFreq =</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1563</td>
    <td class="codeLine">    BlockFrequency PredEdgeFreq =</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1564</td>
    <td class="codeLine">        MBFI->getBlockFreq(Pred) * MBPI->getEdgeProbability(Pred, Succ);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1564</td>
    <td class="codeLine">        MBFI->getBlockFreq(Pred) * MBPI->getEdgeProbability(Pred, Succ);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1565</td>
    <td class="codeLine">    if (PredEdgeFreq * HotProb >= CandidateEdgeFreq * HotProb.getCompl()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1565</td>
    <td class="codeLine">    if (PredEdgeFreq * HotProb >= CandidateEdgeFreq * HotProb.getCompl()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1566</td>
    <td class="codeLine">      BadCFGConflict = true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1566</td>
    <td class="codeLine">      BadCFGConflict = true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1567</td>
    <td class="codeLine">      break;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1567</td>
    <td class="codeLine">      break;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1568</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1568</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1569</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1569</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1570</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1570</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1571</td>
    <td class="codeLine">  if (BadCFGConflict) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1571</td>
    <td class="codeLine">  if (BadCFGConflict) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1572</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "    Not a candidate: " << getBlockName(Succ) << " -> "</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1572</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "    Not a candidate: " << getBlockName(Succ) << " -> "</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1573</td>
    <td class="codeLine">                      << SuccProb << " (prob) (non-cold CFG conflict)\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1573</td>
    <td class="codeLine">                      << SuccProb << " (prob) (non-cold CFG conflict)\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1574</td>
    <td class="codeLine">    return true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1574</td>
    <td class="codeLine">    return true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1575</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1575</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1576</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1576</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1577</td>
    <td class="codeLine">  return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1577</td>
    <td class="codeLine">  return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1578</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1578</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1579</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1579</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1580</td>
    <td class="codeLine">/// Select the best successor for a block.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1580</td>
    <td class="codeLine">/// Select the best successor for a block.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1581</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1581</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1582</td>
    <td class="codeLine">/// This looks across all successors of a particular block and attempts to</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1582</td>
    <td class="codeLine">/// This looks across all successors of a particular block and attempts to</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1583</td>
    <td class="codeLine">/// select the "best" one to be the layout successor. It only considers direct</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1583</td>
    <td class="codeLine">/// select the "best" one to be the layout successor. It only considers direct</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1584</td>
    <td class="codeLine">/// successors which also pass the block filter. It will attempt to avoid</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1584</td>
    <td class="codeLine">/// successors which also pass the block filter. It will attempt to avoid</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1585</td>
    <td class="codeLine">/// breaking CFG structure, but cave and break such structures in the case of</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1585</td>
    <td class="codeLine">/// breaking CFG structure, but cave and break such structures in the case of</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1586</td>
    <td class="codeLine">/// very hot successor edges.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1586</td>
    <td class="codeLine">/// very hot successor edges.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1587</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1587</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1588</td>
    <td class="codeLine">/// \returns The best successor block found, or null if none are viable, along</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1588</td>
    <td class="codeLine">/// \returns The best successor block found, or null if none are viable, along</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1589</td>
    <td class="codeLine">/// with a boolean indicating if tail duplication is necessary.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1589</td>
    <td class="codeLine">/// with a boolean indicating if tail duplication is necessary.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1590</td>
    <td class="codeLine">MachineBlockPlacement::BlockAndTailDupResult</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1590</td>
    <td class="codeLine">MachineBlockPlacement::BlockAndTailDupResult</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1591</td>
    <td class="codeLine">MachineBlockPlacement::selectBestSuccessor(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1591</td>
    <td class="codeLine">MachineBlockPlacement::selectBestSuccessor(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1592</td>
    <td class="codeLine">    const MachineBasicBlock *BB, const BlockChain &Chain,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1592</td>
    <td class="codeLine">    const MachineBasicBlock *BB, const BlockChain &Chain,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1593</td>
    <td class="codeLine">    const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1593</td>
    <td class="codeLine">    const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1594</td>
    <td class="codeLine">  const BranchProbability HotProb(StaticLikelyProb, 100);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1594</td>
    <td class="codeLine">  const BranchProbability HotProb(StaticLikelyProb, 100);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1595</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1595</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1596</td>
    <td class="codeLine">  BlockAndTailDupResult BestSucc = { nullptr, false };</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1596</td>
    <td class="codeLine">  BlockAndTailDupResult BestSucc = { nullptr, false };</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1597</td>
    <td class="codeLine">  auto BestProb = BranchProbability::getZero();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1597</td>
    <td class="codeLine">  auto BestProb = BranchProbability::getZero();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1598</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1598</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1599</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 4> Successors;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1599</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 4> Successors;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1600</td>
    <td class="codeLine">  auto AdjustedSumProb =</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1600</td>
    <td class="codeLine">  auto AdjustedSumProb =</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1601</td>
    <td class="codeLine">      collectViableSuccessors(BB, Chain, BlockFilter, Successors);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1601</td>
    <td class="codeLine">      collectViableSuccessors(BB, Chain, BlockFilter, Successors);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1602</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1602</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1603</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "Selecting best successor for: " << getBlockName(BB)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1603</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "Selecting best successor for: " << getBlockName(BB)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1604</td>
    <td class="codeLine">                    << "\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1604</td>
    <td class="codeLine">                    << "\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1605</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1605</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1606</td>
    <td class="codeLine">  // if we already precomputed the best successor for BB, return that if still</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1606</td>
    <td class="codeLine">  // if we already precomputed the best successor for BB, return that if still</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1607</td>
    <td class="codeLine">  // applicable.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1607</td>
    <td class="codeLine">  // applicable.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1608</td>
    <td class="codeLine">  auto FoundEdge = ComputedEdges.find(BB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1608</td>
    <td class="codeLine">  auto FoundEdge = ComputedEdges.find(BB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1609</td>
    <td class="codeLine">  if (FoundEdge != ComputedEdges.end()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1609</td>
    <td class="codeLine">  if (FoundEdge != ComputedEdges.end()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1610</td>
    <td class="codeLine">    MachineBasicBlock *Succ = FoundEdge->second.BB;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1610</td>
    <td class="codeLine">    MachineBasicBlock *Succ = FoundEdge->second.BB;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1611</td>
    <td class="codeLine">    ComputedEdges.erase(FoundEdge);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1611</td>
    <td class="codeLine">    ComputedEdges.erase(FoundEdge);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1612</td>
    <td class="codeLine">    BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1612</td>
    <td class="codeLine">    BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1613</td>
    <td class="codeLine">    if (BB->isSuccessor(Succ) && (!BlockFilter || BlockFilter->count(Succ)) &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1613</td>
    <td class="codeLine">    if (BB->isSuccessor(Succ) && (!BlockFilter || BlockFilter->count(Succ)) &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1614</td>
    <td class="codeLine">        SuccChain != &Chain && Succ == *SuccChain->begin())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1614</td>
    <td class="codeLine">        SuccChain != &Chain && Succ == *SuccChain->begin())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1615</td>
    <td class="codeLine">      return FoundEdge->second;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1615</td>
    <td class="codeLine">      return FoundEdge->second;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1616</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1616</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1617</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1617</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1618</td>
    <td class="codeLine">  // if BB is part of a trellis, Use the trellis to determine the optimal</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1618</td>
    <td class="codeLine">  // if BB is part of a trellis, Use the trellis to determine the optimal</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1619</td>
    <td class="codeLine">  // fallthrough edges</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1619</td>
    <td class="codeLine">  // fallthrough edges</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1620</td>
    <td class="codeLine">  if (isTrellis(BB, Successors, Chain, BlockFilter))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1620</td>
    <td class="codeLine">  if (isTrellis(BB, Successors, Chain, BlockFilter))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1621</td>
    <td class="codeLine">    return getBestTrellisSuccessor(BB, Successors, AdjustedSumProb, Chain,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1621</td>
    <td class="codeLine">    return getBestTrellisSuccessor(BB, Successors, AdjustedSumProb, Chain,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1622</td>
    <td class="codeLine">                                   BlockFilter);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1622</td>
    <td class="codeLine">                                   BlockFilter);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1623</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1623</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1624</td>
    <td class="codeLine">  // For blocks with CFG violations, we may be able to lay them out anyway with</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1624</td>
    <td class="codeLine">  // For blocks with CFG violations, we may be able to lay them out anyway with</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1625</td>
    <td class="codeLine">  // tail-duplication. We keep this vector so we can perform the probability</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1625</td>
    <td class="codeLine">  // tail-duplication. We keep this vector so we can perform the probability</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1626</td>
    <td class="codeLine">  // calculations the minimum number of times.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1626</td>
    <td class="codeLine">  // calculations the minimum number of times.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1627</td>
    <td class="codeLine">  SmallVector<std::pair<BranchProbability, MachineBasicBlock *>, 4></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1627</td>
    <td class="codeLine">  SmallVector<std::pair<BranchProbability, MachineBasicBlock *>, 4></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1628</td>
    <td class="codeLine">      DupCandidates;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1628</td>
    <td class="codeLine">      DupCandidates;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1629</td>
    <td class="codeLine">  for (MachineBasicBlock *Succ : Successors) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1629</td>
    <td class="codeLine">  for (MachineBasicBlock *Succ : Successors) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1630</td>
    <td class="codeLine">    auto RealSuccProb = MBPI->getEdgeProbability(BB, Succ);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1630</td>
    <td class="codeLine">    auto RealSuccProb = MBPI->getEdgeProbability(BB, Succ);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1631</td>
    <td class="codeLine">    BranchProbability SuccProb =</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1631</td>
    <td class="codeLine">    BranchProbability SuccProb =</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1632</td>
    <td class="codeLine">        getAdjustedProbability(RealSuccProb, AdjustedSumProb);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1632</td>
    <td class="codeLine">        getAdjustedProbability(RealSuccProb, AdjustedSumProb);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1633</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1633</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1634</td>
    <td class="codeLine">    BlockChain &SuccChain = *BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1634</td>
    <td class="codeLine">    BlockChain &SuccChain = *BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1635</td>
    <td class="codeLine">    // Skip the edge \c BB->Succ if block \c Succ has a better layout</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1635</td>
    <td class="codeLine">    // Skip the edge \c BB->Succ if block \c Succ has a better layout</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1636</td>
    <td class="codeLine">    // predecessor that yields lower global cost.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1636</td>
    <td class="codeLine">    // predecessor that yields lower global cost.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1637</td>
    <td class="codeLine">    if (hasBetterLayoutPredecessor(BB, Succ, SuccChain, SuccProb, RealSuccProb,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1637</td>
    <td class="codeLine">    if (hasBetterLayoutPredecessor(BB, Succ, SuccChain, SuccProb, RealSuccProb,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1638</td>
    <td class="codeLine">                                   Chain, BlockFilter)) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1638</td>
    <td class="codeLine">                                   Chain, BlockFilter)) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1639</td>
    <td class="codeLine">      // If tail duplication would make Succ profitable, place it.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1639</td>
    <td class="codeLine">      // If tail duplication would make Succ profitable, place it.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1640</td>
    <td class="codeLine">      if (allowTailDupPlacement() && shouldTailDuplicate(Succ))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1640</td>
    <td class="codeLine">      if (allowTailDupPlacement() && shouldTailDuplicate(Succ))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1641</td>
    <td class="codeLine">        DupCandidates.emplace_back(SuccProb, Succ);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1641</td>
    <td class="codeLine">        DupCandidates.emplace_back(SuccProb, Succ);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1642</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1642</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1643</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1643</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1644</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1644</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1645</td>
    <td class="codeLine">    LLVM_DEBUG(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1645</td>
    <td class="codeLine">    LLVM_DEBUG(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1646</td>
    <td class="codeLine">        dbgs() << "    Candidate: " << getBlockName(Succ)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1646</td>
    <td class="codeLine">        dbgs() << "    Candidate: " << getBlockName(Succ)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1647</td>
    <td class="codeLine">               << ", probability: " << SuccProb</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1647</td>
    <td class="codeLine">               << ", probability: " << SuccProb</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1648</td>
    <td class="codeLine">               << (SuccChain.UnscheduledPredecessors != 0 ? " (CFG break)" : "")</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1648</td>
    <td class="codeLine">               << (SuccChain.UnscheduledPredecessors != 0 ? " (CFG break)" : "")</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1649</td>
    <td class="codeLine">               << "\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1649</td>
    <td class="codeLine">               << "\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1650</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1650</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1651</td>
    <td class="codeLine">    if (BestSucc.BB && BestProb >= SuccProb) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1651</td>
    <td class="codeLine">    if (BestSucc.BB && BestProb >= SuccProb) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1652</td>
    <td class="codeLine">      LLVM_DEBUG(dbgs() << "    Not the best candidate, continuing\n");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1652</td>
    <td class="codeLine">      LLVM_DEBUG(dbgs() << "    Not the best candidate, continuing\n");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1653</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1653</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1654</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1654</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1655</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1655</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1656</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "    Setting it as best candidate\n");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1656</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "    Setting it as best candidate\n");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1657</td>
    <td class="codeLine">    BestSucc.BB = Succ;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1657</td>
    <td class="codeLine">    BestSucc.BB = Succ;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1658</td>
    <td class="codeLine">    BestProb = SuccProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1658</td>
    <td class="codeLine">    BestProb = SuccProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1659</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1659</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1660</td>
    <td class="codeLine">  // Handle the tail duplication candidates in order of decreasing probability.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1660</td>
    <td class="codeLine">  // Handle the tail duplication candidates in order of decreasing probability.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1661</td>
    <td class="codeLine">  // Stop at the first one that is profitable. Also stop if they are less</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1661</td>
    <td class="codeLine">  // Stop at the first one that is profitable. Also stop if they are less</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1662</td>
    <td class="codeLine">  // profitable than BestSucc. Position is important because we preserve it and</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1662</td>
    <td class="codeLine">  // profitable than BestSucc. Position is important because we preserve it and</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1663</td>
    <td class="codeLine">  // prefer first best match. Here we aren't comparing in order, so we capture</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1663</td>
    <td class="codeLine">  // prefer first best match. Here we aren't comparing in order, so we capture</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1664</td>
    <td class="codeLine">  // the position instead.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1664</td>
    <td class="codeLine">  // the position instead.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1665</td>
    <td class="codeLine">  llvm::stable_sort(DupCandidates,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1665</td>
    <td class="codeLine">  llvm::stable_sort(DupCandidates,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1666</td>
    <td class="codeLine">                    [](std::tuple<BranchProbability, MachineBasicBlock *> L,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1666</td>
    <td class="codeLine">                    [](std::tuple<BranchProbability, MachineBasicBlock *> L,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1667</td>
    <td class="codeLine">                       std::tuple<BranchProbability, MachineBasicBlock *> R) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1667</td>
    <td class="codeLine">                       std::tuple<BranchProbability, MachineBasicBlock *> R) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1668</td>
    <td class="codeLine">                      return std::get<0>(L) > std::get<0>(R);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1668</td>
    <td class="codeLine">                      return std::get<0>(L) > std::get<0>(R);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1669</td>
    <td class="codeLine">                    });</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1669</td>
    <td class="codeLine">                    });</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1670</td>
    <td class="codeLine">  for (auto &Tup : DupCandidates) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1670</td>
    <td class="codeLine">  for (auto &Tup : DupCandidates) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1671</td>
    <td class="codeLine">    BranchProbability DupProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1671</td>
    <td class="codeLine">    BranchProbability DupProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1672</td>
    <td class="codeLine">    MachineBasicBlock *Succ;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1672</td>
    <td class="codeLine">    MachineBasicBlock *Succ;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1673</td>
    <td class="codeLine">    std::tie(DupProb, Succ) = Tup;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1673</td>
    <td class="codeLine">    std::tie(DupProb, Succ) = Tup;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1674</td>
    <td class="codeLine">    if (DupProb < BestProb)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1674</td>
    <td class="codeLine">    if (DupProb < BestProb)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1675</td>
    <td class="codeLine">      break;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1675</td>
    <td class="codeLine">      break;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1676</td>
    <td class="codeLine">    if (canTailDuplicateUnplacedPreds(BB, Succ, Chain, BlockFilter)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1676</td>
    <td class="codeLine">    if (canTailDuplicateUnplacedPreds(BB, Succ, Chain, BlockFilter)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1677</td>
    <td class="codeLine">        && (isProfitableToTailDup(BB, Succ, BestProb, Chain, BlockFilter))) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1677</td>
    <td class="codeLine">        && (isProfitableToTailDup(BB, Succ, BestProb, Chain, BlockFilter))) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1678</td>
    <td class="codeLine">      LLVM_DEBUG(dbgs() << "    Candidate: " << getBlockName(Succ)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1678</td>
    <td class="codeLine">      LLVM_DEBUG(dbgs() << "    Candidate: " << getBlockName(Succ)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1679</td>
    <td class="codeLine">                        << ", probability: " << DupProb</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1679</td>
    <td class="codeLine">                        << ", probability: " << DupProb</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1680</td>
    <td class="codeLine">                        << " (Tail Duplicate)\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1680</td>
    <td class="codeLine">                        << " (Tail Duplicate)\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1681</td>
    <td class="codeLine">      BestSucc.BB = Succ;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1681</td>
    <td class="codeLine">      BestSucc.BB = Succ;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1682</td>
    <td class="codeLine">      BestSucc.ShouldTailDup = true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1682</td>
    <td class="codeLine">      BestSucc.ShouldTailDup = true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1683</td>
    <td class="codeLine">      break;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1683</td>
    <td class="codeLine">      break;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1684</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1684</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1685</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1685</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1686</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1686</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1687</td>
    <td class="codeLine">  if (BestSucc.BB)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1687</td>
    <td class="codeLine">  if (BestSucc.BB)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1688</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "    Selected: " << getBlockName(BestSucc.BB) << "\n");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1688</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "    Selected: " << getBlockName(BestSucc.BB) << "\n");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1689</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1689</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1690</td>
    <td class="codeLine">  return BestSucc;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1690</td>
    <td class="codeLine">  return BestSucc;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1691</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1691</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1692</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1692</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1693</td>
    <td class="codeLine">/// Select the best block from a worklist.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1693</td>
    <td class="codeLine">/// Select the best block from a worklist.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1694</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1694</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1695</td>
    <td class="codeLine">/// This looks through the provided worklist as a list of candidate basic</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1695</td>
    <td class="codeLine">/// This looks through the provided worklist as a list of candidate basic</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1696</td>
    <td class="codeLine">/// blocks and select the most profitable one to place. The definition of</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1696</td>
    <td class="codeLine">/// blocks and select the most profitable one to place. The definition of</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1697</td>
    <td class="codeLine">/// profitable only really makes sense in the context of a loop. This returns</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1697</td>
    <td class="codeLine">/// profitable only really makes sense in the context of a loop. This returns</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1698</td>
    <td class="codeLine">/// the most frequently visited block in the worklist, which in the case of</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1698</td>
    <td class="codeLine">/// the most frequently visited block in the worklist, which in the case of</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1699</td>
    <td class="codeLine">/// a loop, is the one most desirable to be physically close to the rest of the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1699</td>
    <td class="codeLine">/// a loop, is the one most desirable to be physically close to the rest of the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1700</td>
    <td class="codeLine">/// loop body in order to improve i-cache behavior.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1700</td>
    <td class="codeLine">/// loop body in order to improve i-cache behavior.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1701</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1701</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1702</td>
    <td class="codeLine">/// \returns The best block found, or null if none are viable.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1702</td>
    <td class="codeLine">/// \returns The best block found, or null if none are viable.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1703</td>
    <td class="codeLine">MachineBasicBlock *MachineBlockPlacement::selectBestCandidateBlock(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1703</td>
    <td class="codeLine">MachineBasicBlock *MachineBlockPlacement::selectBestCandidateBlock(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1704</td>
    <td class="codeLine">    const BlockChain &Chain, SmallVectorImpl<MachineBasicBlock *> &WorkList) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1704</td>
    <td class="codeLine">    const BlockChain &Chain, SmallVectorImpl<MachineBasicBlock *> &WorkList) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1705</td>
    <td class="codeLine">  // Once we need to walk the worklist looking for a candidate, cleanup the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1705</td>
    <td class="codeLine">  // Once we need to walk the worklist looking for a candidate, cleanup the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1706</td>
    <td class="codeLine">  // worklist of already placed entries.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1706</td>
    <td class="codeLine">  // worklist of already placed entries.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1707</td>
    <td class="codeLine">  // FIXME: If this shows up on profiles, it could be folded (at the cost of</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1707</td>
    <td class="codeLine">  // FIXME: If this shows up on profiles, it could be folded (at the cost of</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1708</td>
    <td class="codeLine">  // some code complexity) into the loop below.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1708</td>
    <td class="codeLine">  // some code complexity) into the loop below.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1709</td>
    <td class="codeLine">  llvm::erase_if(WorkList, [&](MachineBasicBlock *BB) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1709</td>
    <td class="codeLine">  llvm::erase_if(WorkList, [&](MachineBasicBlock *BB) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1710</td>
    <td class="codeLine">    return BlockToChain.lookup(BB) == &Chain;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1710</td>
    <td class="codeLine">    return BlockToChain.lookup(BB) == &Chain;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1711</td>
    <td class="codeLine">  });</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1711</td>
    <td class="codeLine">  });</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1712</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1712</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1713</td>
    <td class="codeLine">  if (WorkList.empty())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1713</td>
    <td class="codeLine">  if (WorkList.empty())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1714</td>
    <td class="codeLine">    return nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1714</td>
    <td class="codeLine">    return nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1715</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1715</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1716</td>
    <td class="codeLine">  bool IsEHPad = WorkList[0]->isEHPad();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1716</td>
    <td class="codeLine">  bool IsEHPad = WorkList[0]->isEHPad();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1717</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1717</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1718</td>
    <td class="codeLine">  MachineBasicBlock *BestBlock = nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1718</td>
    <td class="codeLine">  MachineBasicBlock *BestBlock = nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1719</td>
    <td class="codeLine">  BlockFrequency BestFreq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1719</td>
    <td class="codeLine">  BlockFrequency BestFreq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1720</td>
    <td class="codeLine">  for (MachineBasicBlock *MBB : WorkList) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1720</td>
    <td class="codeLine">  for (MachineBasicBlock *MBB : WorkList) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1721</td>
    <td class="codeLine">    assert(MBB->isEHPad() == IsEHPad &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1721</td>
    <td class="codeLine">    assert(MBB->isEHPad() == IsEHPad &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1722</td>
    <td class="codeLine">           "EHPad mismatch between block and work list.");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1722</td>
    <td class="codeLine">           "EHPad mismatch between block and work list.");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1723</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1723</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1724</td>
    <td class="codeLine">    BlockChain &SuccChain = *BlockToChain[MBB];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1724</td>
    <td class="codeLine">    BlockChain &SuccChain = *BlockToChain[MBB];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1725</td>
    <td class="codeLine">    if (&SuccChain == &Chain)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1725</td>
    <td class="codeLine">    if (&SuccChain == &Chain)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1726</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1726</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1727</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1727</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1728</td>
    <td class="codeLine">    assert(SuccChain.UnscheduledPredecessors == 0 &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1728</td>
    <td class="codeLine">    assert(SuccChain.UnscheduledPredecessors == 0 &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1729</td>
    <td class="codeLine">           "Found CFG-violating block");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1729</td>
    <td class="codeLine">           "Found CFG-violating block");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1730</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1730</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1731</td>
    <td class="codeLine">    BlockFrequency CandidateFreq = MBFI->getBlockFreq(MBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1731</td>
    <td class="codeLine">    BlockFrequency CandidateFreq = MBFI->getBlockFreq(MBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1732</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "    " << getBlockName(MBB) << " -> ";</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1732</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "    " << getBlockName(MBB) << " -> ";</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1733</td>
    <td class="codeLine">               MBFI->printBlockFreq(dbgs(), CandidateFreq) << " (freq)\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1733</td>
    <td class="codeLine">               MBFI->printBlockFreq(dbgs(), CandidateFreq) << " (freq)\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1734</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1734</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1735</td>
    <td class="codeLine">    // For ehpad, we layout the least probable first as to avoid jumping back</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1735</td>
    <td class="codeLine">    // For ehpad, we layout the least probable first as to avoid jumping back</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1736</td>
    <td class="codeLine">    // from least probable landingpads to more probable ones.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1736</td>
    <td class="codeLine">    // from least probable landingpads to more probable ones.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1737</td>
    <td class="codeLine">    //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1737</td>
    <td class="codeLine">    //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1738</td>
    <td class="codeLine">    // FIXME: Using probability is probably (!) not the best way to achieve</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1738</td>
    <td class="codeLine">    // FIXME: Using probability is probably (!) not the best way to achieve</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1739</td>
    <td class="codeLine">    // this. We should probably have a more principled approach to layout</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1739</td>
    <td class="codeLine">    // this. We should probably have a more principled approach to layout</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1740</td>
    <td class="codeLine">    // cleanup code.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1740</td>
    <td class="codeLine">    // cleanup code.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1741</td>
    <td class="codeLine">    //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1741</td>
    <td class="codeLine">    //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1742</td>
    <td class="codeLine">    // The goal is to get:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1742</td>
    <td class="codeLine">    // The goal is to get:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1743</td>
    <td class="codeLine">    //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1743</td>
    <td class="codeLine">    //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1744</td>
    <td class="codeLine">    //                 +--------------------------+</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1744</td>
    <td class="codeLine">    //                 +--------------------------+</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1745</td>
    <td class="codeLine">    //                 |                          V</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1745</td>
    <td class="codeLine">    //                 |                          V</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1746</td>
    <td class="codeLine">    // InnerLp -> InnerCleanup    OuterLp -> OuterCleanup -> Resume</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1746</td>
    <td class="codeLine">    // InnerLp -> InnerCleanup    OuterLp -> OuterCleanup -> Resume</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1747</td>
    <td class="codeLine">    //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1747</td>
    <td class="codeLine">    //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1748</td>
    <td class="codeLine">    // Rather than:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1748</td>
    <td class="codeLine">    // Rather than:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1749</td>
    <td class="codeLine">    //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1749</td>
    <td class="codeLine">    //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1750</td>
    <td class="codeLine">    //                 +-------------------------------------+</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1750</td>
    <td class="codeLine">    //                 +-------------------------------------+</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1751</td>
    <td class="codeLine">    //                 V                                     |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1751</td>
    <td class="codeLine">    //                 V                                     |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1752</td>
    <td class="codeLine">    // OuterLp -> OuterCleanup -> Resume     InnerLp -> InnerCleanup</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1752</td>
    <td class="codeLine">    // OuterLp -> OuterCleanup -> Resume     InnerLp -> InnerCleanup</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1753</td>
    <td class="codeLine">    if (BestBlock && (IsEHPad ^ (BestFreq >= CandidateFreq)))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1753</td>
    <td class="codeLine">    if (BestBlock && (IsEHPad ^ (BestFreq >= CandidateFreq)))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1754</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1754</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1755</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1755</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1756</td>
    <td class="codeLine">    BestBlock = MBB;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1756</td>
    <td class="codeLine">    BestBlock = MBB;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1757</td>
    <td class="codeLine">    BestFreq = CandidateFreq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1757</td>
    <td class="codeLine">    BestFreq = CandidateFreq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1758</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1758</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1759</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1759</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1760</td>
    <td class="codeLine">  return BestBlock;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1760</td>
    <td class="codeLine">  return BestBlock;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1761</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1761</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1762</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1762</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1763</td>
    <td class="codeLine">/// Retrieve the first unplaced basic block.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1763</td>
    <td class="codeLine">/// Retrieve the first unplaced basic block.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1764</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1764</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1765</td>
    <td class="codeLine">/// This routine is called when we are unable to use the CFG to walk through</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1765</td>
    <td class="codeLine">/// This routine is called when we are unable to use the CFG to walk through</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1766</td>
    <td class="codeLine">/// all of the basic blocks and form a chain due to unnatural loops in the CFG.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1766</td>
    <td class="codeLine">/// all of the basic blocks and form a chain due to unnatural loops in the CFG.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1767</td>
    <td class="codeLine">/// We walk through the function's blocks in order, starting from the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1767</td>
    <td class="codeLine">/// We walk through the function's blocks in order, starting from the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1768</td>
    <td class="codeLine">/// LastUnplacedBlockIt. We update this iterator on each call to avoid</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1768</td>
    <td class="codeLine">/// LastUnplacedBlockIt. We update this iterator on each call to avoid</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1769</td>
    <td class="codeLine">/// re-scanning the entire sequence on repeated calls to this routine.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1769</td>
    <td class="codeLine">/// re-scanning the entire sequence on repeated calls to this routine.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1770</td>
    <td class="codeLine">MachineBasicBlock *MachineBlockPlacement::getFirstUnplacedBlock(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1770</td>
    <td class="codeLine">MachineBasicBlock *MachineBlockPlacement::getFirstUnplacedBlock(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1771</td>
    <td class="codeLine">    const BlockChain &PlacedChain,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1771</td>
    <td class="codeLine">    const BlockChain &PlacedChain,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1772</td>
    <td class="codeLine">    MachineFunction::iterator &PrevUnplacedBlockIt,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1772</td>
    <td class="codeLine">    MachineFunction::iterator &PrevUnplacedBlockIt,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1773</td>
    <td class="codeLine">    const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1773</td>
    <td class="codeLine">    const BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1774</td>
    <td class="codeLine">  for (MachineFunction::iterator I = PrevUnplacedBlockIt, E = F->end(); I != E;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1774</td>
    <td class="codeLine">  for (MachineFunction::iterator I = PrevUnplacedBlockIt, E = F->end(); I != E;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1775</td>
    <td class="codeLine">       ++I) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1775</td>
    <td class="codeLine">       ++I) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1776</td>
    <td class="codeLine">    if (BlockFilter && !BlockFilter->count(&*I))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1776</td>
    <td class="codeLine">    if (BlockFilter && !BlockFilter->count(&*I))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1777</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1777</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1778</td>
    <td class="codeLine">    if (BlockToChain[&*I] != &PlacedChain) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1778</td>
    <td class="codeLine">    if (BlockToChain[&*I] != &PlacedChain) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1779</td>
    <td class="codeLine">      PrevUnplacedBlockIt = I;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1779</td>
    <td class="codeLine">      PrevUnplacedBlockIt = I;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1780</td>
    <td class="codeLine">      // Now select the head of the chain to which the unplaced block belongs</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1780</td>
    <td class="codeLine">      // Now select the head of the chain to which the unplaced block belongs</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1781</td>
    <td class="codeLine">      // as the block to place. This will force the entire chain to be placed,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1781</td>
    <td class="codeLine">      // as the block to place. This will force the entire chain to be placed,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1782</td>
    <td class="codeLine">      // and satisfies the requirements of merging chains.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1782</td>
    <td class="codeLine">      // and satisfies the requirements of merging chains.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1783</td>
    <td class="codeLine">      return *BlockToChain[&*I]->begin();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1783</td>
    <td class="codeLine">      return *BlockToChain[&*I]->begin();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1784</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1784</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1785</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1785</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1786</td>
    <td class="codeLine">  return nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1786</td>
    <td class="codeLine">  return nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1787</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1787</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1788</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1788</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1789</td>
    <td class="codeLine">void MachineBlockPlacement::fillWorkLists(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1789</td>
    <td class="codeLine">void MachineBlockPlacement::fillWorkLists(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1790</td>
    <td class="codeLine">    const MachineBasicBlock *MBB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1790</td>
    <td class="codeLine">    const MachineBasicBlock *MBB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1791</td>
    <td class="codeLine">    SmallPtrSetImpl<BlockChain *> &UpdatedPreds,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1791</td>
    <td class="codeLine">    SmallPtrSetImpl<BlockChain *> &UpdatedPreds,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1792</td>
    <td class="codeLine">    const BlockFilterSet *BlockFilter = nullptr) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1792</td>
    <td class="codeLine">    const BlockFilterSet *BlockFilter = nullptr) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1793</td>
    <td class="codeLine">  BlockChain &Chain = *BlockToChain[MBB];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1793</td>
    <td class="codeLine">  BlockChain &Chain = *BlockToChain[MBB];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1794</td>
    <td class="codeLine">  if (!UpdatedPreds.insert(&Chain).second)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1794</td>
    <td class="codeLine">  if (!UpdatedPreds.insert(&Chain).second)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1795</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1795</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1796</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1796</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1797</td>
    <td class="codeLine">  assert(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1797</td>
    <td class="codeLine">  assert(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1798</td>
    <td class="codeLine">      Chain.UnscheduledPredecessors == 0 &&</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1798</td>
    <td class="codeLine">      Chain.UnscheduledPredecessors == 0 &&</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1799</td>
    <td class="codeLine">      "Attempting to place block with unscheduled predecessors in worklist.");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1799</td>
    <td class="codeLine">      "Attempting to place block with unscheduled predecessors in worklist.");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1800</td>
    <td class="codeLine">  for (MachineBasicBlock *ChainBB : Chain) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1800</td>
    <td class="codeLine">  for (MachineBasicBlock *ChainBB : Chain) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1801</td>
    <td class="codeLine">    assert(BlockToChain[ChainBB] == &Chain &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1801</td>
    <td class="codeLine">    assert(BlockToChain[ChainBB] == &Chain &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1802</td>
    <td class="codeLine">           "Block in chain doesn't match BlockToChain map.");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1802</td>
    <td class="codeLine">           "Block in chain doesn't match BlockToChain map.");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1803</td>
    <td class="codeLine">    for (MachineBasicBlock *Pred : ChainBB->predecessors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1803</td>
    <td class="codeLine">    for (MachineBasicBlock *Pred : ChainBB->predecessors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1804</td>
    <td class="codeLine">      if (BlockFilter && !BlockFilter->count(Pred))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1804</td>
    <td class="codeLine">      if (BlockFilter && !BlockFilter->count(Pred))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1805</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1805</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1806</td>
    <td class="codeLine">      if (BlockToChain[Pred] == &Chain)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1806</td>
    <td class="codeLine">      if (BlockToChain[Pred] == &Chain)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1807</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1807</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1808</td>
    <td class="codeLine">      ++Chain.UnscheduledPredecessors;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1808</td>
    <td class="codeLine">      ++Chain.UnscheduledPredecessors;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1809</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1809</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1810</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1810</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1811</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1811</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1812</td>
    <td class="codeLine">  if (Chain.UnscheduledPredecessors != 0)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1812</td>
    <td class="codeLine">  if (Chain.UnscheduledPredecessors != 0)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1813</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1813</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1814</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1814</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1815</td>
    <td class="codeLine">  MachineBasicBlock *BB = *Chain.begin();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1815</td>
    <td class="codeLine">  MachineBasicBlock *BB = *Chain.begin();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1816</td>
    <td class="codeLine">  if (BB->isEHPad())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1816</td>
    <td class="codeLine">  if (BB->isEHPad())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1817</td>
    <td class="codeLine">    EHPadWorkList.push_back(BB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1817</td>
    <td class="codeLine">    EHPadWorkList.push_back(BB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1818</td>
    <td class="codeLine">  else</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1818</td>
    <td class="codeLine">  else</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1819</td>
    <td class="codeLine">    BlockWorkList.push_back(BB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1819</td>
    <td class="codeLine">    BlockWorkList.push_back(BB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1820</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1820</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1821</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1821</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1822</td>
    <td class="codeLine">void MachineBlockPlacement::buildChain(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1822</td>
    <td class="codeLine">void MachineBlockPlacement::buildChain(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1823</td>
    <td class="codeLine">    const MachineBasicBlock *HeadBB, BlockChain &Chain,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1823</td>
    <td class="codeLine">    const MachineBasicBlock *HeadBB, BlockChain &Chain,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1824</td>
    <td class="codeLine">    BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1824</td>
    <td class="codeLine">    BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1825</td>
    <td class="codeLine">  assert(HeadBB && "BB must not be null.\n");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1825</td>
    <td class="codeLine">  assert(HeadBB && "BB must not be null.\n");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1826</td>
    <td class="codeLine">  assert(BlockToChain[HeadBB] == &Chain && "BlockToChainMap mis-match.\n");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1826</td>
    <td class="codeLine">  assert(BlockToChain[HeadBB] == &Chain && "BlockToChainMap mis-match.\n");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1827</td>
    <td class="codeLine">  MachineFunction::iterator PrevUnplacedBlockIt = F->begin();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1827</td>
    <td class="codeLine">  MachineFunction::iterator PrevUnplacedBlockIt = F->begin();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1828</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1828</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1829</td>
    <td class="codeLine">  const MachineBasicBlock *LoopHeaderBB = HeadBB;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1829</td>
    <td class="codeLine">  const MachineBasicBlock *LoopHeaderBB = HeadBB;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1830</td>
    <td class="codeLine">  markChainSuccessors(Chain, LoopHeaderBB, BlockFilter);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1830</td>
    <td class="codeLine">  markChainSuccessors(Chain, LoopHeaderBB, BlockFilter);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1831</td>
    <td class="codeLine">  MachineBasicBlock *BB = *std::prev(Chain.end());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1831</td>
    <td class="codeLine">  MachineBasicBlock *BB = *std::prev(Chain.end());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1832</td>
    <td class="codeLine">  while (true) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1832</td>
    <td class="codeLine">  while (true) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1833</td>
    <td class="codeLine">    assert(BB && "null block found at end of chain in loop.");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1833</td>
    <td class="codeLine">    assert(BB && "null block found at end of chain in loop.");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1834</td>
    <td class="codeLine">    assert(BlockToChain[BB] == &Chain && "BlockToChainMap mis-match in loop.");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1834</td>
    <td class="codeLine">    assert(BlockToChain[BB] == &Chain && "BlockToChainMap mis-match in loop.");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1835</td>
    <td class="codeLine">    assert(*std::prev(Chain.end()) == BB && "BB Not found at end of chain.");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1835</td>
    <td class="codeLine">    assert(*std::prev(Chain.end()) == BB && "BB Not found at end of chain.");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1836</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1836</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1837</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1837</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1838</td>
    <td class="codeLine">    // Look for the best viable successor if there is one to place immediately</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1838</td>
    <td class="codeLine">    // Look for the best viable successor if there is one to place immediately</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1839</td>
    <td class="codeLine">    // after this block.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1839</td>
    <td class="codeLine">    // after this block.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1840</td>
    <td class="codeLine">    auto Result = selectBestSuccessor(BB, Chain, BlockFilter);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1840</td>
    <td class="codeLine">    auto Result = selectBestSuccessor(BB, Chain, BlockFilter);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1841</td>
    <td class="codeLine">    MachineBasicBlock* BestSucc = Result.BB;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1841</td>
    <td class="codeLine">    MachineBasicBlock* BestSucc = Result.BB;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1842</td>
    <td class="codeLine">    bool ShouldTailDup = Result.ShouldTailDup;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1842</td>
    <td class="codeLine">    bool ShouldTailDup = Result.ShouldTailDup;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1843</td>
    <td class="codeLine">    if (allowTailDupPlacement())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1843</td>
    <td class="codeLine">    if (allowTailDupPlacement())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1844</td>
    <td class="codeLine">      ShouldTailDup |= (BestSucc && canTailDuplicateUnplacedPreds(BB, BestSucc,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1844</td>
    <td class="codeLine">      ShouldTailDup |= (BestSucc && canTailDuplicateUnplacedPreds(BB, BestSucc,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1845</td>
    <td class="codeLine">                                                                  Chain,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1845</td>
    <td class="codeLine">                                                                  Chain,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1846</td>
    <td class="codeLine">                                                                  BlockFilter));</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1846</td>
    <td class="codeLine">                                                                  BlockFilter));</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1847</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1847</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1848</td>
    <td class="codeLine">    // If an immediate successor isn't available, look for the best viable</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1848</td>
    <td class="codeLine">    // If an immediate successor isn't available, look for the best viable</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1849</td>
    <td class="codeLine">    // block among those we've identified as not violating the loop's CFG at</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1849</td>
    <td class="codeLine">    // block among those we've identified as not violating the loop's CFG at</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1850</td>
    <td class="codeLine">    // this point. This won't be a fallthrough, but it will increase locality.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1850</td>
    <td class="codeLine">    // this point. This won't be a fallthrough, but it will increase locality.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1851</td>
    <td class="codeLine">    if (!BestSucc)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1851</td>
    <td class="codeLine">    if (!BestSucc)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1852</td>
    <td class="codeLine">      BestSucc = selectBestCandidateBlock(Chain, BlockWorkList);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1852</td>
    <td class="codeLine">      BestSucc = selectBestCandidateBlock(Chain, BlockWorkList);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1853</td>
    <td class="codeLine">    if (!BestSucc)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1853</td>
    <td class="codeLine">    if (!BestSucc)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1854</td>
    <td class="codeLine">      BestSucc = selectBestCandidateBlock(Chain, EHPadWorkList);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1854</td>
    <td class="codeLine">      BestSucc = selectBestCandidateBlock(Chain, EHPadWorkList);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1855</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1855</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1856</td>
    <td class="codeLine">    if (!BestSucc) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1856</td>
    <td class="codeLine">    if (!BestSucc) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1857</td>
    <td class="codeLine">      BestSucc = getFirstUnplacedBlock(Chain, PrevUnplacedBlockIt, BlockFilter);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1857</td>
    <td class="codeLine">      BestSucc = getFirstUnplacedBlock(Chain, PrevUnplacedBlockIt, BlockFilter);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1858</td>
    <td class="codeLine">      if (!BestSucc)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1858</td>
    <td class="codeLine">      if (!BestSucc)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1859</td>
    <td class="codeLine">        break;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1859</td>
    <td class="codeLine">        break;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1860</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1860</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1861</td>
    <td class="codeLine">      LLVM_DEBUG(dbgs() << "Unnatural loop CFG detected, forcibly merging the "</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1861</td>
    <td class="codeLine">      LLVM_DEBUG(dbgs() << "Unnatural loop CFG detected, forcibly merging the "</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1862</td>
    <td class="codeLine">                           "layout successor until the CFG reduces\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1862</td>
    <td class="codeLine">                           "layout successor until the CFG reduces\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1863</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1863</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1864</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1864</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1865</td>
    <td class="codeLine">    // Placement may have changed tail duplication opportunities.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1865</td>
    <td class="codeLine">    // Placement may have changed tail duplication opportunities.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1866</td>
    <td class="codeLine">    // Check for that now.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1866</td>
    <td class="codeLine">    // Check for that now.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1867</td>
    <td class="codeLine">    if (allowTailDupPlacement() && BestSucc && ShouldTailDup) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1867</td>
    <td class="codeLine">    if (allowTailDupPlacement() && BestSucc && ShouldTailDup) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1868</td>
    <td class="codeLine">      repeatedlyTailDuplicateBlock(BestSucc, BB, LoopHeaderBB, Chain,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1868</td>
    <td class="codeLine">      repeatedlyTailDuplicateBlock(BestSucc, BB, LoopHeaderBB, Chain,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1869</td>
    <td class="codeLine">                                       BlockFilter, PrevUnplacedBlockIt);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1869</td>
    <td class="codeLine">                                       BlockFilter, PrevUnplacedBlockIt);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1870</td>
    <td class="codeLine">      // If the chosen successor was duplicated into BB, don't bother laying</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1870</td>
    <td class="codeLine">      // If the chosen successor was duplicated into BB, don't bother laying</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1871</td>
    <td class="codeLine">      // it out, just go round the loop again with BB as the chain end.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1871</td>
    <td class="codeLine">      // it out, just go round the loop again with BB as the chain end.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1872</td>
    <td class="codeLine">      if (!BB->isSuccessor(BestSucc))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1872</td>
    <td class="codeLine">      if (!BB->isSuccessor(BestSucc))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1873</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1873</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1874</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1874</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1875</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1875</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1876</td>
    <td class="codeLine">    // Place this block, updating the datastructures to reflect its placement.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1876</td>
    <td class="codeLine">    // Place this block, updating the datastructures to reflect its placement.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1877</td>
    <td class="codeLine">    BlockChain &SuccChain = *BlockToChain[BestSucc];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1877</td>
    <td class="codeLine">    BlockChain &SuccChain = *BlockToChain[BestSucc];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1878</td>
    <td class="codeLine">    // Zero out UnscheduledPredecessors for the successor we're about to merge in case</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1878</td>
    <td class="codeLine">    // Zero out UnscheduledPredecessors for the successor we're about to merge in case</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1879</td>
    <td class="codeLine">    // we selected a successor that didn't fit naturally into the CFG.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1879</td>
    <td class="codeLine">    // we selected a successor that didn't fit naturally into the CFG.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1880</td>
    <td class="codeLine">    SuccChain.UnscheduledPredecessors = 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1880</td>
    <td class="codeLine">    SuccChain.UnscheduledPredecessors = 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1881</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "Merging from " << getBlockName(BB) << " to "</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1881</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "Merging from " << getBlockName(BB) << " to "</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1882</td>
    <td class="codeLine">                      << getBlockName(BestSucc) << "\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1882</td>
    <td class="codeLine">                      << getBlockName(BestSucc) << "\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1883</td>
    <td class="codeLine">    markChainSuccessors(SuccChain, LoopHeaderBB, BlockFilter);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1883</td>
    <td class="codeLine">    markChainSuccessors(SuccChain, LoopHeaderBB, BlockFilter);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1884</td>
    <td class="codeLine">    Chain.merge(BestSucc, &SuccChain);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1884</td>
    <td class="codeLine">    Chain.merge(BestSucc, &SuccChain);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1885</td>
    <td class="codeLine">    BB = *std::prev(Chain.end());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1885</td>
    <td class="codeLine">    BB = *std::prev(Chain.end());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1886</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1886</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1887</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1887</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1888</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "Finished forming chain for header block "</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1888</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "Finished forming chain for header block "</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1889</td>
    <td class="codeLine">                    << getBlockName(*Chain.begin()) << "\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1889</td>
    <td class="codeLine">                    << getBlockName(*Chain.begin()) << "\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1890</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1890</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1891</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1891</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1892</td>
    <td class="codeLine">// If bottom of block BB has only one successor OldTop, in most cases it is</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1892</td>
    <td class="codeLine">// If bottom of block BB has only one successor OldTop, in most cases it is</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1893</td>
    <td class="codeLine">// profitable to move it before OldTop, except the following case:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1893</td>
    <td class="codeLine">// profitable to move it before OldTop, except the following case:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1894</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1894</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1895</td>
    <td class="codeLine">//     -->OldTop<-</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1895</td>
    <td class="codeLine">//     -->OldTop<-</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1896</td>
    <td class="codeLine">//     |    .    |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1896</td>
    <td class="codeLine">//     |    .    |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1897</td>
    <td class="codeLine">//     |    .    |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1897</td>
    <td class="codeLine">//     |    .    |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1898</td>
    <td class="codeLine">//     |    .    |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1898</td>
    <td class="codeLine">//     |    .    |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1899</td>
    <td class="codeLine">//     ---Pred   |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1899</td>
    <td class="codeLine">//     ---Pred   |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1900</td>
    <td class="codeLine">//          |    |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1900</td>
    <td class="codeLine">//          |    |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1901</td>
    <td class="codeLine">//         BB-----</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1901</td>
    <td class="codeLine">//         BB-----</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1902</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1902</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1903</td>
    <td class="codeLine">// If BB is moved before OldTop, Pred needs a taken branch to BB, and it can't</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1903</td>
    <td class="codeLine">// If BB is moved before OldTop, Pred needs a taken branch to BB, and it can't</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1904</td>
    <td class="codeLine">// layout the other successor below it, so it can't reduce taken branch.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1904</td>
    <td class="codeLine">// layout the other successor below it, so it can't reduce taken branch.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1905</td>
    <td class="codeLine">// In this case we keep its original layout.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1905</td>
    <td class="codeLine">// In this case we keep its original layout.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1906</td>
    <td class="codeLine">bool</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1906</td>
    <td class="codeLine">bool</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1907</td>
    <td class="codeLine">MachineBlockPlacement::canMoveBottomBlockToTop(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1907</td>
    <td class="codeLine">MachineBlockPlacement::canMoveBottomBlockToTop(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1908</td>
    <td class="codeLine">    const MachineBasicBlock *BottomBlock,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1908</td>
    <td class="codeLine">    const MachineBasicBlock *BottomBlock,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1909</td>
    <td class="codeLine">    const MachineBasicBlock *OldTop) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1909</td>
    <td class="codeLine">    const MachineBasicBlock *OldTop) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1910</td>
    <td class="codeLine">  if (BottomBlock->pred_size() != 1)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1910</td>
    <td class="codeLine">  if (BottomBlock->pred_size() != 1)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1911</td>
    <td class="codeLine">    return true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1911</td>
    <td class="codeLine">    return true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1912</td>
    <td class="codeLine">  MachineBasicBlock *Pred = *BottomBlock->pred_begin();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1912</td>
    <td class="codeLine">  MachineBasicBlock *Pred = *BottomBlock->pred_begin();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1913</td>
    <td class="codeLine">  if (Pred->succ_size() != 2)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1913</td>
    <td class="codeLine">  if (Pred->succ_size() != 2)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1914</td>
    <td class="codeLine">    return true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1914</td>
    <td class="codeLine">    return true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1915</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1915</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1916</td>
    <td class="codeLine">  MachineBasicBlock *OtherBB = *Pred->succ_begin();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1916</td>
    <td class="codeLine">  MachineBasicBlock *OtherBB = *Pred->succ_begin();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1917</td>
    <td class="codeLine">  if (OtherBB == BottomBlock)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1917</td>
    <td class="codeLine">  if (OtherBB == BottomBlock)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1918</td>
    <td class="codeLine">    OtherBB = *Pred->succ_rbegin();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1918</td>
    <td class="codeLine">    OtherBB = *Pred->succ_rbegin();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1919</td>
    <td class="codeLine">  if (OtherBB == OldTop)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1919</td>
    <td class="codeLine">  if (OtherBB == OldTop)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1920</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1920</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1921</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1921</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1922</td>
    <td class="codeLine">  return true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1922</td>
    <td class="codeLine">  return true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1923</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1923</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1924</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1924</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1925</td>
    <td class="codeLine">// Find out the possible fall through frequence to the top of a loop.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1925</td>
    <td class="codeLine">// Find out the possible fall through frequence to the top of a loop.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1926</td>
    <td class="codeLine">BlockFrequency</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1926</td>
    <td class="codeLine">BlockFrequency</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1927</td>
    <td class="codeLine">MachineBlockPlacement::TopFallThroughFreq(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1927</td>
    <td class="codeLine">MachineBlockPlacement::TopFallThroughFreq(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1928</td>
    <td class="codeLine">    const MachineBasicBlock *Top,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1928</td>
    <td class="codeLine">    const MachineBasicBlock *Top,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1929</td>
    <td class="codeLine">    const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1929</td>
    <td class="codeLine">    const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1930</td>
    <td class="codeLine">  BlockFrequency MaxFreq = 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1930</td>
    <td class="codeLine">  BlockFrequency MaxFreq = 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1931</td>
    <td class="codeLine">  for (MachineBasicBlock *Pred : Top->predecessors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1931</td>
    <td class="codeLine">  for (MachineBasicBlock *Pred : Top->predecessors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1932</td>
    <td class="codeLine">    BlockChain *PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1932</td>
    <td class="codeLine">    BlockChain *PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1933</td>
    <td class="codeLine">    if (!LoopBlockSet.count(Pred) &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1933</td>
    <td class="codeLine">    if (!LoopBlockSet.count(Pred) &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1934</td>
    <td class="codeLine">        (!PredChain || Pred == *std::prev(PredChain->end()))) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1934</td>
    <td class="codeLine">        (!PredChain || Pred == *std::prev(PredChain->end()))) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1935</td>
    <td class="codeLine">      // Found a Pred block can be placed before Top.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1935</td>
    <td class="codeLine">      // Found a Pred block can be placed before Top.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1936</td>
    <td class="codeLine">      // Check if Top is the best successor of Pred.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1936</td>
    <td class="codeLine">      // Check if Top is the best successor of Pred.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1937</td>
    <td class="codeLine">      auto TopProb = MBPI->getEdgeProbability(Pred, Top);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1937</td>
    <td class="codeLine">      auto TopProb = MBPI->getEdgeProbability(Pred, Top);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1938</td>
    <td class="codeLine">      bool TopOK = true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1938</td>
    <td class="codeLine">      bool TopOK = true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1939</td>
    <td class="codeLine">      for (MachineBasicBlock *Succ : Pred->successors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1939</td>
    <td class="codeLine">      for (MachineBasicBlock *Succ : Pred->successors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1940</td>
    <td class="codeLine">        auto SuccProb = MBPI->getEdgeProbability(Pred, Succ);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1940</td>
    <td class="codeLine">        auto SuccProb = MBPI->getEdgeProbability(Pred, Succ);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1941</td>
    <td class="codeLine">        BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1941</td>
    <td class="codeLine">        BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1942</td>
    <td class="codeLine">        // Check if Succ can be placed after Pred.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1942</td>
    <td class="codeLine">        // Check if Succ can be placed after Pred.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1943</td>
    <td class="codeLine">        // Succ should not be in any chain, or it is the head of some chain.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1943</td>
    <td class="codeLine">        // Succ should not be in any chain, or it is the head of some chain.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1944</td>
    <td class="codeLine">        if (!LoopBlockSet.count(Succ) && (SuccProb > TopProb) &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1944</td>
    <td class="codeLine">        if (!LoopBlockSet.count(Succ) && (SuccProb > TopProb) &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1945</td>
    <td class="codeLine">            (!SuccChain || Succ == *SuccChain->begin())) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1945</td>
    <td class="codeLine">            (!SuccChain || Succ == *SuccChain->begin())) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1946</td>
    <td class="codeLine">          TopOK = false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1946</td>
    <td class="codeLine">          TopOK = false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1947</td>
    <td class="codeLine">          break;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1947</td>
    <td class="codeLine">          break;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1948</td>
    <td class="codeLine">        }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1948</td>
    <td class="codeLine">        }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1949</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1949</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1950</td>
    <td class="codeLine">      if (TopOK) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1950</td>
    <td class="codeLine">      if (TopOK) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1951</td>
    <td class="codeLine">        BlockFrequency EdgeFreq = MBFI->getBlockFreq(Pred) *</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1951</td>
    <td class="codeLine">        BlockFrequency EdgeFreq = MBFI->getBlockFreq(Pred) *</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1952</td>
    <td class="codeLine">                                  MBPI->getEdgeProbability(Pred, Top);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1952</td>
    <td class="codeLine">                                  MBPI->getEdgeProbability(Pred, Top);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1953</td>
    <td class="codeLine">        if (EdgeFreq > MaxFreq)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1953</td>
    <td class="codeLine">        if (EdgeFreq > MaxFreq)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1954</td>
    <td class="codeLine">          MaxFreq = EdgeFreq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1954</td>
    <td class="codeLine">          MaxFreq = EdgeFreq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1955</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1955</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1956</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1956</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1957</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1957</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1958</td>
    <td class="codeLine">  return MaxFreq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1958</td>
    <td class="codeLine">  return MaxFreq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1959</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1959</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1960</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1960</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1961</td>
    <td class="codeLine">// Compute the fall through gains when move NewTop before OldTop.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1961</td>
    <td class="codeLine">// Compute the fall through gains when move NewTop before OldTop.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1962</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1962</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1963</td>
    <td class="codeLine">// In following diagram, edges marked as "-" are reduced fallthrough, edges</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1963</td>
    <td class="codeLine">// In following diagram, edges marked as "-" are reduced fallthrough, edges</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1964</td>
    <td class="codeLine">// marked as "+" are increased fallthrough, this function computes</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1964</td>
    <td class="codeLine">// marked as "+" are increased fallthrough, this function computes</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1965</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1965</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1966</td>
    <td class="codeLine">//      SUM(increased fallthrough) - SUM(decreased fallthrough)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1966</td>
    <td class="codeLine">//      SUM(increased fallthrough) - SUM(decreased fallthrough)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1967</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1967</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1968</td>
    <td class="codeLine">//              |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1968</td>
    <td class="codeLine">//              |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1969</td>
    <td class="codeLine">//              | -</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1969</td>
    <td class="codeLine">//              | -</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1970</td>
    <td class="codeLine">//              V</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1970</td>
    <td class="codeLine">//              V</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1971</td>
    <td class="codeLine">//        --->OldTop</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1971</td>
    <td class="codeLine">//        --->OldTop</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1972</td>
    <td class="codeLine">//        |     .</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1972</td>
    <td class="codeLine">//        |     .</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1973</td>
    <td class="codeLine">//        |     .</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1973</td>
    <td class="codeLine">//        |     .</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1974</td>
    <td class="codeLine">//       +|     .    +</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1974</td>
    <td class="codeLine">//       +|     .    +</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1975</td>
    <td class="codeLine">//        |   Pred ---></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1975</td>
    <td class="codeLine">//        |   Pred ---></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1976</td>
    <td class="codeLine">//        |     |-</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1976</td>
    <td class="codeLine">//        |     |-</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1977</td>
    <td class="codeLine">//        |     V</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1977</td>
    <td class="codeLine">//        |     V</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1978</td>
    <td class="codeLine">//        --- NewTop <---</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1978</td>
    <td class="codeLine">//        --- NewTop <---</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1979</td>
    <td class="codeLine">//              |-</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1979</td>
    <td class="codeLine">//              |-</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1980</td>
    <td class="codeLine">//              V</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1980</td>
    <td class="codeLine">//              V</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1981</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1981</td>
    <td class="codeLine">//</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1982</td>
    <td class="codeLine">BlockFrequency</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1982</td>
    <td class="codeLine">BlockFrequency</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1983</td>
    <td class="codeLine">MachineBlockPlacement::FallThroughGains(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1983</td>
    <td class="codeLine">MachineBlockPlacement::FallThroughGains(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1984</td>
    <td class="codeLine">    const MachineBasicBlock *NewTop,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1984</td>
    <td class="codeLine">    const MachineBasicBlock *NewTop,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1985</td>
    <td class="codeLine">    const MachineBasicBlock *OldTop,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1985</td>
    <td class="codeLine">    const MachineBasicBlock *OldTop,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1986</td>
    <td class="codeLine">    const MachineBasicBlock *ExitBB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1986</td>
    <td class="codeLine">    const MachineBasicBlock *ExitBB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1987</td>
    <td class="codeLine">    const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1987</td>
    <td class="codeLine">    const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1988</td>
    <td class="codeLine">  BlockFrequency FallThrough2Top = TopFallThroughFreq(OldTop, LoopBlockSet);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1988</td>
    <td class="codeLine">  BlockFrequency FallThrough2Top = TopFallThroughFreq(OldTop, LoopBlockSet);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1989</td>
    <td class="codeLine">  BlockFrequency FallThrough2Exit = 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1989</td>
    <td class="codeLine">  BlockFrequency FallThrough2Exit = 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1990</td>
    <td class="codeLine">  if (ExitBB)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1990</td>
    <td class="codeLine">  if (ExitBB)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1991</td>
    <td class="codeLine">    FallThrough2Exit = MBFI->getBlockFreq(NewTop) *</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1991</td>
    <td class="codeLine">    FallThrough2Exit = MBFI->getBlockFreq(NewTop) *</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1992</td>
    <td class="codeLine">        MBPI->getEdgeProbability(NewTop, ExitBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1992</td>
    <td class="codeLine">        MBPI->getEdgeProbability(NewTop, ExitBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1993</td>
    <td class="codeLine">  BlockFrequency BackEdgeFreq = MBFI->getBlockFreq(NewTop) *</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1993</td>
    <td class="codeLine">  BlockFrequency BackEdgeFreq = MBFI->getBlockFreq(NewTop) *</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1994</td>
    <td class="codeLine">      MBPI->getEdgeProbability(NewTop, OldTop);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1994</td>
    <td class="codeLine">      MBPI->getEdgeProbability(NewTop, OldTop);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1995</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1995</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1996</td>
    <td class="codeLine">  // Find the best Pred of NewTop.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">1996</td>
    <td class="codeLine">  // Find the best Pred of NewTop.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1997</td>
    <td class="codeLine">   MachineBasicBlock *BestPred = nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1997</td>
    <td class="codeLine">   MachineBasicBlock *BestPred = nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1998</td>
    <td class="codeLine">   BlockFrequency FallThroughFromPred = 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1998</td>
    <td class="codeLine">   BlockFrequency FallThroughFromPred = 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">1999</td>
    <td class="codeLine">   for (MachineBasicBlock *Pred : NewTop->predecessors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">1999</td>
    <td class="codeLine">   for (MachineBasicBlock *Pred : NewTop->predecessors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2000</td>
    <td class="codeLine">     if (!LoopBlockSet.count(Pred))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2000</td>
    <td class="codeLine">     if (!LoopBlockSet.count(Pred))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2001</td>
    <td class="codeLine">       continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2001</td>
    <td class="codeLine">       continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2002</td>
    <td class="codeLine">     BlockChain *PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2002</td>
    <td class="codeLine">     BlockChain *PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2003</td>
    <td class="codeLine">     if (!PredChain || Pred == *std::prev(PredChain->end())) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2003</td>
    <td class="codeLine">     if (!PredChain || Pred == *std::prev(PredChain->end())) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2004</td>
    <td class="codeLine">       BlockFrequency EdgeFreq = MBFI->getBlockFreq(Pred) *</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2004</td>
    <td class="codeLine">       BlockFrequency EdgeFreq = MBFI->getBlockFreq(Pred) *</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2005</td>
    <td class="codeLine">           MBPI->getEdgeProbability(Pred, NewTop);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2005</td>
    <td class="codeLine">           MBPI->getEdgeProbability(Pred, NewTop);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2006</td>
    <td class="codeLine">       if (EdgeFreq > FallThroughFromPred) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2006</td>
    <td class="codeLine">       if (EdgeFreq > FallThroughFromPred) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2007</td>
    <td class="codeLine">         FallThroughFromPred = EdgeFreq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2007</td>
    <td class="codeLine">         FallThroughFromPred = EdgeFreq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2008</td>
    <td class="codeLine">         BestPred = Pred;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2008</td>
    <td class="codeLine">         BestPred = Pred;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2009</td>
    <td class="codeLine">       }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2009</td>
    <td class="codeLine">       }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2010</td>
    <td class="codeLine">     }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2010</td>
    <td class="codeLine">     }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2011</td>
    <td class="codeLine">   }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2011</td>
    <td class="codeLine">   }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2012</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2012</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2013</td>
    <td class="codeLine">   // If NewTop is not placed after Pred, another successor can be placed</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2013</td>
    <td class="codeLine">   // If NewTop is not placed after Pred, another successor can be placed</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2014</td>
    <td class="codeLine">   // after Pred.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2014</td>
    <td class="codeLine">   // after Pred.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2015</td>
    <td class="codeLine">   BlockFrequency NewFreq = 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2015</td>
    <td class="codeLine">   BlockFrequency NewFreq = 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2016</td>
    <td class="codeLine">   if (BestPred) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2016</td>
    <td class="codeLine">   if (BestPred) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2017</td>
    <td class="codeLine">     for (MachineBasicBlock *Succ : BestPred->successors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2017</td>
    <td class="codeLine">     for (MachineBasicBlock *Succ : BestPred->successors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2018</td>
    <td class="codeLine">       if ((Succ == NewTop) || (Succ == BestPred) || !LoopBlockSet.count(Succ))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2018</td>
    <td class="codeLine">       if ((Succ == NewTop) || (Succ == BestPred) || !LoopBlockSet.count(Succ))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2019</td>
    <td class="codeLine">         continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2019</td>
    <td class="codeLine">         continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2020</td>
    <td class="codeLine">       if (ComputedEdges.contains(Succ))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2020</td>
    <td class="codeLine">       if (ComputedEdges.contains(Succ))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2021</td>
    <td class="codeLine">         continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2021</td>
    <td class="codeLine">         continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2022</td>
    <td class="codeLine">       BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2022</td>
    <td class="codeLine">       BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2023</td>
    <td class="codeLine">       if ((SuccChain && (Succ != *SuccChain->begin())) ||</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2023</td>
    <td class="codeLine">       if ((SuccChain && (Succ != *SuccChain->begin())) ||</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2024</td>
    <td class="codeLine">           (SuccChain == BlockToChain[BestPred]))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2024</td>
    <td class="codeLine">           (SuccChain == BlockToChain[BestPred]))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2025</td>
    <td class="codeLine">         continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2025</td>
    <td class="codeLine">         continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2026</td>
    <td class="codeLine">       BlockFrequency EdgeFreq = MBFI->getBlockFreq(BestPred) *</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2026</td>
    <td class="codeLine">       BlockFrequency EdgeFreq = MBFI->getBlockFreq(BestPred) *</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2027</td>
    <td class="codeLine">           MBPI->getEdgeProbability(BestPred, Succ);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2027</td>
    <td class="codeLine">           MBPI->getEdgeProbability(BestPred, Succ);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2028</td>
    <td class="codeLine">       if (EdgeFreq > NewFreq)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2028</td>
    <td class="codeLine">       if (EdgeFreq > NewFreq)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2029</td>
    <td class="codeLine">         NewFreq = EdgeFreq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2029</td>
    <td class="codeLine">         NewFreq = EdgeFreq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2030</td>
    <td class="codeLine">     }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2030</td>
    <td class="codeLine">     }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2031</td>
    <td class="codeLine">     BlockFrequency OrigEdgeFreq = MBFI->getBlockFreq(BestPred) *</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2031</td>
    <td class="codeLine">     BlockFrequency OrigEdgeFreq = MBFI->getBlockFreq(BestPred) *</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2032</td>
    <td class="codeLine">         MBPI->getEdgeProbability(BestPred, NewTop);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2032</td>
    <td class="codeLine">         MBPI->getEdgeProbability(BestPred, NewTop);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2033</td>
    <td class="codeLine">     if (NewFreq > OrigEdgeFreq) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2033</td>
    <td class="codeLine">     if (NewFreq > OrigEdgeFreq) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2034</td>
    <td class="codeLine">       // If NewTop is not the best successor of Pred, then Pred doesn't</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2034</td>
    <td class="codeLine">       // If NewTop is not the best successor of Pred, then Pred doesn't</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2035</td>
    <td class="codeLine">       // fallthrough to NewTop. So there is no FallThroughFromPred and</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2035</td>
    <td class="codeLine">       // fallthrough to NewTop. So there is no FallThroughFromPred and</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2036</td>
    <td class="codeLine">       // NewFreq.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2036</td>
    <td class="codeLine">       // NewFreq.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2037</td>
    <td class="codeLine">       NewFreq = 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2037</td>
    <td class="codeLine">       NewFreq = 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2038</td>
    <td class="codeLine">       FallThroughFromPred = 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2038</td>
    <td class="codeLine">       FallThroughFromPred = 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2039</td>
    <td class="codeLine">     }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2039</td>
    <td class="codeLine">     }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2040</td>
    <td class="codeLine">   }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2040</td>
    <td class="codeLine">   }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2041</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2041</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2042</td>
    <td class="codeLine">   BlockFrequency Result = 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2042</td>
    <td class="codeLine">   BlockFrequency Result = 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2043</td>
    <td class="codeLine">   BlockFrequency Gains = BackEdgeFreq + NewFreq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2043</td>
    <td class="codeLine">   BlockFrequency Gains = BackEdgeFreq + NewFreq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2044</td>
    <td class="codeLine">   BlockFrequency Lost = FallThrough2Top + FallThrough2Exit +</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2044</td>
    <td class="codeLine">   BlockFrequency Lost = FallThrough2Top + FallThrough2Exit +</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2045</td>
    <td class="codeLine">       FallThroughFromPred;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2045</td>
    <td class="codeLine">       FallThroughFromPred;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2046</td>
    <td class="codeLine">   if (Gains > Lost)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2046</td>
    <td class="codeLine">   if (Gains > Lost)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2047</td>
    <td class="codeLine">     Result = Gains - Lost;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2047</td>
    <td class="codeLine">     Result = Gains - Lost;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2048</td>
    <td class="codeLine">   return Result;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2048</td>
    <td class="codeLine">   return Result;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2049</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2049</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2050</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2050</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2051</td>
    <td class="codeLine">/// Helper function of findBestLoopTop. Find the best loop top block</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2051</td>
    <td class="codeLine">/// Helper function of findBestLoopTop. Find the best loop top block</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2052</td>
    <td class="codeLine">/// from predecessors of old top.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2052</td>
    <td class="codeLine">/// from predecessors of old top.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2053</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2053</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2054</td>
    <td class="codeLine">/// Look for a block which is strictly better than the old top for laying</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2054</td>
    <td class="codeLine">/// Look for a block which is strictly better than the old top for laying</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2055</td>
    <td class="codeLine">/// out before the old top of the loop. This looks for only two patterns:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2055</td>
    <td class="codeLine">/// out before the old top of the loop. This looks for only two patterns:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2056</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2056</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2057</td>
    <td class="codeLine">///     1. a block has only one successor, the old loop top</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2057</td>
    <td class="codeLine">///     1. a block has only one successor, the old loop top</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2058</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2058</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2059</td>
    <td class="codeLine">///        Because such a block will always result in an unconditional jump,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2059</td>
    <td class="codeLine">///        Because such a block will always result in an unconditional jump,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2060</td>
    <td class="codeLine">///        rotating it in front of the old top is always profitable.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2060</td>
    <td class="codeLine">///        rotating it in front of the old top is always profitable.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2061</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2061</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2062</td>
    <td class="codeLine">///     2. a block has two successors, one is old top, another is exit</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2062</td>
    <td class="codeLine">///     2. a block has two successors, one is old top, another is exit</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2063</td>
    <td class="codeLine">///        and it has more than one predecessors</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2063</td>
    <td class="codeLine">///        and it has more than one predecessors</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2064</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2064</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2065</td>
    <td class="codeLine">///        If it is below one of its predecessors P, only P can fall through to</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2065</td>
    <td class="codeLine">///        If it is below one of its predecessors P, only P can fall through to</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2066</td>
    <td class="codeLine">///        it, all other predecessors need a jump to it, and another conditional</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2066</td>
    <td class="codeLine">///        it, all other predecessors need a jump to it, and another conditional</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2067</td>
    <td class="codeLine">///        jump to loop header. If it is moved before loop header, all its</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2067</td>
    <td class="codeLine">///        jump to loop header. If it is moved before loop header, all its</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2068</td>
    <td class="codeLine">///        predecessors jump to it, then fall through to loop header. So all its</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2068</td>
    <td class="codeLine">///        predecessors jump to it, then fall through to loop header. So all its</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2069</td>
    <td class="codeLine">///        predecessors except P can reduce one taken branch.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2069</td>
    <td class="codeLine">///        predecessors except P can reduce one taken branch.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2070</td>
    <td class="codeLine">///        At the same time, move it before old top increases the taken branch</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2070</td>
    <td class="codeLine">///        At the same time, move it before old top increases the taken branch</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2071</td>
    <td class="codeLine">///        to loop exit block, so the reduced taken branch will be compared with</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2071</td>
    <td class="codeLine">///        to loop exit block, so the reduced taken branch will be compared with</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2072</td>
    <td class="codeLine">///        the increased taken branch to the loop exit block.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2072</td>
    <td class="codeLine">///        the increased taken branch to the loop exit block.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2073</td>
    <td class="codeLine">MachineBasicBlock *</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2073</td>
    <td class="codeLine">MachineBasicBlock *</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2074</td>
    <td class="codeLine">MachineBlockPlacement::findBestLoopTopHelper(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2074</td>
    <td class="codeLine">MachineBlockPlacement::findBestLoopTopHelper(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2075</td>
    <td class="codeLine">    MachineBasicBlock *OldTop,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2075</td>
    <td class="codeLine">    MachineBasicBlock *OldTop,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2076</td>
    <td class="codeLine">    const MachineLoop &L,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2076</td>
    <td class="codeLine">    const MachineLoop &L,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2077</td>
    <td class="codeLine">    const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2077</td>
    <td class="codeLine">    const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2078</td>
    <td class="codeLine">  // Check that the header hasn't been fused with a preheader block due to</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2078</td>
    <td class="codeLine">  // Check that the header hasn't been fused with a preheader block due to</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2079</td>
    <td class="codeLine">  // crazy branches. If it has, we need to start with the header at the top to</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2079</td>
    <td class="codeLine">  // crazy branches. If it has, we need to start with the header at the top to</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2080</td>
    <td class="codeLine">  // prevent pulling the preheader into the loop body.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2080</td>
    <td class="codeLine">  // prevent pulling the preheader into the loop body.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2081</td>
    <td class="codeLine">  BlockChain &HeaderChain = *BlockToChain[OldTop];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2081</td>
    <td class="codeLine">  BlockChain &HeaderChain = *BlockToChain[OldTop];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2082</td>
    <td class="codeLine">  if (!LoopBlockSet.count(*HeaderChain.begin()))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2082</td>
    <td class="codeLine">  if (!LoopBlockSet.count(*HeaderChain.begin()))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2083</td>
    <td class="codeLine">    return OldTop;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2083</td>
    <td class="codeLine">    return OldTop;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2084</td>
    <td class="codeLine">  if (OldTop != *HeaderChain.begin())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2084</td>
    <td class="codeLine">  if (OldTop != *HeaderChain.begin())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2085</td>
    <td class="codeLine">    return OldTop;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2085</td>
    <td class="codeLine">    return OldTop;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2086</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2086</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2087</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "Finding best loop top for: " << getBlockName(OldTop)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2087</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "Finding best loop top for: " << getBlockName(OldTop)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2088</td>
    <td class="codeLine">                    << "\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2088</td>
    <td class="codeLine">                    << "\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2089</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2089</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2090</td>
    <td class="codeLine">  BlockFrequency BestGains = 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2090</td>
    <td class="codeLine">  BlockFrequency BestGains = 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2091</td>
    <td class="codeLine">  MachineBasicBlock *BestPred = nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2091</td>
    <td class="codeLine">  MachineBasicBlock *BestPred = nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2092</td>
    <td class="codeLine">  for (MachineBasicBlock *Pred : OldTop->predecessors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2092</td>
    <td class="codeLine">  for (MachineBasicBlock *Pred : OldTop->predecessors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2093</td>
    <td class="codeLine">    if (!LoopBlockSet.count(Pred))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2093</td>
    <td class="codeLine">    if (!LoopBlockSet.count(Pred))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2094</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2094</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2095</td>
    <td class="codeLine">    if (Pred == L.getHeader())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2095</td>
    <td class="codeLine">    if (Pred == L.getHeader())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2096</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2096</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2097</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "   old top pred: " << getBlockName(Pred) << ", has "</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2097</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "   old top pred: " << getBlockName(Pred) << ", has "</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2098</td>
    <td class="codeLine">                      << Pred->succ_size() << " successors, ";</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2098</td>
    <td class="codeLine">                      << Pred->succ_size() << " successors, ";</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2099</td>
    <td class="codeLine">               MBFI->printBlockFreq(dbgs(), Pred) << " freq\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2099</td>
    <td class="codeLine">               MBFI->printBlockFreq(dbgs(), Pred) << " freq\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2100</td>
    <td class="codeLine">    if (Pred->succ_size() > 2)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2100</td>
    <td class="codeLine">    if (Pred->succ_size() > 2)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2101</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2101</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2102</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2102</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2103</td>
    <td class="codeLine">    MachineBasicBlock *OtherBB = nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2103</td>
    <td class="codeLine">    MachineBasicBlock *OtherBB = nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2104</td>
    <td class="codeLine">    if (Pred->succ_size() == 2) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2104</td>
    <td class="codeLine">    if (Pred->succ_size() == 2) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2105</td>
    <td class="codeLine">      OtherBB = *Pred->succ_begin();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2105</td>
    <td class="codeLine">      OtherBB = *Pred->succ_begin();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2106</td>
    <td class="codeLine">      if (OtherBB == OldTop)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2106</td>
    <td class="codeLine">      if (OtherBB == OldTop)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2107</td>
    <td class="codeLine">        OtherBB = *Pred->succ_rbegin();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2107</td>
    <td class="codeLine">        OtherBB = *Pred->succ_rbegin();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2108</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2108</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2109</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2109</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2110</td>
    <td class="codeLine">    if (!canMoveBottomBlockToTop(Pred, OldTop))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2110</td>
    <td class="codeLine">    if (!canMoveBottomBlockToTop(Pred, OldTop))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2111</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2111</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2112</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2112</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2113</td>
    <td class="codeLine">    BlockFrequency Gains = FallThroughGains(Pred, OldTop, OtherBB,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2113</td>
    <td class="codeLine">    BlockFrequency Gains = FallThroughGains(Pred, OldTop, OtherBB,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2114</td>
    <td class="codeLine">                                            LoopBlockSet);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2114</td>
    <td class="codeLine">                                            LoopBlockSet);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2115</td>
    <td class="codeLine">    if ((Gains > 0) && (Gains > BestGains ||</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2115</td>
    <td class="codeLine">    if ((Gains > 0) && (Gains > BestGains ||</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2116</td>
    <td class="codeLine">        ((Gains == BestGains) && Pred->isLayoutSuccessor(OldTop)))) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2116</td>
    <td class="codeLine">        ((Gains == BestGains) && Pred->isLayoutSuccessor(OldTop)))) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2117</td>
    <td class="codeLine">      BestPred = Pred;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2117</td>
    <td class="codeLine">      BestPred = Pred;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2118</td>
    <td class="codeLine">      BestGains = Gains;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2118</td>
    <td class="codeLine">      BestGains = Gains;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2119</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2119</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2120</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2120</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2121</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2121</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2122</td>
    <td class="codeLine">  // If no direct predecessor is fine, just use the loop header.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2122</td>
    <td class="codeLine">  // If no direct predecessor is fine, just use the loop header.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2123</td>
    <td class="codeLine">  if (!BestPred) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2123</td>
    <td class="codeLine">  if (!BestPred) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2124</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "    final top unchanged\n");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2124</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "    final top unchanged\n");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2125</td>
    <td class="codeLine">    return OldTop;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2125</td>
    <td class="codeLine">    return OldTop;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2126</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2126</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2127</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2127</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2128</td>
    <td class="codeLine">  // Walk backwards through any straight line of predecessors.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2128</td>
    <td class="codeLine">  // Walk backwards through any straight line of predecessors.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2129</td>
    <td class="codeLine">  while (BestPred->pred_size() == 1 &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2129</td>
    <td class="codeLine">  while (BestPred->pred_size() == 1 &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2130</td>
    <td class="codeLine">         (*BestPred->pred_begin())->succ_size() == 1 &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2130</td>
    <td class="codeLine">         (*BestPred->pred_begin())->succ_size() == 1 &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2131</td>
    <td class="codeLine">         *BestPred->pred_begin() != L.getHeader())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2131</td>
    <td class="codeLine">         *BestPred->pred_begin() != L.getHeader())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2132</td>
    <td class="codeLine">    BestPred = *BestPred->pred_begin();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2132</td>
    <td class="codeLine">    BestPred = *BestPred->pred_begin();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2133</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2133</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2134</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "    final top: " << getBlockName(BestPred) << "\n");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2134</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "    final top: " << getBlockName(BestPred) << "\n");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2135</td>
    <td class="codeLine">  return BestPred;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2135</td>
    <td class="codeLine">  return BestPred;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2136</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2136</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2137</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2137</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2138</td>
    <td class="codeLine">/// Find the best loop top block for layout.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2138</td>
    <td class="codeLine">/// Find the best loop top block for layout.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2139</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2139</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2140</td>
    <td class="codeLine">/// This function iteratively calls findBestLoopTopHelper, until no new better</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2140</td>
    <td class="codeLine">/// This function iteratively calls findBestLoopTopHelper, until no new better</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2141</td>
    <td class="codeLine">/// BB can be found.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2141</td>
    <td class="codeLine">/// BB can be found.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2142</td>
    <td class="codeLine">MachineBasicBlock *</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2142</td>
    <td class="codeLine">MachineBasicBlock *</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2143</td>
    <td class="codeLine">MachineBlockPlacement::findBestLoopTop(const MachineLoop &L,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2143</td>
    <td class="codeLine">MachineBlockPlacement::findBestLoopTop(const MachineLoop &L,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2144</td>
    <td class="codeLine">                                       const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2144</td>
    <td class="codeLine">                                       const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2145</td>
    <td class="codeLine">  // Placing the latch block before the header may introduce an extra branch</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2145</td>
    <td class="codeLine">  // Placing the latch block before the header may introduce an extra branch</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2146</td>
    <td class="codeLine">  // that skips this block the first time the loop is executed, which we want</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2146</td>
    <td class="codeLine">  // that skips this block the first time the loop is executed, which we want</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2147</td>
    <td class="codeLine">  // to avoid when optimising for size.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2147</td>
    <td class="codeLine">  // to avoid when optimising for size.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2148</td>
    <td class="codeLine">  // FIXME: in theory there is a case that does not introduce a new branch,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2148</td>
    <td class="codeLine">  // FIXME: in theory there is a case that does not introduce a new branch,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2149</td>
    <td class="codeLine">  // i.e. when the layout predecessor does not fallthrough to the loop header.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2149</td>
    <td class="codeLine">  // i.e. when the layout predecessor does not fallthrough to the loop header.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2150</td>
    <td class="codeLine">  // In practice this never happens though: there always seems to be a preheader</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2150</td>
    <td class="codeLine">  // In practice this never happens though: there always seems to be a preheader</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2151</td>
    <td class="codeLine">  // that can fallthrough and that is also placed before the header.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2151</td>
    <td class="codeLine">  // that can fallthrough and that is also placed before the header.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2152</td>
    <td class="codeLine">  bool OptForSize = F->getFunction().hasOptSize() ||</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2152</td>
    <td class="codeLine">  bool OptForSize = F->getFunction().hasOptSize() ||</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2153</td>
    <td class="codeLine">                    llvm::shouldOptimizeForSize(L.getHeader(), PSI, MBFI.get());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2153</td>
    <td class="codeLine">                    llvm::shouldOptimizeForSize(L.getHeader(), PSI, MBFI.get());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2154</td>
    <td class="codeLine">  if (OptForSize)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2154</td>
    <td class="codeLine">  if (OptForSize)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2155</td>
    <td class="codeLine">    return L.getHeader();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2155</td>
    <td class="codeLine">    return L.getHeader();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2156</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2156</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2157</td>
    <td class="codeLine">  MachineBasicBlock *OldTop = nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2157</td>
    <td class="codeLine">  MachineBasicBlock *OldTop = nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2158</td>
    <td class="codeLine">  MachineBasicBlock *NewTop = L.getHeader();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2158</td>
    <td class="codeLine">  MachineBasicBlock *NewTop = L.getHeader();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2159</td>
    <td class="codeLine">  while (NewTop != OldTop) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2159</td>
    <td class="codeLine">  while (NewTop != OldTop) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2160</td>
    <td class="codeLine">    OldTop = NewTop;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2160</td>
    <td class="codeLine">    OldTop = NewTop;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2161</td>
    <td class="codeLine">    NewTop = findBestLoopTopHelper(OldTop, L, LoopBlockSet);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2161</td>
    <td class="codeLine">    NewTop = findBestLoopTopHelper(OldTop, L, LoopBlockSet);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2162</td>
    <td class="codeLine">    if (NewTop != OldTop)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2162</td>
    <td class="codeLine">    if (NewTop != OldTop)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2163</td>
    <td class="codeLine">      ComputedEdges[NewTop] = { OldTop, false };</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2163</td>
    <td class="codeLine">      ComputedEdges[NewTop] = { OldTop, false };</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2164</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2164</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2165</td>
    <td class="codeLine">  return NewTop;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2165</td>
    <td class="codeLine">  return NewTop;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2166</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2166</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2167</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2167</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2168</td>
    <td class="codeLine">/// Find the best loop exiting block for layout.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2168</td>
    <td class="codeLine">/// Find the best loop exiting block for layout.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2169</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2169</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2170</td>
    <td class="codeLine">/// This routine implements the logic to analyze the loop looking for the best</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2170</td>
    <td class="codeLine">/// This routine implements the logic to analyze the loop looking for the best</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2171</td>
    <td class="codeLine">/// block to layout at the top of the loop. Typically this is done to maximize</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2171</td>
    <td class="codeLine">/// block to layout at the top of the loop. Typically this is done to maximize</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2172</td>
    <td class="codeLine">/// fallthrough opportunities.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2172</td>
    <td class="codeLine">/// fallthrough opportunities.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2173</td>
    <td class="codeLine">MachineBasicBlock *</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2173</td>
    <td class="codeLine">MachineBasicBlock *</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2174</td>
    <td class="codeLine">MachineBlockPlacement::findBestLoopExit(const MachineLoop &L,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2174</td>
    <td class="codeLine">MachineBlockPlacement::findBestLoopExit(const MachineLoop &L,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2175</td>
    <td class="codeLine">                                        const BlockFilterSet &LoopBlockSet,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2175</td>
    <td class="codeLine">                                        const BlockFilterSet &LoopBlockSet,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2176</td>
    <td class="codeLine">                                        BlockFrequency &ExitFreq) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2176</td>
    <td class="codeLine">                                        BlockFrequency &ExitFreq) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2177</td>
    <td class="codeLine">  // We don't want to layout the loop linearly in all cases. If the loop header</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2177</td>
    <td class="codeLine">  // We don't want to layout the loop linearly in all cases. If the loop header</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2178</td>
    <td class="codeLine">  // is just a normal basic block in the loop, we want to look for what block</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2178</td>
    <td class="codeLine">  // is just a normal basic block in the loop, we want to look for what block</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2179</td>
    <td class="codeLine">  // within the loop is the best one to layout at the top. However, if the loop</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2179</td>
    <td class="codeLine">  // within the loop is the best one to layout at the top. However, if the loop</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2180</td>
    <td class="codeLine">  // header has be pre-merged into a chain due to predecessors not having</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2180</td>
    <td class="codeLine">  // header has be pre-merged into a chain due to predecessors not having</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2181</td>
    <td class="codeLine">  // analyzable branches, *and* the predecessor it is merged with is *not* part</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2181</td>
    <td class="codeLine">  // analyzable branches, *and* the predecessor it is merged with is *not* part</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2182</td>
    <td class="codeLine">  // of the loop, rotating the header into the middle of the loop will create</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2182</td>
    <td class="codeLine">  // of the loop, rotating the header into the middle of the loop will create</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2183</td>
    <td class="codeLine">  // a non-contiguous range of blocks which is Very Bad. So start with the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2183</td>
    <td class="codeLine">  // a non-contiguous range of blocks which is Very Bad. So start with the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2184</td>
    <td class="codeLine">  // header and only rotate if safe.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2184</td>
    <td class="codeLine">  // header and only rotate if safe.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2185</td>
    <td class="codeLine">  BlockChain &HeaderChain = *BlockToChain[L.getHeader()];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2185</td>
    <td class="codeLine">  BlockChain &HeaderChain = *BlockToChain[L.getHeader()];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2186</td>
    <td class="codeLine">  if (!LoopBlockSet.count(*HeaderChain.begin()))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2186</td>
    <td class="codeLine">  if (!LoopBlockSet.count(*HeaderChain.begin()))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2187</td>
    <td class="codeLine">    return nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2187</td>
    <td class="codeLine">    return nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2188</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2188</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2189</td>
    <td class="codeLine">  BlockFrequency BestExitEdgeFreq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2189</td>
    <td class="codeLine">  BlockFrequency BestExitEdgeFreq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2190</td>
    <td class="codeLine">  unsigned BestExitLoopDepth = 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2190</td>
    <td class="codeLine">  unsigned BestExitLoopDepth = 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2191</td>
    <td class="codeLine">  MachineBasicBlock *ExitingBB = nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2191</td>
    <td class="codeLine">  MachineBasicBlock *ExitingBB = nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2192</td>
    <td class="codeLine">  // If there are exits to outer loops, loop rotation can severely limit</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2192</td>
    <td class="codeLine">  // If there are exits to outer loops, loop rotation can severely limit</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2193</td>
    <td class="codeLine">  // fallthrough opportunities unless it selects such an exit. Keep a set of</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2193</td>
    <td class="codeLine">  // fallthrough opportunities unless it selects such an exit. Keep a set of</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2194</td>
    <td class="codeLine">  // blocks where rotating to exit with that block will reach an outer loop.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2194</td>
    <td class="codeLine">  // blocks where rotating to exit with that block will reach an outer loop.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2195</td>
    <td class="codeLine">  SmallPtrSet<MachineBasicBlock *, 4> BlocksExitingToOuterLoop;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2195</td>
    <td class="codeLine">  SmallPtrSet<MachineBasicBlock *, 4> BlocksExitingToOuterLoop;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2196</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2196</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2197</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "Finding best loop exit for: "</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2197</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "Finding best loop exit for: "</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2198</td>
    <td class="codeLine">                    << getBlockName(L.getHeader()) << "\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2198</td>
    <td class="codeLine">                    << getBlockName(L.getHeader()) << "\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2199</td>
    <td class="codeLine">  for (MachineBasicBlock *MBB : L.getBlocks()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2199</td>
    <td class="codeLine">  for (MachineBasicBlock *MBB : L.getBlocks()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2200</td>
    <td class="codeLine">    BlockChain &Chain = *BlockToChain[MBB];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2200</td>
    <td class="codeLine">    BlockChain &Chain = *BlockToChain[MBB];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2201</td>
    <td class="codeLine">    // Ensure that this block is at the end of a chain; otherwise it could be</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2201</td>
    <td class="codeLine">    // Ensure that this block is at the end of a chain; otherwise it could be</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2202</td>
    <td class="codeLine">    // mid-way through an inner loop or a successor of an unanalyzable branch.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2202</td>
    <td class="codeLine">    // mid-way through an inner loop or a successor of an unanalyzable branch.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2203</td>
    <td class="codeLine">    if (MBB != *std::prev(Chain.end()))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2203</td>
    <td class="codeLine">    if (MBB != *std::prev(Chain.end()))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2204</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2204</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2205</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2205</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2206</td>
    <td class="codeLine">    // Now walk the successors. We need to establish whether this has a viable</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2206</td>
    <td class="codeLine">    // Now walk the successors. We need to establish whether this has a viable</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2207</td>
    <td class="codeLine">    // exiting successor and whether it has a viable non-exiting successor.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2207</td>
    <td class="codeLine">    // exiting successor and whether it has a viable non-exiting successor.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2208</td>
    <td class="codeLine">    // We store the old exiting state and restore it if a viable looping</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2208</td>
    <td class="codeLine">    // We store the old exiting state and restore it if a viable looping</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2209</td>
    <td class="codeLine">    // successor isn't found.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2209</td>
    <td class="codeLine">    // successor isn't found.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2210</td>
    <td class="codeLine">    MachineBasicBlock *OldExitingBB = ExitingBB;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2210</td>
    <td class="codeLine">    MachineBasicBlock *OldExitingBB = ExitingBB;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2211</td>
    <td class="codeLine">    BlockFrequency OldBestExitEdgeFreq = BestExitEdgeFreq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2211</td>
    <td class="codeLine">    BlockFrequency OldBestExitEdgeFreq = BestExitEdgeFreq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2212</td>
    <td class="codeLine">    bool HasLoopingSucc = false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2212</td>
    <td class="codeLine">    bool HasLoopingSucc = false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2213</td>
    <td class="codeLine">    for (MachineBasicBlock *Succ : MBB->successors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2213</td>
    <td class="codeLine">    for (MachineBasicBlock *Succ : MBB->successors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2214</td>
    <td class="codeLine">      if (Succ->isEHPad())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2214</td>
    <td class="codeLine">      if (Succ->isEHPad())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2215</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2215</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2216</td>
    <td class="codeLine">      if (Succ == MBB)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2216</td>
    <td class="codeLine">      if (Succ == MBB)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2217</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2217</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2218</td>
    <td class="codeLine">      BlockChain &SuccChain = *BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2218</td>
    <td class="codeLine">      BlockChain &SuccChain = *BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2219</td>
    <td class="codeLine">      // Don't split chains, either this chain or the successor's chain.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2219</td>
    <td class="codeLine">      // Don't split chains, either this chain or the successor's chain.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2220</td>
    <td class="codeLine">      if (&Chain == &SuccChain) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2220</td>
    <td class="codeLine">      if (&Chain == &SuccChain) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2221</td>
    <td class="codeLine">        LLVM_DEBUG(dbgs() << "    exiting: " << getBlockName(MBB) << " -> "</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2221</td>
    <td class="codeLine">        LLVM_DEBUG(dbgs() << "    exiting: " << getBlockName(MBB) << " -> "</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2222</td>
    <td class="codeLine">                          << getBlockName(Succ) << " (chain conflict)\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2222</td>
    <td class="codeLine">                          << getBlockName(Succ) << " (chain conflict)\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2223</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2223</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2224</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2224</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2225</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2225</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2226</td>
    <td class="codeLine">      auto SuccProb = MBPI->getEdgeProbability(MBB, Succ);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2226</td>
    <td class="codeLine">      auto SuccProb = MBPI->getEdgeProbability(MBB, Succ);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2227</td>
    <td class="codeLine">      if (LoopBlockSet.count(Succ)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2227</td>
    <td class="codeLine">      if (LoopBlockSet.count(Succ)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2228</td>
    <td class="codeLine">        LLVM_DEBUG(dbgs() << "    looping: " << getBlockName(MBB) << " -> "</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2228</td>
    <td class="codeLine">        LLVM_DEBUG(dbgs() << "    looping: " << getBlockName(MBB) << " -> "</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2229</td>
    <td class="codeLine">                          << getBlockName(Succ) << " (" << SuccProb << ")\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2229</td>
    <td class="codeLine">                          << getBlockName(Succ) << " (" << SuccProb << ")\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2230</td>
    <td class="codeLine">        HasLoopingSucc = true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2230</td>
    <td class="codeLine">        HasLoopingSucc = true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2231</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2231</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2232</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2232</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2233</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2233</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2234</td>
    <td class="codeLine">      unsigned SuccLoopDepth = 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2234</td>
    <td class="codeLine">      unsigned SuccLoopDepth = 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2235</td>
    <td class="codeLine">      if (MachineLoop *ExitLoop = MLI->getLoopFor(Succ)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2235</td>
    <td class="codeLine">      if (MachineLoop *ExitLoop = MLI->getLoopFor(Succ)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2236</td>
    <td class="codeLine">        SuccLoopDepth = ExitLoop->getLoopDepth();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2236</td>
    <td class="codeLine">        SuccLoopDepth = ExitLoop->getLoopDepth();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2237</td>
    <td class="codeLine">        if (ExitLoop->contains(&L))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2237</td>
    <td class="codeLine">        if (ExitLoop->contains(&L))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2238</td>
    <td class="codeLine">          BlocksExitingToOuterLoop.insert(MBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2238</td>
    <td class="codeLine">          BlocksExitingToOuterLoop.insert(MBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2239</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2239</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2240</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2240</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2241</td>
    <td class="codeLine">      BlockFrequency ExitEdgeFreq = MBFI->getBlockFreq(MBB) * SuccProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2241</td>
    <td class="codeLine">      BlockFrequency ExitEdgeFreq = MBFI->getBlockFreq(MBB) * SuccProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2242</td>
    <td class="codeLine">      LLVM_DEBUG(dbgs() << "    exiting: " << getBlockName(MBB) << " -> "</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2242</td>
    <td class="codeLine">      LLVM_DEBUG(dbgs() << "    exiting: " << getBlockName(MBB) << " -> "</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2243</td>
    <td class="codeLine">                        << getBlockName(Succ) << " [L:" << SuccLoopDepth</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2243</td>
    <td class="codeLine">                        << getBlockName(Succ) << " [L:" << SuccLoopDepth</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2244</td>
    <td class="codeLine">                        << "] (";</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2244</td>
    <td class="codeLine">                        << "] (";</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2245</td>
    <td class="codeLine">                 MBFI->printBlockFreq(dbgs(), ExitEdgeFreq) << ")\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2245</td>
    <td class="codeLine">                 MBFI->printBlockFreq(dbgs(), ExitEdgeFreq) << ")\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2246</td>
    <td class="codeLine">      // Note that we bias this toward an existing layout successor to retain</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2246</td>
    <td class="codeLine">      // Note that we bias this toward an existing layout successor to retain</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2247</td>
    <td class="codeLine">      // incoming order in the absence of better information. The exit must have</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2247</td>
    <td class="codeLine">      // incoming order in the absence of better information. The exit must have</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2248</td>
    <td class="codeLine">      // a frequency higher than the current exit before we consider breaking</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2248</td>
    <td class="codeLine">      // a frequency higher than the current exit before we consider breaking</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2249</td>
    <td class="codeLine">      // the layout.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2249</td>
    <td class="codeLine">      // the layout.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2250</td>
    <td class="codeLine">      BranchProbability Bias(100 - ExitBlockBias, 100);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2250</td>
    <td class="codeLine">      BranchProbability Bias(100 - ExitBlockBias, 100);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2251</td>
    <td class="codeLine">      if (!ExitingBB || SuccLoopDepth > BestExitLoopDepth ||</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2251</td>
    <td class="codeLine">      if (!ExitingBB || SuccLoopDepth > BestExitLoopDepth ||</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2252</td>
    <td class="codeLine">          ExitEdgeFreq > BestExitEdgeFreq ||</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2252</td>
    <td class="codeLine">          ExitEdgeFreq > BestExitEdgeFreq ||</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2253</td>
    <td class="codeLine">          (MBB->isLayoutSuccessor(Succ) &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2253</td>
    <td class="codeLine">          (MBB->isLayoutSuccessor(Succ) &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2254</td>
    <td class="codeLine">           !(ExitEdgeFreq < BestExitEdgeFreq * Bias))) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2254</td>
    <td class="codeLine">           !(ExitEdgeFreq < BestExitEdgeFreq * Bias))) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2255</td>
    <td class="codeLine">        BestExitEdgeFreq = ExitEdgeFreq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2255</td>
    <td class="codeLine">        BestExitEdgeFreq = ExitEdgeFreq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2256</td>
    <td class="codeLine">        ExitingBB = MBB;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2256</td>
    <td class="codeLine">        ExitingBB = MBB;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2257</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2257</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2258</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2258</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2259</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2259</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2260</td>
    <td class="codeLine">    if (!HasLoopingSucc) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2260</td>
    <td class="codeLine">    if (!HasLoopingSucc) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2261</td>
    <td class="codeLine">      // Restore the old exiting state, no viable looping successor was found.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2261</td>
    <td class="codeLine">      // Restore the old exiting state, no viable looping successor was found.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2262</td>
    <td class="codeLine">      ExitingBB = OldExitingBB;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2262</td>
    <td class="codeLine">      ExitingBB = OldExitingBB;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2263</td>
    <td class="codeLine">      BestExitEdgeFreq = OldBestExitEdgeFreq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2263</td>
    <td class="codeLine">      BestExitEdgeFreq = OldBestExitEdgeFreq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2264</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2264</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2265</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2265</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2266</td>
    <td class="codeLine">  // Without a candidate exiting block or with only a single block in the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2266</td>
    <td class="codeLine">  // Without a candidate exiting block or with only a single block in the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2267</td>
    <td class="codeLine">  // loop, just use the loop header to layout the loop.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2267</td>
    <td class="codeLine">  // loop, just use the loop header to layout the loop.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2268</td>
    <td class="codeLine">  if (!ExitingBB) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2268</td>
    <td class="codeLine">  if (!ExitingBB) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2269</td>
    <td class="codeLine">    LLVM_DEBUG(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2269</td>
    <td class="codeLine">    LLVM_DEBUG(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2270</td>
    <td class="codeLine">        dbgs() << "    No other candidate exit blocks, using loop header\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2270</td>
    <td class="codeLine">        dbgs() << "    No other candidate exit blocks, using loop header\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2271</td>
    <td class="codeLine">    return nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2271</td>
    <td class="codeLine">    return nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2272</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2272</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2273</td>
    <td class="codeLine">  if (L.getNumBlocks() == 1) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2273</td>
    <td class="codeLine">  if (L.getNumBlocks() == 1) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2274</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "    Loop has 1 block, using loop header as exit\n");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2274</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "    Loop has 1 block, using loop header as exit\n");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2275</td>
    <td class="codeLine">    return nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2275</td>
    <td class="codeLine">    return nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2276</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2276</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2277</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2277</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2278</td>
    <td class="codeLine">  // Also, if we have exit blocks which lead to outer loops but didn't select</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2278</td>
    <td class="codeLine">  // Also, if we have exit blocks which lead to outer loops but didn't select</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2279</td>
    <td class="codeLine">  // one of them as the exiting block we are rotating toward, disable loop</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2279</td>
    <td class="codeLine">  // one of them as the exiting block we are rotating toward, disable loop</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2280</td>
    <td class="codeLine">  // rotation altogether.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2280</td>
    <td class="codeLine">  // rotation altogether.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2281</td>
    <td class="codeLine">  if (!BlocksExitingToOuterLoop.empty() &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2281</td>
    <td class="codeLine">  if (!BlocksExitingToOuterLoop.empty() &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2282</td>
    <td class="codeLine">      !BlocksExitingToOuterLoop.count(ExitingBB))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2282</td>
    <td class="codeLine">      !BlocksExitingToOuterLoop.count(ExitingBB))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2283</td>
    <td class="codeLine">    return nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2283</td>
    <td class="codeLine">    return nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2284</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2284</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2285</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "  Best exiting block: " << getBlockName(ExitingBB)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2285</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "  Best exiting block: " << getBlockName(ExitingBB)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2286</td>
    <td class="codeLine">                    << "\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2286</td>
    <td class="codeLine">                    << "\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2287</td>
    <td class="codeLine">  ExitFreq = BestExitEdgeFreq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2287</td>
    <td class="codeLine">  ExitFreq = BestExitEdgeFreq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2288</td>
    <td class="codeLine">  return ExitingBB;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2288</td>
    <td class="codeLine">  return ExitingBB;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2289</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2289</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2290</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2290</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2291</td>
    <td class="codeLine">/// Check if there is a fallthrough to loop header Top.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2291</td>
    <td class="codeLine">/// Check if there is a fallthrough to loop header Top.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2292</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2292</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2293</td>
    <td class="codeLine">///   1. Look for a Pred that can be layout before Top.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2293</td>
    <td class="codeLine">///   1. Look for a Pred that can be layout before Top.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2294</td>
    <td class="codeLine">///   2. Check if Top is the most possible successor of Pred.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2294</td>
    <td class="codeLine">///   2. Check if Top is the most possible successor of Pred.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2295</td>
    <td class="codeLine">bool</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2295</td>
    <td class="codeLine">bool</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2296</td>
    <td class="codeLine">MachineBlockPlacement::hasViableTopFallthrough(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2296</td>
    <td class="codeLine">MachineBlockPlacement::hasViableTopFallthrough(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2297</td>
    <td class="codeLine">    const MachineBasicBlock *Top,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2297</td>
    <td class="codeLine">    const MachineBasicBlock *Top,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2298</td>
    <td class="codeLine">    const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2298</td>
    <td class="codeLine">    const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2299</td>
    <td class="codeLine">  for (MachineBasicBlock *Pred : Top->predecessors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2299</td>
    <td class="codeLine">  for (MachineBasicBlock *Pred : Top->predecessors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2300</td>
    <td class="codeLine">    BlockChain *PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2300</td>
    <td class="codeLine">    BlockChain *PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2301</td>
    <td class="codeLine">    if (!LoopBlockSet.count(Pred) &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2301</td>
    <td class="codeLine">    if (!LoopBlockSet.count(Pred) &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2302</td>
    <td class="codeLine">        (!PredChain || Pred == *std::prev(PredChain->end()))) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2302</td>
    <td class="codeLine">        (!PredChain || Pred == *std::prev(PredChain->end()))) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2303</td>
    <td class="codeLine">      // Found a Pred block can be placed before Top.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2303</td>
    <td class="codeLine">      // Found a Pred block can be placed before Top.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2304</td>
    <td class="codeLine">      // Check if Top is the best successor of Pred.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2304</td>
    <td class="codeLine">      // Check if Top is the best successor of Pred.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2305</td>
    <td class="codeLine">      auto TopProb = MBPI->getEdgeProbability(Pred, Top);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2305</td>
    <td class="codeLine">      auto TopProb = MBPI->getEdgeProbability(Pred, Top);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2306</td>
    <td class="codeLine">      bool TopOK = true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2306</td>
    <td class="codeLine">      bool TopOK = true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2307</td>
    <td class="codeLine">      for (MachineBasicBlock *Succ : Pred->successors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2307</td>
    <td class="codeLine">      for (MachineBasicBlock *Succ : Pred->successors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2308</td>
    <td class="codeLine">        auto SuccProb = MBPI->getEdgeProbability(Pred, Succ);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2308</td>
    <td class="codeLine">        auto SuccProb = MBPI->getEdgeProbability(Pred, Succ);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2309</td>
    <td class="codeLine">        BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2309</td>
    <td class="codeLine">        BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2310</td>
    <td class="codeLine">        // Check if Succ can be placed after Pred.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2310</td>
    <td class="codeLine">        // Check if Succ can be placed after Pred.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2311</td>
    <td class="codeLine">        // Succ should not be in any chain, or it is the head of some chain.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2311</td>
    <td class="codeLine">        // Succ should not be in any chain, or it is the head of some chain.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2312</td>
    <td class="codeLine">        if ((!SuccChain || Succ == *SuccChain->begin()) && SuccProb > TopProb) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2312</td>
    <td class="codeLine">        if ((!SuccChain || Succ == *SuccChain->begin()) && SuccProb > TopProb) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2313</td>
    <td class="codeLine">          TopOK = false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2313</td>
    <td class="codeLine">          TopOK = false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2314</td>
    <td class="codeLine">          break;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2314</td>
    <td class="codeLine">          break;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2315</td>
    <td class="codeLine">        }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2315</td>
    <td class="codeLine">        }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2316</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2316</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2317</td>
    <td class="codeLine">      if (TopOK)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2317</td>
    <td class="codeLine">      if (TopOK)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2318</td>
    <td class="codeLine">        return true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2318</td>
    <td class="codeLine">        return true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2319</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2319</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2320</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2320</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2321</td>
    <td class="codeLine">  return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2321</td>
    <td class="codeLine">  return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2322</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2322</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2323</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2323</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2324</td>
    <td class="codeLine">/// Attempt to rotate an exiting block to the bottom of the loop.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2324</td>
    <td class="codeLine">/// Attempt to rotate an exiting block to the bottom of the loop.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2325</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2325</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2326</td>
    <td class="codeLine">/// Once we have built a chain, try to rotate it to line up the hot exit block</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2326</td>
    <td class="codeLine">/// Once we have built a chain, try to rotate it to line up the hot exit block</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2327</td>
    <td class="codeLine">/// with fallthrough out of the loop if doing so doesn't introduce unnecessary</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2327</td>
    <td class="codeLine">/// with fallthrough out of the loop if doing so doesn't introduce unnecessary</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2328</td>
    <td class="codeLine">/// branches. For example, if the loop has fallthrough into its header and out</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2328</td>
    <td class="codeLine">/// branches. For example, if the loop has fallthrough into its header and out</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2329</td>
    <td class="codeLine">/// of its bottom already, don't rotate it.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2329</td>
    <td class="codeLine">/// of its bottom already, don't rotate it.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2330</td>
    <td class="codeLine">void MachineBlockPlacement::rotateLoop(BlockChain &LoopChain,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2330</td>
    <td class="codeLine">void MachineBlockPlacement::rotateLoop(BlockChain &LoopChain,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2331</td>
    <td class="codeLine">                                       const MachineBasicBlock *ExitingBB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2331</td>
    <td class="codeLine">                                       const MachineBasicBlock *ExitingBB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2332</td>
    <td class="codeLine">                                       BlockFrequency ExitFreq,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2332</td>
    <td class="codeLine">                                       BlockFrequency ExitFreq,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2333</td>
    <td class="codeLine">                                       const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2333</td>
    <td class="codeLine">                                       const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2334</td>
    <td class="codeLine">  if (!ExitingBB)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2334</td>
    <td class="codeLine">  if (!ExitingBB)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2335</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2335</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2336</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2336</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2337</td>
    <td class="codeLine">  MachineBasicBlock *Top = *LoopChain.begin();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2337</td>
    <td class="codeLine">  MachineBasicBlock *Top = *LoopChain.begin();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2338</td>
    <td class="codeLine">  MachineBasicBlock *Bottom = *std::prev(LoopChain.end());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2338</td>
    <td class="codeLine">  MachineBasicBlock *Bottom = *std::prev(LoopChain.end());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2339</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2339</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2340</td>
    <td class="codeLine">  // If ExitingBB is already the last one in a chain then nothing to do.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2340</td>
    <td class="codeLine">  // If ExitingBB is already the last one in a chain then nothing to do.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2341</td>
    <td class="codeLine">  if (Bottom == ExitingBB)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2341</td>
    <td class="codeLine">  if (Bottom == ExitingBB)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2342</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2342</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2343</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2343</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2344</td>
    <td class="codeLine">  // The entry block should always be the first BB in a function.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2344</td>
    <td class="codeLine">  // The entry block should always be the first BB in a function.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2345</td>
    <td class="codeLine">  if (Top->isEntryBlock())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2345</td>
    <td class="codeLine">  if (Top->isEntryBlock())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2346</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2346</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2347</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2347</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2348</td>
    <td class="codeLine">  bool ViableTopFallthrough = hasViableTopFallthrough(Top, LoopBlockSet);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2348</td>
    <td class="codeLine">  bool ViableTopFallthrough = hasViableTopFallthrough(Top, LoopBlockSet);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2349</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2349</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2350</td>
    <td class="codeLine">  // If the header has viable fallthrough, check whether the current loop</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2350</td>
    <td class="codeLine">  // If the header has viable fallthrough, check whether the current loop</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2351</td>
    <td class="codeLine">  // bottom is a viable exiting block. If so, bail out as rotating will</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2351</td>
    <td class="codeLine">  // bottom is a viable exiting block. If so, bail out as rotating will</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2352</td>
    <td class="codeLine">  // introduce an unnecessary branch.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2352</td>
    <td class="codeLine">  // introduce an unnecessary branch.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2353</td>
    <td class="codeLine">  if (ViableTopFallthrough) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2353</td>
    <td class="codeLine">  if (ViableTopFallthrough) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2354</td>
    <td class="codeLine">    for (MachineBasicBlock *Succ : Bottom->successors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2354</td>
    <td class="codeLine">    for (MachineBasicBlock *Succ : Bottom->successors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2355</td>
    <td class="codeLine">      BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2355</td>
    <td class="codeLine">      BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2356</td>
    <td class="codeLine">      if (!LoopBlockSet.count(Succ) &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2356</td>
    <td class="codeLine">      if (!LoopBlockSet.count(Succ) &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2357</td>
    <td class="codeLine">          (!SuccChain || Succ == *SuccChain->begin()))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2357</td>
    <td class="codeLine">          (!SuccChain || Succ == *SuccChain->begin()))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2358</td>
    <td class="codeLine">        return;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2358</td>
    <td class="codeLine">        return;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2359</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2359</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2360</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2360</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2361</td>
    <td class="codeLine">    // Rotate will destroy the top fallthrough, we need to ensure the new exit</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2361</td>
    <td class="codeLine">    // Rotate will destroy the top fallthrough, we need to ensure the new exit</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2362</td>
    <td class="codeLine">    // frequency is larger than top fallthrough.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2362</td>
    <td class="codeLine">    // frequency is larger than top fallthrough.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2363</td>
    <td class="codeLine">    BlockFrequency FallThrough2Top = TopFallThroughFreq(Top, LoopBlockSet);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2363</td>
    <td class="codeLine">    BlockFrequency FallThrough2Top = TopFallThroughFreq(Top, LoopBlockSet);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2364</td>
    <td class="codeLine">    if (FallThrough2Top >= ExitFreq)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2364</td>
    <td class="codeLine">    if (FallThrough2Top >= ExitFreq)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2365</td>
    <td class="codeLine">      return;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2365</td>
    <td class="codeLine">      return;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2366</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2366</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2367</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2367</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2368</td>
    <td class="codeLine">  BlockChain::iterator ExitIt = llvm::find(LoopChain, ExitingBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2368</td>
    <td class="codeLine">  BlockChain::iterator ExitIt = llvm::find(LoopChain, ExitingBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2369</td>
    <td class="codeLine">  if (ExitIt == LoopChain.end())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2369</td>
    <td class="codeLine">  if (ExitIt == LoopChain.end())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2370</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2370</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2371</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2371</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2372</td>
    <td class="codeLine">  // Rotating a loop exit to the bottom when there is a fallthrough to top</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2372</td>
    <td class="codeLine">  // Rotating a loop exit to the bottom when there is a fallthrough to top</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2373</td>
    <td class="codeLine">  // trades the entry fallthrough for an exit fallthrough.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2373</td>
    <td class="codeLine">  // trades the entry fallthrough for an exit fallthrough.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2374</td>
    <td class="codeLine">  // If there is no bottom->top edge, but the chosen exit block does have</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2374</td>
    <td class="codeLine">  // If there is no bottom->top edge, but the chosen exit block does have</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2375</td>
    <td class="codeLine">  // a fallthrough, we break that fallthrough for nothing in return.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2375</td>
    <td class="codeLine">  // a fallthrough, we break that fallthrough for nothing in return.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2376</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2376</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2377</td>
    <td class="codeLine">  // Let's consider an example. We have a built chain of basic blocks</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2377</td>
    <td class="codeLine">  // Let's consider an example. We have a built chain of basic blocks</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2378</td>
    <td class="codeLine">  // B1, B2, ..., Bn, where Bk is a ExitingBB - chosen exit block.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2378</td>
    <td class="codeLine">  // B1, B2, ..., Bn, where Bk is a ExitingBB - chosen exit block.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2379</td>
    <td class="codeLine">  // By doing a rotation we get</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2379</td>
    <td class="codeLine">  // By doing a rotation we get</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2380</td>
    <td class="codeLine">  // Bk+1, ..., Bn, B1, ..., Bk</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2380</td>
    <td class="codeLine">  // Bk+1, ..., Bn, B1, ..., Bk</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2381</td>
    <td class="codeLine">  // Break of fallthrough to B1 is compensated by a fallthrough from Bk.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2381</td>
    <td class="codeLine">  // Break of fallthrough to B1 is compensated by a fallthrough from Bk.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2382</td>
    <td class="codeLine">  // If we had a fallthrough Bk -> Bk+1 it is broken now.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2382</td>
    <td class="codeLine">  // If we had a fallthrough Bk -> Bk+1 it is broken now.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2383</td>
    <td class="codeLine">  // It might be compensated by fallthrough Bn -> B1.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2383</td>
    <td class="codeLine">  // It might be compensated by fallthrough Bn -> B1.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2384</td>
    <td class="codeLine">  // So we have a condition to avoid creation of extra branch by loop rotation.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2384</td>
    <td class="codeLine">  // So we have a condition to avoid creation of extra branch by loop rotation.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2385</td>
    <td class="codeLine">  // All below must be true to avoid loop rotation:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2385</td>
    <td class="codeLine">  // All below must be true to avoid loop rotation:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2386</td>
    <td class="codeLine">  //   If there is a fallthrough to top (B1)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2386</td>
    <td class="codeLine">  //   If there is a fallthrough to top (B1)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2387</td>
    <td class="codeLine">  //   There was fallthrough from chosen exit block (Bk) to next one (Bk+1)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2387</td>
    <td class="codeLine">  //   There was fallthrough from chosen exit block (Bk) to next one (Bk+1)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2388</td>
    <td class="codeLine">  //   There is no fallthrough from bottom (Bn) to top (B1).</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2388</td>
    <td class="codeLine">  //   There is no fallthrough from bottom (Bn) to top (B1).</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2389</td>
    <td class="codeLine">  // Please note that there is no exit fallthrough from Bn because we checked it</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2389</td>
    <td class="codeLine">  // Please note that there is no exit fallthrough from Bn because we checked it</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2390</td>
    <td class="codeLine">  // above.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2390</td>
    <td class="codeLine">  // above.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2391</td>
    <td class="codeLine">  if (ViableTopFallthrough) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2391</td>
    <td class="codeLine">  if (ViableTopFallthrough) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2392</td>
    <td class="codeLine">    assert(std::next(ExitIt) != LoopChain.end() &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2392</td>
    <td class="codeLine">    assert(std::next(ExitIt) != LoopChain.end() &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2393</td>
    <td class="codeLine">           "Exit should not be last BB");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2393</td>
    <td class="codeLine">           "Exit should not be last BB");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2394</td>
    <td class="codeLine">    MachineBasicBlock *NextBlockInChain = *std::next(ExitIt);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2394</td>
    <td class="codeLine">    MachineBasicBlock *NextBlockInChain = *std::next(ExitIt);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2395</td>
    <td class="codeLine">    if (ExitingBB->isSuccessor(NextBlockInChain))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2395</td>
    <td class="codeLine">    if (ExitingBB->isSuccessor(NextBlockInChain))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2396</td>
    <td class="codeLine">      if (!Bottom->isSuccessor(Top))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2396</td>
    <td class="codeLine">      if (!Bottom->isSuccessor(Top))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2397</td>
    <td class="codeLine">        return;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2397</td>
    <td class="codeLine">        return;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2398</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2398</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2399</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2399</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2400</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "Rotating loop to put exit " << getBlockName(ExitingBB)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2400</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "Rotating loop to put exit " << getBlockName(ExitingBB)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2401</td>
    <td class="codeLine">                    << " at bottom\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2401</td>
    <td class="codeLine">                    << " at bottom\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2402</td>
    <td class="codeLine">  std::rotate(LoopChain.begin(), std::next(ExitIt), LoopChain.end());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2402</td>
    <td class="codeLine">  std::rotate(LoopChain.begin(), std::next(ExitIt), LoopChain.end());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2403</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2403</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2404</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2404</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2405</td>
    <td class="codeLine">/// Attempt to rotate a loop based on profile data to reduce branch cost.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2405</td>
    <td class="codeLine">/// Attempt to rotate a loop based on profile data to reduce branch cost.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2406</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2406</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2407</td>
    <td class="codeLine">/// With profile data, we can determine the cost in terms of missed fall through</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2407</td>
    <td class="codeLine">/// With profile data, we can determine the cost in terms of missed fall through</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2408</td>
    <td class="codeLine">/// opportunities when rotating a loop chain and select the best rotation.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2408</td>
    <td class="codeLine">/// opportunities when rotating a loop chain and select the best rotation.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2409</td>
    <td class="codeLine">/// Basically, there are three kinds of cost to consider for each rotation:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2409</td>
    <td class="codeLine">/// Basically, there are three kinds of cost to consider for each rotation:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2410</td>
    <td class="codeLine">///    1. The possibly missed fall through edge (if it exists) from BB out of</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2410</td>
    <td class="codeLine">///    1. The possibly missed fall through edge (if it exists) from BB out of</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2411</td>
    <td class="codeLine">///    the loop to the loop header.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2411</td>
    <td class="codeLine">///    the loop to the loop header.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2412</td>
    <td class="codeLine">///    2. The possibly missed fall through edges (if they exist) from the loop</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2412</td>
    <td class="codeLine">///    2. The possibly missed fall through edges (if they exist) from the loop</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2413</td>
    <td class="codeLine">///    exits to BB out of the loop.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2413</td>
    <td class="codeLine">///    exits to BB out of the loop.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2414</td>
    <td class="codeLine">///    3. The missed fall through edge (if it exists) from the last BB to the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2414</td>
    <td class="codeLine">///    3. The missed fall through edge (if it exists) from the last BB to the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2415</td>
    <td class="codeLine">///    first BB in the loop chain.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2415</td>
    <td class="codeLine">///    first BB in the loop chain.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2416</td>
    <td class="codeLine">///  Therefore, the cost for a given rotation is the sum of costs listed above.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2416</td>
    <td class="codeLine">///  Therefore, the cost for a given rotation is the sum of costs listed above.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2417</td>
    <td class="codeLine">///  We select the best rotation with the smallest cost.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2417</td>
    <td class="codeLine">///  We select the best rotation with the smallest cost.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2418</td>
    <td class="codeLine">void MachineBlockPlacement::rotateLoopWithProfile(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2418</td>
    <td class="codeLine">void MachineBlockPlacement::rotateLoopWithProfile(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2419</td>
    <td class="codeLine">    BlockChain &LoopChain, const MachineLoop &L,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2419</td>
    <td class="codeLine">    BlockChain &LoopChain, const MachineLoop &L,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2420</td>
    <td class="codeLine">    const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2420</td>
    <td class="codeLine">    const BlockFilterSet &LoopBlockSet) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2421</td>
    <td class="codeLine">  auto RotationPos = LoopChain.end();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2421</td>
    <td class="codeLine">  auto RotationPos = LoopChain.end();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2422</td>
    <td class="codeLine">  MachineBasicBlock *ChainHeaderBB = *LoopChain.begin();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2422</td>
    <td class="codeLine">  MachineBasicBlock *ChainHeaderBB = *LoopChain.begin();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2423</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2423</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2424</td>
    <td class="codeLine">  // The entry block should always be the first BB in a function.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2424</td>
    <td class="codeLine">  // The entry block should always be the first BB in a function.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2425</td>
    <td class="codeLine">  if (ChainHeaderBB->isEntryBlock())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2425</td>
    <td class="codeLine">  if (ChainHeaderBB->isEntryBlock())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2426</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2426</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2427</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2427</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2428</td>
    <td class="codeLine">  BlockFrequency SmallestRotationCost = BlockFrequency::getMaxFrequency();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2428</td>
    <td class="codeLine">  BlockFrequency SmallestRotationCost = BlockFrequency::getMaxFrequency();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2429</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2429</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2430</td>
    <td class="codeLine">  // A utility lambda that scales up a block frequency by dividing it by a</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2430</td>
    <td class="codeLine">  // A utility lambda that scales up a block frequency by dividing it by a</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2431</td>
    <td class="codeLine">  // branch probability which is the reciprocal of the scale.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2431</td>
    <td class="codeLine">  // branch probability which is the reciprocal of the scale.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2432</td>
    <td class="codeLine">  auto ScaleBlockFrequency = [](BlockFrequency Freq,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2432</td>
    <td class="codeLine">  auto ScaleBlockFrequency = [](BlockFrequency Freq,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2433</td>
    <td class="codeLine">                                unsigned Scale) -> BlockFrequency {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2433</td>
    <td class="codeLine">                                unsigned Scale) -> BlockFrequency {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2434</td>
    <td class="codeLine">    if (Scale == 0)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2434</td>
    <td class="codeLine">    if (Scale == 0)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2435</td>
    <td class="codeLine">      return 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2435</td>
    <td class="codeLine">      return 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2436</td>
    <td class="codeLine">    // Use operator / between BlockFrequency and BranchProbability to implement</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2436</td>
    <td class="codeLine">    // Use operator / between BlockFrequency and BranchProbability to implement</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2437</td>
    <td class="codeLine">    // saturating multiplication.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2437</td>
    <td class="codeLine">    // saturating multiplication.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2438</td>
    <td class="codeLine">    return Freq / BranchProbability(1, Scale);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2438</td>
    <td class="codeLine">    return Freq / BranchProbability(1, Scale);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2439</td>
    <td class="codeLine">  };</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2439</td>
    <td class="codeLine">  };</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2440</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2440</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2441</td>
    <td class="codeLine">  // Compute the cost of the missed fall-through edge to the loop header if the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2441</td>
    <td class="codeLine">  // Compute the cost of the missed fall-through edge to the loop header if the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2442</td>
    <td class="codeLine">  // chain head is not the loop header. As we only consider natural loops with</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2442</td>
    <td class="codeLine">  // chain head is not the loop header. As we only consider natural loops with</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2443</td>
    <td class="codeLine">  // single header, this computation can be done only once.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2443</td>
    <td class="codeLine">  // single header, this computation can be done only once.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2444</td>
    <td class="codeLine">  BlockFrequency HeaderFallThroughCost(0);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2444</td>
    <td class="codeLine">  BlockFrequency HeaderFallThroughCost(0);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2445</td>
    <td class="codeLine">  for (auto *Pred : ChainHeaderBB->predecessors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2445</td>
    <td class="codeLine">  for (auto *Pred : ChainHeaderBB->predecessors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2446</td>
    <td class="codeLine">    BlockChain *PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2446</td>
    <td class="codeLine">    BlockChain *PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2447</td>
    <td class="codeLine">    if (!LoopBlockSet.count(Pred) &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2447</td>
    <td class="codeLine">    if (!LoopBlockSet.count(Pred) &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2448</td>
    <td class="codeLine">        (!PredChain || Pred == *std::prev(PredChain->end()))) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2448</td>
    <td class="codeLine">        (!PredChain || Pred == *std::prev(PredChain->end()))) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2449</td>
    <td class="codeLine">      auto EdgeFreq = MBFI->getBlockFreq(Pred) *</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2449</td>
    <td class="codeLine">      auto EdgeFreq = MBFI->getBlockFreq(Pred) *</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2450</td>
    <td class="codeLine">          MBPI->getEdgeProbability(Pred, ChainHeaderBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2450</td>
    <td class="codeLine">          MBPI->getEdgeProbability(Pred, ChainHeaderBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2451</td>
    <td class="codeLine">      auto FallThruCost = ScaleBlockFrequency(EdgeFreq, MisfetchCost);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2451</td>
    <td class="codeLine">      auto FallThruCost = ScaleBlockFrequency(EdgeFreq, MisfetchCost);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2452</td>
    <td class="codeLine">      // If the predecessor has only an unconditional jump to the header, we</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2452</td>
    <td class="codeLine">      // If the predecessor has only an unconditional jump to the header, we</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2453</td>
    <td class="codeLine">      // need to consider the cost of this jump.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2453</td>
    <td class="codeLine">      // need to consider the cost of this jump.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2454</td>
    <td class="codeLine">      if (Pred->succ_size() == 1)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2454</td>
    <td class="codeLine">      if (Pred->succ_size() == 1)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2455</td>
    <td class="codeLine">        FallThruCost += ScaleBlockFrequency(EdgeFreq, JumpInstCost);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2455</td>
    <td class="codeLine">        FallThruCost += ScaleBlockFrequency(EdgeFreq, JumpInstCost);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2456</td>
    <td class="codeLine">      HeaderFallThroughCost = std::max(HeaderFallThroughCost, FallThruCost);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2456</td>
    <td class="codeLine">      HeaderFallThroughCost = std::max(HeaderFallThroughCost, FallThruCost);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2457</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2457</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2458</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2458</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2459</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2459</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2460</td>
    <td class="codeLine">  // Here we collect all exit blocks in the loop, and for each exit we find out</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2460</td>
    <td class="codeLine">  // Here we collect all exit blocks in the loop, and for each exit we find out</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2461</td>
    <td class="codeLine">  // its hottest exit edge. For each loop rotation, we define the loop exit cost</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2461</td>
    <td class="codeLine">  // its hottest exit edge. For each loop rotation, we define the loop exit cost</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2462</td>
    <td class="codeLine">  // as the sum of frequencies of exit edges we collect here, excluding the exit</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2462</td>
    <td class="codeLine">  // as the sum of frequencies of exit edges we collect here, excluding the exit</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2463</td>
    <td class="codeLine">  // edge from the tail of the loop chain.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2463</td>
    <td class="codeLine">  // edge from the tail of the loop chain.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2464</td>
    <td class="codeLine">  SmallVector<std::pair<MachineBasicBlock *, BlockFrequency>, 4> ExitsWithFreq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2464</td>
    <td class="codeLine">  SmallVector<std::pair<MachineBasicBlock *, BlockFrequency>, 4> ExitsWithFreq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2465</td>
    <td class="codeLine">  for (auto *BB : LoopChain) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2465</td>
    <td class="codeLine">  for (auto *BB : LoopChain) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2466</td>
    <td class="codeLine">    auto LargestExitEdgeProb = BranchProbability::getZero();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2466</td>
    <td class="codeLine">    auto LargestExitEdgeProb = BranchProbability::getZero();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2467</td>
    <td class="codeLine">    for (auto *Succ : BB->successors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2467</td>
    <td class="codeLine">    for (auto *Succ : BB->successors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2468</td>
    <td class="codeLine">      BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2468</td>
    <td class="codeLine">      BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2469</td>
    <td class="codeLine">      if (!LoopBlockSet.count(Succ) &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2469</td>
    <td class="codeLine">      if (!LoopBlockSet.count(Succ) &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2470</td>
    <td class="codeLine">          (!SuccChain || Succ == *SuccChain->begin())) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2470</td>
    <td class="codeLine">          (!SuccChain || Succ == *SuccChain->begin())) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2471</td>
    <td class="codeLine">        auto SuccProb = MBPI->getEdgeProbability(BB, Succ);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2471</td>
    <td class="codeLine">        auto SuccProb = MBPI->getEdgeProbability(BB, Succ);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2472</td>
    <td class="codeLine">        LargestExitEdgeProb = std::max(LargestExitEdgeProb, SuccProb);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2472</td>
    <td class="codeLine">        LargestExitEdgeProb = std::max(LargestExitEdgeProb, SuccProb);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2473</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2473</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2474</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2474</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2475</td>
    <td class="codeLine">    if (LargestExitEdgeProb > BranchProbability::getZero()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2475</td>
    <td class="codeLine">    if (LargestExitEdgeProb > BranchProbability::getZero()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2476</td>
    <td class="codeLine">      auto ExitFreq = MBFI->getBlockFreq(BB) * LargestExitEdgeProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2476</td>
    <td class="codeLine">      auto ExitFreq = MBFI->getBlockFreq(BB) * LargestExitEdgeProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2477</td>
    <td class="codeLine">      ExitsWithFreq.emplace_back(BB, ExitFreq);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2477</td>
    <td class="codeLine">      ExitsWithFreq.emplace_back(BB, ExitFreq);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2478</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2478</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2479</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2479</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2480</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2480</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2481</td>
    <td class="codeLine">  // In this loop we iterate every block in the loop chain and calculate the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2481</td>
    <td class="codeLine">  // In this loop we iterate every block in the loop chain and calculate the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2482</td>
    <td class="codeLine">  // cost assuming the block is the head of the loop chain. When the loop ends,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2482</td>
    <td class="codeLine">  // cost assuming the block is the head of the loop chain. When the loop ends,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2483</td>
    <td class="codeLine">  // we should have found the best candidate as the loop chain's head.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2483</td>
    <td class="codeLine">  // we should have found the best candidate as the loop chain's head.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2484</td>
    <td class="codeLine">  for (auto Iter = LoopChain.begin(), TailIter = std::prev(LoopChain.end()),</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2484</td>
    <td class="codeLine">  for (auto Iter = LoopChain.begin(), TailIter = std::prev(LoopChain.end()),</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2485</td>
    <td class="codeLine">            EndIter = LoopChain.end();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2485</td>
    <td class="codeLine">            EndIter = LoopChain.end();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2486</td>
    <td class="codeLine">       Iter != EndIter; Iter++, TailIter++) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2486</td>
    <td class="codeLine">       Iter != EndIter; Iter++, TailIter++) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2487</td>
    <td class="codeLine">    // TailIter is used to track the tail of the loop chain if the block we are</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2487</td>
    <td class="codeLine">    // TailIter is used to track the tail of the loop chain if the block we are</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2488</td>
    <td class="codeLine">    // checking (pointed by Iter) is the head of the chain.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2488</td>
    <td class="codeLine">    // checking (pointed by Iter) is the head of the chain.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2489</td>
    <td class="codeLine">    if (TailIter == LoopChain.end())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2489</td>
    <td class="codeLine">    if (TailIter == LoopChain.end())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2490</td>
    <td class="codeLine">      TailIter = LoopChain.begin();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2490</td>
    <td class="codeLine">      TailIter = LoopChain.begin();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2491</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2491</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2492</td>
    <td class="codeLine">    auto TailBB = *TailIter;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2492</td>
    <td class="codeLine">    auto TailBB = *TailIter;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2493</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2493</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2494</td>
    <td class="codeLine">    // Calculate the cost by putting this BB to the top.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2494</td>
    <td class="codeLine">    // Calculate the cost by putting this BB to the top.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2495</td>
    <td class="codeLine">    BlockFrequency Cost = 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2495</td>
    <td class="codeLine">    BlockFrequency Cost = 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2496</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2496</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2497</td>
    <td class="codeLine">    // If the current BB is the loop header, we need to take into account the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2497</td>
    <td class="codeLine">    // If the current BB is the loop header, we need to take into account the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2498</td>
    <td class="codeLine">    // cost of the missed fall through edge from outside of the loop to the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2498</td>
    <td class="codeLine">    // cost of the missed fall through edge from outside of the loop to the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2499</td>
    <td class="codeLine">    // header.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2499</td>
    <td class="codeLine">    // header.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2500</td>
    <td class="codeLine">    if (Iter != LoopChain.begin())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2500</td>
    <td class="codeLine">    if (Iter != LoopChain.begin())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2501</td>
    <td class="codeLine">      Cost += HeaderFallThroughCost;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2501</td>
    <td class="codeLine">      Cost += HeaderFallThroughCost;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2502</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2502</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2503</td>
    <td class="codeLine">    // Collect the loop exit cost by summing up frequencies of all exit edges</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2503</td>
    <td class="codeLine">    // Collect the loop exit cost by summing up frequencies of all exit edges</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2504</td>
    <td class="codeLine">    // except the one from the chain tail.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2504</td>
    <td class="codeLine">    // except the one from the chain tail.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2505</td>
    <td class="codeLine">    for (auto &ExitWithFreq : ExitsWithFreq)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2505</td>
    <td class="codeLine">    for (auto &ExitWithFreq : ExitsWithFreq)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2506</td>
    <td class="codeLine">      if (TailBB != ExitWithFreq.first)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2506</td>
    <td class="codeLine">      if (TailBB != ExitWithFreq.first)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2507</td>
    <td class="codeLine">        Cost += ExitWithFreq.second;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2507</td>
    <td class="codeLine">        Cost += ExitWithFreq.second;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2508</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2508</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2509</td>
    <td class="codeLine">    // The cost of breaking the once fall-through edge from the tail to the top</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2509</td>
    <td class="codeLine">    // The cost of breaking the once fall-through edge from the tail to the top</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2510</td>
    <td class="codeLine">    // of the loop chain. Here we need to consider three cases:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2510</td>
    <td class="codeLine">    // of the loop chain. Here we need to consider three cases:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2511</td>
    <td class="codeLine">    // 1. If the tail node has only one successor, then we will get an</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2511</td>
    <td class="codeLine">    // 1. If the tail node has only one successor, then we will get an</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2512</td>
    <td class="codeLine">    //    additional jmp instruction. So the cost here is (MisfetchCost +</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2512</td>
    <td class="codeLine">    //    additional jmp instruction. So the cost here is (MisfetchCost +</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2513</td>
    <td class="codeLine">    //    JumpInstCost) * tail node frequency.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2513</td>
    <td class="codeLine">    //    JumpInstCost) * tail node frequency.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2514</td>
    <td class="codeLine">    // 2. If the tail node has two successors, then we may still get an</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2514</td>
    <td class="codeLine">    // 2. If the tail node has two successors, then we may still get an</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2515</td>
    <td class="codeLine">    //    additional jmp instruction if the layout successor after the loop</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2515</td>
    <td class="codeLine">    //    additional jmp instruction if the layout successor after the loop</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2516</td>
    <td class="codeLine">    //    chain is not its CFG successor. Note that the more frequently executed</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2516</td>
    <td class="codeLine">    //    chain is not its CFG successor. Note that the more frequently executed</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2517</td>
    <td class="codeLine">    //    jmp instruction will be put ahead of the other one. Assume the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2517</td>
    <td class="codeLine">    //    jmp instruction will be put ahead of the other one. Assume the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2518</td>
    <td class="codeLine">    //    frequency of those two branches are x and y, where x is the frequency</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2518</td>
    <td class="codeLine">    //    frequency of those two branches are x and y, where x is the frequency</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2519</td>
    <td class="codeLine">    //    of the edge to the chain head, then the cost will be</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2519</td>
    <td class="codeLine">    //    of the edge to the chain head, then the cost will be</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2520</td>
    <td class="codeLine">    //    (x * MisfetechCost + min(x, y) * JumpInstCost) * tail node frequency.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2520</td>
    <td class="codeLine">    //    (x * MisfetechCost + min(x, y) * JumpInstCost) * tail node frequency.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2521</td>
    <td class="codeLine">    // 3. If the tail node has more than two successors (this rarely happens),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2521</td>
    <td class="codeLine">    // 3. If the tail node has more than two successors (this rarely happens),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2522</td>
    <td class="codeLine">    //    we won't consider any additional cost.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2522</td>
    <td class="codeLine">    //    we won't consider any additional cost.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2523</td>
    <td class="codeLine">    if (TailBB->isSuccessor(*Iter)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2523</td>
    <td class="codeLine">    if (TailBB->isSuccessor(*Iter)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2524</td>
    <td class="codeLine">      auto TailBBFreq = MBFI->getBlockFreq(TailBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2524</td>
    <td class="codeLine">      auto TailBBFreq = MBFI->getBlockFreq(TailBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2525</td>
    <td class="codeLine">      if (TailBB->succ_size() == 1)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2525</td>
    <td class="codeLine">      if (TailBB->succ_size() == 1)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2526</td>
    <td class="codeLine">        Cost += ScaleBlockFrequency(TailBBFreq.getFrequency(),</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2526</td>
    <td class="codeLine">        Cost += ScaleBlockFrequency(TailBBFreq.getFrequency(),</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2527</td>
    <td class="codeLine">                                    MisfetchCost + JumpInstCost);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2527</td>
    <td class="codeLine">                                    MisfetchCost + JumpInstCost);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2528</td>
    <td class="codeLine">      else if (TailBB->succ_size() == 2) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2528</td>
    <td class="codeLine">      else if (TailBB->succ_size() == 2) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2529</td>
    <td class="codeLine">        auto TailToHeadProb = MBPI->getEdgeProbability(TailBB, *Iter);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2529</td>
    <td class="codeLine">        auto TailToHeadProb = MBPI->getEdgeProbability(TailBB, *Iter);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2530</td>
    <td class="codeLine">        auto TailToHeadFreq = TailBBFreq * TailToHeadProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2530</td>
    <td class="codeLine">        auto TailToHeadFreq = TailBBFreq * TailToHeadProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2531</td>
    <td class="codeLine">        auto ColderEdgeFreq = TailToHeadProb > BranchProbability(1, 2)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2531</td>
    <td class="codeLine">        auto ColderEdgeFreq = TailToHeadProb > BranchProbability(1, 2)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2532</td>
    <td class="codeLine">                                  ? TailBBFreq * TailToHeadProb.getCompl()</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2532</td>
    <td class="codeLine">                                  ? TailBBFreq * TailToHeadProb.getCompl()</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2533</td>
    <td class="codeLine">                                  : TailToHeadFreq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2533</td>
    <td class="codeLine">                                  : TailToHeadFreq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2534</td>
    <td class="codeLine">        Cost += ScaleBlockFrequency(TailToHeadFreq, MisfetchCost) +</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2534</td>
    <td class="codeLine">        Cost += ScaleBlockFrequency(TailToHeadFreq, MisfetchCost) +</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2535</td>
    <td class="codeLine">                ScaleBlockFrequency(ColderEdgeFreq, JumpInstCost);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2535</td>
    <td class="codeLine">                ScaleBlockFrequency(ColderEdgeFreq, JumpInstCost);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2536</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2536</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2537</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2537</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2538</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2538</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2539</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "The cost of loop rotation by making "</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2539</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "The cost of loop rotation by making "</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2540</td>
    <td class="codeLine">                      << getBlockName(*Iter)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2540</td>
    <td class="codeLine">                      << getBlockName(*Iter)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2541</td>
    <td class="codeLine">                      << " to the top: " << Cost.getFrequency() << "\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2541</td>
    <td class="codeLine">                      << " to the top: " << Cost.getFrequency() << "\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2542</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2542</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2543</td>
    <td class="codeLine">    if (Cost < SmallestRotationCost) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2543</td>
    <td class="codeLine">    if (Cost < SmallestRotationCost) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2544</td>
    <td class="codeLine">      SmallestRotationCost = Cost;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2544</td>
    <td class="codeLine">      SmallestRotationCost = Cost;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2545</td>
    <td class="codeLine">      RotationPos = Iter;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2545</td>
    <td class="codeLine">      RotationPos = Iter;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2546</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2546</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2547</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2547</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2548</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2548</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2549</td>
    <td class="codeLine">  if (RotationPos != LoopChain.end()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2549</td>
    <td class="codeLine">  if (RotationPos != LoopChain.end()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2550</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "Rotate loop by making " << getBlockName(*RotationPos)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2550</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << "Rotate loop by making " << getBlockName(*RotationPos)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2551</td>
    <td class="codeLine">                      << " to the top\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2551</td>
    <td class="codeLine">                      << " to the top\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2552</td>
    <td class="codeLine">    std::rotate(LoopChain.begin(), RotationPos, LoopChain.end());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2552</td>
    <td class="codeLine">    std::rotate(LoopChain.begin(), RotationPos, LoopChain.end());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2553</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2553</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2554</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2554</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2555</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2555</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2556</td>
    <td class="codeLine">/// Collect blocks in the given loop that are to be placed.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2556</td>
    <td class="codeLine">/// Collect blocks in the given loop that are to be placed.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2557</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2557</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2558</td>
    <td class="codeLine">/// When profile data is available, exclude cold blocks from the returned set;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2558</td>
    <td class="codeLine">/// When profile data is available, exclude cold blocks from the returned set;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2559</td>
    <td class="codeLine">/// otherwise, collect all blocks in the loop.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2559</td>
    <td class="codeLine">/// otherwise, collect all blocks in the loop.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2560</td>
    <td class="codeLine">MachineBlockPlacement::BlockFilterSet</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2560</td>
    <td class="codeLine">MachineBlockPlacement::BlockFilterSet</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2561</td>
    <td class="codeLine">MachineBlockPlacement::collectLoopBlockSet(const MachineLoop &L) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2561</td>
    <td class="codeLine">MachineBlockPlacement::collectLoopBlockSet(const MachineLoop &L) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2562</td>
    <td class="codeLine">  BlockFilterSet LoopBlockSet;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2562</td>
    <td class="codeLine">  BlockFilterSet LoopBlockSet;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2563</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2563</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2564</td>
    <td class="codeLine">  // Filter cold blocks off from LoopBlockSet when profile data is available.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2564</td>
    <td class="codeLine">  // Filter cold blocks off from LoopBlockSet when profile data is available.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2565</td>
    <td class="codeLine">  // Collect the sum of frequencies of incoming edges to the loop header from</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2565</td>
    <td class="codeLine">  // Collect the sum of frequencies of incoming edges to the loop header from</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2566</td>
    <td class="codeLine">  // outside. If we treat the loop as a super block, this is the frequency of</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2566</td>
    <td class="codeLine">  // outside. If we treat the loop as a super block, this is the frequency of</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2567</td>
    <td class="codeLine">  // the loop. Then for each block in the loop, we calculate the ratio between</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2567</td>
    <td class="codeLine">  // the loop. Then for each block in the loop, we calculate the ratio between</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2568</td>
    <td class="codeLine">  // its frequency and the frequency of the loop block. When it is too small,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2568</td>
    <td class="codeLine">  // its frequency and the frequency of the loop block. When it is too small,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2569</td>
    <td class="codeLine">  // don't add it to the loop chain. If there are outer loops, then this block</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2569</td>
    <td class="codeLine">  // don't add it to the loop chain. If there are outer loops, then this block</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2570</td>
    <td class="codeLine">  // will be merged into the first outer loop chain for which this block is not</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2570</td>
    <td class="codeLine">  // will be merged into the first outer loop chain for which this block is not</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2571</td>
    <td class="codeLine">  // cold anymore. This needs precise profile data and we only do this when</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2571</td>
    <td class="codeLine">  // cold anymore. This needs precise profile data and we only do this when</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2572</td>
    <td class="codeLine">  // profile data is available.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2572</td>
    <td class="codeLine">  // profile data is available.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2573</td>
    <td class="codeLine">  if (F->getFunction().hasProfileData() || ForceLoopColdBlock) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2573</td>
    <td class="codeLine">  if (F->getFunction().hasProfileData() || ForceLoopColdBlock) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2574</td>
    <td class="codeLine">    BlockFrequency LoopFreq(0);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2574</td>
    <td class="codeLine">    BlockFrequency LoopFreq(0);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2575</td>
    <td class="codeLine">    for (auto *LoopPred : L.getHeader()->predecessors())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2575</td>
    <td class="codeLine">    for (auto *LoopPred : L.getHeader()->predecessors())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2576</td>
    <td class="codeLine">      if (!L.contains(LoopPred))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2576</td>
    <td class="codeLine">      if (!L.contains(LoopPred))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2577</td>
    <td class="codeLine">        LoopFreq += MBFI->getBlockFreq(LoopPred) *</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2577</td>
    <td class="codeLine">        LoopFreq += MBFI->getBlockFreq(LoopPred) *</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2578</td>
    <td class="codeLine">                    MBPI->getEdgeProbability(LoopPred, L.getHeader());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2578</td>
    <td class="codeLine">                    MBPI->getEdgeProbability(LoopPred, L.getHeader());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2579</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2579</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2580</td>
    <td class="codeLine">    for (MachineBasicBlock *LoopBB : L.getBlocks()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2580</td>
    <td class="codeLine">    for (MachineBasicBlock *LoopBB : L.getBlocks()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2581</td>
    <td class="codeLine">      if (LoopBlockSet.count(LoopBB))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2581</td>
    <td class="codeLine">      if (LoopBlockSet.count(LoopBB))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2582</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2582</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2583</td>
    <td class="codeLine">      auto Freq = MBFI->getBlockFreq(LoopBB).getFrequency();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2583</td>
    <td class="codeLine">      auto Freq = MBFI->getBlockFreq(LoopBB).getFrequency();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2584</td>
    <td class="codeLine">      if (Freq == 0 || LoopFreq.getFrequency() / Freq > LoopToColdBlockRatio)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2584</td>
    <td class="codeLine">      if (Freq == 0 || LoopFreq.getFrequency() / Freq > LoopToColdBlockRatio)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2585</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2585</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2586</td>
    <td class="codeLine">      BlockChain *Chain = BlockToChain[LoopBB];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2586</td>
    <td class="codeLine">      BlockChain *Chain = BlockToChain[LoopBB];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2587</td>
    <td class="codeLine">      for (MachineBasicBlock *ChainBB : *Chain)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2587</td>
    <td class="codeLine">      for (MachineBasicBlock *ChainBB : *Chain)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2588</td>
    <td class="codeLine">        LoopBlockSet.insert(ChainBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2588</td>
    <td class="codeLine">        LoopBlockSet.insert(ChainBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2589</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2589</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2590</td>
    <td class="codeLine">  } else</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2590</td>
    <td class="codeLine">  } else</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2591</td>
    <td class="codeLine">    LoopBlockSet.insert(L.block_begin(), L.block_end());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2591</td>
    <td class="codeLine">    LoopBlockSet.insert(L.block_begin(), L.block_end());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2592</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2592</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2593</td>
    <td class="codeLine">  return LoopBlockSet;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2593</td>
    <td class="codeLine">  return LoopBlockSet;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2594</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2594</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2595</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2595</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2596</td>
    <td class="codeLine">/// Forms basic block chains from the natural loop structures.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2596</td>
    <td class="codeLine">/// Forms basic block chains from the natural loop structures.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2597</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2597</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2598</td>
    <td class="codeLine">/// These chains are designed to preserve the existing *structure* of the code</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2598</td>
    <td class="codeLine">/// These chains are designed to preserve the existing *structure* of the code</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2599</td>
    <td class="codeLine">/// as much as possible. We can then stitch the chains together in a way which</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2599</td>
    <td class="codeLine">/// as much as possible. We can then stitch the chains together in a way which</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2600</td>
    <td class="codeLine">/// both preserves the topological structure and minimizes taken conditional</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2600</td>
    <td class="codeLine">/// both preserves the topological structure and minimizes taken conditional</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2601</td>
    <td class="codeLine">/// branches.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2601</td>
    <td class="codeLine">/// branches.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2602</td>
    <td class="codeLine">void MachineBlockPlacement::buildLoopChains(const MachineLoop &L) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2602</td>
    <td class="codeLine">void MachineBlockPlacement::buildLoopChains(const MachineLoop &L) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2603</td>
    <td class="codeLine">  // First recurse through any nested loops, building chains for those inner</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2603</td>
    <td class="codeLine">  // First recurse through any nested loops, building chains for those inner</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2604</td>
    <td class="codeLine">  // loops.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2604</td>
    <td class="codeLine">  // loops.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2605</td>
    <td class="codeLine">  for (const MachineLoop *InnerLoop : L)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2605</td>
    <td class="codeLine">  for (const MachineLoop *InnerLoop : L)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2606</td>
    <td class="codeLine">    buildLoopChains(*InnerLoop);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2606</td>
    <td class="codeLine">    buildLoopChains(*InnerLoop);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2607</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2607</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2608</td>
    <td class="codeLine">  assert(BlockWorkList.empty() &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2608</td>
    <td class="codeLine">  assert(BlockWorkList.empty() &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2609</td>
    <td class="codeLine">         "BlockWorkList not empty when starting to build loop chains.");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2609</td>
    <td class="codeLine">         "BlockWorkList not empty when starting to build loop chains.");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2610</td>
    <td class="codeLine">  assert(EHPadWorkList.empty() &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2610</td>
    <td class="codeLine">  assert(EHPadWorkList.empty() &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2611</td>
    <td class="codeLine">         "EHPadWorkList not empty when starting to build loop chains.");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2611</td>
    <td class="codeLine">         "EHPadWorkList not empty when starting to build loop chains.");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2612</td>
    <td class="codeLine">  BlockFilterSet LoopBlockSet = collectLoopBlockSet(L);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2612</td>
    <td class="codeLine">  BlockFilterSet LoopBlockSet = collectLoopBlockSet(L);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2613</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2613</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2614</td>
    <td class="codeLine">  // Check if we have profile data for this function. If yes, we will rotate</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2614</td>
    <td class="codeLine">  // Check if we have profile data for this function. If yes, we will rotate</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2615</td>
    <td class="codeLine">  // this loop by modeling costs more precisely which requires the profile data</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2615</td>
    <td class="codeLine">  // this loop by modeling costs more precisely which requires the profile data</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2616</td>
    <td class="codeLine">  // for better layout.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2616</td>
    <td class="codeLine">  // for better layout.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2617</td>
    <td class="codeLine">  bool RotateLoopWithProfile =</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2617</td>
    <td class="codeLine">  bool RotateLoopWithProfile =</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2618</td>
    <td class="codeLine">      ForcePreciseRotationCost ||</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2618</td>
    <td class="codeLine">      ForcePreciseRotationCost ||</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2619</td>
    <td class="codeLine">      (PreciseRotationCost && F->getFunction().hasProfileData());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2619</td>
    <td class="codeLine">      (PreciseRotationCost && F->getFunction().hasProfileData());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2620</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2620</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2621</td>
    <td class="codeLine">  // First check to see if there is an obviously preferable top block for the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2621</td>
    <td class="codeLine">  // First check to see if there is an obviously preferable top block for the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2622</td>
    <td class="codeLine">  // loop. This will default to the header, but may end up as one of the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2622</td>
    <td class="codeLine">  // loop. This will default to the header, but may end up as one of the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2623</td>
    <td class="codeLine">  // predecessors to the header if there is one which will result in strictly</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2623</td>
    <td class="codeLine">  // predecessors to the header if there is one which will result in strictly</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2624</td>
    <td class="codeLine">  // fewer branches in the loop body.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2624</td>
    <td class="codeLine">  // fewer branches in the loop body.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2625</td>
    <td class="codeLine">  MachineBasicBlock *LoopTop = findBestLoopTop(L, LoopBlockSet);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2625</td>
    <td class="codeLine">  MachineBasicBlock *LoopTop = findBestLoopTop(L, LoopBlockSet);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2626</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2626</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2627</td>
    <td class="codeLine">  // If we selected just the header for the loop top, look for a potentially</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2627</td>
    <td class="codeLine">  // If we selected just the header for the loop top, look for a potentially</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2628</td>
    <td class="codeLine">  // profitable exit block in the event that rotating the loop can eliminate</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2628</td>
    <td class="codeLine">  // profitable exit block in the event that rotating the loop can eliminate</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2629</td>
    <td class="codeLine">  // branches by placing an exit edge at the bottom.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2629</td>
    <td class="codeLine">  // branches by placing an exit edge at the bottom.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2630</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2630</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2631</td>
    <td class="codeLine">  // Loops are processed innermost to uttermost, make sure we clear</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2631</td>
    <td class="codeLine">  // Loops are processed innermost to uttermost, make sure we clear</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2632</td>
    <td class="codeLine">  // PreferredLoopExit before processing a new loop.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2632</td>
    <td class="codeLine">  // PreferredLoopExit before processing a new loop.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2633</td>
    <td class="codeLine">  PreferredLoopExit = nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2633</td>
    <td class="codeLine">  PreferredLoopExit = nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2634</td>
    <td class="codeLine">  BlockFrequency ExitFreq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2634</td>
    <td class="codeLine">  BlockFrequency ExitFreq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2635</td>
    <td class="codeLine">  if (!RotateLoopWithProfile && LoopTop == L.getHeader())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2635</td>
    <td class="codeLine">  if (!RotateLoopWithProfile && LoopTop == L.getHeader())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2636</td>
    <td class="codeLine">    PreferredLoopExit = findBestLoopExit(L, LoopBlockSet, ExitFreq);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2636</td>
    <td class="codeLine">    PreferredLoopExit = findBestLoopExit(L, LoopBlockSet, ExitFreq);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2637</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2637</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2638</td>
    <td class="codeLine">  BlockChain &LoopChain = *BlockToChain[LoopTop];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2638</td>
    <td class="codeLine">  BlockChain &LoopChain = *BlockToChain[LoopTop];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2639</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2639</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2640</td>
    <td class="codeLine">  // FIXME: This is a really lame way of walking the chains in the loop: we</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2640</td>
    <td class="codeLine">  // FIXME: This is a really lame way of walking the chains in the loop: we</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2641</td>
    <td class="codeLine">  // walk the blocks, and use a set to prevent visiting a particular chain</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2641</td>
    <td class="codeLine">  // walk the blocks, and use a set to prevent visiting a particular chain</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2642</td>
    <td class="codeLine">  // twice.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2642</td>
    <td class="codeLine">  // twice.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2643</td>
    <td class="codeLine">  SmallPtrSet<BlockChain *, 4> UpdatedPreds;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2643</td>
    <td class="codeLine">  SmallPtrSet<BlockChain *, 4> UpdatedPreds;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2644</td>
    <td class="codeLine">  assert(LoopChain.UnscheduledPredecessors == 0 &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2644</td>
    <td class="codeLine">  assert(LoopChain.UnscheduledPredecessors == 0 &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2645</td>
    <td class="codeLine">         "LoopChain should not have unscheduled predecessors.");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2645</td>
    <td class="codeLine">         "LoopChain should not have unscheduled predecessors.");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2646</td>
    <td class="codeLine">  UpdatedPreds.insert(&LoopChain);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2646</td>
    <td class="codeLine">  UpdatedPreds.insert(&LoopChain);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2647</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2647</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2648</td>
    <td class="codeLine">  for (const MachineBasicBlock *LoopBB : LoopBlockSet)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2648</td>
    <td class="codeLine">  for (const MachineBasicBlock *LoopBB : LoopBlockSet)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2649</td>
    <td class="codeLine">    fillWorkLists(LoopBB, UpdatedPreds, &LoopBlockSet);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2649</td>
    <td class="codeLine">    fillWorkLists(LoopBB, UpdatedPreds, &LoopBlockSet);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2650</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2650</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2651</td>
    <td class="codeLine">  buildChain(LoopTop, LoopChain, &LoopBlockSet);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2651</td>
    <td class="codeLine">  buildChain(LoopTop, LoopChain, &LoopBlockSet);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2652</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2652</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2653</td>
    <td class="codeLine">  if (RotateLoopWithProfile)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2653</td>
    <td class="codeLine">  if (RotateLoopWithProfile)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2654</td>
    <td class="codeLine">    rotateLoopWithProfile(LoopChain, L, LoopBlockSet);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2654</td>
    <td class="codeLine">    rotateLoopWithProfile(LoopChain, L, LoopBlockSet);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2655</td>
    <td class="codeLine">  else</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2655</td>
    <td class="codeLine">  else</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2656</td>
    <td class="codeLine">    rotateLoop(LoopChain, PreferredLoopExit, ExitFreq, LoopBlockSet);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2656</td>
    <td class="codeLine">    rotateLoop(LoopChain, PreferredLoopExit, ExitFreq, LoopBlockSet);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2657</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2657</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2658</td>
    <td class="codeLine">  LLVM_DEBUG({</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2658</td>
    <td class="codeLine">  LLVM_DEBUG({</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2659</td>
    <td class="codeLine">    // Crash at the end so we get all of the debugging output first.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2659</td>
    <td class="codeLine">    // Crash at the end so we get all of the debugging output first.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2660</td>
    <td class="codeLine">    bool BadLoop = false;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2660</td>
    <td class="codeLine">    bool BadLoop = false;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2661</td>
    <td class="codeLine">    if (LoopChain.UnscheduledPredecessors) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2661</td>
    <td class="codeLine">    if (LoopChain.UnscheduledPredecessors) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2662</td>
    <td class="codeLine">      BadLoop = true;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2662</td>
    <td class="codeLine">      BadLoop = true;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2663</td>
    <td class="codeLine">      dbgs() << "Loop chain contains a block without its preds placed!\n"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2663</td>
    <td class="codeLine">      dbgs() << "Loop chain contains a block without its preds placed!\n"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2664</td>
    <td class="codeLine">             << "  Loop header:  " << getBlockName(*L.block_begin()) << "\n"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2664</td>
    <td class="codeLine">             << "  Loop header:  " << getBlockName(*L.block_begin()) << "\n"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2665</td>
    <td class="codeLine">             << "  Chain header: " << getBlockName(*LoopChain.begin()) << "\n";</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2665</td>
    <td class="codeLine">             << "  Chain header: " << getBlockName(*LoopChain.begin()) << "\n";</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2666</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2666</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2667</td>
    <td class="codeLine">    for (MachineBasicBlock *ChainBB : LoopChain) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2667</td>
    <td class="codeLine">    for (MachineBasicBlock *ChainBB : LoopChain) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2668</td>
    <td class="codeLine">      dbgs() << "          ... " << getBlockName(ChainBB) << "\n";</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2668</td>
    <td class="codeLine">      dbgs() << "          ... " << getBlockName(ChainBB) << "\n";</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2669</td>
    <td class="codeLine">      if (!LoopBlockSet.remove(ChainBB)) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2669</td>
    <td class="codeLine">      if (!LoopBlockSet.remove(ChainBB)) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2670</td>
    <td class="codeLine">        // We don't mark the loop as bad here because there are real situations</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2670</td>
    <td class="codeLine">        // We don't mark the loop as bad here because there are real situations</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2671</td>
    <td class="codeLine">        // where this can occur. For example, with an unanalyzable fallthrough</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2671</td>
    <td class="codeLine">        // where this can occur. For example, with an unanalyzable fallthrough</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2672</td>
    <td class="codeLine">        // from a loop block to a non-loop block or vice versa.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2672</td>
    <td class="codeLine">        // from a loop block to a non-loop block or vice versa.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2673</td>
    <td class="codeLine">        dbgs() << "Loop chain contains a block not contained by the loop!\n"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2673</td>
    <td class="codeLine">        dbgs() << "Loop chain contains a block not contained by the loop!\n"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2674</td>
    <td class="codeLine">               << "  Loop header:  " << getBlockName(*L.block_begin()) << "\n"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2674</td>
    <td class="codeLine">               << "  Loop header:  " << getBlockName(*L.block_begin()) << "\n"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2675</td>
    <td class="codeLine">               << "  Chain header: " << getBlockName(*LoopChain.begin()) << "\n"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2675</td>
    <td class="codeLine">               << "  Chain header: " << getBlockName(*LoopChain.begin()) << "\n"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2676</td>
    <td class="codeLine">               << "  Bad block:    " << getBlockName(ChainBB) << "\n";</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2676</td>
    <td class="codeLine">               << "  Bad block:    " << getBlockName(ChainBB) << "\n";</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2677</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2677</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2678</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2678</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2679</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2679</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2680</td>
    <td class="codeLine">    if (!LoopBlockSet.empty()) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2680</td>
    <td class="codeLine">    if (!LoopBlockSet.empty()) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2681</td>
    <td class="codeLine">      BadLoop = true;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2681</td>
    <td class="codeLine">      BadLoop = true;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2682</td>
    <td class="codeLine">      for (const MachineBasicBlock *LoopBB : LoopBlockSet)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2682</td>
    <td class="codeLine">      for (const MachineBasicBlock *LoopBB : LoopBlockSet)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2683</td>
    <td class="codeLine">        dbgs() << "Loop contains blocks never placed into a chain!\n"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2683</td>
    <td class="codeLine">        dbgs() << "Loop contains blocks never placed into a chain!\n"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2684</td>
    <td class="codeLine">               << "  Loop header:  " << getBlockName(*L.block_begin()) << "\n"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2684</td>
    <td class="codeLine">               << "  Loop header:  " << getBlockName(*L.block_begin()) << "\n"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2685</td>
    <td class="codeLine">               << "  Chain header: " << getBlockName(*LoopChain.begin()) << "\n"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2685</td>
    <td class="codeLine">               << "  Chain header: " << getBlockName(*LoopChain.begin()) << "\n"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2686</td>
    <td class="codeLine">               << "  Bad block:    " << getBlockName(LoopBB) << "\n";</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2686</td>
    <td class="codeLine">               << "  Bad block:    " << getBlockName(LoopBB) << "\n";</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2687</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2687</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2688</td>
    <td class="codeLine">    assert(!BadLoop && "Detected problems with the placement of this loop.");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2688</td>
    <td class="codeLine">    assert(!BadLoop && "Detected problems with the placement of this loop.");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2689</td>
    <td class="codeLine">  });</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2689</td>
    <td class="codeLine">  });</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2690</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2690</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2691</td>
    <td class="codeLine">  BlockWorkList.clear();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2691</td>
    <td class="codeLine">  BlockWorkList.clear();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2692</td>
    <td class="codeLine">  EHPadWorkList.clear();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2692</td>
    <td class="codeLine">  EHPadWorkList.clear();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2693</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2693</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2694</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2694</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2695</td>
    <td class="codeLine">void MachineBlockPlacement::buildCFGChains() {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2695</td>
    <td class="codeLine">void MachineBlockPlacement::buildCFGChains() {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2696</td>
    <td class="codeLine">  // Ensure that every BB in the function has an associated chain to simplify</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2696</td>
    <td class="codeLine">  // Ensure that every BB in the function has an associated chain to simplify</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2697</td>
    <td class="codeLine">  // the assumptions of the remaining algorithm.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2697</td>
    <td class="codeLine">  // the assumptions of the remaining algorithm.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2698</td>
    <td class="codeLine">  SmallVector<MachineOperand, 4> Cond; // For analyzeBranch.</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2698</td>
    <td class="codeLine">  SmallVector<MachineOperand, 4> Cond; // For analyzeBranch.</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2699</td>
    <td class="codeLine">  for (MachineFunction::iterator FI = F->begin(), FE = F->end(); FI != FE;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2699</td>
    <td class="codeLine">  for (MachineFunction::iterator FI = F->begin(), FE = F->end(); FI != FE;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2700</td>
    <td class="codeLine">       ++FI) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2700</td>
    <td class="codeLine">       ++FI) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2701</td>
    <td class="codeLine">    MachineBasicBlock *BB = &*FI;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2701</td>
    <td class="codeLine">    MachineBasicBlock *BB = &*FI;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2702</td>
    <td class="codeLine">    BlockChain *Chain =</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2702</td>
    <td class="codeLine">    BlockChain *Chain =</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2703</td>
    <td class="codeLine">        new (ChainAllocator.Allocate()) BlockChain(BlockToChain, BB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2703</td>
    <td class="codeLine">        new (ChainAllocator.Allocate()) BlockChain(BlockToChain, BB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2704</td>
    <td class="codeLine">    // Also, merge any blocks which we cannot reason about and must preserve</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2704</td>
    <td class="codeLine">    // Also, merge any blocks which we cannot reason about and must preserve</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2705</td>
    <td class="codeLine">    // the exact fallthrough behavior for.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2705</td>
    <td class="codeLine">    // the exact fallthrough behavior for.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2706</td>
    <td class="codeLine">    while (true) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2706</td>
    <td class="codeLine">    while (true) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2707</td>
    <td class="codeLine">      Cond.clear();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2707</td>
    <td class="codeLine">      Cond.clear();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2708</td>
    <td class="codeLine">      MachineBasicBlock *TBB = nullptr, *FBB = nullptr; // For analyzeBranch.</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2708</td>
    <td class="codeLine">      MachineBasicBlock *TBB = nullptr, *FBB = nullptr; // For analyzeBranch.</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2709</td>
    <td class="codeLine">      if (!TII->analyzeBranch(*BB, TBB, FBB, Cond) || !FI->canFallThrough())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2709</td>
    <td class="codeLine">      if (!TII->analyzeBranch(*BB, TBB, FBB, Cond) || !FI->canFallThrough())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2710</td>
    <td class="codeLine">        break;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2710</td>
    <td class="codeLine">        break;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2711</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2711</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2712</td>
    <td class="codeLine">      MachineFunction::iterator NextFI = std::next(FI);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2712</td>
    <td class="codeLine">      MachineFunction::iterator NextFI = std::next(FI);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2713</td>
    <td class="codeLine">      MachineBasicBlock *NextBB = &*NextFI;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2713</td>
    <td class="codeLine">      MachineBasicBlock *NextBB = &*NextFI;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2714</td>
    <td class="codeLine">      // Ensure that the layout successor is a viable block, as we know that</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2714</td>
    <td class="codeLine">      // Ensure that the layout successor is a viable block, as we know that</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2715</td>
    <td class="codeLine">      // fallthrough is a possibility.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2715</td>
    <td class="codeLine">      // fallthrough is a possibility.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2716</td>
    <td class="codeLine">      assert(NextFI != FE && "Can't fallthrough past the last block.");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2716</td>
    <td class="codeLine">      assert(NextFI != FE && "Can't fallthrough past the last block.");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2717</td>
    <td class="codeLine">      LLVM_DEBUG(dbgs() << "Pre-merging due to unanalyzable fallthrough: "</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2717</td>
    <td class="codeLine">      LLVM_DEBUG(dbgs() << "Pre-merging due to unanalyzable fallthrough: "</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2718</td>
    <td class="codeLine">                        << getBlockName(BB) << " -> " << getBlockName(NextBB)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2718</td>
    <td class="codeLine">                        << getBlockName(BB) << " -> " << getBlockName(NextBB)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2719</td>
    <td class="codeLine">                        << "\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2719</td>
    <td class="codeLine">                        << "\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2720</td>
    <td class="codeLine">      Chain->merge(NextBB, nullptr);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2720</td>
    <td class="codeLine">      Chain->merge(NextBB, nullptr);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2721</td>
    <td class="codeLine">#ifndef NDEBUG</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2721</td>
    <td class="codeLine">#ifndef NDEBUG</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2722</td>
    <td class="codeLine">      BlocksWithUnanalyzableExits.insert(&*BB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2722</td>
    <td class="codeLine">      BlocksWithUnanalyzableExits.insert(&*BB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2723</td>
    <td class="codeLine">#endif</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2723</td>
    <td class="codeLine">#endif</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2724</td>
    <td class="codeLine">      FI = NextFI;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2724</td>
    <td class="codeLine">      FI = NextFI;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2725</td>
    <td class="codeLine">      BB = NextBB;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2725</td>
    <td class="codeLine">      BB = NextBB;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2726</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2726</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2727</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2727</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2728</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2728</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2729</td>
    <td class="codeLine">  // Build any loop-based chains.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2729</td>
    <td class="codeLine">  // Build any loop-based chains.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2730</td>
    <td class="codeLine">  PreferredLoopExit = nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2730</td>
    <td class="codeLine">  PreferredLoopExit = nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2731</td>
    <td class="codeLine">  for (MachineLoop *L : *MLI)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2731</td>
    <td class="codeLine">  for (MachineLoop *L : *MLI)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2732</td>
    <td class="codeLine">    buildLoopChains(*L);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2732</td>
    <td class="codeLine">    buildLoopChains(*L);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2733</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2733</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2734</td>
    <td class="codeLine">  assert(BlockWorkList.empty() &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2734</td>
    <td class="codeLine">  assert(BlockWorkList.empty() &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2735</td>
    <td class="codeLine">         "BlockWorkList should be empty before building final chain.");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2735</td>
    <td class="codeLine">         "BlockWorkList should be empty before building final chain.");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2736</td>
    <td class="codeLine">  assert(EHPadWorkList.empty() &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2736</td>
    <td class="codeLine">  assert(EHPadWorkList.empty() &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2737</td>
    <td class="codeLine">         "EHPadWorkList should be empty before building final chain.");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2737</td>
    <td class="codeLine">         "EHPadWorkList should be empty before building final chain.");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2738</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2738</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2739</td>
    <td class="codeLine">  SmallPtrSet<BlockChain *, 4> UpdatedPreds;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2739</td>
    <td class="codeLine">  SmallPtrSet<BlockChain *, 4> UpdatedPreds;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2740</td>
    <td class="codeLine">  for (MachineBasicBlock &MBB : *F)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2740</td>
    <td class="codeLine">  for (MachineBasicBlock &MBB : *F)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2741</td>
    <td class="codeLine">    fillWorkLists(&MBB, UpdatedPreds);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2741</td>
    <td class="codeLine">    fillWorkLists(&MBB, UpdatedPreds);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2742</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2742</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2743</td>
    <td class="codeLine">  BlockChain &FunctionChain = *BlockToChain[&F->front()];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2743</td>
    <td class="codeLine">  BlockChain &FunctionChain = *BlockToChain[&F->front()];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2744</td>
    <td class="codeLine">  buildChain(&F->front(), FunctionChain);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2744</td>
    <td class="codeLine">  buildChain(&F->front(), FunctionChain);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2745</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2745</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2746</td>
    <td class="codeLine">#ifndef NDEBUG</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2746</td>
    <td class="codeLine">#ifndef NDEBUG</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2747</td>
    <td class="codeLine">  using FunctionBlockSetType = SmallPtrSet<MachineBasicBlock *, 16>;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2747</td>
    <td class="codeLine">  using FunctionBlockSetType = SmallPtrSet<MachineBasicBlock *, 16>;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2748</td>
    <td class="codeLine">#endif</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2748</td>
    <td class="codeLine">#endif</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2749</td>
    <td class="codeLine">  LLVM_DEBUG({</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2749</td>
    <td class="codeLine">  LLVM_DEBUG({</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2750</td>
    <td class="codeLine">    // Crash at the end so we get all of the debugging output first.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2750</td>
    <td class="codeLine">    // Crash at the end so we get all of the debugging output first.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2751</td>
    <td class="codeLine">    bool BadFunc = false;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2751</td>
    <td class="codeLine">    bool BadFunc = false;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2752</td>
    <td class="codeLine">    FunctionBlockSetType FunctionBlockSet;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2752</td>
    <td class="codeLine">    FunctionBlockSetType FunctionBlockSet;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2753</td>
    <td class="codeLine">    for (MachineBasicBlock &MBB : *F)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2753</td>
    <td class="codeLine">    for (MachineBasicBlock &MBB : *F)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2754</td>
    <td class="codeLine">      FunctionBlockSet.insert(&MBB);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2754</td>
    <td class="codeLine">      FunctionBlockSet.insert(&MBB);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2755</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2755</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2756</td>
    <td class="codeLine">    for (MachineBasicBlock *ChainBB : FunctionChain)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2756</td>
    <td class="codeLine">    for (MachineBasicBlock *ChainBB : FunctionChain)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2757</td>
    <td class="codeLine">      if (!FunctionBlockSet.erase(ChainBB)) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2757</td>
    <td class="codeLine">      if (!FunctionBlockSet.erase(ChainBB)) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2758</td>
    <td class="codeLine">        BadFunc = true;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2758</td>
    <td class="codeLine">        BadFunc = true;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2759</td>
    <td class="codeLine">        dbgs() << "Function chain contains a block not in the function!\n"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2759</td>
    <td class="codeLine">        dbgs() << "Function chain contains a block not in the function!\n"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2760</td>
    <td class="codeLine">               << "  Bad block:    " << getBlockName(ChainBB) << "\n";</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2760</td>
    <td class="codeLine">               << "  Bad block:    " << getBlockName(ChainBB) << "\n";</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2761</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2761</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2762</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2762</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2763</td>
    <td class="codeLine">    if (!FunctionBlockSet.empty()) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2763</td>
    <td class="codeLine">    if (!FunctionBlockSet.empty()) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2764</td>
    <td class="codeLine">      BadFunc = true;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2764</td>
    <td class="codeLine">      BadFunc = true;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2765</td>
    <td class="codeLine">      for (MachineBasicBlock *RemainingBB : FunctionBlockSet)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2765</td>
    <td class="codeLine">      for (MachineBasicBlock *RemainingBB : FunctionBlockSet)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2766</td>
    <td class="codeLine">        dbgs() << "Function contains blocks never placed into a chain!\n"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2766</td>
    <td class="codeLine">        dbgs() << "Function contains blocks never placed into a chain!\n"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2767</td>
    <td class="codeLine">               << "  Bad block:    " << getBlockName(RemainingBB) << "\n";</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2767</td>
    <td class="codeLine">               << "  Bad block:    " << getBlockName(RemainingBB) << "\n";</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2768</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2768</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2769</td>
    <td class="codeLine">    assert(!BadFunc && "Detected problems with the block placement.");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2769</td>
    <td class="codeLine">    assert(!BadFunc && "Detected problems with the block placement.");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2770</td>
    <td class="codeLine">  });</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2770</td>
    <td class="codeLine">  });</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2771</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2771</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2772</td>
    <td class="codeLine">  // Remember original layout ordering, so we can update terminators after</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2772</td>
    <td class="codeLine">  // Remember original layout ordering, so we can update terminators after</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2773</td>
    <td class="codeLine">  // reordering to point to the original layout successor.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2773</td>
    <td class="codeLine">  // reordering to point to the original layout successor.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2774</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 4> OriginalLayoutSuccessors(</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2774</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 4> OriginalLayoutSuccessors(</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2775</td>
    <td class="codeLine">      F->getNumBlockIDs());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2775</td>
    <td class="codeLine">      F->getNumBlockIDs());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2776</td>
    <td class="codeLine">  {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2776</td>
    <td class="codeLine">  {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2777</td>
    <td class="codeLine">    MachineBasicBlock *LastMBB = nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2777</td>
    <td class="codeLine">    MachineBasicBlock *LastMBB = nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2778</td>
    <td class="codeLine">    for (auto &MBB : *F) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2778</td>
    <td class="codeLine">    for (auto &MBB : *F) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2779</td>
    <td class="codeLine">      if (LastMBB != nullptr)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2779</td>
    <td class="codeLine">      if (LastMBB != nullptr)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2780</td>
    <td class="codeLine">        OriginalLayoutSuccessors[LastMBB->getNumber()] = &MBB;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2780</td>
    <td class="codeLine">        OriginalLayoutSuccessors[LastMBB->getNumber()] = &MBB;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2781</td>
    <td class="codeLine">      LastMBB = &MBB;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2781</td>
    <td class="codeLine">      LastMBB = &MBB;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2782</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2782</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2783</td>
    <td class="codeLine">    OriginalLayoutSuccessors[F->back().getNumber()] = nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2783</td>
    <td class="codeLine">    OriginalLayoutSuccessors[F->back().getNumber()] = nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2784</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2784</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2785</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2785</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2786</td>
    <td class="codeLine">  // Splice the blocks into place.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2786</td>
    <td class="codeLine">  // Splice the blocks into place.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2787</td>
    <td class="codeLine">  MachineFunction::iterator InsertPos = F->begin();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2787</td>
    <td class="codeLine">  MachineFunction::iterator InsertPos = F->begin();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2788</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "[MBP] Function: " << F->getName() << "\n");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2788</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "[MBP] Function: " << F->getName() << "\n");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2789</td>
    <td class="codeLine">  for (MachineBasicBlock *ChainBB : FunctionChain) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2789</td>
    <td class="codeLine">  for (MachineBasicBlock *ChainBB : FunctionChain) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2790</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << (ChainBB == *FunctionChain.begin() ? "Placing chain "</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2790</td>
    <td class="codeLine">    LLVM_DEBUG(dbgs() << (ChainBB == *FunctionChain.begin() ? "Placing chain "</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2791</td>
    <td class="codeLine">                                                            : "          ... ")</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2791</td>
    <td class="codeLine">                                                            : "          ... ")</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2792</td>
    <td class="codeLine">                      << getBlockName(ChainBB) << "\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2792</td>
    <td class="codeLine">                      << getBlockName(ChainBB) << "\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2793</td>
    <td class="codeLine">    if (InsertPos != MachineFunction::iterator(ChainBB))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2793</td>
    <td class="codeLine">    if (InsertPos != MachineFunction::iterator(ChainBB))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2794</td>
    <td class="codeLine">      F->splice(InsertPos, ChainBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2794</td>
    <td class="codeLine">      F->splice(InsertPos, ChainBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2795</td>
    <td class="codeLine">    else</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2795</td>
    <td class="codeLine">    else</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2796</td>
    <td class="codeLine">      ++InsertPos;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2796</td>
    <td class="codeLine">      ++InsertPos;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2797</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2797</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2798</td>
    <td class="codeLine">    // Update the terminator of the previous block.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2798</td>
    <td class="codeLine">    // Update the terminator of the previous block.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2799</td>
    <td class="codeLine">    if (ChainBB == *FunctionChain.begin())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2799</td>
    <td class="codeLine">    if (ChainBB == *FunctionChain.begin())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2800</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2800</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2801</td>
    <td class="codeLine">    MachineBasicBlock *PrevBB = &*std::prev(MachineFunction::iterator(ChainBB));</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2801</td>
    <td class="codeLine">    MachineBasicBlock *PrevBB = &*std::prev(MachineFunction::iterator(ChainBB));</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2802</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2802</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2803</td>
    <td class="codeLine">    // FIXME: It would be awesome of updateTerminator would just return rather</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2803</td>
    <td class="codeLine">    // FIXME: It would be awesome of updateTerminator would just return rather</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2804</td>
    <td class="codeLine">    // than assert when the branch cannot be analyzed in order to remove this</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2804</td>
    <td class="codeLine">    // than assert when the branch cannot be analyzed in order to remove this</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2805</td>
    <td class="codeLine">    // boiler plate.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2805</td>
    <td class="codeLine">    // boiler plate.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2806</td>
    <td class="codeLine">    Cond.clear();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2806</td>
    <td class="codeLine">    Cond.clear();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2807</td>
    <td class="codeLine">    MachineBasicBlock *TBB = nullptr, *FBB = nullptr; // For analyzeBranch.</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2807</td>
    <td class="codeLine">    MachineBasicBlock *TBB = nullptr, *FBB = nullptr; // For analyzeBranch.</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2808</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2808</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2809</td>
    <td class="codeLine">#ifndef NDEBUG</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2809</td>
    <td class="codeLine">#ifndef NDEBUG</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2810</td>
    <td class="codeLine">    if (!BlocksWithUnanalyzableExits.count(PrevBB)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2810</td>
    <td class="codeLine">    if (!BlocksWithUnanalyzableExits.count(PrevBB)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2811</td>
    <td class="codeLine">      // Given the exact block placement we chose, we may actually not _need_ to</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2811</td>
    <td class="codeLine">      // Given the exact block placement we chose, we may actually not _need_ to</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2812</td>
    <td class="codeLine">      // be able to edit PrevBB's terminator sequence, but not being _able_ to</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2812</td>
    <td class="codeLine">      // be able to edit PrevBB's terminator sequence, but not being _able_ to</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2813</td>
    <td class="codeLine">      // do that at this point is a bug.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2813</td>
    <td class="codeLine">      // do that at this point is a bug.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2814</td>
    <td class="codeLine">      assert((!TII->analyzeBranch(*PrevBB, TBB, FBB, Cond) ||</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2814</td>
    <td class="codeLine">      assert((!TII->analyzeBranch(*PrevBB, TBB, FBB, Cond) ||</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2815</td>
    <td class="codeLine">              !PrevBB->canFallThrough()) &&</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2815</td>
    <td class="codeLine">              !PrevBB->canFallThrough()) &&</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2816</td>
    <td class="codeLine">             "Unexpected block with un-analyzable fallthrough!");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2816</td>
    <td class="codeLine">             "Unexpected block with un-analyzable fallthrough!");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2817</td>
    <td class="codeLine">      Cond.clear();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2817</td>
    <td class="codeLine">      Cond.clear();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2818</td>
    <td class="codeLine">      TBB = FBB = nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2818</td>
    <td class="codeLine">      TBB = FBB = nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2819</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2819</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2820</td>
    <td class="codeLine">#endif</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2820</td>
    <td class="codeLine">#endif</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2821</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2821</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2822</td>
    <td class="codeLine">    // The "PrevBB" is not yet updated to reflect current code layout, so,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2822</td>
    <td class="codeLine">    // The "PrevBB" is not yet updated to reflect current code layout, so,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2823</td>
    <td class="codeLine">    //   o. it may fall-through to a block without explicit "goto" instruction</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2823</td>
    <td class="codeLine">    //   o. it may fall-through to a block without explicit "goto" instruction</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2824</td>
    <td class="codeLine">    //      before layout, and no longer fall-through it after layout; or</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2824</td>
    <td class="codeLine">    //      before layout, and no longer fall-through it after layout; or</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2825</td>
    <td class="codeLine">    //   o. just opposite.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2825</td>
    <td class="codeLine">    //   o. just opposite.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2826</td>
    <td class="codeLine">    //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2826</td>
    <td class="codeLine">    //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2827</td>
    <td class="codeLine">    // analyzeBranch() may return erroneous value for FBB when these two</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2827</td>
    <td class="codeLine">    // analyzeBranch() may return erroneous value for FBB when these two</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2828</td>
    <td class="codeLine">    // situations take place. For the first scenario FBB is mistakenly set NULL;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2828</td>
    <td class="codeLine">    // situations take place. For the first scenario FBB is mistakenly set NULL;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2829</td>
    <td class="codeLine">    // for the 2nd scenario, the FBB, which is expected to be NULL, is</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2829</td>
    <td class="codeLine">    // for the 2nd scenario, the FBB, which is expected to be NULL, is</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2830</td>
    <td class="codeLine">    // mistakenly pointing to "*BI".</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2830</td>
    <td class="codeLine">    // mistakenly pointing to "*BI".</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2831</td>
    <td class="codeLine">    // Thus, if the future change needs to use FBB before the layout is set, it</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2831</td>
    <td class="codeLine">    // Thus, if the future change needs to use FBB before the layout is set, it</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2832</td>
    <td class="codeLine">    // has to correct FBB first by using the code similar to the following:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2832</td>
    <td class="codeLine">    // has to correct FBB first by using the code similar to the following:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2833</td>
    <td class="codeLine">    //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2833</td>
    <td class="codeLine">    //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2834</td>
    <td class="codeLine">    // if (!Cond.empty() && (!FBB || FBB == ChainBB)) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2834</td>
    <td class="codeLine">    // if (!Cond.empty() && (!FBB || FBB == ChainBB)) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2835</td>
    <td class="codeLine">    //   PrevBB->updateTerminator();</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2835</td>
    <td class="codeLine">    //   PrevBB->updateTerminator();</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2836</td>
    <td class="codeLine">    //   Cond.clear();</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2836</td>
    <td class="codeLine">    //   Cond.clear();</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2837</td>
    <td class="codeLine">    //   TBB = FBB = nullptr;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2837</td>
    <td class="codeLine">    //   TBB = FBB = nullptr;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2838</td>
    <td class="codeLine">    //   if (TII->analyzeBranch(*PrevBB, TBB, FBB, Cond)) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2838</td>
    <td class="codeLine">    //   if (TII->analyzeBranch(*PrevBB, TBB, FBB, Cond)) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2839</td>
    <td class="codeLine">    //     // FIXME: This should never take place.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2839</td>
    <td class="codeLine">    //     // FIXME: This should never take place.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2840</td>
    <td class="codeLine">    //     TBB = FBB = nullptr;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2840</td>
    <td class="codeLine">    //     TBB = FBB = nullptr;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2841</td>
    <td class="codeLine">    //   }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2841</td>
    <td class="codeLine">    //   }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2842</td>
    <td class="codeLine">    // }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2842</td>
    <td class="codeLine">    // }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2843</td>
    <td class="codeLine">    if (!TII->analyzeBranch(*PrevBB, TBB, FBB, Cond)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2843</td>
    <td class="codeLine">    if (!TII->analyzeBranch(*PrevBB, TBB, FBB, Cond)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2844</td>
    <td class="codeLine">      PrevBB->updateTerminator(OriginalLayoutSuccessors[PrevBB->getNumber()]);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2844</td>
    <td class="codeLine">      PrevBB->updateTerminator(OriginalLayoutSuccessors[PrevBB->getNumber()]);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2845</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2845</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2846</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2846</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2847</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2847</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2848</td>
    <td class="codeLine">  // Fixup the last block.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2848</td>
    <td class="codeLine">  // Fixup the last block.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2849</td>
    <td class="codeLine">  Cond.clear();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2849</td>
    <td class="codeLine">  Cond.clear();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2850</td>
    <td class="codeLine">  MachineBasicBlock *TBB = nullptr, *FBB = nullptr; // For analyzeBranch.</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2850</td>
    <td class="codeLine">  MachineBasicBlock *TBB = nullptr, *FBB = nullptr; // For analyzeBranch.</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2851</td>
    <td class="codeLine">  if (!TII->analyzeBranch(F->back(), TBB, FBB, Cond)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2851</td>
    <td class="codeLine">  if (!TII->analyzeBranch(F->back(), TBB, FBB, Cond)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2852</td>
    <td class="codeLine">    MachineBasicBlock *PrevBB = &F->back();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2852</td>
    <td class="codeLine">    MachineBasicBlock *PrevBB = &F->back();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2853</td>
    <td class="codeLine">    PrevBB->updateTerminator(OriginalLayoutSuccessors[PrevBB->getNumber()]);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2853</td>
    <td class="codeLine">    PrevBB->updateTerminator(OriginalLayoutSuccessors[PrevBB->getNumber()]);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2854</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2854</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2855</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2855</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2856</td>
    <td class="codeLine">  BlockWorkList.clear();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2856</td>
    <td class="codeLine">  BlockWorkList.clear();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2857</td>
    <td class="codeLine">  EHPadWorkList.clear();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2857</td>
    <td class="codeLine">  EHPadWorkList.clear();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2858</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2858</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2859</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2859</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2860</td>
    <td class="codeLine">void MachineBlockPlacement::optimizeBranches() {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2860</td>
    <td class="codeLine">void MachineBlockPlacement::optimizeBranches() {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2861</td>
    <td class="codeLine">  BlockChain &FunctionChain = *BlockToChain[&F->front()];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2861</td>
    <td class="codeLine">  BlockChain &FunctionChain = *BlockToChain[&F->front()];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2862</td>
    <td class="codeLine">  SmallVector<MachineOperand, 4> Cond; // For analyzeBranch.</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2862</td>
    <td class="codeLine">  SmallVector<MachineOperand, 4> Cond; // For analyzeBranch.</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2863</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2863</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2864</td>
    <td class="codeLine">  // Now that all the basic blocks in the chain have the proper layout,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2864</td>
    <td class="codeLine">  // Now that all the basic blocks in the chain have the proper layout,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2865</td>
    <td class="codeLine">  // make a final call to analyzeBranch with AllowModify set.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2865</td>
    <td class="codeLine">  // make a final call to analyzeBranch with AllowModify set.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2866</td>
    <td class="codeLine">  // Indeed, the target may be able to optimize the branches in a way we</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2866</td>
    <td class="codeLine">  // Indeed, the target may be able to optimize the branches in a way we</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2867</td>
    <td class="codeLine">  // cannot because all branches may not be analyzable.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2867</td>
    <td class="codeLine">  // cannot because all branches may not be analyzable.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2868</td>
    <td class="codeLine">  // E.g., the target may be able to remove an unconditional branch to</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2868</td>
    <td class="codeLine">  // E.g., the target may be able to remove an unconditional branch to</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2869</td>
    <td class="codeLine">  // a fallthrough when it occurs after predicated terminators.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2869</td>
    <td class="codeLine">  // a fallthrough when it occurs after predicated terminators.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2870</td>
    <td class="codeLine">  for (MachineBasicBlock *ChainBB : FunctionChain) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2870</td>
    <td class="codeLine">  for (MachineBasicBlock *ChainBB : FunctionChain) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2871</td>
    <td class="codeLine">    Cond.clear();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2871</td>
    <td class="codeLine">    Cond.clear();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2872</td>
    <td class="codeLine">    MachineBasicBlock *TBB = nullptr, *FBB = nullptr; // For analyzeBranch.</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2872</td>
    <td class="codeLine">    MachineBasicBlock *TBB = nullptr, *FBB = nullptr; // For analyzeBranch.</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2873</td>
    <td class="codeLine">    if (!TII->analyzeBranch(*ChainBB, TBB, FBB, Cond, /*AllowModify*/ true)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2873</td>
    <td class="codeLine">    if (!TII->analyzeBranch(*ChainBB, TBB, FBB, Cond, /*AllowModify*/ true)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2874</td>
    <td class="codeLine">      // If PrevBB has a two-way branch, try to re-order the branches</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2874</td>
    <td class="codeLine">      // If PrevBB has a two-way branch, try to re-order the branches</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2875</td>
    <td class="codeLine">      // such that we branch to the successor with higher probability first.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2875</td>
    <td class="codeLine">      // such that we branch to the successor with higher probability first.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2876</td>
    <td class="codeLine">      if (TBB && !Cond.empty() && FBB &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2876</td>
    <td class="codeLine">      if (TBB && !Cond.empty() && FBB &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2877</td>
    <td class="codeLine">          MBPI->getEdgeProbability(ChainBB, FBB) ></td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2877</td>
    <td class="codeLine">          MBPI->getEdgeProbability(ChainBB, FBB) ></td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2878</td>
    <td class="codeLine">              MBPI->getEdgeProbability(ChainBB, TBB) &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2878</td>
    <td class="codeLine">              MBPI->getEdgeProbability(ChainBB, TBB) &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2879</td>
    <td class="codeLine">          !TII->reverseBranchCondition(Cond)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2879</td>
    <td class="codeLine">          !TII->reverseBranchCondition(Cond)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2880</td>
    <td class="codeLine">        LLVM_DEBUG(dbgs() << "Reverse order of the two branches: "</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2880</td>
    <td class="codeLine">        LLVM_DEBUG(dbgs() << "Reverse order of the two branches: "</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2881</td>
    <td class="codeLine">                          << getBlockName(ChainBB) << "\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2881</td>
    <td class="codeLine">                          << getBlockName(ChainBB) << "\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2882</td>
    <td class="codeLine">        LLVM_DEBUG(dbgs() << "    Edge probability: "</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2882</td>
    <td class="codeLine">        LLVM_DEBUG(dbgs() << "    Edge probability: "</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2883</td>
    <td class="codeLine">                          << MBPI->getEdgeProbability(ChainBB, FBB) << " vs "</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2883</td>
    <td class="codeLine">                          << MBPI->getEdgeProbability(ChainBB, FBB) << " vs "</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2884</td>
    <td class="codeLine">                          << MBPI->getEdgeProbability(ChainBB, TBB) << "\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2884</td>
    <td class="codeLine">                          << MBPI->getEdgeProbability(ChainBB, TBB) << "\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2885</td>
    <td class="codeLine">        DebugLoc dl; // FIXME: this is nowhere</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2885</td>
    <td class="codeLine">        DebugLoc dl; // FIXME: this is nowhere</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2886</td>
    <td class="codeLine">        TII->removeBranch(*ChainBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2886</td>
    <td class="codeLine">        TII->removeBranch(*ChainBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2887</td>
    <td class="codeLine">        TII->insertBranch(*ChainBB, FBB, TBB, Cond, dl);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2887</td>
    <td class="codeLine">        TII->insertBranch(*ChainBB, FBB, TBB, Cond, dl);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2888</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2888</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2889</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2889</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2890</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2890</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2891</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2891</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2892</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2892</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2893</td>
    <td class="codeLine">void MachineBlockPlacement::alignBlocks() {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2893</td>
    <td class="codeLine">void MachineBlockPlacement::alignBlocks() {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2894</td>
    <td class="codeLine">  // Walk through the backedges of the function now that we have fully laid out</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2894</td>
    <td class="codeLine">  // Walk through the backedges of the function now that we have fully laid out</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2895</td>
    <td class="codeLine">  // the basic blocks and align the destination of each backedge. We don't rely</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2895</td>
    <td class="codeLine">  // the basic blocks and align the destination of each backedge. We don't rely</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2896</td>
    <td class="codeLine">  // exclusively on the loop info here so that we can align backedges in</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2896</td>
    <td class="codeLine">  // exclusively on the loop info here so that we can align backedges in</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2897</td>
    <td class="codeLine">  // unnatural CFGs and backedges that were introduced purely because of the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2897</td>
    <td class="codeLine">  // unnatural CFGs and backedges that were introduced purely because of the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2898</td>
    <td class="codeLine">  // loop rotations done during this layout pass.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2898</td>
    <td class="codeLine">  // loop rotations done during this layout pass.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2899</td>
    <td class="codeLine">  if (F->getFunction().hasMinSize() ||</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2899</td>
    <td class="codeLine">  if (F->getFunction().hasMinSize() ||</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2900</td>
    <td class="codeLine">      (F->getFunction().hasOptSize() && !TLI->alignLoopsWithOptSize()))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2900</td>
    <td class="codeLine">      (F->getFunction().hasOptSize() && !TLI->alignLoopsWithOptSize()))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2901</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2901</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2902</td>
    <td class="codeLine">  BlockChain &FunctionChain = *BlockToChain[&F->front()];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2902</td>
    <td class="codeLine">  BlockChain &FunctionChain = *BlockToChain[&F->front()];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2903</td>
    <td class="codeLine">  if (FunctionChain.begin() == FunctionChain.end())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2903</td>
    <td class="codeLine">  if (FunctionChain.begin() == FunctionChain.end())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2904</td>
    <td class="codeLine">    return; // Empty chain.</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2904</td>
    <td class="codeLine">    return; // Empty chain.</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2905</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2905</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2906</td>
    <td class="codeLine">  const BranchProbability ColdProb(1, 5); // 20%</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2906</td>
    <td class="codeLine">  const BranchProbability ColdProb(1, 5); // 20%</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2907</td>
    <td class="codeLine">  BlockFrequency EntryFreq = MBFI->getBlockFreq(&F->front());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2907</td>
    <td class="codeLine">  BlockFrequency EntryFreq = MBFI->getBlockFreq(&F->front());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2908</td>
    <td class="codeLine">  BlockFrequency WeightedEntryFreq = EntryFreq * ColdProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2908</td>
    <td class="codeLine">  BlockFrequency WeightedEntryFreq = EntryFreq * ColdProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2909</td>
    <td class="codeLine">  for (MachineBasicBlock *ChainBB : FunctionChain) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2909</td>
    <td class="codeLine">  for (MachineBasicBlock *ChainBB : FunctionChain) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2910</td>
    <td class="codeLine">    if (ChainBB == *FunctionChain.begin())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2910</td>
    <td class="codeLine">    if (ChainBB == *FunctionChain.begin())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2911</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2911</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2912</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2912</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2913</td>
    <td class="codeLine">    // Don't align non-looping basic blocks. These are unlikely to execute</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2913</td>
    <td class="codeLine">    // Don't align non-looping basic blocks. These are unlikely to execute</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2914</td>
    <td class="codeLine">    // enough times to matter in practice. Note that we'll still handle</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2914</td>
    <td class="codeLine">    // enough times to matter in practice. Note that we'll still handle</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2915</td>
    <td class="codeLine">    // unnatural CFGs inside of a natural outer loop (the common case) and</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2915</td>
    <td class="codeLine">    // unnatural CFGs inside of a natural outer loop (the common case) and</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2916</td>
    <td class="codeLine">    // rotated loops.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2916</td>
    <td class="codeLine">    // rotated loops.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2917</td>
    <td class="codeLine">    MachineLoop *L = MLI->getLoopFor(ChainBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2917</td>
    <td class="codeLine">    MachineLoop *L = MLI->getLoopFor(ChainBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2918</td>
    <td class="codeLine">    if (!L)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2918</td>
    <td class="codeLine">    if (!L)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2919</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2919</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2920</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2920</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2921</td>
    <td class="codeLine">    const Align Align = TLI->getPrefLoopAlignment(L);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2921</td>
    <td class="codeLine">    const Align Align = TLI->getPrefLoopAlignment(L);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2922</td>
    <td class="codeLine">    if (Align == 1)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2922</td>
    <td class="codeLine">    if (Align == 1)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2923</td>
    <td class="codeLine">      continue; // Don't care about loop alignment.</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2923</td>
    <td class="codeLine">      continue; // Don't care about loop alignment.</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2924</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2924</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2925</td>
    <td class="codeLine">    // If the block is cold relative to the function entry don't waste space</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2925</td>
    <td class="codeLine">    // If the block is cold relative to the function entry don't waste space</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2926</td>
    <td class="codeLine">    // aligning it.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2926</td>
    <td class="codeLine">    // aligning it.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2927</td>
    <td class="codeLine">    BlockFrequency Freq = MBFI->getBlockFreq(ChainBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2927</td>
    <td class="codeLine">    BlockFrequency Freq = MBFI->getBlockFreq(ChainBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2928</td>
    <td class="codeLine">    if (Freq < WeightedEntryFreq)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2928</td>
    <td class="codeLine">    if (Freq < WeightedEntryFreq)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2929</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2929</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2930</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2930</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2931</td>
    <td class="codeLine">    // If the block is cold relative to its loop header, don't align it</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2931</td>
    <td class="codeLine">    // If the block is cold relative to its loop header, don't align it</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2932</td>
    <td class="codeLine">    // regardless of what edges into the block exist.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2932</td>
    <td class="codeLine">    // regardless of what edges into the block exist.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2933</td>
    <td class="codeLine">    MachineBasicBlock *LoopHeader = L->getHeader();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2933</td>
    <td class="codeLine">    MachineBasicBlock *LoopHeader = L->getHeader();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2934</td>
    <td class="codeLine">    BlockFrequency LoopHeaderFreq = MBFI->getBlockFreq(LoopHeader);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2934</td>
    <td class="codeLine">    BlockFrequency LoopHeaderFreq = MBFI->getBlockFreq(LoopHeader);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2935</td>
    <td class="codeLine">    if (Freq < (LoopHeaderFreq * ColdProb))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2935</td>
    <td class="codeLine">    if (Freq < (LoopHeaderFreq * ColdProb))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2936</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2936</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2937</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2937</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2938</td>
    <td class="codeLine">    // If the global profiles indicates so, don't align it.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2938</td>
    <td class="codeLine">    // If the global profiles indicates so, don't align it.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2939</td>
    <td class="codeLine">    if (llvm::shouldOptimizeForSize(ChainBB, PSI, MBFI.get()) &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2939</td>
    <td class="codeLine">    if (llvm::shouldOptimizeForSize(ChainBB, PSI, MBFI.get()) &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2940</td>
    <td class="codeLine">        !TLI->alignLoopsWithOptSize())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2940</td>
    <td class="codeLine">        !TLI->alignLoopsWithOptSize())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2941</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2941</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2942</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2942</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2943</td>
    <td class="codeLine">    // Check for the existence of a non-layout predecessor which would benefit</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2943</td>
    <td class="codeLine">    // Check for the existence of a non-layout predecessor which would benefit</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2944</td>
    <td class="codeLine">    // from aligning this block.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2944</td>
    <td class="codeLine">    // from aligning this block.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2945</td>
    <td class="codeLine">    MachineBasicBlock *LayoutPred =</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2945</td>
    <td class="codeLine">    MachineBasicBlock *LayoutPred =</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2946</td>
    <td class="codeLine">        &*std::prev(MachineFunction::iterator(ChainBB));</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2946</td>
    <td class="codeLine">        &*std::prev(MachineFunction::iterator(ChainBB));</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2947</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2947</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2948</td>
    <td class="codeLine">    auto DetermineMaxAlignmentPadding = [&]() {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2948</td>
    <td class="codeLine">    auto DetermineMaxAlignmentPadding = [&]() {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2949</td>
    <td class="codeLine">      // Set the maximum bytes allowed to be emitted for alignment.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2949</td>
    <td class="codeLine">      // Set the maximum bytes allowed to be emitted for alignment.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2950</td>
    <td class="codeLine">      unsigned MaxBytes;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2950</td>
    <td class="codeLine">      unsigned MaxBytes;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2951</td>
    <td class="codeLine">      if (MaxBytesForAlignmentOverride.getNumOccurrences() > 0)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2951</td>
    <td class="codeLine">      if (MaxBytesForAlignmentOverride.getNumOccurrences() > 0)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2952</td>
    <td class="codeLine">        MaxBytes = MaxBytesForAlignmentOverride;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2952</td>
    <td class="codeLine">        MaxBytes = MaxBytesForAlignmentOverride;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2953</td>
    <td class="codeLine">      else</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2953</td>
    <td class="codeLine">      else</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2954</td>
    <td class="codeLine">        MaxBytes = TLI->getMaxPermittedBytesForAlignment(ChainBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2954</td>
    <td class="codeLine">        MaxBytes = TLI->getMaxPermittedBytesForAlignment(ChainBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2955</td>
    <td class="codeLine">      ChainBB->setMaxBytesForAlignment(MaxBytes);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2955</td>
    <td class="codeLine">      ChainBB->setMaxBytesForAlignment(MaxBytes);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2956</td>
    <td class="codeLine">    };</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2956</td>
    <td class="codeLine">    };</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2957</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2957</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2958</td>
    <td class="codeLine">    // Force alignment if all the predecessors are jumps. We already checked</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2958</td>
    <td class="codeLine">    // Force alignment if all the predecessors are jumps. We already checked</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2959</td>
    <td class="codeLine">    // that the block isn't cold above.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2959</td>
    <td class="codeLine">    // that the block isn't cold above.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2960</td>
    <td class="codeLine">    if (!LayoutPred->isSuccessor(ChainBB)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2960</td>
    <td class="codeLine">    if (!LayoutPred->isSuccessor(ChainBB)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2961</td>
    <td class="codeLine">      ChainBB->setAlignment(Align);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2961</td>
    <td class="codeLine">      ChainBB->setAlignment(Align);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2962</td>
    <td class="codeLine">      DetermineMaxAlignmentPadding();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2962</td>
    <td class="codeLine">      DetermineMaxAlignmentPadding();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2963</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2963</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2964</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2964</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2965</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2965</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2966</td>
    <td class="codeLine">    // Align this block if the layout predecessor's edge into this block is</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2966</td>
    <td class="codeLine">    // Align this block if the layout predecessor's edge into this block is</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2967</td>
    <td class="codeLine">    // cold relative to the block. When this is true, other predecessors make up</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2967</td>
    <td class="codeLine">    // cold relative to the block. When this is true, other predecessors make up</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2968</td>
    <td class="codeLine">    // all of the hot entries into the block and thus alignment is likely to be</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2968</td>
    <td class="codeLine">    // all of the hot entries into the block and thus alignment is likely to be</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2969</td>
    <td class="codeLine">    // important.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2969</td>
    <td class="codeLine">    // important.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2970</td>
    <td class="codeLine">    BranchProbability LayoutProb =</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2970</td>
    <td class="codeLine">    BranchProbability LayoutProb =</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2971</td>
    <td class="codeLine">        MBPI->getEdgeProbability(LayoutPred, ChainBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2971</td>
    <td class="codeLine">        MBPI->getEdgeProbability(LayoutPred, ChainBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2972</td>
    <td class="codeLine">    BlockFrequency LayoutEdgeFreq = MBFI->getBlockFreq(LayoutPred) * LayoutProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2972</td>
    <td class="codeLine">    BlockFrequency LayoutEdgeFreq = MBFI->getBlockFreq(LayoutPred) * LayoutProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2973</td>
    <td class="codeLine">    if (LayoutEdgeFreq <= (Freq * ColdProb)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2973</td>
    <td class="codeLine">    if (LayoutEdgeFreq <= (Freq * ColdProb)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2974</td>
    <td class="codeLine">      ChainBB->setAlignment(Align);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2974</td>
    <td class="codeLine">      ChainBB->setAlignment(Align);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2975</td>
    <td class="codeLine">      DetermineMaxAlignmentPadding();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2975</td>
    <td class="codeLine">      DetermineMaxAlignmentPadding();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2976</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2976</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2977</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2977</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2978</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2978</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2979</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2979</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2980</td>
    <td class="codeLine">/// Tail duplicate \p BB into (some) predecessors if profitable, repeating if</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2980</td>
    <td class="codeLine">/// Tail duplicate \p BB into (some) predecessors if profitable, repeating if</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2981</td>
    <td class="codeLine">/// it was duplicated into its chain predecessor and removed.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2981</td>
    <td class="codeLine">/// it was duplicated into its chain predecessor and removed.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2982</td>
    <td class="codeLine">/// \p BB    - Basic block that may be duplicated.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2982</td>
    <td class="codeLine">/// \p BB    - Basic block that may be duplicated.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2983</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2983</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2984</td>
    <td class="codeLine">/// \p LPred - Chosen layout predecessor of \p BB.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2984</td>
    <td class="codeLine">/// \p LPred - Chosen layout predecessor of \p BB.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2985</td>
    <td class="codeLine">///            Updated to be the chain end if LPred is removed.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2985</td>
    <td class="codeLine">///            Updated to be the chain end if LPred is removed.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2986</td>
    <td class="codeLine">/// \p Chain - Chain to which \p LPred belongs, and \p BB will belong.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2986</td>
    <td class="codeLine">/// \p Chain - Chain to which \p LPred belongs, and \p BB will belong.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2987</td>
    <td class="codeLine">/// \p BlockFilter - Set of blocks that belong to the loop being laid out.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2987</td>
    <td class="codeLine">/// \p BlockFilter - Set of blocks that belong to the loop being laid out.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2988</td>
    <td class="codeLine">///                  Used to identify which blocks to update predecessor</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2988</td>
    <td class="codeLine">///                  Used to identify which blocks to update predecessor</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2989</td>
    <td class="codeLine">///                  counts.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2989</td>
    <td class="codeLine">///                  counts.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2990</td>
    <td class="codeLine">/// \p PrevUnplacedBlockIt - Iterator pointing to the last block that was</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2990</td>
    <td class="codeLine">/// \p PrevUnplacedBlockIt - Iterator pointing to the last block that was</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2991</td>
    <td class="codeLine">///                          chosen in the given order due to unnatural CFG</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2991</td>
    <td class="codeLine">///                          chosen in the given order due to unnatural CFG</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2992</td>
    <td class="codeLine">///                          only needed if \p BB is removed and</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2992</td>
    <td class="codeLine">///                          only needed if \p BB is removed and</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2993</td>
    <td class="codeLine">///                          \p PrevUnplacedBlockIt pointed to \p BB.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2993</td>
    <td class="codeLine">///                          \p PrevUnplacedBlockIt pointed to \p BB.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2994</td>
    <td class="codeLine">/// @return true if \p BB was removed.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2994</td>
    <td class="codeLine">/// @return true if \p BB was removed.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2995</td>
    <td class="codeLine">bool MachineBlockPlacement::repeatedlyTailDuplicateBlock(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">2995</td>
    <td class="codeLine">bool MachineBlockPlacement::repeatedlyTailDuplicateBlock(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2996</td>
    <td class="codeLine">    MachineBasicBlock *BB, MachineBasicBlock *&LPred,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2996</td>
    <td class="codeLine">    MachineBasicBlock *BB, MachineBasicBlock *&LPred,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2997</td>
    <td class="codeLine">    const MachineBasicBlock *LoopHeaderBB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2997</td>
    <td class="codeLine">    const MachineBasicBlock *LoopHeaderBB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2998</td>
    <td class="codeLine">    BlockChain &Chain, BlockFilterSet *BlockFilter,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2998</td>
    <td class="codeLine">    BlockChain &Chain, BlockFilterSet *BlockFilter,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">2999</td>
    <td class="codeLine">    MachineFunction::iterator &PrevUnplacedBlockIt) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">2999</td>
    <td class="codeLine">    MachineFunction::iterator &PrevUnplacedBlockIt) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3000</td>
    <td class="codeLine">  bool Removed, DuplicatedToLPred;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3000</td>
    <td class="codeLine">  bool Removed, DuplicatedToLPred;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3001</td>
    <td class="codeLine">  bool DuplicatedToOriginalLPred;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3001</td>
    <td class="codeLine">  bool DuplicatedToOriginalLPred;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3002</td>
    <td class="codeLine">  Removed = maybeTailDuplicateBlock(BB, LPred, Chain, BlockFilter,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3002</td>
    <td class="codeLine">  Removed = maybeTailDuplicateBlock(BB, LPred, Chain, BlockFilter,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3003</td>
    <td class="codeLine">                                    PrevUnplacedBlockIt,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3003</td>
    <td class="codeLine">                                    PrevUnplacedBlockIt,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3004</td>
    <td class="codeLine">                                    DuplicatedToLPred);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3004</td>
    <td class="codeLine">                                    DuplicatedToLPred);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3005</td>
    <td class="codeLine">  if (!Removed)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3005</td>
    <td class="codeLine">  if (!Removed)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3006</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3006</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3007</td>
    <td class="codeLine">  DuplicatedToOriginalLPred = DuplicatedToLPred;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3007</td>
    <td class="codeLine">  DuplicatedToOriginalLPred = DuplicatedToLPred;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3008</td>
    <td class="codeLine">  // Iteratively try to duplicate again. It can happen that a block that is</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3008</td>
    <td class="codeLine">  // Iteratively try to duplicate again. It can happen that a block that is</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3009</td>
    <td class="codeLine">  // duplicated into is still small enough to be duplicated again.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3009</td>
    <td class="codeLine">  // duplicated into is still small enough to be duplicated again.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3010</td>
    <td class="codeLine">  // No need to call markBlockSuccessors in this case, as the blocks being</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3010</td>
    <td class="codeLine">  // No need to call markBlockSuccessors in this case, as the blocks being</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3011</td>
    <td class="codeLine">  // duplicated from here on are already scheduled.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3011</td>
    <td class="codeLine">  // duplicated from here on are already scheduled.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3012</td>
    <td class="codeLine">  while (DuplicatedToLPred && Removed) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3012</td>
    <td class="codeLine">  while (DuplicatedToLPred && Removed) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3013</td>
    <td class="codeLine">    MachineBasicBlock *DupBB, *DupPred;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3013</td>
    <td class="codeLine">    MachineBasicBlock *DupBB, *DupPred;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3014</td>
    <td class="codeLine">    // The removal callback causes Chain.end() to be updated when a block is</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3014</td>
    <td class="codeLine">    // The removal callback causes Chain.end() to be updated when a block is</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3015</td>
    <td class="codeLine">    // removed. On the first pass through the loop, the chain end should be the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3015</td>
    <td class="codeLine">    // removed. On the first pass through the loop, the chain end should be the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3016</td>
    <td class="codeLine">    // same as it was on function entry. On subsequent passes, because we are</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3016</td>
    <td class="codeLine">    // same as it was on function entry. On subsequent passes, because we are</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3017</td>
    <td class="codeLine">    // duplicating the block at the end of the chain, if it is removed the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3017</td>
    <td class="codeLine">    // duplicating the block at the end of the chain, if it is removed the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3018</td>
    <td class="codeLine">    // chain will have shrunk by one block.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3018</td>
    <td class="codeLine">    // chain will have shrunk by one block.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3019</td>
    <td class="codeLine">    BlockChain::iterator ChainEnd = Chain.end();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3019</td>
    <td class="codeLine">    BlockChain::iterator ChainEnd = Chain.end();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3020</td>
    <td class="codeLine">    DupBB = *(--ChainEnd);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3020</td>
    <td class="codeLine">    DupBB = *(--ChainEnd);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3021</td>
    <td class="codeLine">    // Now try to duplicate again.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3021</td>
    <td class="codeLine">    // Now try to duplicate again.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3022</td>
    <td class="codeLine">    if (ChainEnd == Chain.begin())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3022</td>
    <td class="codeLine">    if (ChainEnd == Chain.begin())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3023</td>
    <td class="codeLine">      break;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3023</td>
    <td class="codeLine">      break;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3024</td>
    <td class="codeLine">    DupPred = *std::prev(ChainEnd);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3024</td>
    <td class="codeLine">    DupPred = *std::prev(ChainEnd);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3025</td>
    <td class="codeLine">    Removed = maybeTailDuplicateBlock(DupBB, DupPred, Chain, BlockFilter,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3025</td>
    <td class="codeLine">    Removed = maybeTailDuplicateBlock(DupBB, DupPred, Chain, BlockFilter,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3026</td>
    <td class="codeLine">                                      PrevUnplacedBlockIt,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3026</td>
    <td class="codeLine">                                      PrevUnplacedBlockIt,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3027</td>
    <td class="codeLine">                                      DuplicatedToLPred);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3027</td>
    <td class="codeLine">                                      DuplicatedToLPred);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3028</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3028</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3029</td>
    <td class="codeLine">  // If BB was duplicated into LPred, it is now scheduled. But because it was</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3029</td>
    <td class="codeLine">  // If BB was duplicated into LPred, it is now scheduled. But because it was</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3030</td>
    <td class="codeLine">  // removed, markChainSuccessors won't be called for its chain. Instead we</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3030</td>
    <td class="codeLine">  // removed, markChainSuccessors won't be called for its chain. Instead we</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3031</td>
    <td class="codeLine">  // call markBlockSuccessors for LPred to achieve the same effect. This must go</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3031</td>
    <td class="codeLine">  // call markBlockSuccessors for LPred to achieve the same effect. This must go</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3032</td>
    <td class="codeLine">  // at the end because repeating the tail duplication can increase the number</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3032</td>
    <td class="codeLine">  // at the end because repeating the tail duplication can increase the number</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3033</td>
    <td class="codeLine">  // of unscheduled predecessors.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3033</td>
    <td class="codeLine">  // of unscheduled predecessors.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3034</td>
    <td class="codeLine">  LPred = *std::prev(Chain.end());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3034</td>
    <td class="codeLine">  LPred = *std::prev(Chain.end());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3035</td>
    <td class="codeLine">  if (DuplicatedToOriginalLPred)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3035</td>
    <td class="codeLine">  if (DuplicatedToOriginalLPred)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3036</td>
    <td class="codeLine">    markBlockSuccessors(Chain, LPred, LoopHeaderBB, BlockFilter);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3036</td>
    <td class="codeLine">    markBlockSuccessors(Chain, LPred, LoopHeaderBB, BlockFilter);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3037</td>
    <td class="codeLine">  return true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3037</td>
    <td class="codeLine">  return true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3038</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3038</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3039</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3039</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3040</td>
    <td class="codeLine">/// Tail duplicate \p BB into (some) predecessors if profitable.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3040</td>
    <td class="codeLine">/// Tail duplicate \p BB into (some) predecessors if profitable.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3041</td>
    <td class="codeLine">/// \p BB    - Basic block that may be duplicated</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3041</td>
    <td class="codeLine">/// \p BB    - Basic block that may be duplicated</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3042</td>
    <td class="codeLine">/// \p LPred - Chosen layout predecessor of \p BB</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3042</td>
    <td class="codeLine">/// \p LPred - Chosen layout predecessor of \p BB</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3043</td>
    <td class="codeLine">/// \p Chain - Chain to which \p LPred belongs, and \p BB will belong.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3043</td>
    <td class="codeLine">/// \p Chain - Chain to which \p LPred belongs, and \p BB will belong.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3044</td>
    <td class="codeLine">/// \p BlockFilter - Set of blocks that belong to the loop being laid out.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3044</td>
    <td class="codeLine">/// \p BlockFilter - Set of blocks that belong to the loop being laid out.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3045</td>
    <td class="codeLine">///                  Used to identify which blocks to update predecessor</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3045</td>
    <td class="codeLine">///                  Used to identify which blocks to update predecessor</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3046</td>
    <td class="codeLine">///                  counts.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3046</td>
    <td class="codeLine">///                  counts.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3047</td>
    <td class="codeLine">/// \p PrevUnplacedBlockIt - Iterator pointing to the last block that was</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3047</td>
    <td class="codeLine">/// \p PrevUnplacedBlockIt - Iterator pointing to the last block that was</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3048</td>
    <td class="codeLine">///                          chosen in the given order due to unnatural CFG</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3048</td>
    <td class="codeLine">///                          chosen in the given order due to unnatural CFG</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3049</td>
    <td class="codeLine">///                          only needed if \p BB is removed and</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3049</td>
    <td class="codeLine">///                          only needed if \p BB is removed and</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3050</td>
    <td class="codeLine">///                          \p PrevUnplacedBlockIt pointed to \p BB.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3050</td>
    <td class="codeLine">///                          \p PrevUnplacedBlockIt pointed to \p BB.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3051</td>
    <td class="codeLine">/// \p DuplicatedToLPred - True if the block was duplicated into LPred.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3051</td>
    <td class="codeLine">/// \p DuplicatedToLPred - True if the block was duplicated into LPred.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3052</td>
    <td class="codeLine">/// \return  - True if the block was duplicated into all preds and removed.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3052</td>
    <td class="codeLine">/// \return  - True if the block was duplicated into all preds and removed.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3053</td>
    <td class="codeLine">bool MachineBlockPlacement::maybeTailDuplicateBlock(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3053</td>
    <td class="codeLine">bool MachineBlockPlacement::maybeTailDuplicateBlock(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3054</td>
    <td class="codeLine">    MachineBasicBlock *BB, MachineBasicBlock *LPred,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3054</td>
    <td class="codeLine">    MachineBasicBlock *BB, MachineBasicBlock *LPred,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3055</td>
    <td class="codeLine">    BlockChain &Chain, BlockFilterSet *BlockFilter,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3055</td>
    <td class="codeLine">    BlockChain &Chain, BlockFilterSet *BlockFilter,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3056</td>
    <td class="codeLine">    MachineFunction::iterator &PrevUnplacedBlockIt,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3056</td>
    <td class="codeLine">    MachineFunction::iterator &PrevUnplacedBlockIt,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3057</td>
    <td class="codeLine">    bool &DuplicatedToLPred) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3057</td>
    <td class="codeLine">    bool &DuplicatedToLPred) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3058</td>
    <td class="codeLine">  DuplicatedToLPred = false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3058</td>
    <td class="codeLine">  DuplicatedToLPred = false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3059</td>
    <td class="codeLine">  if (!shouldTailDuplicate(BB))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3059</td>
    <td class="codeLine">  if (!shouldTailDuplicate(BB))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3060</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3060</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3061</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3061</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3062</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "Redoing tail duplication for Succ#" << BB->getNumber()</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3062</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "Redoing tail duplication for Succ#" << BB->getNumber()</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3063</td>
    <td class="codeLine">                    << "\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3063</td>
    <td class="codeLine">                    << "\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3064</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3064</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3065</td>
    <td class="codeLine">  // This has to be a callback because none of it can be done after</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3065</td>
    <td class="codeLine">  // This has to be a callback because none of it can be done after</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3066</td>
    <td class="codeLine">  // BB is deleted.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3066</td>
    <td class="codeLine">  // BB is deleted.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3067</td>
    <td class="codeLine">  bool Removed = false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3067</td>
    <td class="codeLine">  bool Removed = false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3068</td>
    <td class="codeLine">  auto RemovalCallback =</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3068</td>
    <td class="codeLine">  auto RemovalCallback =</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3069</td>
    <td class="codeLine">      [&](MachineBasicBlock *RemBB) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3069</td>
    <td class="codeLine">      [&](MachineBasicBlock *RemBB) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3070</td>
    <td class="codeLine">        // Signal to outer function</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3070</td>
    <td class="codeLine">        // Signal to outer function</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3071</td>
    <td class="codeLine">        Removed = true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3071</td>
    <td class="codeLine">        Removed = true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3072</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3072</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3073</td>
    <td class="codeLine">        // Conservative default.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3073</td>
    <td class="codeLine">        // Conservative default.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3074</td>
    <td class="codeLine">        bool InWorkList = true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3074</td>
    <td class="codeLine">        bool InWorkList = true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3075</td>
    <td class="codeLine">        // Remove from the Chain and Chain Map</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3075</td>
    <td class="codeLine">        // Remove from the Chain and Chain Map</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3076</td>
    <td class="codeLine">        if (BlockToChain.count(RemBB)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3076</td>
    <td class="codeLine">        if (BlockToChain.count(RemBB)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3077</td>
    <td class="codeLine">          BlockChain *Chain = BlockToChain[RemBB];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3077</td>
    <td class="codeLine">          BlockChain *Chain = BlockToChain[RemBB];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3078</td>
    <td class="codeLine">          InWorkList = Chain->UnscheduledPredecessors == 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3078</td>
    <td class="codeLine">          InWorkList = Chain->UnscheduledPredecessors == 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3079</td>
    <td class="codeLine">          Chain->remove(RemBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3079</td>
    <td class="codeLine">          Chain->remove(RemBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3080</td>
    <td class="codeLine">          BlockToChain.erase(RemBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3080</td>
    <td class="codeLine">          BlockToChain.erase(RemBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3081</td>
    <td class="codeLine">        }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3081</td>
    <td class="codeLine">        }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3082</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3082</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3083</td>
    <td class="codeLine">        // Handle the unplaced block iterator</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3083</td>
    <td class="codeLine">        // Handle the unplaced block iterator</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3084</td>
    <td class="codeLine">        if (&(*PrevUnplacedBlockIt) == RemBB) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3084</td>
    <td class="codeLine">        if (&(*PrevUnplacedBlockIt) == RemBB) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3085</td>
    <td class="codeLine">          PrevUnplacedBlockIt++;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3085</td>
    <td class="codeLine">          PrevUnplacedBlockIt++;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3086</td>
    <td class="codeLine">        }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3086</td>
    <td class="codeLine">        }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3087</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3087</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3088</td>
    <td class="codeLine">        // Handle the Work Lists</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3088</td>
    <td class="codeLine">        // Handle the Work Lists</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3089</td>
    <td class="codeLine">        if (InWorkList) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3089</td>
    <td class="codeLine">        if (InWorkList) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3090</td>
    <td class="codeLine">          SmallVectorImpl<MachineBasicBlock *> &RemoveList = BlockWorkList;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3090</td>
    <td class="codeLine">          SmallVectorImpl<MachineBasicBlock *> &RemoveList = BlockWorkList;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3091</td>
    <td class="codeLine">          if (RemBB->isEHPad())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3091</td>
    <td class="codeLine">          if (RemBB->isEHPad())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3092</td>
    <td class="codeLine">            RemoveList = EHPadWorkList;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3092</td>
    <td class="codeLine">            RemoveList = EHPadWorkList;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3093</td>
    <td class="codeLine">          llvm::erase_value(RemoveList, RemBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3093</td>
    <td class="codeLine">          llvm::erase_value(RemoveList, RemBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3094</td>
    <td class="codeLine">        }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3094</td>
    <td class="codeLine">        }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3095</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3095</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3096</td>
    <td class="codeLine">        // Handle the filter set</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3096</td>
    <td class="codeLine">        // Handle the filter set</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3097</td>
    <td class="codeLine">        if (BlockFilter) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3097</td>
    <td class="codeLine">        if (BlockFilter) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3098</td>
    <td class="codeLine">          BlockFilter->remove(RemBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3098</td>
    <td class="codeLine">          BlockFilter->remove(RemBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3099</td>
    <td class="codeLine">        }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3099</td>
    <td class="codeLine">        }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3100</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3100</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3101</td>
    <td class="codeLine">        // Remove the block from loop info.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3101</td>
    <td class="codeLine">        // Remove the block from loop info.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3102</td>
    <td class="codeLine">        MLI->removeBlock(RemBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3102</td>
    <td class="codeLine">        MLI->removeBlock(RemBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3103</td>
    <td class="codeLine">        if (RemBB == PreferredLoopExit)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3103</td>
    <td class="codeLine">        if (RemBB == PreferredLoopExit)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3104</td>
    <td class="codeLine">          PreferredLoopExit = nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3104</td>
    <td class="codeLine">          PreferredLoopExit = nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3105</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3105</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3106</td>
    <td class="codeLine">        LLVM_DEBUG(dbgs() << "TailDuplicator deleted block: "</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3106</td>
    <td class="codeLine">        LLVM_DEBUG(dbgs() << "TailDuplicator deleted block: "</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3107</td>
    <td class="codeLine">                          << getBlockName(RemBB) << "\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3107</td>
    <td class="codeLine">                          << getBlockName(RemBB) << "\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3108</td>
    <td class="codeLine">      };</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3108</td>
    <td class="codeLine">      };</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3109</td>
    <td class="codeLine">  auto RemovalCallbackRef =</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3109</td>
    <td class="codeLine">  auto RemovalCallbackRef =</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3110</td>
    <td class="codeLine">      function_ref<void(MachineBasicBlock*)>(RemovalCallback);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3110</td>
    <td class="codeLine">      function_ref<void(MachineBasicBlock*)>(RemovalCallback);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3111</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3111</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3112</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 8> DuplicatedPreds;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3112</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 8> DuplicatedPreds;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3113</td>
    <td class="codeLine">  bool IsSimple = TailDup.isSimpleBB(BB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3113</td>
    <td class="codeLine">  bool IsSimple = TailDup.isSimpleBB(BB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3114</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 8> CandidatePreds;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3114</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 8> CandidatePreds;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3115</td>
    <td class="codeLine">  SmallVectorImpl<MachineBasicBlock *> *CandidatePtr = nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3115</td>
    <td class="codeLine">  SmallVectorImpl<MachineBasicBlock *> *CandidatePtr = nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3116</td>
    <td class="codeLine">  if (F->getFunction().hasProfileData()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3116</td>
    <td class="codeLine">  if (F->getFunction().hasProfileData()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3117</td>
    <td class="codeLine">    // We can do partial duplication with precise profile information.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3117</td>
    <td class="codeLine">    // We can do partial duplication with precise profile information.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3118</td>
    <td class="codeLine">    findDuplicateCandidates(CandidatePreds, BB, BlockFilter);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3118</td>
    <td class="codeLine">    findDuplicateCandidates(CandidatePreds, BB, BlockFilter);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3119</td>
    <td class="codeLine">    if (CandidatePreds.size() == 0)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3119</td>
    <td class="codeLine">    if (CandidatePreds.size() == 0)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3120</td>
    <td class="codeLine">      return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3120</td>
    <td class="codeLine">      return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3121</td>
    <td class="codeLine">    if (CandidatePreds.size() < BB->pred_size())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3121</td>
    <td class="codeLine">    if (CandidatePreds.size() < BB->pred_size())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3122</td>
    <td class="codeLine">      CandidatePtr = &CandidatePreds;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3122</td>
    <td class="codeLine">      CandidatePtr = &CandidatePreds;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3123</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3123</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3124</td>
    <td class="codeLine">  TailDup.tailDuplicateAndUpdate(IsSimple, BB, LPred, &DuplicatedPreds,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3124</td>
    <td class="codeLine">  TailDup.tailDuplicateAndUpdate(IsSimple, BB, LPred, &DuplicatedPreds,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3125</td>
    <td class="codeLine">                                 &RemovalCallbackRef, CandidatePtr);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3125</td>
    <td class="codeLine">                                 &RemovalCallbackRef, CandidatePtr);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3126</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3126</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3127</td>
    <td class="codeLine">  // Update UnscheduledPredecessors to reflect tail-duplication.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3127</td>
    <td class="codeLine">  // Update UnscheduledPredecessors to reflect tail-duplication.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3128</td>
    <td class="codeLine">  DuplicatedToLPred = false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3128</td>
    <td class="codeLine">  DuplicatedToLPred = false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3129</td>
    <td class="codeLine">  for (MachineBasicBlock *Pred : DuplicatedPreds) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3129</td>
    <td class="codeLine">  for (MachineBasicBlock *Pred : DuplicatedPreds) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3130</td>
    <td class="codeLine">    // We're only looking for unscheduled predecessors that match the filter.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3130</td>
    <td class="codeLine">    // We're only looking for unscheduled predecessors that match the filter.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3131</td>
    <td class="codeLine">    BlockChain* PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3131</td>
    <td class="codeLine">    BlockChain* PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3132</td>
    <td class="codeLine">    if (Pred == LPred)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3132</td>
    <td class="codeLine">    if (Pred == LPred)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3133</td>
    <td class="codeLine">      DuplicatedToLPred = true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3133</td>
    <td class="codeLine">      DuplicatedToLPred = true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3134</td>
    <td class="codeLine">    if (Pred == LPred || (BlockFilter && !BlockFilter->count(Pred))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3134</td>
    <td class="codeLine">    if (Pred == LPred || (BlockFilter && !BlockFilter->count(Pred))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3135</td>
    <td class="codeLine">        || PredChain == &Chain)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3135</td>
    <td class="codeLine">        || PredChain == &Chain)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3136</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3136</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3137</td>
    <td class="codeLine">    for (MachineBasicBlock *NewSucc : Pred->successors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3137</td>
    <td class="codeLine">    for (MachineBasicBlock *NewSucc : Pred->successors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3138</td>
    <td class="codeLine">      if (BlockFilter && !BlockFilter->count(NewSucc))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3138</td>
    <td class="codeLine">      if (BlockFilter && !BlockFilter->count(NewSucc))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3139</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3139</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3140</td>
    <td class="codeLine">      BlockChain *NewChain = BlockToChain[NewSucc];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3140</td>
    <td class="codeLine">      BlockChain *NewChain = BlockToChain[NewSucc];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3141</td>
    <td class="codeLine">      if (NewChain != &Chain && NewChain != PredChain)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3141</td>
    <td class="codeLine">      if (NewChain != &Chain && NewChain != PredChain)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3142</td>
    <td class="codeLine">        NewChain->UnscheduledPredecessors++;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3142</td>
    <td class="codeLine">        NewChain->UnscheduledPredecessors++;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3143</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3143</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3144</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3144</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3145</td>
    <td class="codeLine">  return Removed;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3145</td>
    <td class="codeLine">  return Removed;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3146</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3146</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3147</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3147</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3148</td>
    <td class="codeLine">// Count the number of actual machine instructions.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3148</td>
    <td class="codeLine">// Count the number of actual machine instructions.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3149</td>
    <td class="codeLine">static uint64_t countMBBInstruction(MachineBasicBlock *MBB) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3149</td>
    <td class="codeLine">static uint64_t countMBBInstruction(MachineBasicBlock *MBB) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3150</td>
    <td class="codeLine">  uint64_t InstrCount = 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3150</td>
    <td class="codeLine">  uint64_t InstrCount = 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3151</td>
    <td class="codeLine">  for (MachineInstr &MI : *MBB) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3151</td>
    <td class="codeLine">  for (MachineInstr &MI : *MBB) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3152</td>
    <td class="codeLine">    if (!MI.isPHI() && !MI.isMetaInstruction())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3152</td>
    <td class="codeLine">    if (!MI.isPHI() && !MI.isMetaInstruction())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3153</td>
    <td class="codeLine">      InstrCount += 1;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3153</td>
    <td class="codeLine">      InstrCount += 1;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3154</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3154</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3155</td>
    <td class="codeLine">  return InstrCount;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3155</td>
    <td class="codeLine">  return InstrCount;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3156</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3156</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3157</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3157</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3158</td>
    <td class="codeLine">// The size cost of duplication is the instruction size of the duplicated block.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3158</td>
    <td class="codeLine">// The size cost of duplication is the instruction size of the duplicated block.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3159</td>
    <td class="codeLine">// So we should scale the threshold accordingly. But the instruction size is not</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3159</td>
    <td class="codeLine">// So we should scale the threshold accordingly. But the instruction size is not</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3160</td>
    <td class="codeLine">// available on all targets, so we use the number of instructions instead.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3160</td>
    <td class="codeLine">// available on all targets, so we use the number of instructions instead.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3161</td>
    <td class="codeLine">BlockFrequency MachineBlockPlacement::scaleThreshold(MachineBasicBlock *BB) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3161</td>
    <td class="codeLine">BlockFrequency MachineBlockPlacement::scaleThreshold(MachineBasicBlock *BB) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3162</td>
    <td class="codeLine">  return DupThreshold.getFrequency() * countMBBInstruction(BB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3162</td>
    <td class="codeLine">  return DupThreshold.getFrequency() * countMBBInstruction(BB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3163</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3163</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3164</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3164</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3165</td>
    <td class="codeLine">// Returns true if BB is Pred's best successor.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3165</td>
    <td class="codeLine">// Returns true if BB is Pred's best successor.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3166</td>
    <td class="codeLine">bool MachineBlockPlacement::isBestSuccessor(MachineBasicBlock *BB,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3166</td>
    <td class="codeLine">bool MachineBlockPlacement::isBestSuccessor(MachineBasicBlock *BB,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3167</td>
    <td class="codeLine">                                            MachineBasicBlock *Pred,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3167</td>
    <td class="codeLine">                                            MachineBasicBlock *Pred,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3168</td>
    <td class="codeLine">                                            BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3168</td>
    <td class="codeLine">                                            BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3169</td>
    <td class="codeLine">  if (BB == Pred)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3169</td>
    <td class="codeLine">  if (BB == Pred)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3170</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3170</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3171</td>
    <td class="codeLine">  if (BlockFilter && !BlockFilter->count(Pred))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3171</td>
    <td class="codeLine">  if (BlockFilter && !BlockFilter->count(Pred))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3172</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3172</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3173</td>
    <td class="codeLine">  BlockChain *PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3173</td>
    <td class="codeLine">  BlockChain *PredChain = BlockToChain[Pred];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3174</td>
    <td class="codeLine">  if (PredChain && (Pred != *std::prev(PredChain->end())))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3174</td>
    <td class="codeLine">  if (PredChain && (Pred != *std::prev(PredChain->end())))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3175</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3175</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3176</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3176</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3177</td>
    <td class="codeLine">  // Find the successor with largest probability excluding BB.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3177</td>
    <td class="codeLine">  // Find the successor with largest probability excluding BB.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3178</td>
    <td class="codeLine">  BranchProbability BestProb = BranchProbability::getZero();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3178</td>
    <td class="codeLine">  BranchProbability BestProb = BranchProbability::getZero();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3179</td>
    <td class="codeLine">  for (MachineBasicBlock *Succ : Pred->successors())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3179</td>
    <td class="codeLine">  for (MachineBasicBlock *Succ : Pred->successors())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3180</td>
    <td class="codeLine">    if (Succ != BB) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3180</td>
    <td class="codeLine">    if (Succ != BB) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3181</td>
    <td class="codeLine">      if (BlockFilter && !BlockFilter->count(Succ))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3181</td>
    <td class="codeLine">      if (BlockFilter && !BlockFilter->count(Succ))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3182</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3182</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3183</td>
    <td class="codeLine">      BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3183</td>
    <td class="codeLine">      BlockChain *SuccChain = BlockToChain[Succ];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3184</td>
    <td class="codeLine">      if (SuccChain && (Succ != *SuccChain->begin()))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3184</td>
    <td class="codeLine">      if (SuccChain && (Succ != *SuccChain->begin()))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3185</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3185</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3186</td>
    <td class="codeLine">      BranchProbability SuccProb = MBPI->getEdgeProbability(Pred, Succ);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3186</td>
    <td class="codeLine">      BranchProbability SuccProb = MBPI->getEdgeProbability(Pred, Succ);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3187</td>
    <td class="codeLine">      if (SuccProb > BestProb)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3187</td>
    <td class="codeLine">      if (SuccProb > BestProb)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3188</td>
    <td class="codeLine">        BestProb = SuccProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3188</td>
    <td class="codeLine">        BestProb = SuccProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3189</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3189</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3190</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3190</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3191</td>
    <td class="codeLine">  BranchProbability BBProb = MBPI->getEdgeProbability(Pred, BB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3191</td>
    <td class="codeLine">  BranchProbability BBProb = MBPI->getEdgeProbability(Pred, BB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3192</td>
    <td class="codeLine">  if (BBProb <= BestProb)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3192</td>
    <td class="codeLine">  if (BBProb <= BestProb)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3193</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3193</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3194</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3194</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3195</td>
    <td class="codeLine">  // Compute the number of reduced taken branches if Pred falls through to BB</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3195</td>
    <td class="codeLine">  // Compute the number of reduced taken branches if Pred falls through to BB</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3196</td>
    <td class="codeLine">  // instead of another successor. Then compare it with threshold.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3196</td>
    <td class="codeLine">  // instead of another successor. Then compare it with threshold.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3197</td>
    <td class="codeLine">  BlockFrequency PredFreq = getBlockCountOrFrequency(Pred);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3197</td>
    <td class="codeLine">  BlockFrequency PredFreq = getBlockCountOrFrequency(Pred);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3198</td>
    <td class="codeLine">  BlockFrequency Gain = PredFreq * (BBProb - BestProb);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3198</td>
    <td class="codeLine">  BlockFrequency Gain = PredFreq * (BBProb - BestProb);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3199</td>
    <td class="codeLine">  return Gain > scaleThreshold(BB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3199</td>
    <td class="codeLine">  return Gain > scaleThreshold(BB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3200</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3200</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3201</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3201</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3202</td>
    <td class="codeLine">// Find out the predecessors of BB and BB can be beneficially duplicated into</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3202</td>
    <td class="codeLine">// Find out the predecessors of BB and BB can be beneficially duplicated into</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3203</td>
    <td class="codeLine">// them.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3203</td>
    <td class="codeLine">// them.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3204</td>
    <td class="codeLine">void MachineBlockPlacement::findDuplicateCandidates(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3204</td>
    <td class="codeLine">void MachineBlockPlacement::findDuplicateCandidates(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3205</td>
    <td class="codeLine">    SmallVectorImpl<MachineBasicBlock *> &Candidates,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3205</td>
    <td class="codeLine">    SmallVectorImpl<MachineBasicBlock *> &Candidates,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3206</td>
    <td class="codeLine">    MachineBasicBlock *BB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3206</td>
    <td class="codeLine">    MachineBasicBlock *BB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3207</td>
    <td class="codeLine">    BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3207</td>
    <td class="codeLine">    BlockFilterSet *BlockFilter) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3208</td>
    <td class="codeLine">  MachineBasicBlock *Fallthrough = nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3208</td>
    <td class="codeLine">  MachineBasicBlock *Fallthrough = nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3209</td>
    <td class="codeLine">  BranchProbability DefaultBranchProb = BranchProbability::getZero();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3209</td>
    <td class="codeLine">  BranchProbability DefaultBranchProb = BranchProbability::getZero();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3210</td>
    <td class="codeLine">  BlockFrequency BBDupThreshold(scaleThreshold(BB));</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3210</td>
    <td class="codeLine">  BlockFrequency BBDupThreshold(scaleThreshold(BB));</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3211</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 8> Preds(BB->predecessors());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3211</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 8> Preds(BB->predecessors());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3212</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 8> Succs(BB->successors());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3212</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 8> Succs(BB->successors());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3213</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3213</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3214</td>
    <td class="codeLine">  // Sort for highest frequency.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3214</td>
    <td class="codeLine">  // Sort for highest frequency.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3215</td>
    <td class="codeLine">  auto CmpSucc = [&](MachineBasicBlock *A, MachineBasicBlock *B) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3215</td>
    <td class="codeLine">  auto CmpSucc = [&](MachineBasicBlock *A, MachineBasicBlock *B) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3216</td>
    <td class="codeLine">    return MBPI->getEdgeProbability(BB, A) > MBPI->getEdgeProbability(BB, B);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3216</td>
    <td class="codeLine">    return MBPI->getEdgeProbability(BB, A) > MBPI->getEdgeProbability(BB, B);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3217</td>
    <td class="codeLine">  };</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3217</td>
    <td class="codeLine">  };</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3218</td>
    <td class="codeLine">  auto CmpPred = [&](MachineBasicBlock *A, MachineBasicBlock *B) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3218</td>
    <td class="codeLine">  auto CmpPred = [&](MachineBasicBlock *A, MachineBasicBlock *B) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3219</td>
    <td class="codeLine">    return MBFI->getBlockFreq(A) > MBFI->getBlockFreq(B);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3219</td>
    <td class="codeLine">    return MBFI->getBlockFreq(A) > MBFI->getBlockFreq(B);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3220</td>
    <td class="codeLine">  };</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3220</td>
    <td class="codeLine">  };</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3221</td>
    <td class="codeLine">  llvm::stable_sort(Succs, CmpSucc);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3221</td>
    <td class="codeLine">  llvm::stable_sort(Succs, CmpSucc);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3222</td>
    <td class="codeLine">  llvm::stable_sort(Preds, CmpPred);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3222</td>
    <td class="codeLine">  llvm::stable_sort(Preds, CmpPred);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3223</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3223</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3224</td>
    <td class="codeLine">  auto SuccIt = Succs.begin();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3224</td>
    <td class="codeLine">  auto SuccIt = Succs.begin();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3225</td>
    <td class="codeLine">  if (SuccIt != Succs.end()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3225</td>
    <td class="codeLine">  if (SuccIt != Succs.end()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3226</td>
    <td class="codeLine">    DefaultBranchProb = MBPI->getEdgeProbability(BB, *SuccIt).getCompl();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3226</td>
    <td class="codeLine">    DefaultBranchProb = MBPI->getEdgeProbability(BB, *SuccIt).getCompl();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3227</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3227</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3228</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3228</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3229</td>
    <td class="codeLine">  // For each predecessors of BB, compute the benefit of duplicating BB,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3229</td>
    <td class="codeLine">  // For each predecessors of BB, compute the benefit of duplicating BB,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3230</td>
    <td class="codeLine">  // if it is larger than the threshold, add it into Candidates.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3230</td>
    <td class="codeLine">  // if it is larger than the threshold, add it into Candidates.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3231</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3231</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3232</td>
    <td class="codeLine">  // If we have following control flow.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3232</td>
    <td class="codeLine">  // If we have following control flow.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3233</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3233</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3234</td>
    <td class="codeLine">  //     PB1 PB2 PB3 PB4</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3234</td>
    <td class="codeLine">  //     PB1 PB2 PB3 PB4</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3235</td>
    <td class="codeLine">  //      \   |  /    /\</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3235</td>
    <td class="codeLine">  //      \   |  /    /\</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3236</td>
    <td class="codeLine">  //       \  | /    /  \</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3236</td>
    <td class="codeLine">  //       \  | /    /  \</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3237</td>
    <td class="codeLine">  //        \ |/    /    \</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3237</td>
    <td class="codeLine">  //        \ |/    /    \</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3238</td>
    <td class="codeLine">  //         BB----/     OB</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3238</td>
    <td class="codeLine">  //         BB----/     OB</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3239</td>
    <td class="codeLine">  //         /\</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3239</td>
    <td class="codeLine">  //         /\</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3240</td>
    <td class="codeLine">  //        /  \</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3240</td>
    <td class="codeLine">  //        /  \</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3241</td>
    <td class="codeLine">  //      SB1 SB2</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3241</td>
    <td class="codeLine">  //      SB1 SB2</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3242</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3242</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3243</td>
    <td class="codeLine">  // And it can be partially duplicated as</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3243</td>
    <td class="codeLine">  // And it can be partially duplicated as</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3244</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3244</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3245</td>
    <td class="codeLine">  //   PB2+BB</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3245</td>
    <td class="codeLine">  //   PB2+BB</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3246</td>
    <td class="codeLine">  //      |  PB1 PB3 PB4</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3246</td>
    <td class="codeLine">  //      |  PB1 PB3 PB4</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3247</td>
    <td class="codeLine">  //      |   |  /    /\</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3247</td>
    <td class="codeLine">  //      |   |  /    /\</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3248</td>
    <td class="codeLine">  //      |   | /    /  \</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3248</td>
    <td class="codeLine">  //      |   | /    /  \</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3249</td>
    <td class="codeLine">  //      |   |/    /    \</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3249</td>
    <td class="codeLine">  //      |   |/    /    \</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3250</td>
    <td class="codeLine">  //      |  BB----/     OB</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3250</td>
    <td class="codeLine">  //      |  BB----/     OB</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3251</td>
    <td class="codeLine">  //      |\ /|</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3251</td>
    <td class="codeLine">  //      |\ /|</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3252</td>
    <td class="codeLine">  //      | X |</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3252</td>
    <td class="codeLine">  //      | X |</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3253</td>
    <td class="codeLine">  //      |/ \|</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3253</td>
    <td class="codeLine">  //      |/ \|</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3254</td>
    <td class="codeLine">  //     SB2 SB1</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3254</td>
    <td class="codeLine">  //     SB2 SB1</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3255</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3255</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3256</td>
    <td class="codeLine">  // The benefit of duplicating into a predecessor is defined as</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3256</td>
    <td class="codeLine">  // The benefit of duplicating into a predecessor is defined as</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3257</td>
    <td class="codeLine">  //         Orig_taken_branch - Duplicated_taken_branch</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3257</td>
    <td class="codeLine">  //         Orig_taken_branch - Duplicated_taken_branch</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3258</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3258</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3259</td>
    <td class="codeLine">  // The Orig_taken_branch is computed with the assumption that predecessor</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3259</td>
    <td class="codeLine">  // The Orig_taken_branch is computed with the assumption that predecessor</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3260</td>
    <td class="codeLine">  // jumps to BB and the most possible successor is laid out after BB.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3260</td>
    <td class="codeLine">  // jumps to BB and the most possible successor is laid out after BB.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3261</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3261</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3262</td>
    <td class="codeLine">  // The Duplicated_taken_branch is computed with the assumption that BB is</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3262</td>
    <td class="codeLine">  // The Duplicated_taken_branch is computed with the assumption that BB is</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3263</td>
    <td class="codeLine">  // duplicated into PB, and one successor is layout after it (SB1 for PB1 and</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3263</td>
    <td class="codeLine">  // duplicated into PB, and one successor is layout after it (SB1 for PB1 and</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3264</td>
    <td class="codeLine">  // SB2 for PB2 in our case). If there is no available successor, the combined</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3264</td>
    <td class="codeLine">  // SB2 for PB2 in our case). If there is no available successor, the combined</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3265</td>
    <td class="codeLine">  // block jumps to all BB's successor, like PB3 in this example.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3265</td>
    <td class="codeLine">  // block jumps to all BB's successor, like PB3 in this example.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3266</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3266</td>
    <td class="codeLine">  //</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3267</td>
    <td class="codeLine">  // If a predecessor has multiple successors, so BB can't be duplicated into</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3267</td>
    <td class="codeLine">  // If a predecessor has multiple successors, so BB can't be duplicated into</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3268</td>
    <td class="codeLine">  // it. But it can beneficially fall through to BB, and duplicate BB into other</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3268</td>
    <td class="codeLine">  // it. But it can beneficially fall through to BB, and duplicate BB into other</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3269</td>
    <td class="codeLine">  // predecessors.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3269</td>
    <td class="codeLine">  // predecessors.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3270</td>
    <td class="codeLine">  for (MachineBasicBlock *Pred : Preds) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3270</td>
    <td class="codeLine">  for (MachineBasicBlock *Pred : Preds) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3271</td>
    <td class="codeLine">    BlockFrequency PredFreq = getBlockCountOrFrequency(Pred);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3271</td>
    <td class="codeLine">    BlockFrequency PredFreq = getBlockCountOrFrequency(Pred);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3272</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3272</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3273</td>
    <td class="codeLine">    if (!TailDup.canTailDuplicate(BB, Pred)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3273</td>
    <td class="codeLine">    if (!TailDup.canTailDuplicate(BB, Pred)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3274</td>
    <td class="codeLine">      // BB can't be duplicated into Pred, but it is possible to be layout</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3274</td>
    <td class="codeLine">      // BB can't be duplicated into Pred, but it is possible to be layout</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3275</td>
    <td class="codeLine">      // below Pred.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3275</td>
    <td class="codeLine">      // below Pred.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3276</td>
    <td class="codeLine">      if (!Fallthrough && isBestSuccessor(BB, Pred, BlockFilter)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3276</td>
    <td class="codeLine">      if (!Fallthrough && isBestSuccessor(BB, Pred, BlockFilter)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3277</td>
    <td class="codeLine">        Fallthrough = Pred;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3277</td>
    <td class="codeLine">        Fallthrough = Pred;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3278</td>
    <td class="codeLine">        if (SuccIt != Succs.end())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3278</td>
    <td class="codeLine">        if (SuccIt != Succs.end())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3279</td>
    <td class="codeLine">          SuccIt++;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3279</td>
    <td class="codeLine">          SuccIt++;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3280</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3280</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3281</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3281</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3282</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3282</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3283</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3283</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3284</td>
    <td class="codeLine">    BlockFrequency OrigCost = PredFreq + PredFreq * DefaultBranchProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3284</td>
    <td class="codeLine">    BlockFrequency OrigCost = PredFreq + PredFreq * DefaultBranchProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3285</td>
    <td class="codeLine">    BlockFrequency DupCost;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3285</td>
    <td class="codeLine">    BlockFrequency DupCost;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3286</td>
    <td class="codeLine">    if (SuccIt == Succs.end()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3286</td>
    <td class="codeLine">    if (SuccIt == Succs.end()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3287</td>
    <td class="codeLine">      // Jump to all successors;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3287</td>
    <td class="codeLine">      // Jump to all successors;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3288</td>
    <td class="codeLine">      if (Succs.size() > 0)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3288</td>
    <td class="codeLine">      if (Succs.size() > 0)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3289</td>
    <td class="codeLine">        DupCost += PredFreq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3289</td>
    <td class="codeLine">        DupCost += PredFreq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3290</td>
    <td class="codeLine">    } else {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3290</td>
    <td class="codeLine">    } else {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3291</td>
    <td class="codeLine">      // Fallthrough to *SuccIt, jump to all other successors;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3291</td>
    <td class="codeLine">      // Fallthrough to *SuccIt, jump to all other successors;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3292</td>
    <td class="codeLine">      DupCost += PredFreq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3292</td>
    <td class="codeLine">      DupCost += PredFreq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3293</td>
    <td class="codeLine">      DupCost -= PredFreq * MBPI->getEdgeProbability(BB, *SuccIt);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3293</td>
    <td class="codeLine">      DupCost -= PredFreq * MBPI->getEdgeProbability(BB, *SuccIt);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3294</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3294</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3295</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3295</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3296</td>
    <td class="codeLine">    assert(OrigCost >= DupCost);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3296</td>
    <td class="codeLine">    assert(OrigCost >= DupCost);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3297</td>
    <td class="codeLine">    OrigCost -= DupCost;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3297</td>
    <td class="codeLine">    OrigCost -= DupCost;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3298</td>
    <td class="codeLine">    if (OrigCost > BBDupThreshold) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3298</td>
    <td class="codeLine">    if (OrigCost > BBDupThreshold) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3299</td>
    <td class="codeLine">      Candidates.push_back(Pred);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3299</td>
    <td class="codeLine">      Candidates.push_back(Pred);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3300</td>
    <td class="codeLine">      if (SuccIt != Succs.end())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3300</td>
    <td class="codeLine">      if (SuccIt != Succs.end())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3301</td>
    <td class="codeLine">        SuccIt++;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3301</td>
    <td class="codeLine">        SuccIt++;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3302</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3302</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3303</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3303</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3304</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3304</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3305</td>
    <td class="codeLine">  // No predecessors can optimally fallthrough to BB.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3305</td>
    <td class="codeLine">  // No predecessors can optimally fallthrough to BB.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3306</td>
    <td class="codeLine">  // So we can change one duplication into fallthrough.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3306</td>
    <td class="codeLine">  // So we can change one duplication into fallthrough.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3307</td>
    <td class="codeLine">  if (!Fallthrough) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3307</td>
    <td class="codeLine">  if (!Fallthrough) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3308</td>
    <td class="codeLine">    if ((Candidates.size() < Preds.size()) && (Candidates.size() > 0)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3308</td>
    <td class="codeLine">    if ((Candidates.size() < Preds.size()) && (Candidates.size() > 0)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3309</td>
    <td class="codeLine">      Candidates[0] = Candidates.back();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3309</td>
    <td class="codeLine">      Candidates[0] = Candidates.back();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3310</td>
    <td class="codeLine">      Candidates.pop_back();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3310</td>
    <td class="codeLine">      Candidates.pop_back();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3311</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3311</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3312</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3312</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3313</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3313</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3314</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3314</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3315</td>
    <td class="codeLine">void MachineBlockPlacement::initDupThreshold() {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3315</td>
    <td class="codeLine">void MachineBlockPlacement::initDupThreshold() {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3316</td>
    <td class="codeLine">  DupThreshold = 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3316</td>
    <td class="codeLine">  DupThreshold = 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3317</td>
    <td class="codeLine">  if (!F->getFunction().hasProfileData())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3317</td>
    <td class="codeLine">  if (!F->getFunction().hasProfileData())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3318</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3318</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3319</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3319</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3320</td>
    <td class="codeLine">  // We prefer to use prifile count.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3320</td>
    <td class="codeLine">  // We prefer to use prifile count.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3321</td>
    <td class="codeLine">  uint64_t HotThreshold = PSI->getOrCompHotCountThreshold();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3321</td>
    <td class="codeLine">  uint64_t HotThreshold = PSI->getOrCompHotCountThreshold();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3322</td>
    <td class="codeLine">  if (HotThreshold != UINT64_MAX) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3322</td>
    <td class="codeLine">  if (HotThreshold != UINT64_MAX) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3323</td>
    <td class="codeLine">    UseProfileCount = true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3323</td>
    <td class="codeLine">    UseProfileCount = true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3324</td>
    <td class="codeLine">    DupThreshold = HotThreshold * TailDupProfilePercentThreshold / 100;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3324</td>
    <td class="codeLine">    DupThreshold = HotThreshold * TailDupProfilePercentThreshold / 100;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3325</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3325</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3326</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3326</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3327</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3327</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3328</td>
    <td class="codeLine">  // Profile count is not available, we can use block frequency instead.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3328</td>
    <td class="codeLine">  // Profile count is not available, we can use block frequency instead.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3329</td>
    <td class="codeLine">  BlockFrequency MaxFreq = 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3329</td>
    <td class="codeLine">  BlockFrequency MaxFreq = 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3330</td>
    <td class="codeLine">  for (MachineBasicBlock &MBB : *F) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3330</td>
    <td class="codeLine">  for (MachineBasicBlock &MBB : *F) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3331</td>
    <td class="codeLine">    BlockFrequency Freq = MBFI->getBlockFreq(&MBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3331</td>
    <td class="codeLine">    BlockFrequency Freq = MBFI->getBlockFreq(&MBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3332</td>
    <td class="codeLine">    if (Freq > MaxFreq)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3332</td>
    <td class="codeLine">    if (Freq > MaxFreq)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3333</td>
    <td class="codeLine">      MaxFreq = Freq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3333</td>
    <td class="codeLine">      MaxFreq = Freq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3334</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3334</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3335</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3335</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3336</td>
    <td class="codeLine">  BranchProbability ThresholdProb(TailDupPlacementPenalty, 100);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3336</td>
    <td class="codeLine">  BranchProbability ThresholdProb(TailDupPlacementPenalty, 100);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3337</td>
    <td class="codeLine">  DupThreshold = MaxFreq * ThresholdProb;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3337</td>
    <td class="codeLine">  DupThreshold = MaxFreq * ThresholdProb;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3338</td>
    <td class="codeLine">  UseProfileCount = false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3338</td>
    <td class="codeLine">  UseProfileCount = false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3339</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3339</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3340</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3340</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3341</td>
    <td class="codeLine coveredLine">bool MachineBlockPlacement::runOnMachineFunction(MachineFunction &MF) {</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">3341</td>
    <td class="codeLine coveredLine">bool MachineBlockPlacement::runOnMachineFunction(MachineFunction &MF) {</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3342</td>
    <td class="codeLine coveredLine">  if (skipFunction(MF.getFunction()))</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">3342</td>
    <td class="codeLine coveredLine">  if (skipFunction(MF.getFunction()))</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3343</td>
    <td class="codeLine coveredLine">    return false;</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">3343</td>
    <td class="codeLine coveredLine">    return false;</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3344</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3344</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3345</td>
    <td class="codeLine">  // Check for single-block functions and skip them.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3345</td>
    <td class="codeLine">  // Check for single-block functions and skip them.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3346</td>
    <td class="codeLine">  if (std::next(MF.begin()) == MF.end())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3346</td>
    <td class="codeLine">  if (std::next(MF.begin()) == MF.end())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3347</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3347</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3348</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3348</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3349</td>
    <td class="codeLine">  F = &MF;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3349</td>
    <td class="codeLine">  F = &MF;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3350</td>
    <td class="codeLine">  MBPI = &getAnalysis<MachineBranchProbabilityInfo>();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3350</td>
    <td class="codeLine">  MBPI = &getAnalysis<MachineBranchProbabilityInfo>();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3351</td>
    <td class="codeLine">  MBFI = std::make_unique<MBFIWrapper>(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3351</td>
    <td class="codeLine">  MBFI = std::make_unique<MBFIWrapper>(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3352</td>
    <td class="codeLine">      getAnalysis<MachineBlockFrequencyInfo>());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3352</td>
    <td class="codeLine">      getAnalysis<MachineBlockFrequencyInfo>());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3353</td>
    <td class="codeLine">  MLI = &getAnalysis<MachineLoopInfo>();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3353</td>
    <td class="codeLine">  MLI = &getAnalysis<MachineLoopInfo>();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3354</td>
    <td class="codeLine">  TII = MF.getSubtarget().getInstrInfo();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3354</td>
    <td class="codeLine">  TII = MF.getSubtarget().getInstrInfo();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3355</td>
    <td class="codeLine">  TLI = MF.getSubtarget().getTargetLowering();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3355</td>
    <td class="codeLine">  TLI = MF.getSubtarget().getTargetLowering();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3356</td>
    <td class="codeLine">  MPDT = nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3356</td>
    <td class="codeLine">  MPDT = nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3357</td>
    <td class="codeLine">  PSI = &getAnalysis<ProfileSummaryInfoWrapperPass>().getPSI();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3357</td>
    <td class="codeLine">  PSI = &getAnalysis<ProfileSummaryInfoWrapperPass>().getPSI();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3358</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3358</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3359</td>
    <td class="codeLine">  initDupThreshold();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3359</td>
    <td class="codeLine">  initDupThreshold();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3360</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3360</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3361</td>
    <td class="codeLine">  // Initialize PreferredLoopExit to nullptr here since it may never be set if</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3361</td>
    <td class="codeLine">  // Initialize PreferredLoopExit to nullptr here since it may never be set if</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3362</td>
    <td class="codeLine">  // there are no MachineLoops.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3362</td>
    <td class="codeLine">  // there are no MachineLoops.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3363</td>
    <td class="codeLine">  PreferredLoopExit = nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3363</td>
    <td class="codeLine">  PreferredLoopExit = nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3364</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3364</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3365</td>
    <td class="codeLine">  assert(BlockToChain.empty() &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3365</td>
    <td class="codeLine">  assert(BlockToChain.empty() &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3366</td>
    <td class="codeLine">         "BlockToChain map should be empty before starting placement.");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3366</td>
    <td class="codeLine">         "BlockToChain map should be empty before starting placement.");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3367</td>
    <td class="codeLine">  assert(ComputedEdges.empty() &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3367</td>
    <td class="codeLine">  assert(ComputedEdges.empty() &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3368</td>
    <td class="codeLine">         "Computed Edge map should be empty before starting placement.");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3368</td>
    <td class="codeLine">         "Computed Edge map should be empty before starting placement.");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3369</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3369</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3370</td>
    <td class="codeLine">  unsigned TailDupSize = TailDupPlacementThreshold;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3370</td>
    <td class="codeLine">  unsigned TailDupSize = TailDupPlacementThreshold;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3371</td>
    <td class="codeLine">  // If only the aggressive threshold is explicitly set, use it.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3371</td>
    <td class="codeLine">  // If only the aggressive threshold is explicitly set, use it.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3372</td>
    <td class="codeLine">  if (TailDupPlacementAggressiveThreshold.getNumOccurrences() != 0 &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3372</td>
    <td class="codeLine">  if (TailDupPlacementAggressiveThreshold.getNumOccurrences() != 0 &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3373</td>
    <td class="codeLine">      TailDupPlacementThreshold.getNumOccurrences() == 0)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3373</td>
    <td class="codeLine">      TailDupPlacementThreshold.getNumOccurrences() == 0)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3374</td>
    <td class="codeLine">    TailDupSize = TailDupPlacementAggressiveThreshold;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3374</td>
    <td class="codeLine">    TailDupSize = TailDupPlacementAggressiveThreshold;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3375</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3375</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3376</td>
    <td class="codeLine">  TargetPassConfig *PassConfig = &getAnalysis<TargetPassConfig>();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3376</td>
    <td class="codeLine">  TargetPassConfig *PassConfig = &getAnalysis<TargetPassConfig>();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3377</td>
    <td class="codeLine">  // For aggressive optimization, we can adjust some thresholds to be less</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3377</td>
    <td class="codeLine">  // For aggressive optimization, we can adjust some thresholds to be less</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3378</td>
    <td class="codeLine">  // conservative.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3378</td>
    <td class="codeLine">  // conservative.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3379</td>
    <td class="codeLine">  if (PassConfig->getOptLevel() >= CodeGenOpt::Aggressive) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3379</td>
    <td class="codeLine">  if (PassConfig->getOptLevel() >= CodeGenOpt::Aggressive) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3380</td>
    <td class="codeLine">    // At O3 we should be more willing to copy blocks for tail duplication. This</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3380</td>
    <td class="codeLine">    // At O3 we should be more willing to copy blocks for tail duplication. This</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3381</td>
    <td class="codeLine">    // increases size pressure, so we only do it at O3</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3381</td>
    <td class="codeLine">    // increases size pressure, so we only do it at O3</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3382</td>
    <td class="codeLine">    // Do this unless only the regular threshold is explicitly set.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3382</td>
    <td class="codeLine">    // Do this unless only the regular threshold is explicitly set.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3383</td>
    <td class="codeLine">    if (TailDupPlacementThreshold.getNumOccurrences() == 0 ||</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3383</td>
    <td class="codeLine">    if (TailDupPlacementThreshold.getNumOccurrences() == 0 ||</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3384</td>
    <td class="codeLine">        TailDupPlacementAggressiveThreshold.getNumOccurrences() != 0)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3384</td>
    <td class="codeLine">        TailDupPlacementAggressiveThreshold.getNumOccurrences() != 0)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3385</td>
    <td class="codeLine">      TailDupSize = TailDupPlacementAggressiveThreshold;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3385</td>
    <td class="codeLine">      TailDupSize = TailDupPlacementAggressiveThreshold;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3386</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3386</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3387</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3387</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3388</td>
    <td class="codeLine">  // If there's no threshold provided through options, query the target</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3388</td>
    <td class="codeLine">  // If there's no threshold provided through options, query the target</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3389</td>
    <td class="codeLine">  // information for a threshold instead.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3389</td>
    <td class="codeLine">  // information for a threshold instead.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3390</td>
    <td class="codeLine">  if (TailDupPlacementThreshold.getNumOccurrences() == 0 &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3390</td>
    <td class="codeLine">  if (TailDupPlacementThreshold.getNumOccurrences() == 0 &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3391</td>
    <td class="codeLine">      (PassConfig->getOptLevel() < CodeGenOpt::Aggressive ||</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3391</td>
    <td class="codeLine">      (PassConfig->getOptLevel() < CodeGenOpt::Aggressive ||</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3392</td>
    <td class="codeLine">       TailDupPlacementAggressiveThreshold.getNumOccurrences() == 0))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3392</td>
    <td class="codeLine">       TailDupPlacementAggressiveThreshold.getNumOccurrences() == 0))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3393</td>
    <td class="codeLine">    TailDupSize = TII->getTailDuplicateSize(PassConfig->getOptLevel());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3393</td>
    <td class="codeLine">    TailDupSize = TII->getTailDuplicateSize(PassConfig->getOptLevel());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3394</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3394</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3395</td>
    <td class="codeLine">  if (allowTailDupPlacement()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3395</td>
    <td class="codeLine">  if (allowTailDupPlacement()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3396</td>
    <td class="codeLine">    MPDT = &getAnalysis<MachinePostDominatorTree>();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3396</td>
    <td class="codeLine">    MPDT = &getAnalysis<MachinePostDominatorTree>();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3397</td>
    <td class="codeLine">    bool OptForSize = MF.getFunction().hasOptSize() ||</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3397</td>
    <td class="codeLine">    bool OptForSize = MF.getFunction().hasOptSize() ||</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3398</td>
    <td class="codeLine">                      llvm::shouldOptimizeForSize(&MF, PSI, &MBFI->getMBFI());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3398</td>
    <td class="codeLine">                      llvm::shouldOptimizeForSize(&MF, PSI, &MBFI->getMBFI());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3399</td>
    <td class="codeLine">    if (OptForSize)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3399</td>
    <td class="codeLine">    if (OptForSize)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3400</td>
    <td class="codeLine">      TailDupSize = 1;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3400</td>
    <td class="codeLine">      TailDupSize = 1;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3401</td>
    <td class="codeLine">    bool PreRegAlloc = false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3401</td>
    <td class="codeLine">    bool PreRegAlloc = false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3402</td>
    <td class="codeLine">    TailDup.initMF(MF, PreRegAlloc, MBPI, MBFI.get(), PSI,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3402</td>
    <td class="codeLine">    TailDup.initMF(MF, PreRegAlloc, MBPI, MBFI.get(), PSI,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3403</td>
    <td class="codeLine">                   /* LayoutMode */ true, TailDupSize);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3403</td>
    <td class="codeLine">                   /* LayoutMode */ true, TailDupSize);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3404</td>
    <td class="codeLine">    precomputeTriangleChains();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3404</td>
    <td class="codeLine">    precomputeTriangleChains();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3405</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3405</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3406</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3406</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3407</td>
    <td class="codeLine">  buildCFGChains();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3407</td>
    <td class="codeLine">  buildCFGChains();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3408</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3408</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3409</td>
    <td class="codeLine">  // Changing the layout can create new tail merging opportunities.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3409</td>
    <td class="codeLine">  // Changing the layout can create new tail merging opportunities.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3410</td>
    <td class="codeLine">  // TailMerge can create jump into if branches that make CFG irreducible for</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3410</td>
    <td class="codeLine">  // TailMerge can create jump into if branches that make CFG irreducible for</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3411</td>
    <td class="codeLine">  // HW that requires structured CFG.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3411</td>
    <td class="codeLine">  // HW that requires structured CFG.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3412</td>
    <td class="codeLine">  bool EnableTailMerge = !MF.getTarget().requiresStructuredCFG() &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3412</td>
    <td class="codeLine">  bool EnableTailMerge = !MF.getTarget().requiresStructuredCFG() &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3413</td>
    <td class="codeLine">                         PassConfig->getEnableTailMerge() &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3413</td>
    <td class="codeLine">                         PassConfig->getEnableTailMerge() &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3414</td>
    <td class="codeLine">                         BranchFoldPlacement;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3414</td>
    <td class="codeLine">                         BranchFoldPlacement;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3415</td>
    <td class="codeLine">  // No tail merging opportunities if the block number is less than four.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3415</td>
    <td class="codeLine">  // No tail merging opportunities if the block number is less than four.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3416</td>
    <td class="codeLine">  if (MF.size() > 3 && EnableTailMerge) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3416</td>
    <td class="codeLine">  if (MF.size() > 3 && EnableTailMerge) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3417</td>
    <td class="codeLine">    unsigned TailMergeSize = TailDupSize + 1;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3417</td>
    <td class="codeLine">    unsigned TailMergeSize = TailDupSize + 1;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3418</td>
    <td class="codeLine">    BranchFolder BF(/*DefaultEnableTailMerge=*/true, /*CommonHoist=*/false,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3418</td>
    <td class="codeLine">    BranchFolder BF(/*DefaultEnableTailMerge=*/true, /*CommonHoist=*/false,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3419</td>
    <td class="codeLine">                    *MBFI, *MBPI, PSI, TailMergeSize);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3419</td>
    <td class="codeLine">                    *MBFI, *MBPI, PSI, TailMergeSize);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3420</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3420</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3421</td>
    <td class="codeLine">    if (BF.OptimizeFunction(MF, TII, MF.getSubtarget().getRegisterInfo(), MLI,</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3421</td>
    <td class="codeLine">    if (BF.OptimizeFunction(MF, TII, MF.getSubtarget().getRegisterInfo(), MLI,</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3422</td>
    <td class="codeLine">                            /*AfterPlacement=*/true)) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3422</td>
    <td class="codeLine">                            /*AfterPlacement=*/true)) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3423</td>
    <td class="codeLine">      // Redo the layout if tail merging creates/removes/moves blocks.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3423</td>
    <td class="codeLine">      // Redo the layout if tail merging creates/removes/moves blocks.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3424</td>
    <td class="codeLine">      BlockToChain.clear();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3424</td>
    <td class="codeLine">      BlockToChain.clear();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3425</td>
    <td class="codeLine">      ComputedEdges.clear();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3425</td>
    <td class="codeLine">      ComputedEdges.clear();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3426</td>
    <td class="codeLine">      // Must redo the post-dominator tree if blocks were changed.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3426</td>
    <td class="codeLine">      // Must redo the post-dominator tree if blocks were changed.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3427</td>
    <td class="codeLine">      if (MPDT)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3427</td>
    <td class="codeLine">      if (MPDT)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3428</td>
    <td class="codeLine">        MPDT->runOnMachineFunction(MF);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3428</td>
    <td class="codeLine">        MPDT->runOnMachineFunction(MF);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3429</td>
    <td class="codeLine">      ChainAllocator.DestroyAll();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3429</td>
    <td class="codeLine">      ChainAllocator.DestroyAll();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3430</td>
    <td class="codeLine">      buildCFGChains();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3430</td>
    <td class="codeLine">      buildCFGChains();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3431</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3431</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3432</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3432</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3433</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3433</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3434</td>
    <td class="codeLine">  // Apply a post-processing optimizing block placement.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3434</td>
    <td class="codeLine">  // Apply a post-processing optimizing block placement.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3435</td>
    <td class="codeLine">  if (MF.size() >= 3 && EnableExtTspBlockPlacement &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3435</td>
    <td class="codeLine">  if (MF.size() >= 3 && EnableExtTspBlockPlacement &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3436</td>
    <td class="codeLine">      (ApplyExtTspWithoutProfile || MF.getFunction().hasProfileData())) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3436</td>
    <td class="codeLine">      (ApplyExtTspWithoutProfile || MF.getFunction().hasProfileData())) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3437</td>
    <td class="codeLine">    // Find a new placement and modify the layout of the blocks in the function.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3437</td>
    <td class="codeLine">    // Find a new placement and modify the layout of the blocks in the function.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3438</td>
    <td class="codeLine">    applyExtTsp();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3438</td>
    <td class="codeLine">    applyExtTsp();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3439</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3439</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3440</td>
    <td class="codeLine">    // Re-create CFG chain so that we can optimizeBranches and alignBlocks.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3440</td>
    <td class="codeLine">    // Re-create CFG chain so that we can optimizeBranches and alignBlocks.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3441</td>
    <td class="codeLine">    createCFGChainExtTsp();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3441</td>
    <td class="codeLine">    createCFGChainExtTsp();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3442</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3442</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3443</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3443</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3444</td>
    <td class="codeLine">  optimizeBranches();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3444</td>
    <td class="codeLine">  optimizeBranches();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3445</td>
    <td class="codeLine">  alignBlocks();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3445</td>
    <td class="codeLine">  alignBlocks();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3446</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3446</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3447</td>
    <td class="codeLine">  BlockToChain.clear();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3447</td>
    <td class="codeLine">  BlockToChain.clear();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3448</td>
    <td class="codeLine">  ComputedEdges.clear();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3448</td>
    <td class="codeLine">  ComputedEdges.clear();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3449</td>
    <td class="codeLine">  ChainAllocator.DestroyAll();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3449</td>
    <td class="codeLine">  ChainAllocator.DestroyAll();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3450</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3450</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3451</td>
    <td class="codeLine">  bool HasMaxBytesOverride =</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3451</td>
    <td class="codeLine">  bool HasMaxBytesOverride =</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3452</td>
    <td class="codeLine">      MaxBytesForAlignmentOverride.getNumOccurrences() > 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3452</td>
    <td class="codeLine">      MaxBytesForAlignmentOverride.getNumOccurrences() > 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3453</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3453</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3454</td>
    <td class="codeLine">  if (AlignAllBlock)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3454</td>
    <td class="codeLine">  if (AlignAllBlock)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3455</td>
    <td class="codeLine">    // Align all of the blocks in the function to a specific alignment.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3455</td>
    <td class="codeLine">    // Align all of the blocks in the function to a specific alignment.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3456</td>
    <td class="codeLine">    for (MachineBasicBlock &MBB : MF) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3456</td>
    <td class="codeLine">    for (MachineBasicBlock &MBB : MF) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3457</td>
    <td class="codeLine">      if (HasMaxBytesOverride)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3457</td>
    <td class="codeLine">      if (HasMaxBytesOverride)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3458</td>
    <td class="codeLine">        MBB.setAlignment(Align(1ULL << AlignAllBlock),</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3458</td>
    <td class="codeLine">        MBB.setAlignment(Align(1ULL << AlignAllBlock),</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3459</td>
    <td class="codeLine">                         MaxBytesForAlignmentOverride);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3459</td>
    <td class="codeLine">                         MaxBytesForAlignmentOverride);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3460</td>
    <td class="codeLine">      else</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3460</td>
    <td class="codeLine">      else</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3461</td>
    <td class="codeLine">        MBB.setAlignment(Align(1ULL << AlignAllBlock));</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3461</td>
    <td class="codeLine">        MBB.setAlignment(Align(1ULL << AlignAllBlock));</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3462</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3462</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3463</td>
    <td class="codeLine">  else if (AlignAllNonFallThruBlocks) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3463</td>
    <td class="codeLine">  else if (AlignAllNonFallThruBlocks) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3464</td>
    <td class="codeLine">    // Align all of the blocks that have no fall-through predecessors to a</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3464</td>
    <td class="codeLine">    // Align all of the blocks that have no fall-through predecessors to a</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3465</td>
    <td class="codeLine">    // specific alignment.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3465</td>
    <td class="codeLine">    // specific alignment.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3466</td>
    <td class="codeLine">    for (auto MBI = std::next(MF.begin()), MBE = MF.end(); MBI != MBE; ++MBI) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3466</td>
    <td class="codeLine">    for (auto MBI = std::next(MF.begin()), MBE = MF.end(); MBI != MBE; ++MBI) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3467</td>
    <td class="codeLine">      auto LayoutPred = std::prev(MBI);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3467</td>
    <td class="codeLine">      auto LayoutPred = std::prev(MBI);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3468</td>
    <td class="codeLine">      if (!LayoutPred->isSuccessor(&*MBI)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3468</td>
    <td class="codeLine">      if (!LayoutPred->isSuccessor(&*MBI)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3469</td>
    <td class="codeLine">        if (HasMaxBytesOverride)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3469</td>
    <td class="codeLine">        if (HasMaxBytesOverride)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3470</td>
    <td class="codeLine">          MBI->setAlignment(Align(1ULL << AlignAllNonFallThruBlocks),</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3470</td>
    <td class="codeLine">          MBI->setAlignment(Align(1ULL << AlignAllNonFallThruBlocks),</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3471</td>
    <td class="codeLine">                            MaxBytesForAlignmentOverride);</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3471</td>
    <td class="codeLine">                            MaxBytesForAlignmentOverride);</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3472</td>
    <td class="codeLine">        else</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3472</td>
    <td class="codeLine">        else</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3473</td>
    <td class="codeLine">          MBI->setAlignment(Align(1ULL << AlignAllNonFallThruBlocks));</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3473</td>
    <td class="codeLine">          MBI->setAlignment(Align(1ULL << AlignAllNonFallThruBlocks));</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3474</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3474</td>
    <td class="codeLine">      }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3475</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3475</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3476</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3476</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3477</td>
    <td class="codeLine">  if (ViewBlockLayoutWithBFI != GVDT_None &&</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3477</td>
    <td class="codeLine">  if (ViewBlockLayoutWithBFI != GVDT_None &&</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3478</td>
    <td class="codeLine">      (ViewBlockFreqFuncName.empty() ||</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3478</td>
    <td class="codeLine">      (ViewBlockFreqFuncName.empty() ||</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3479</td>
    <td class="codeLine">       F->getFunction().getName().equals(ViewBlockFreqFuncName))) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3479</td>
    <td class="codeLine">       F->getFunction().getName().equals(ViewBlockFreqFuncName))) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3480</td>
    <td class="codeLine">    if (RenumberBlocksBeforeView)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3480</td>
    <td class="codeLine">    if (RenumberBlocksBeforeView)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3481</td>
    <td class="codeLine">      MF.RenumberBlocks();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3481</td>
    <td class="codeLine">      MF.RenumberBlocks();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3482</td>
    <td class="codeLine">    MBFI->view("MBP." + MF.getName(), false);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3482</td>
    <td class="codeLine">    MBFI->view("MBP." + MF.getName(), false);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3483</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3483</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3484</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3484</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3485</td>
    <td class="codeLine">  // We always return true as we have no way to track whether the final order</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3485</td>
    <td class="codeLine">  // We always return true as we have no way to track whether the final order</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3486</td>
    <td class="codeLine">  // differs from the original order.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3486</td>
    <td class="codeLine">  // differs from the original order.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3487</td>
    <td class="codeLine">  return true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3487</td>
    <td class="codeLine">  return true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3488</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3488</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3489</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3489</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3490</td>
    <td class="codeLine">void MachineBlockPlacement::applyExtTsp() {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3490</td>
    <td class="codeLine">void MachineBlockPlacement::applyExtTsp() {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3491</td>
    <td class="codeLine">  // Prepare data; blocks are indexed by their index in the current ordering.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3491</td>
    <td class="codeLine">  // Prepare data; blocks are indexed by their index in the current ordering.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3492</td>
    <td class="codeLine">  DenseMap<const MachineBasicBlock *, uint64_t> BlockIndex;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3492</td>
    <td class="codeLine">  DenseMap<const MachineBasicBlock *, uint64_t> BlockIndex;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3493</td>
    <td class="codeLine">  BlockIndex.reserve(F->size());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3493</td>
    <td class="codeLine">  BlockIndex.reserve(F->size());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3494</td>
    <td class="codeLine">  std::vector<const MachineBasicBlock *> CurrentBlockOrder;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3494</td>
    <td class="codeLine">  std::vector<const MachineBasicBlock *> CurrentBlockOrder;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3495</td>
    <td class="codeLine">  CurrentBlockOrder.reserve(F->size());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3495</td>
    <td class="codeLine">  CurrentBlockOrder.reserve(F->size());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3496</td>
    <td class="codeLine">  size_t NumBlocks = 0;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3496</td>
    <td class="codeLine">  size_t NumBlocks = 0;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3497</td>
    <td class="codeLine">  for (const MachineBasicBlock &MBB : *F) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3497</td>
    <td class="codeLine">  for (const MachineBasicBlock &MBB : *F) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3498</td>
    <td class="codeLine">    BlockIndex[&MBB] = NumBlocks++;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3498</td>
    <td class="codeLine">    BlockIndex[&MBB] = NumBlocks++;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3499</td>
    <td class="codeLine">    CurrentBlockOrder.push_back(&MBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3499</td>
    <td class="codeLine">    CurrentBlockOrder.push_back(&MBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3500</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3500</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3501</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3501</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3502</td>
    <td class="codeLine">  auto BlockSizes = std::vector<uint64_t>(F->size());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3502</td>
    <td class="codeLine">  auto BlockSizes = std::vector<uint64_t>(F->size());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3503</td>
    <td class="codeLine">  auto BlockCounts = std::vector<uint64_t>(F->size());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3503</td>
    <td class="codeLine">  auto BlockCounts = std::vector<uint64_t>(F->size());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3504</td>
    <td class="codeLine">  std::vector<EdgeCountT> JumpCounts;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3504</td>
    <td class="codeLine">  std::vector<EdgeCountT> JumpCounts;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3505</td>
    <td class="codeLine">  for (MachineBasicBlock &MBB : *F) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3505</td>
    <td class="codeLine">  for (MachineBasicBlock &MBB : *F) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3506</td>
    <td class="codeLine">    // Getting the block frequency.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3506</td>
    <td class="codeLine">    // Getting the block frequency.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3507</td>
    <td class="codeLine">    BlockFrequency BlockFreq = MBFI->getBlockFreq(&MBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3507</td>
    <td class="codeLine">    BlockFrequency BlockFreq = MBFI->getBlockFreq(&MBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3508</td>
    <td class="codeLine">    BlockCounts[BlockIndex[&MBB]] = BlockFreq.getFrequency();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3508</td>
    <td class="codeLine">    BlockCounts[BlockIndex[&MBB]] = BlockFreq.getFrequency();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3509</td>
    <td class="codeLine">    // Getting the block size:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3509</td>
    <td class="codeLine">    // Getting the block size:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3510</td>
    <td class="codeLine">    // - approximate the size of an instruction by 4 bytes, and</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3510</td>
    <td class="codeLine">    // - approximate the size of an instruction by 4 bytes, and</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3511</td>
    <td class="codeLine">    // - ignore debug instructions.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3511</td>
    <td class="codeLine">    // - ignore debug instructions.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3512</td>
    <td class="codeLine">    // Note: getting the exact size of each block is target-dependent and can be</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3512</td>
    <td class="codeLine">    // Note: getting the exact size of each block is target-dependent and can be</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3513</td>
    <td class="codeLine">    // done by extending the interface of MCCodeEmitter. Experimentally we do</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3513</td>
    <td class="codeLine">    // done by extending the interface of MCCodeEmitter. Experimentally we do</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3514</td>
    <td class="codeLine">    // not see a perf improvement with the exact block sizes.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3514</td>
    <td class="codeLine">    // not see a perf improvement with the exact block sizes.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3515</td>
    <td class="codeLine">    auto NonDbgInsts =</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3515</td>
    <td class="codeLine">    auto NonDbgInsts =</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3516</td>
    <td class="codeLine">        instructionsWithoutDebug(MBB.instr_begin(), MBB.instr_end());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3516</td>
    <td class="codeLine">        instructionsWithoutDebug(MBB.instr_begin(), MBB.instr_end());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3517</td>
    <td class="codeLine">    int NumInsts = std::distance(NonDbgInsts.begin(), NonDbgInsts.end());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3517</td>
    <td class="codeLine">    int NumInsts = std::distance(NonDbgInsts.begin(), NonDbgInsts.end());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3518</td>
    <td class="codeLine">    BlockSizes[BlockIndex[&MBB]] = 4 * NumInsts;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3518</td>
    <td class="codeLine">    BlockSizes[BlockIndex[&MBB]] = 4 * NumInsts;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3519</td>
    <td class="codeLine">    // Getting jump frequencies.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3519</td>
    <td class="codeLine">    // Getting jump frequencies.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3520</td>
    <td class="codeLine">    for (MachineBasicBlock *Succ : MBB.successors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3520</td>
    <td class="codeLine">    for (MachineBasicBlock *Succ : MBB.successors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3521</td>
    <td class="codeLine">      auto EP = MBPI->getEdgeProbability(&MBB, Succ);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3521</td>
    <td class="codeLine">      auto EP = MBPI->getEdgeProbability(&MBB, Succ);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3522</td>
    <td class="codeLine">      BlockFrequency JumpFreq = BlockFreq * EP;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3522</td>
    <td class="codeLine">      BlockFrequency JumpFreq = BlockFreq * EP;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3523</td>
    <td class="codeLine">      auto Jump = std::make_pair(BlockIndex[&MBB], BlockIndex[Succ]);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3523</td>
    <td class="codeLine">      auto Jump = std::make_pair(BlockIndex[&MBB], BlockIndex[Succ]);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3524</td>
    <td class="codeLine">      JumpCounts.push_back(std::make_pair(Jump, JumpFreq.getFrequency()));</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3524</td>
    <td class="codeLine">      JumpCounts.push_back(std::make_pair(Jump, JumpFreq.getFrequency()));</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3525</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3525</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3526</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3526</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3527</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3527</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3528</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "Applying ext-tsp layout for |V| = " << F->size()</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3528</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << "Applying ext-tsp layout for |V| = " << F->size()</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3529</td>
    <td class="codeLine">                    << " with profile = " << F->getFunction().hasProfileData()</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3529</td>
    <td class="codeLine">                    << " with profile = " << F->getFunction().hasProfileData()</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3530</td>
    <td class="codeLine">                    << " (" << F->getName().str() << ")"</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3530</td>
    <td class="codeLine">                    << " (" << F->getName().str() << ")"</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3531</td>
    <td class="codeLine">                    << "\n");</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3531</td>
    <td class="codeLine">                    << "\n");</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3532</td>
    <td class="codeLine">  LLVM_DEBUG(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3532</td>
    <td class="codeLine">  LLVM_DEBUG(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3533</td>
    <td class="codeLine">      dbgs() << format("  original  layout score: %0.2f\n",</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3533</td>
    <td class="codeLine">      dbgs() << format("  original  layout score: %0.2f\n",</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3534</td>
    <td class="codeLine">                       calcExtTspScore(BlockSizes, BlockCounts, JumpCounts)));</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3534</td>
    <td class="codeLine">                       calcExtTspScore(BlockSizes, BlockCounts, JumpCounts)));</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3535</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3535</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3536</td>
    <td class="codeLine">  // Run the layout algorithm.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3536</td>
    <td class="codeLine">  // Run the layout algorithm.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3537</td>
    <td class="codeLine">  auto NewOrder = applyExtTspLayout(BlockSizes, BlockCounts, JumpCounts);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3537</td>
    <td class="codeLine">  auto NewOrder = applyExtTspLayout(BlockSizes, BlockCounts, JumpCounts);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3538</td>
    <td class="codeLine">  std::vector<const MachineBasicBlock *> NewBlockOrder;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3538</td>
    <td class="codeLine">  std::vector<const MachineBasicBlock *> NewBlockOrder;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3539</td>
    <td class="codeLine">  NewBlockOrder.reserve(F->size());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3539</td>
    <td class="codeLine">  NewBlockOrder.reserve(F->size());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3540</td>
    <td class="codeLine">  for (uint64_t Node : NewOrder) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3540</td>
    <td class="codeLine">  for (uint64_t Node : NewOrder) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3541</td>
    <td class="codeLine">    NewBlockOrder.push_back(CurrentBlockOrder[Node]);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3541</td>
    <td class="codeLine">    NewBlockOrder.push_back(CurrentBlockOrder[Node]);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3542</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3542</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3543</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << format("  optimized layout score: %0.2f\n",</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3543</td>
    <td class="codeLine">  LLVM_DEBUG(dbgs() << format("  optimized layout score: %0.2f\n",</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3544</td>
    <td class="codeLine">                              calcExtTspScore(NewOrder, BlockSizes, BlockCounts,</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3544</td>
    <td class="codeLine">                              calcExtTspScore(NewOrder, BlockSizes, BlockCounts,</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3545</td>
    <td class="codeLine">                                              JumpCounts)));</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3545</td>
    <td class="codeLine">                                              JumpCounts)));</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3546</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3546</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3547</td>
    <td class="codeLine">  // Assign new block order.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3547</td>
    <td class="codeLine">  // Assign new block order.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3548</td>
    <td class="codeLine">  assignBlockOrder(NewBlockOrder);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3548</td>
    <td class="codeLine">  assignBlockOrder(NewBlockOrder);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3549</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3549</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3550</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3550</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3551</td>
    <td class="codeLine">void MachineBlockPlacement::assignBlockOrder(</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3551</td>
    <td class="codeLine">void MachineBlockPlacement::assignBlockOrder(</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3552</td>
    <td class="codeLine">    const std::vector<const MachineBasicBlock *> &NewBlockOrder) {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3552</td>
    <td class="codeLine">    const std::vector<const MachineBasicBlock *> &NewBlockOrder) {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3553</td>
    <td class="codeLine">  assert(F->size() == NewBlockOrder.size() && "Incorrect size of block order");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3553</td>
    <td class="codeLine">  assert(F->size() == NewBlockOrder.size() && "Incorrect size of block order");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3554</td>
    <td class="codeLine">  F->RenumberBlocks();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3554</td>
    <td class="codeLine">  F->RenumberBlocks();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3555</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3555</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3556</td>
    <td class="codeLine">  bool HasChanges = false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3556</td>
    <td class="codeLine">  bool HasChanges = false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3557</td>
    <td class="codeLine">  for (size_t I = 0; I < NewBlockOrder.size(); I++) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3557</td>
    <td class="codeLine">  for (size_t I = 0; I < NewBlockOrder.size(); I++) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3558</td>
    <td class="codeLine">    if (NewBlockOrder[I] != F->getBlockNumbered(I)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3558</td>
    <td class="codeLine">    if (NewBlockOrder[I] != F->getBlockNumbered(I)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3559</td>
    <td class="codeLine">      HasChanges = true;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3559</td>
    <td class="codeLine">      HasChanges = true;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3560</td>
    <td class="codeLine">      break;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3560</td>
    <td class="codeLine">      break;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3561</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3561</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3562</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3562</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3563</td>
    <td class="codeLine">  // Stop early if the new block order is identical to the existing one.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3563</td>
    <td class="codeLine">  // Stop early if the new block order is identical to the existing one.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3564</td>
    <td class="codeLine">  if (!HasChanges)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3564</td>
    <td class="codeLine">  if (!HasChanges)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3565</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3565</td>
    <td class="codeLine">    return;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3566</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3566</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3567</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 4> PrevFallThroughs(F->getNumBlockIDs());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3567</td>
    <td class="codeLine">  SmallVector<MachineBasicBlock *, 4> PrevFallThroughs(F->getNumBlockIDs());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3568</td>
    <td class="codeLine">  for (auto &MBB : *F) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3568</td>
    <td class="codeLine">  for (auto &MBB : *F) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3569</td>
    <td class="codeLine">    PrevFallThroughs[MBB.getNumber()] = MBB.getFallThrough();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3569</td>
    <td class="codeLine">    PrevFallThroughs[MBB.getNumber()] = MBB.getFallThrough();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3570</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3570</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3571</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3571</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3572</td>
    <td class="codeLine">  // Sort basic blocks in the function according to the computed order.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3572</td>
    <td class="codeLine">  // Sort basic blocks in the function according to the computed order.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3573</td>
    <td class="codeLine">  DenseMap<const MachineBasicBlock *, size_t> NewIndex;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3573</td>
    <td class="codeLine">  DenseMap<const MachineBasicBlock *, size_t> NewIndex;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3574</td>
    <td class="codeLine">  for (const MachineBasicBlock *MBB : NewBlockOrder) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3574</td>
    <td class="codeLine">  for (const MachineBasicBlock *MBB : NewBlockOrder) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3575</td>
    <td class="codeLine">    NewIndex[MBB] = NewIndex.size();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3575</td>
    <td class="codeLine">    NewIndex[MBB] = NewIndex.size();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3576</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3576</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3577</td>
    <td class="codeLine">  F->sort([&](MachineBasicBlock &L, MachineBasicBlock &R) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3577</td>
    <td class="codeLine">  F->sort([&](MachineBasicBlock &L, MachineBasicBlock &R) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3578</td>
    <td class="codeLine">    return NewIndex[&L] < NewIndex[&R];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3578</td>
    <td class="codeLine">    return NewIndex[&L] < NewIndex[&R];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3579</td>
    <td class="codeLine">  });</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3579</td>
    <td class="codeLine">  });</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3580</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3580</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3581</td>
    <td class="codeLine">  // Update basic block branches by inserting explicit fallthrough branches</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3581</td>
    <td class="codeLine">  // Update basic block branches by inserting explicit fallthrough branches</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3582</td>
    <td class="codeLine">  // when required and re-optimize branches when possible.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3582</td>
    <td class="codeLine">  // when required and re-optimize branches when possible.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3583</td>
    <td class="codeLine">  const TargetInstrInfo *TII = F->getSubtarget().getInstrInfo();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3583</td>
    <td class="codeLine">  const TargetInstrInfo *TII = F->getSubtarget().getInstrInfo();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3584</td>
    <td class="codeLine">  SmallVector<MachineOperand, 4> Cond;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3584</td>
    <td class="codeLine">  SmallVector<MachineOperand, 4> Cond;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3585</td>
    <td class="codeLine">  for (auto &MBB : *F) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3585</td>
    <td class="codeLine">  for (auto &MBB : *F) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3586</td>
    <td class="codeLine">    MachineFunction::iterator NextMBB = std::next(MBB.getIterator());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3586</td>
    <td class="codeLine">    MachineFunction::iterator NextMBB = std::next(MBB.getIterator());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3587</td>
    <td class="codeLine">    MachineFunction::iterator EndIt = MBB.getParent()->end();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3587</td>
    <td class="codeLine">    MachineFunction::iterator EndIt = MBB.getParent()->end();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3588</td>
    <td class="codeLine">    auto *FTMBB = PrevFallThroughs[MBB.getNumber()];</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3588</td>
    <td class="codeLine">    auto *FTMBB = PrevFallThroughs[MBB.getNumber()];</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3589</td>
    <td class="codeLine">    // If this block had a fallthrough before we need an explicit unconditional</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3589</td>
    <td class="codeLine">    // If this block had a fallthrough before we need an explicit unconditional</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3590</td>
    <td class="codeLine">    // branch to that block if the fallthrough block is not adjacent to the</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3590</td>
    <td class="codeLine">    // branch to that block if the fallthrough block is not adjacent to the</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3591</td>
    <td class="codeLine">    // block in the new order.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3591</td>
    <td class="codeLine">    // block in the new order.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3592</td>
    <td class="codeLine">    if (FTMBB && (NextMBB == EndIt || &*NextMBB != FTMBB)) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3592</td>
    <td class="codeLine">    if (FTMBB && (NextMBB == EndIt || &*NextMBB != FTMBB)) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3593</td>
    <td class="codeLine">      TII->insertUnconditionalBranch(MBB, FTMBB, MBB.findBranchDebugLoc());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3593</td>
    <td class="codeLine">      TII->insertUnconditionalBranch(MBB, FTMBB, MBB.findBranchDebugLoc());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3594</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3594</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3595</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3595</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3596</td>
    <td class="codeLine">    // It might be possible to optimize branches by flipping the condition.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3596</td>
    <td class="codeLine">    // It might be possible to optimize branches by flipping the condition.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3597</td>
    <td class="codeLine">    Cond.clear();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3597</td>
    <td class="codeLine">    Cond.clear();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3598</td>
    <td class="codeLine">    MachineBasicBlock *TBB = nullptr, *FBB = nullptr;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3598</td>
    <td class="codeLine">    MachineBasicBlock *TBB = nullptr, *FBB = nullptr;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3599</td>
    <td class="codeLine">    if (TII->analyzeBranch(MBB, TBB, FBB, Cond))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3599</td>
    <td class="codeLine">    if (TII->analyzeBranch(MBB, TBB, FBB, Cond))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3600</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3600</td>
    <td class="codeLine">      continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3601</td>
    <td class="codeLine">    MBB.updateTerminator(FTMBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3601</td>
    <td class="codeLine">    MBB.updateTerminator(FTMBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3602</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3602</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3603</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3603</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3604</td>
    <td class="codeLine">#ifndef NDEBUG</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3604</td>
    <td class="codeLine">#ifndef NDEBUG</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3605</td>
    <td class="codeLine">  // Make sure we correctly constructed all branches.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3605</td>
    <td class="codeLine">  // Make sure we correctly constructed all branches.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3606</td>
    <td class="codeLine">  F->verify(this, "After optimized block reordering");</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3606</td>
    <td class="codeLine">  F->verify(this, "After optimized block reordering");</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3607</td>
    <td class="codeLine">#endif</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3607</td>
    <td class="codeLine">#endif</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3608</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3608</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3609</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3609</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3610</td>
    <td class="codeLine">void MachineBlockPlacement::createCFGChainExtTsp() {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3610</td>
    <td class="codeLine">void MachineBlockPlacement::createCFGChainExtTsp() {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3611</td>
    <td class="codeLine">  BlockToChain.clear();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3611</td>
    <td class="codeLine">  BlockToChain.clear();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3612</td>
    <td class="codeLine">  ComputedEdges.clear();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3612</td>
    <td class="codeLine">  ComputedEdges.clear();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3613</td>
    <td class="codeLine">  ChainAllocator.DestroyAll();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3613</td>
    <td class="codeLine">  ChainAllocator.DestroyAll();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3614</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3614</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3615</td>
    <td class="codeLine">  MachineBasicBlock *HeadBB = &F->front();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3615</td>
    <td class="codeLine">  MachineBasicBlock *HeadBB = &F->front();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3616</td>
    <td class="codeLine">  BlockChain *FunctionChain =</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3616</td>
    <td class="codeLine">  BlockChain *FunctionChain =</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3617</td>
    <td class="codeLine">      new (ChainAllocator.Allocate()) BlockChain(BlockToChain, HeadBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3617</td>
    <td class="codeLine">      new (ChainAllocator.Allocate()) BlockChain(BlockToChain, HeadBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3618</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3618</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3619</td>
    <td class="codeLine">  for (MachineBasicBlock &MBB : *F) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3619</td>
    <td class="codeLine">  for (MachineBasicBlock &MBB : *F) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3620</td>
    <td class="codeLine">    if (HeadBB == &MBB)</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3620</td>
    <td class="codeLine">    if (HeadBB == &MBB)</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3621</td>
    <td class="codeLine">      continue; // Ignore head of the chain</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3621</td>
    <td class="codeLine">      continue; // Ignore head of the chain</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3622</td>
    <td class="codeLine">    FunctionChain->merge(&MBB, nullptr);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3622</td>
    <td class="codeLine">    FunctionChain->merge(&MBB, nullptr);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3623</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3623</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3624</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3624</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3625</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3625</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3626</td>
    <td class="codeLine">namespace {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3626</td>
    <td class="codeLine">namespace {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3627</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3627</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3628</td>
    <td class="codeLine">/// A pass to compute block placement statistics.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3628</td>
    <td class="codeLine">/// A pass to compute block placement statistics.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3629</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3629</td>
    <td class="codeLine">///</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3630</td>
    <td class="codeLine">/// A separate pass to compute interesting statistics for evaluating block</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3630</td>
    <td class="codeLine">/// A separate pass to compute interesting statistics for evaluating block</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3631</td>
    <td class="codeLine">/// placement. This is separate from the actual placement pass so that they can</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3631</td>
    <td class="codeLine">/// placement. This is separate from the actual placement pass so that they can</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3632</td>
    <td class="codeLine">/// be computed in the absence of any placement transformations or when using</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3632</td>
    <td class="codeLine">/// be computed in the absence of any placement transformations or when using</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3633</td>
    <td class="codeLine">/// alternative placement strategies.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3633</td>
    <td class="codeLine">/// alternative placement strategies.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3634</td>
    <td class="codeLine">class MachineBlockPlacementStats : public MachineFunctionPass {</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3634</td>
    <td class="codeLine">class MachineBlockPlacementStats : public MachineFunctionPass {</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3635</td>
    <td class="codeLine">  /// A handle to the branch probability pass.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3635</td>
    <td class="codeLine">  /// A handle to the branch probability pass.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3636</td>
    <td class="codeLine">  const MachineBranchProbabilityInfo *MBPI;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3636</td>
    <td class="codeLine">  const MachineBranchProbabilityInfo *MBPI;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3637</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3637</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3638</td>
    <td class="codeLine">  /// A handle to the function-wide block frequency pass.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3638</td>
    <td class="codeLine">  /// A handle to the function-wide block frequency pass.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3639</td>
    <td class="codeLine">  const MachineBlockFrequencyInfo *MBFI;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3639</td>
    <td class="codeLine">  const MachineBlockFrequencyInfo *MBFI;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3640</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3640</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3641</td>
    <td class="codeLine">public:</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3641</td>
    <td class="codeLine">public:</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3642</td>
    <td class="codeLine">  static char ID; // Pass identification, replacement for typeid</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3642</td>
    <td class="codeLine">  static char ID; // Pass identification, replacement for typeid</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3643</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3643</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3644</td>
    <td class="codeLine">  MachineBlockPlacementStats() : MachineFunctionPass(ID) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3644</td>
    <td class="codeLine">  MachineBlockPlacementStats() : MachineFunctionPass(ID) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3645</td>
    <td class="codeLine">    initializeMachineBlockPlacementStatsPass(*PassRegistry::getPassRegistry());</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3645</td>
    <td class="codeLine">    initializeMachineBlockPlacementStatsPass(*PassRegistry::getPassRegistry());</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3646</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3646</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3647</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3647</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3648</td>
    <td class="codeLine">  bool runOnMachineFunction(MachineFunction &F) override;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3648</td>
    <td class="codeLine">  bool runOnMachineFunction(MachineFunction &F) override;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3649</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3649</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3650</td>
    <td class="codeLine">  void getAnalysisUsage(AnalysisUsage &AU) const override {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3650</td>
    <td class="codeLine">  void getAnalysisUsage(AnalysisUsage &AU) const override {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3651</td>
    <td class="codeLine">    AU.addRequired<MachineBranchProbabilityInfo>();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3651</td>
    <td class="codeLine">    AU.addRequired<MachineBranchProbabilityInfo>();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3652</td>
    <td class="codeLine">    AU.addRequired<MachineBlockFrequencyInfo>();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3652</td>
    <td class="codeLine">    AU.addRequired<MachineBlockFrequencyInfo>();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3653</td>
    <td class="codeLine">    AU.setPreservesAll();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3653</td>
    <td class="codeLine">    AU.setPreservesAll();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3654</td>
    <td class="codeLine">    MachineFunctionPass::getAnalysisUsage(AU);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3654</td>
    <td class="codeLine">    MachineFunctionPass::getAnalysisUsage(AU);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3655</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3655</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3656</td>
    <td class="codeLine">};</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3656</td>
    <td class="codeLine">};</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3657</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3657</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3658</td>
    <td class="codeLine">} // end anonymous namespace</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3658</td>
    <td class="codeLine">} // end anonymous namespace</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3659</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3659</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3660</td>
    <td class="codeLine">char MachineBlockPlacementStats::ID = 0;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3660</td>
    <td class="codeLine">char MachineBlockPlacementStats::ID = 0;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3661</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3661</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3662</td>
    <td class="codeLine">char &llvm::MachineBlockPlacementStatsID = MachineBlockPlacementStats::ID;</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3662</td>
    <td class="codeLine">char &llvm::MachineBlockPlacementStatsID = MachineBlockPlacementStats::ID;</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3663</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3663</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3664</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_BEGIN(MachineBlockPlacementStats, "block-placement-stats",</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">3664</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_BEGIN(MachineBlockPlacementStats, "block-placement-stats",</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3665</td>
    <td class="codeLine">                      "Basic Block Placement Stats", false, false)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3665</td>
    <td class="codeLine">                      "Basic Block Placement Stats", false, false)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3666</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_DEPENDENCY(MachineBranchProbabilityInfo)</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">3666</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_DEPENDENCY(MachineBranchProbabilityInfo)</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3667</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_DEPENDENCY(MachineBlockFrequencyInfo)</td>
    <td class="lineNumber">1</td>
    <td class="lineNumber">3667</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_DEPENDENCY(MachineBlockFrequencyInfo)</td>
    <td class="lineNumber">1</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3668</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_END(MachineBlockPlacementStats, "block-placement-stats",</td>
    <td class="lineNumber">3</td>
    <td class="lineNumber">3668</td>
    <td class="codeLine coveredLine">INITIALIZE_PASS_END(MachineBlockPlacementStats, "block-placement-stats",</td>
    <td class="lineNumber">3</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3669</td>
    <td class="codeLine">                    "Basic Block Placement Stats", false, false)</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3669</td>
    <td class="codeLine">                    "Basic Block Placement Stats", false, false)</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3670</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3670</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3671</td>
    <td class="codeLine">bool MachineBlockPlacementStats::runOnMachineFunction(MachineFunction &F) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3671</td>
    <td class="codeLine">bool MachineBlockPlacementStats::runOnMachineFunction(MachineFunction &F) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3672</td>
    <td class="codeLine">  // Check for single-block functions and skip them.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3672</td>
    <td class="codeLine">  // Check for single-block functions and skip them.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3673</td>
    <td class="codeLine">  if (std::next(F.begin()) == F.end())</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3673</td>
    <td class="codeLine">  if (std::next(F.begin()) == F.end())</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3674</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3674</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3675</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3675</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3676</td>
    <td class="codeLine">  if (!isFunctionInPrintList(F.getName()))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3676</td>
    <td class="codeLine">  if (!isFunctionInPrintList(F.getName()))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3677</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3677</td>
    <td class="codeLine">    return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3678</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3678</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3679</td>
    <td class="codeLine">  MBPI = &getAnalysis<MachineBranchProbabilityInfo>();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3679</td>
    <td class="codeLine">  MBPI = &getAnalysis<MachineBranchProbabilityInfo>();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3680</td>
    <td class="codeLine">  MBFI = &getAnalysis<MachineBlockFrequencyInfo>();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3680</td>
    <td class="codeLine">  MBFI = &getAnalysis<MachineBlockFrequencyInfo>();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3681</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3681</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3682</td>
    <td class="codeLine">  for (MachineBasicBlock &MBB : F) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3682</td>
    <td class="codeLine">  for (MachineBasicBlock &MBB : F) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3683</td>
    <td class="codeLine">    BlockFrequency BlockFreq = MBFI->getBlockFreq(&MBB);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3683</td>
    <td class="codeLine">    BlockFrequency BlockFreq = MBFI->getBlockFreq(&MBB);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3684</td>
    <td class="codeLine">    Statistic &NumBranches =</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3684</td>
    <td class="codeLine">    Statistic &NumBranches =</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3685</td>
    <td class="codeLine">        (MBB.succ_size() > 1) ? NumCondBranches : NumUncondBranches;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3685</td>
    <td class="codeLine">        (MBB.succ_size() > 1) ? NumCondBranches : NumUncondBranches;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3686</td>
    <td class="codeLine">    Statistic &BranchTakenFreq =</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3686</td>
    <td class="codeLine">    Statistic &BranchTakenFreq =</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3687</td>
    <td class="codeLine">        (MBB.succ_size() > 1) ? CondBranchTakenFreq : UncondBranchTakenFreq;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3687</td>
    <td class="codeLine">        (MBB.succ_size() > 1) ? CondBranchTakenFreq : UncondBranchTakenFreq;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3688</td>
    <td class="codeLine">    for (MachineBasicBlock *Succ : MBB.successors()) {</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3688</td>
    <td class="codeLine">    for (MachineBasicBlock *Succ : MBB.successors()) {</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3689</td>
    <td class="codeLine">      // Skip if this successor is a fallthrough.</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3689</td>
    <td class="codeLine">      // Skip if this successor is a fallthrough.</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3690</td>
    <td class="codeLine">      if (MBB.isLayoutSuccessor(Succ))</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3690</td>
    <td class="codeLine">      if (MBB.isLayoutSuccessor(Succ))</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3691</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3691</td>
    <td class="codeLine">        continue;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3692</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3692</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3693</td>
    <td class="codeLine">      BlockFrequency EdgeFreq =</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3693</td>
    <td class="codeLine">      BlockFrequency EdgeFreq =</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3694</td>
    <td class="codeLine">          BlockFreq * MBPI->getEdgeProbability(&MBB, Succ);</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3694</td>
    <td class="codeLine">          BlockFreq * MBPI->getEdgeProbability(&MBB, Succ);</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3695</td>
    <td class="codeLine">      ++NumBranches;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3695</td>
    <td class="codeLine">      ++NumBranches;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3696</td>
    <td class="codeLine">      BranchTakenFreq += EdgeFreq.getFrequency();</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3696</td>
    <td class="codeLine">      BranchTakenFreq += EdgeFreq.getFrequency();</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3697</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3697</td>
    <td class="codeLine">    }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3698</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3698</td>
    <td class="codeLine">  }</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3699</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3699</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3700</td>
    <td class="codeLine">  return false;</td>
    <td class="lineNumber">0</td>
    <td class="lineNumber">3700</td>
    <td class="codeLine">  return false;</td>
    <td class="lineNumber">0</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3701</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3701</td>
    <td class="codeLine">}</td>
    <td class="lineNumber">---</td>
  </tr>
  <tr class="mainTr">
    <td class="lineNumber">3702</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
    <td class="lineNumber">3702</td>
    <td class="codeLine"></td>
    <td class="lineNumber">---</td>
  </tr>
</table>
    </div>
    <button id="myBtn" onclick="topFunction()" title="Go to top" type="button">Top</button>
    <script src="../Javascript/drop_down.js"></script>
    <script src="../Javascript/top_button.js"></script>
  </body>
</html>